From ccdb8ac97b2dd0e2654e148448b19c6251c16ebc Mon Sep 17 00:00:00 2001
From: Roman Shaposhnik <rvs@cloudera.com>
Date: Wed, 21 Aug 2013 13:42:57 -0700
Subject: [PATCH 28/56] Revert "CDH-13604. Flume's solr sink needs to be updated to reference Solr 4.4"

This reverts commit ef3fff6c2cf4f01e3cc41a917baa1a0860056e21.
---
 flume-ng-sinks/flume-ng-elasticsearch-sink/pom.xml |   13 +++++
 .../flume-ng-morphline-solr-sink/pom.xml           |   52 ++++++++++++++++++--
 pom.xml                                            |    4 +-
 3 files changed, 62 insertions(+), 7 deletions(-)

diff --git a/flume-ng-sinks/flume-ng-elasticsearch-sink/pom.xml b/flume-ng-sinks/flume-ng-elasticsearch-sink/pom.xml
index e7a6c6b..1516cb2 100644
--- a/flume-ng-sinks/flume-ng-elasticsearch-sink/pom.xml
+++ b/flume-ng-sinks/flume-ng-elasticsearch-sink/pom.xml
@@ -33,6 +33,19 @@
     </plugins>
   </build>
 
+  <dependencyManagement>
+    <dependencies>
+
+      <!-- override top-level CDH pom lucene-core-3.6.1 dep for Hadoop unit tests -->
+      <dependency>
+        <groupId>org.apache.lucene</groupId>
+        <artifactId>lucene-core</artifactId>
+        <version>4.3.0</version>
+      </dependency>
+
+    </dependencies>
+  </dependencyManagement>
+
   <dependencies>
 
     <dependency>
diff --git a/flume-ng-sinks/flume-ng-morphline-solr-sink/pom.xml b/flume-ng-sinks/flume-ng-morphline-solr-sink/pom.xml
index 8bfab9d..4d4ca63 100644
--- a/flume-ng-sinks/flume-ng-morphline-solr-sink/pom.xml
+++ b/flume-ng-sinks/flume-ng-morphline-solr-sink/pom.xml
@@ -31,10 +31,10 @@ limitations under the License.
 
   <properties>
     <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
-    <solr.version>4.4.0</solr.version>
-    <solr.expected.version>4.4.0</solr.expected.version> <!-- sanity check to verify we actually run against the expected version rather than some outdated version -->
+    <solr.version>4.3.0</solr.version>
+    <solr.expected.version>4.3.0</solr.expected.version> <!-- sanity check to verify we actually run against the expected version rather than some outdated version -->
     <tika.version>1.3</tika.version>
-    <cdk.version>0.6.0</cdk.version>
+    <cdk.version>0.5.0</cdk.version>
     <slf4j.version>1.6.1</slf4j.version>
     <surefire.version>2.12.4</surefire.version>
   </properties>
@@ -62,6 +62,19 @@ limitations under the License.
     </repository>
   </repositories>
 
+  <dependencyManagement>
+    <dependencies>
+
+      <!-- override top-level CDH pom lucene-core-3.6.1 dep for Hadoop unit tests -->
+      <dependency>
+        <groupId>org.apache.lucene</groupId>
+        <artifactId>lucene-core</artifactId>
+        <version>4.3.0</version>
+      </dependency>
+
+    </dependencies>
+  </dependencyManagement>
+
   <dependencies>
 
     <dependency>
@@ -90,9 +103,38 @@ limitations under the License.
 
     <dependency>
       <groupId>com.cloudera.cdk</groupId>
-      <artifactId>cdk-morphlines-all</artifactId>
+      <artifactId>cdk-morphlines-solr-cell</artifactId>
+      <version>${cdk.version}</version>
+    </dependency>
+
+    <dependency>
+      <groupId>com.cloudera.cdk</groupId>
+      <artifactId>cdk-morphlines-avro</artifactId>
+      <version>${cdk.version}</version>
+    </dependency>
+
+    <dependency>
+      <groupId>com.cloudera.cdk</groupId>
+      <artifactId>cdk-morphlines-json</artifactId>
+      <version>${cdk.version}</version>
+    </dependency>
+
+    <dependency>
+      <groupId>com.cloudera.cdk</groupId>
+      <artifactId>cdk-morphlines-twitter</artifactId>
+      <version>${cdk.version}</version>
+    </dependency>
+
+    <dependency>
+      <groupId>com.cloudera.cdk</groupId>
+      <artifactId>cdk-morphlines-tika-core</artifactId>
+      <version>${cdk.version}</version>
+    </dependency>
+
+    <dependency>
+      <groupId>com.cloudera.cdk</groupId>
+      <artifactId>cdk-morphlines-tika-decompress</artifactId>
       <version>${cdk.version}</version>
-      <type>pom</type>
     </dependency>
 
     <dependency> <!-- see http://tika.apache.org -->
diff --git a/pom.xml b/pom.xml
index 4dd1e32..1f84e8d 100644
--- a/pom.xml
+++ b/pom.xml
@@ -47,7 +47,7 @@ limitations under the License.
     <stagingDirectory>${project.basedir}/target/docs</stagingDirectory>
 
     <avro.version>${cdh.avro.version}</avro.version>
-    <elasticsearch.version>0.90.3</elasticsearch.version>
+    <elasticsearch.version>0.90.1</elasticsearch.version>
     <javaVersion>1.6</javaVersion>
   </properties>
 
@@ -1174,7 +1174,7 @@ limitations under the License.
       <dependency>
         <groupId>org.apache.solr</groupId>
         <artifactId>solr-cell</artifactId>
-        <version>4.4.0</version>
+        <version>4.3.0</version>
       </dependency>
 
     </dependencies>
-- 
1.7.0.4


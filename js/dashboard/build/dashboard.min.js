!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.dashboard=t.dashboard||{})}(this,function(t){function n(t,n){if("undefined"==typeof document)return n;t=t||"";var e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");return r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),n}function e(t,n,e,r){return me(t,"."+n,e||"div",r).classed(n,!0)}function r(){}function i(t){return t}function o(t,n){return void 0===n?this["_"+t]:(this["_"+t]=n,this)}function a(t,n){this._noop=function(){},this._events={},this._on={change:this._noop,build:this._noop,forward:this._noop,back:this._noop},this._static=n||{},this._current=t||{},this._past=[],this._future=[],this._subscription={},this._state=this._buildState()}function u(t,n){return new a(t,n)}function l(t){this._encodeObject=function(t){return JSON.stringify(t)},this._encodeArray=function(t){return JSON.stringify(t)}}function s(t){for(var n,e={},r=(t+"").split(""),i=[],o=r[0],a=256,u=1;u<r.length;u++)n=r[u],null!=e[o+n]?o+=n:(i.push(o.length>1?e[o]:o.charCodeAt(0)),e[o+n]=a,a++,o=n);i.push(o.length>1?e[o]:o.charCodeAt(0));for(var u=0;u<i.length;u++)i[u]=String.fromCharCode(i[u]);return i.join("")}function c(t){for(var n,e={},r=(t+"").split(""),i=r[0],o=i,a=[i],u=256,l=1;l<r.length;l++){var s=r[l].charCodeAt(0);n=s<256?r[l]:e[s]?e[s]:o+i,a.push(n),i=n.charAt(0),e[u]=o+i,u++,o=n}return a.join("")}function f(t){return new l(t)}function h(t,n,e){return new Ae(t,n,e)}function p(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(function(t){return r?[r]:[t]},i||function(t){return[t]});return o.enter().append(e),o}function d(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(r||function(t){return t},i||function(t){return t});return o.enter().append(e),o}function g(t){this._target=t,this._data=!1,this._on={},this._render_op={},this._fields=[],this._ops=[]}function v(t){return new g(t)}function y(t,n){return void 0===n?this["_"+t]:(this["_"+t]=n,this)}function m(t){this._data=t,this._l="or"}function x(t){return new m(t)}function _(t){var n=[];return ge.range(0,24).map(function(t){["0","20","40"].map(function(e){t<10?n.push("0"+String(t)+String(e)):n.push(String(t)+String(e))})}),ge.nest().key(function(t){return t.hour+t.minute}).rollup(function(t){return t.reduce(function(t,n){return t.articles[n.url]=!0,t.views+=n.count,t.sessions+=n.uniques,t},{articles:{},views:0,sessions:0})}).entries(t).map(function(t){return Object.keys(t.values).map(function(n){t[n]=t.values[n]}),t.article_count=Object.keys(t.articles).length,t.hour=t.key.slice(0,2),t.minute=t.key.slice(2),t.value=t.article_count,t.key=n.indexOf(t.key),t})}function b(t,n){return M(w(t),w(n))}function w(t){var n=t.reduce(function(t,n){return t.domains[n.domain]=!0,t.articles[n.url]=!0,t.views+=n.count,t.sessions+=n.uniques,t},{domains:{},articles:{},sessions:0,views:0});return n.domains=Object.keys(n.domains).length,n.articles=Object.keys(n.articles).length,n}function M(t,n){var e={};return Object.keys(t).map(function(r){e[r]={sample:t[r],population:n[r]}}),e}function k(t,n,e){var r=ge.nest().key(function(t){return t.time_diff_bucket}).map(t.filter(function(t){return""!=t.parent_category_name})),i=ge.nest().key(function(t){return t.parent_category_name}).map(t.filter(function(t){return""!=t.parent_category_name})),o=n.reduce(function(t,n){return t[n]={},t},{}),a=Object.keys(i).reduce(function(t,n){return t[n]={},t},{}),u=ge.nest().key(function(t){return t.parent_category_name}).key(function(t){return t.time_diff_bucket}).entries(t.filter(function(t){return""!=t.parent_category_name})).map(function(t){return t.values.map(function(n){n.percent=ge.sum(n.values,function(t){return t.uniques})/ge.sum(r[n.key],function(t){return t.uniques}),o[n.key][t.key]=n.percent,a[t.key][n.key]=n.percent}),t}).sort(function(t,n){return((e[n.key]||{}).normalized_pop||0)-((e[t.key]||{}).normalized_pop||0)}),l={};ge.entries(o).map(function(t){var n=ge.entries(t.value).map(function(t){return t.value});l[t.key]=ge.scale.linear().domain([ge.min(n),ge.max(n)]).range([0,1])});var s={};return ge.entries(a).map(function(t){var n=ge.entries(t.value).map(function(t){return t.value});s[t.key]=ge.scale.linear().domain([ge.min(n),ge.max(n)]).range([0,1])}),u.map(function(t){var n=t.key;t.values.map(function(t){t.norm_cat=s[n](t.percent),t.norm_time=l[t.key](t.percent),t.score=2*t.norm_cat/3+t.norm_time/3,t.score=t.norm_time;var r=e[n]?e[n].percent_pop:0;t.percent_diff=(t.percent-r)/r})}),u}function S(t){var n={Category:"parent_category_name",Title:"url",Time:"hour"},t=t.filter(function(t){return Object.keys(t).length&&t.value}).map(function(t){return{field:n[t.field],op:t.op,value:t.value}});return t}function N(t,n,e){var r=function(n){var e=t.node().offsetWidth||t.node().parentNode.offsetWidth||t.node().parentNode.parentNode.offsetWidth,r=e||t.style("width").split(".")[0].replace("px","");return parseInt(r)}(t)||700,i=function(n){var e=t.style("height").split(".")[0].replace("px","");return parseInt(e)}(t)||340;r=n(r),i=e(i);var o={top:10,right:15,bottom:10,left:15};return{margin:o,width:r-o.left-o.right,height:i-o.top-o.bottom}}function E(t,n){var e={};h(t,n,e).accessor("selected_action",function(t,n){return n.actions.filter(function(n){return n.action_id==t.selected_action})[0]},function(t,n){return n.selected_action}).failure("selected_action",function(t,n,e){Object.assign(e,{loading:!0,selected_action:t})}).accessor("tab_position",function(t,n){return t.tab_position},function(t,n){return n.tab_position}).failure("tab_position",function(t,n,e){Object.assign(e,{tab_position:t})}).accessor("transform",function(t,n){return t.transform},function(t,n){return n.transform}).failure("transform",function(t,n,e){Object.assign(e,{transform:t})}).accessor("sort",function(t,n){return t.sort},function(t,n){return n.sort}).failure("sort",function(t,n,e){Object.assign(e,{sort:t})}).accessor("ascending",function(t,n){return t.ascending},function(t,n){return n.ascending}).failure("ascending",function(t,n,e){Object.assign(e,{ascending:t})}).accessor("selected_view",function(t,n){return t.selected_view},function(t,n){return n.dashboard_options.filter(function(t){return t.selected})[0].value}).failure("selected_view",function(t,e,r){Object.assign(r,{loading:!0,dashboard_options:JSON.parse(JSON.stringify(n.dashboard_options)).map(function(n){return n.selected=n.value==t,n})})}).accessor("selected_comparison",function(t,n){return n.actions.filter(function(n){return n.action_id==t.selected_comparison})[0]},function(t,n){return n.selected_comparison}).failure("selected_comparison",function(t,n,e){Object.assign(e,{loading:!0,selected_comparison:t})}).equal("filters",function(t,n){return JSON.stringify(t)==JSON.stringify(n)}).failure("filters",function(t,n,e){Object.assign(e,{loading:!0,filters:t||[{}]})}).failure("action_date",function(t,n,e){Object.assign(e,{loading:!0,action_date:t})}).failure("comparison_date",function(t,n,e){Object.assign(e,{loading:!0,comparison_date:t})}).evaluate();var r=f({}).to(n.qs_state||{}),i=f({}).to(t);return Object.keys(e).length&&r!=i?e:{}}function A(t,n){return void 0===n?this["_"+t]:(this["_"+t]=n,this)}function C(t){var n=t[0],e=t.filter(function(t){return t.selected});return e.length>0?e[0]:n}function z(t,n,e){return x(t).op("is in",qe["is in"]).op("is not in",qe["is not in"]).logic(n.value).by(e)}function T(t){this._on={},this.target=t}function q(){}function L(t){return t}function O(t){return t.key}function j(t){return new T(t)}function R(){}function D(t){var n=me(t,".buttons").classed("buttons",!0).style("line-height","36px").style("padding-top","10px").style("color","black");return me(n,".pull-right","span").classed("pull-right header-buttons",!0).style("text-decoration","none !important")}function P(t){return me(t,"div.header-body","div").style("font-size","13px").style("text-transform","none").style("color","#333").style("font-weight","normal").style("margin-left","175px").style("padding","25px").style("margin-bottom","25px").style("margin-right","175px").style("background-color","white").classed("header-body hidden",!0)}function U(t){return me(t,"h3.data-header","h3").classed("data-header",!0).style("margin-bottom","15px").style("margin-top","-5px").style("font-weight"," bold").style("font-size"," 14px").style("line-height"," 22px").style("text-transform"," uppercase").style("color"," #888").style("letter-spacing"," .05em")}function F(t){this._on={},this.target=t;String(function(){})}function I(t){return new F(t)}function H(t,n){if("undefined"==typeof document)return n;t=t||"";var e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");return r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),n}function Y(t,n,e,r){return De(t,"."+n,e||"div",r).classed(n,!0)}function V(){}function Z(t,n){return void 0===n?this["_"+t]:(this["_"+t]=n,this)}function B(t){this._wrapper_class="table-wrapper",this._target=t,this._data={},this._sort={},this._renderers={},this._top=0,this._default_renderer=function(t){return t.key.indexOf("percent")>-1?ge.select(this).text(function(t){var n=this.parentNode.__data__;return ge.format(".2%")(n[t.key]/100)}):ge.select(this).text(function(t){var n=this.parentNode.__data__;return n[t.key]>0?ge.format(",.2f")(n[t.key]).replace(".00",""):n[t.key]})},this._hidden_fields=[],this._on={},this._render_expand=function(t){if(ge.select(this).selectAll("td.option-header").html("&ndash;"),this.nextSibling&&1==ge.select(this.nextSibling).classed("expanded"))return ge.select(this).selectAll("td.option-header").html("&#65291;"),ge.select(this.parentNode).selectAll(".expanded").remove();ge.select(this.parentNode).selectAll(".expanded").remove();var n=document.createElement("tr");this.parentNode.insertBefore(n,this.nextSibling);var e=ge.select(n).classed("expanded",!0).datum({});return De(e,"td","td").attr("colspan",this.children.length)},this._render_header=function(t){t.each(function(t){var n=De(ge.select(this),".headers","div").classed("headers",!0).style("text-transform","uppercase").style("font-weight","bold").style("line-height","24px").style("border-bottom","1px solid #ccc").style("margin-bottom","10px");n.html(""),De(n,".url","div").classed("url",!0).style("width","75%").style("display","inline-block").text("Article"),De(n,".count","div").classed("count",!0).style("width","25%").style("display","inline-block").text("Count")})},this._render_row=function(t){De(t,".url","div").classed("url",!0).style("width","75%").style("line-height","24px").style("height","24px").style("overflow","hidden").style("display","inline-block").text(function(t){return t.key}),De(t,".count","div").classed("count",!0).style("width","25%").style("display","inline-block").style("vertical-align","top").text(function(t){return t.value})}}function X(t){return new B(t)}function J(){}function W(t){this._on={select:J},this.target=t,this._filter_options={Category:"parent_category_name",Title:"url",Time:"hour"}}function G(t){return new W(t)}function K(){}function Q(t){this._on={select:K},this.target=t}function tt(t){return new Q(t)}function nt(){return _.apply(this,arguments)}function et(t){this._target=t,this._data=Fe,this._on={}}function rt(t){return new et(t)}function it(t){return new Ie(t)}function ot(t,n){if("undefined"==typeof document)return n;t=t||"";var e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");return r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),n}function at(t,n,e,r){return Xe(t,"."+n,e||"div",r).classed(n,!0)}function ut(){}function lt(t,n){return void 0===n?this["_"+t]:(this["_"+t]=n,this)}function st(t,n,e,r){return Qe(t,"."+n,e||"div",r).classed(n,!0)}function ct(){}function ft(t,n){return void 0===n?this["_"+t]:(this["_"+t]=n,this)}function ht(t,n,e,r,i){var o=e||120,a=r||30,u=d3.scale.ordinal().domain(d3.range(0,n.length)).range(d3.range(0,o,o/n.length)),l=d3.scale.linear().range([4,a]).domain([i||d3.min(n),d3.max(n)]),s=Qe(t,"g","g",n,function(t,n){return 1});return tr(s,"rect","rect",function(t){return t},function(t,n){return n}).attr("x",function(t,n){return u(n)}).attr("width",o/n.length-1.2).attr("y",function(t){return a-l(t)}).attr("height",function(t){return t?l(t):0}),s}function pt(t){return new ur(t)}function dt(t){return t.reduce(function(t,n){return t[n.url]=t[n.url]||Object.assign({},hr),t[n.url][n.hour]=(t[n.url][n.hour]||0)+n.count,t},{})}function gt(t){return t.reduce(function(t,n){return t[n.domain]=t[n.domain]||Object.assign({},hr),t[n.domain][n.hour]=(t[n.domain][n.hour]||0)+n.count,t},{})}function vt(t){var n={};return Object.keys(t).map(function(e){n[e]=cr.map(function(n){return t[e][n]||0})}),lr.entries(n).map(function(t){return t.url="http://"+t.key,t.total=lr.sum(t.value),t})}function yt(t){var n={};return Object.keys(t).map(function(e){n[e]=cr.map(function(n){return t[e][n]||0})}),lr.entries(n).map(function(t){return t.url=t.key,t.total=lr.sum(t.value),t})}function mt(t,n){var e=t.reduce(function(t,e){var r=e.key.toLowerCase().split("://"),i=r.length>1?r[1]:r[0],o=i.split(n);return(o.length>1?o[1]:o[0]).split("/").reverse()[0].replace("_","-").replace("+","-").split("-").map(function(n){var r=pr;null==n.match(/\d+/g)&&-1==r.indexOf(n)&&-1==n.indexOf(",")&&-1==n.indexOf("?")&&-1==n.indexOf(".")&&-1==n.indexOf(":")&&parseInt(n)!=n&&n.length>3&&(t[n]=t[n]||{},Object.keys(e.value).map(function(r){t[n][r]=(t[n][r]||0)+(e.value[r]||0)}))}),t},{});return lr.entries(e).map(function(t){return t.values=Object.keys(t.value).map(function(n){return t.value[n]||0}),t.total=lr.sum(t.values),t})}function xt(t){return new dr(t)}function _t(t){return new gr(t)}function bt(t,n,e,r){return mr(t,"."+n,e||"div",r).classed(n,!0)}function wt(){}function Mt(t,n){return void 0===n?this["_"+t]:(this["_"+t]=n,this)}function kt(t,n,e,r,i){var o=e||120,a=r||30,u=d3.scale.ordinal().domain(d3.range(0,n.length)).range(d3.range(0,o,o/n.length)),l=d3.scale.linear().range([4,a]).domain([i||d3.min(n),d3.max(n)]),s=mr(t,"g","g",n,function(t,n){return 1});return xr(s,"rect","rect",function(t){return t},function(t,n){return n}).attr("x",function(t,n){return u(n)}).attr("width",o/n.length-1.2).attr("y",function(t){return a-l(t)}).attr("height",function(t){return t?l(t):0}),s}function St(t){return new Sr(t)}function Nt(t,n,e,r){var i=t.style("width").replace("px",""),o=mr(t,"svg","svg",[n],function(){return 1}).style("width",i+"px").style("height","20px"),a=mr(o,"g.chart","g",!1,function(){return 1}).attr("class","chart");xr(a,".pop-bar","rect",function(t){return t},function(t,n){return n}).attr("class","pop-bar").attr("height",16).attr({x:0,y:0}).style("fill",r).attr("width",function(t){return e(t)})}function Et(t){return new Nr(t)}function At(t){return new Er(t)}function Ct(t){return new Ar(t)}function zt(t){return new Cr(t)}function Tt(t,n,e,r){var i=d3.svg.axis();i.orient("top").scale(n).tickFormat(function(t){return 3600==t?"1 hour":t<3600?t/60+" mins":86400==t?"1 day":t>86400?t/86400+" days":t/3600+" hours"});var o=me(t,"g.x.before","g").attr("class","x axis before").attr("transform","translate(0,-5)").attr("id","xaxis").call(i);return o.selectAll("text").attr("y",-25).attr("x",15).attr("dy",".35em").attr("transform","rotate(45)").style("text-anchor","end"),o.selectAll("line").attr("style","stroke:black"),o.selectAll("path").attr("style","stroke:black; display:inherit"),me(o,"text.title","text").attr("class","title").attr("x",r/2).attr("y",-46).attr("transform",void 0).style("text-anchor","middle").style("text-transform","uppercase").style("font-weight","bold").text(e+" "),o}function qt(t,n){var e=(n.map(function(t,n){return t-(t[n-1]||0)}),t.map(function(t){var e=t.values.reduce(function(t,n){return t[n.key]=n.values,t},{}),r=t.values.reduce(function(t,n){return t[n.key]=n.percent,t},{}),i=t.values.reduce(function(t,n){return t[n.key]=n.norm_cat,t},{});return n.map(function(n,o){return 0==n?{key:t.key,x:parseInt(n),y:i[600]||0,values:e[600]||0,percent:r[600]||0}:{key:t.key,x:parseInt(n),y:i[n]||0,values:e[n]||0,percent:r[n]||0}})}));return e=e.sort(function(t,n){return t[0].y-n[0].y}).reverse().slice(0,12)}function Lt(t,n,e){var r=qt(t,e),i=ge.layout.stack().offset("wiggle").order("reverse"),o=i(r),a=o.map(function(t){return t[0].key}),r=qt(n,e).sort(function(t,n){return a.indexOf(n[0].key)-a.indexOf(t[0].key)});r=r.filter(function(t){return-1==a.indexOf(t[0].key)}).concat(r.filter(function(t){return a.indexOf(t[0].key)>-1}));var i=ge.layout.stack().offset("wiggle").order("default"),u=i(r);return{order:a,before_stacked:o,after_stacked:u}}function Ot(t,n,e){var r=t.reduce(function(t,n){return n.reduce(function(t,n){return t[n.x]=(t[n.x]||0)+n.y,t},t)},{}),i=n.reduce(function(t,n){return n.reduce(function(t,n){return t[n.x]=(t[n.x]||0)+n.y,t},t)},{}),o=Object.keys(r).reduce(function(t,n){return t[0]>=r[n]?[r[n],n]:(t.length>1&&(t[0]=-1),t)},[1/0])[1],a=Object.keys(i).reduce(function(t,n){return t[0]>=i[n]?[i[n],n]:(t.length>1&&(t[0]=-1),t)},[1/0])[1];return{before_line:e[e.indexOf(parseInt(o))],after_line:e[e.indexOf(parseInt(a))]}}function jt(t,n,r,i){function o(t,n,e,r){var i={},o={};try{var i=t[0].reduce(function(t,n){return t[n.x]=r(n),t},{})}catch(t){}try{var o=n[0].reduce(function(t,n){return t[n.x]=r(n),t},{})}catch(t){}return e.slice().reverse().map(function(t){return i[t]||0}).concat(e.map(function(t){return o[t]||0}))}var a=[0,10,30,60,120,180,360,720,1440,2880,5760,10080].map(function(t){return 60*t}),u=Lt(n,r,a),l=u.before_stacked,s=u.after_stacked,n=e(t,"before-stream"),c=me(n,".inner","div").classed("inner",!0),f=zt(c).width(341).middle(0).skip_middle(!0).data(u).on("category.hover",function(t,n){if(i(t),!1===t)return void ge.select(".details-wrap").html("");var e=u.before_stacked.filter(function(n){return n[0].key==t}),r=u.after_stacked.filter(function(n){return n[0].key==t}),l=o(e,r,a,function(t){return t.values.length}),s=(o(e,r,a,function(t){return t.percent}),o(e,r,a,function(t){return t.y}),ge.select(".details-wrap")),c=(me(s,"text.cat-title","text").text(t).attr("class","cat-title").style("text-anchor","middle").style("font-weight","bold").attr("x",125).attr("y",10),me(s,".volume","g").attr("class","volume").attr("transform","translate(15,30)"));me(c,"text","text").text("Visits: "+ge.sum(l)).attr("style","title")}).draw(),h=Ot(l,s,a),p=h.before_line,d=h.after_line,g=f._svg.style("margin","auto").style("display","block"),v=me(g,"g.m-line-wrap","g").attr("class","m-line-wrap");me(v,"line","line").attr("stroke-width",30).attr("stroke","white").attr("y1",60).attr("y2",f._height+60).attr("x1",341).attr("x2",341);var y=me(v,"g","g").attr("writing-mode","tb-rl").attr("transform","translate(341,"+(f._height/2+60)+")");me(y,"text","text").text("User activity on your site").style("text-anchor","middle");var m=(me(g,".main-title","text").attr("x","341").attr("y","30").style("text-anchor","middle").style("font-weight","bold").attr("class","main-title").text("Category Importance of User's Journey to site (hover to explore, click to select)"),me(g,".second-title","text").attr("x","341").attr("y","345").style("text-anchor","middle").style("font-weight","bold").attr("class","second-title").text("Time weighted volume"),me(g.selectAll(".before-canvas"),"g.line-wrap","g").attr("class","line-wrap"));me(m,"line","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",0).attr("y2",f._height+20).attr("x1",f._before_scale(p)).attr("x2",f._before_scale(p)),me(m,"text","text").attr("y",20).attr("x",f._before_scale(p)-10).style("text-anchor","end").text("Consideration Stage");var x=me(g.selectAll(".after-canvas"),"g.line-wrap","g").attr("class","line-wrap");return me(x,"line","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",0).attr("y2",f._height+20).attr("x1",f._after_scale(d)).attr("x2",f._after_scale(d)),me(x,"text","text").attr("y",20).attr("x",f._after_scale(d)+10).style("text-anchor","start").text("Validation / Research"),{consideration:""+p,validation:"-"+d}}function Rt(t,n){var e=d3.nest().key(function(t){return t[n]}).rollup(function(t){return t.length}).entries(t),r=d3.sum(e,function(t){return t.values});return e.map(function(t){return t.percent=t.values/r}),e}function Dt(t,n){var e=n.reduce(function(t,n){return t[n.key]=n.percent,t},{});return t.map(function(t){return t.percent>e[t.key]?t.diff=(t.percent-e[t.key])/e[t.key]:t.diff=-(e[t.key]-t.percent)/e[t.key],t}),t}function Pt(t,n){return n.diff-t.diff}function Ut(t,n){var e=d3.nest().key(function(t){return t[n]}).rollup(function(t){return{count:t.length,urls:t.map(function(t){return t.url})}}).entries(t).map(function(t){return Object.assign(t,t.values)}),r=d3.sum(e,function(t){return t.count});return e.map(function(t){return t.percent=t.count/r*100||0}),e}function Ft(t){return new zr(t)}function It(){}function Ht(t){this._on={select:It},this.target=t}function Yt(t){return new Ht(t)}function Vt(t){return new Tr(t)}function Zt(t,n){Ct(t).data(n).title("Category indexing versus baseline").value_accessor("normalized_diff").draw()}function Bt(t,n){Vt(t).data(n).title("Categories visited for filtered versus baseline").pop_value_accessor("pop").samp_value_accessor("samp").draw()}function Xt(t){this.target=t}function $t(t){return new Xt(t)}function Jt(t,n,r,i){var t=t,o=e(d3.select(n),"pie-summary-block");$t(o).data(t).radius(r(t.population)).draw();var a=e(o,"fw").classed("fw",!0);e(o,"fw2").text(d3.format("%")(t.sample/t.population));e(a,"sample","span").text(d3.format(",")(t.sample)),e(a,"vs","span").html("<br> out of <br>").style("font-size",".88em"),e(a,"population","span").text(d3.format(",")(t.population))}function Wt(t,n,e){var r=me(t,"div.timeseries","div").classed("timeseries",!0).style("width","60%").style("display","inline-block").style("padding-left","10px").style("height","127px"),i=me(t,"div.timeseries-details","div").classed("timeseries-details",!0).style("width","40%").style("display","inline-block").style("vertical-align","top").style("padding","15px").style("padding-left","57px").style("height","127px"),o=me(i,".pop","div").classed("pop",!0);me(o,".ex","span").classed("ex",!0).style("width","20px").style("height","10px").style("background-color","grey").style("display","inline-block"),me(o,".title","span").classed("title",!0).style("text-transform","uppercase").style("padding-left","3px").text("all");var a=me(i,".samp","div").classed("samp",!0);me(a,".ex","span").classed("ex",!0).style("width","20px").style("height","10px").style("background-color","#081d58").style("display","inline-block"),me(a,".title","span").classed("title",!0).style("text-transform","uppercase").style("padding-left","3px").text("filtered");var u=me(i,".deets","div").classed("deets",!0);me(r,"h3","h3").text("Timing of segment versus baseline").style("font-size","12px").style("color","#333").style("line-height","33px").style("background-color","#f0f4f7").style("margin-left","-10px").style("margin-bottom","10px").style("padding-left","10px").style("margin-top","0px").style("font-weight","bold").style("text-transform","uppercase"),rt(r).data({key:"y",values:n}).height(80).on("hover",function(t){var n={};n[t.key]={sample:t.value,population:t.value2},u.datum(n),me(u,".text","div").classed("text",!0).text("@ "+t.hour+":"+(t.minute.length>1?t.minute:"0"+t.minute)).style("display","inline-block").style("line-height","49px").style("padding-top","15px").style("padding-right","15px").style("font-size","22px").style("font-weight","bold").style("width","110px").style("vertical-align","top").style("text-align","center"),me(u,".pie","div").classed("pie",!0).style("display","inline-block").style("padding-top","15px").each(function(t){Jt(Object.keys(t).map(function(n){return t[n]})[0],this,e,t)})}).draw()}function Gt(t){return new qr(t)}function Kt(t){return new Lr(t)}function Qt(t,n){var e=d3.nest().key(jr.bind(this,"")).rollup(Rr).map(t),r=d3.nest().key(jr.bind(this,"-")).rollup(Rr).map(n);return Or.map(function(t){return e[t]||r[t]||0})}function tn(t,n,e){var r=e?"url":"domain",i={};t.reduce(Fr.bind(!1,r),i),n.reduce(Fr.bind(!1,r),i);var o={};t.reduce(Ir.bind(this,r,""),o),n.reduce(Ir.bind(this,r,"-"),o);var a=d3.entries(i).sort(function(t,n){return d3.descending(t.value,n.value)}).slice(0,1e3).map(function(t){return o[t.key]}).map(function(t){return t.key=t.key,t.values=Or.map(function(n){return t[n]||0}),t.total=d3.sum(Or.map(function(n){return t[n]||0})),t}),u={};"url"==r?u=o:(t.reduce(Ir.bind(this,"url",""),u),n.reduce(Ir.bind(this,"url","-"),u));var l={};return d3.entries(u).reduce(Hr.bind(!1,e),l),{urls:a,kws:Object.keys(l).map(function(t){return Object.assign(l[t],{key:t})}).map(function(t){return t.values=Or.map(function(n){return t[n]||0}),t.total=d3.sum(Or.map(function(n){return t[n]||0})),t}).sort(function(t,n){return n.total-t.total})}}function nn(t,n,e,r){function i(t,n,e){return n+=t[e]||0}function o(t,n){return t.reduce(i.bind(!1,n),0)}var a=Or.filter(function(t,n){return!(n<e||n>Or.length/2-1)}),u=Or.filter(function(t,n){return!(n<Or.length/2||n>r)}),l=t.filter(o.bind(!1,a)),s=n.filter(o.bind(!1,a));return{urls_consid:l,urls_valid:t.filter(o.bind(!1,u)),kws_consid:s,kws_valid:n.filter(o.bind(!1,u))}}function en(t){return t.length}function rn(t){return parseInt(t.reduce(function(t,n){return t+n.total},0)/t.length)}function on(t){return(t[parseInt(t.length/2)]||{}).total||0}function an(t,n,e,r,i){return{name:t,all:n(e),consideration:n(r),validation:n(i)}}function un(t,n,e){return[an("Distinct URLs",en,t,n,e),an("Average Views",rn,t,n,e),an("Median Views",on,t,n,e)]}function ln(t,n,e,r,i){var o=tn(t,n,i),a=o.urls,u=o.kws,l=nn(a,u,e,r),s=l.urls_consid,c=l.urls_valid,f=l.kws_consid,h=l.kws_valid;return{url_summary:un(a,s,c),kws_summary:un(u,f,h),urls:a,urls_consid:s,urls_valid:c,kws:u,kws_consid:f,kws_valid:h}}function sn(t,n,e,r){t.selectAll("svg").selectAll("rect").attr("fill",void 0).filter(function(t,i){var o=n.filter(function(t){return t.selected})[0].value;return"all"!=o&&("consideration"==o?i<e||i>Or.length/2-1:"validation"==o?i<Or.length/2||i>r:void 0)}).attr("fill","grey")}function cn(t){return new Yr(t)}function fn(t){var n=0,e=Zr.reduce(function(e,r){return t[r]&&""!=t[r]&&(n++,e+=t[r]||0),e},0)/n;return Zr.map(function(n){t[n]&&(t[n]=t[n]>e?Math.round((t[n]-e)/e*10)/10:Math.round(-(e-t[n])/e*10)/10)}),t}function hn(t){return function(n){var e=1e5*(t[n.parent_category_name]&&t[n.parent_category_name].idf||.032),r="NA"==n.idf?143.45:n.idf;return r=n.key.split(".").length>2?.1*r:r,Zr.map(function(t){n[t]&&(n[t]=Math.log(1+n[t]/Math.sqrt(n.total)*(n[t]*n[t])*r*(1/e)))}),n}}function pn(t){var n=Zr.reduce(function(t,n){return t[n]=0,t},{}),e=t.reduce(function(t,n){return Zr.map(function(e){t[e]+=n[e]||0}),t},n);return function(t){return Zr.map(function(n){t[n]&&(t[n]=Math.round(t[n]/e[n]*1e3)/10)}),t}}function dn(t){var n=Gr.slice(1).map(function(n,e){var r=$r[e];return(t[String(r)]||0)/n}),e=d3.sum(n)/n.filter(function(t){return t}).length,r=Gr.map(function(t){return t*e}),i=$r.map(function(n,e){return 1+(t[String(n)]||0)/r[e]}).map(Math.log),o=$r.map(function(n,e){return 1+(t["-"+String(n)]||0)/r[e]}).map(Math.log);return i.reverse().concat(o).map(function(t){return t||""})}function gn(t){var n=dn(t),e={};return $r.slice().reverse().concat($r.map(function(t){return"-"+t})).map(function(t,r){return e[t]=n[r]}),Object.assign({},t,e)}function vn(t){return t.reduce(function(t,n){return Object.keys(n).map(function(e){t[e]+=n[e]}),t},Zr.reduce(function(t,n){return t[n]=0,t},{}))}function yn(t){return new Qr(t)}function mn(t){var n=ge.nest().key(function(t){return t.parent_category_name}).rollup(function(t){return{articles:t,value:ge.sum(t,function(t){return t.uniques})}}).entries(t).map(function(t){return Object.assign(t.values,{key:t.key})}),e=ge.sum(n,function(t){return t.value});return n.map(function(t){t.percent=t.value/e}),n}function xn(t){return ge.nest().key(function(t){return t.parent_category_name+t.hour+t.minute}).rollup(function(t){return{parent_category_name:t[0].parent_category_name,hour:t[0].hour,minute:t[0].minute,count:t.reduce(function(t,n){return t+n.count},0),articles:t}}).entries(t).map(function(t){return t.values})}function _n(t){return t.reduce(function(t,n){return t.views+=n.count,t.sessions+=n.uniques,t},{articles:{},views:0,sessions:0,pop_size:t[0].category_idf?1/t[0].category_idf:0,idf:t[0].category_idf})}function bn(t){var n=ge.nest().key(function(t){return t.parent_category_name}).rollup(_n).entries(t),e=ge.sum(n,function(t){return t.values.pop_size}),r=ge.sum(n,function(t){return t.values.views});return n.map(function(t){t.values.real_pop_percent=t.values.pop_percent=t.values.pop_size/e*100,t.values.percent=t.values.views/r}),n}function wn(t,n){var e=bn(t),r=bn(n),i=e.reduce(function(t,n){return t[n.key]=n,t},{}),o=r.map(function(t){return[t.values].map(function(n){n.key=t.key,n.pop=n.views,n.samp=i[t.key]?i[t.key].values.views:0,n.sample_percent_norm=n.sample_percent=100*n.percent,n.importance=Math.log((1/n.pop_size+1)*n.samp*n.samp),n.ratio=n.sample_percent/n.real_pop_percent,n.value=n.samp}),t.values}).sort(function(t,n){return n.pop-t.pop}).filter(function(t){return"NA"!=t.key});return ti(o),o}function Mn(t){return 0==t?"12 am":12==t?"12 pm":t>12?t-12+" pm":(t<10?t[1]:t)+" am"}function kn(t,n){var e=_(t),r=_(n),i=e.reduce(function(t,n){return t[n.key]=n,t},{});return r.map(function(t){return{key:t.key,hour:t.hour,minute:t.minute,value2:t.value,value:i[t.key]?i[t.key].value:0}})}function Sn(t){var n=ui.reduce(function(t,n){return t[n]=0,t},{}),e=t.reduce(function(t,n){return ui.map(function(e){t[e]+=n[e]||0}),t},n);return function(t){return ui.map(function(n){t[n]&&(t[n]=Math.round(t[n]/e[n]*1e3)/10)}),t}}function Nn(t){var n=ui.reduce(function(t,n){return t[n]=0,t},{}),e={},r=t.reduce(function(t,n){return ui.map(function(r){n[r]&&(t[r]+=n[r]||0,e[r]=(e[r]||0)+1)}),t},n),i=Object.keys(e).reduce(function(t,n){return t[n]=r[n]/e[n],t},{});return function(t){return ui.map(function(n){var e=i[n];t[n]&&(t[n]=t[n]>e?Math.round((t[n]-e)/e*10)/10:Math.round(-(e-t[n])/e*10)/10)}),t}}function En(t){var n=ui.reduce(function(t,n){return t[n]=0,t},{}),e=(t.reduce(function(t,n){return ui.map(function(e){t[e]+=n[e]||0}),t},n),ge.sum(Object.keys(n).map(function(t){return n[t]}))),r=ui.reduce(function(t,r){return t[r]=n[r]/e,t},{});return function(t){var n=An(t);return ui.map(function(t){var e=r[t],i=n[t];i&&(n[t]=i>e?Math.round((i-e)/e*10)/10:Math.round(-(e-i)/e*10)/10)}),n}}function An(t){var n=ui.reduce(function(n,e){return t[e]&&""!=t[e]&&(n+=t[e]||0),n},0);return ui.map(function(e){t[e]&&(t[e]=t[e]/n)}),t}function Cn(t){var n=0,e=ui.reduce(function(e,r){return t[r]&&""!=t[r]&&(n++,e+=t[r]||0),e},0)/n;return ui.map(function(n){t[n]&&(t[n]=t[n]>e?Math.round((t[n]-e)/e*10)/10:Math.round(-(e-t[n])/e*10)/10)}),t}function zn(t){return function(n,e){var r=ai.map(function(t){return t.key}),i=r.map(function(t){return n[t]}),o=ge.sum(i),a=Object.keys(t).map(function(n){return Math.sqrt(t[n]*o)}),u=i.map(function(t,n){return t/a[n]}),i={};return r.map(function(t,n){i[t]=Math.round(u[n]*e||0)||""}),i}}function Tn(t){return new ci(t)}function qn(t,n,e){return me(t,"."+n,e||"div").classed(n,!0)}function Ln(t){return new fi(t)}function On(){}function jn(t){return t}function Rn(t){this._on={},this._classes={},this._objects={},this.target=t}function Dn(t){return new Rn(t)}function Pn(t){this._target=t,this._inner=function(){}}function Un(t){return new Pn(t)}function Fn(){}function In(t){this.target=t,this._on={}}function Hn(t){return new In(t)}function Yn(t,n){return function(e){console.log(n)
;var r="/crusher/v2/visitor/domains_full_time_minute/cache?url_pattern="+t.url_pattern[0]+"&filter_id="+t.action_id,i=new Date(+new Date-864e5*n),o=pi.time.format("%Y-%m-%d")(i);n&&(r+="&date="+o),pi.json(r,function(t){var n=t.summary.category.map(function(t){return t.key=t.parent_category_name,t});t.categories=n,t.category=t.summary.category,t.current_hour=t.summary.hour,t.category_hour=t.summary.cross_section,t.original_urls=t.response,e(!1,t)})}}function Vn(t,n){pi.xhr("/crusher/funnel/action?format=json").header("Content-Type","application/json").post(JSON.stringify(t),function(t,e){n(t,JSON.parse(e.response).response)})}function Zn(t){pi.json("/crusher/funnel/action?format=json",function(n){n.response.map(function(t){t.key=t.action_name,t.action_id=t.filter_id,t.value=t.action_id}),t(!1,n.response)})}function Bn(t,n,e){return n[e.key]=n[e.key]||{},n[e.key].key=e.key,n[e.key].parent_category_name=e.parent_category_name,n[e.key].idf=e.idf,n[e.key].total=(n[e.key].total||0)+e.visits,n[e.key][t+e.time_diff_bucket]=(n[e.key][t+e.time_diff_bucket]||0)+e.visits,n}function Xn(t,n,e,r){var i=(ge.nest().key(function(t){return t.parent_category_name}).key(function(t){return t.time_diff_bucket}).entries(t),ge.nest().key(function(t){return t.parent_category_name}).key(function(t){return t.time_diff_bucket}).entries(n),[10,30,60,120,180,360,720,1440,2880,5760,10080].map(function(t){return 60*t})),o=e.reduce(function(t,n){return t[n.key]=n,t},{}),a=e.map(function(t){return t.key}),u=k(t,i,o),l=k(n,i,o),s=r;u="score"==s?u.sort(function(t,n){var e=-1,r=-1;try{e=n.values.filter(function(t){return"600"==t.key})[0].score}catch(t){}try{r=t.values.filter(function(t){return"600"==t.key})[0].score}catch(t){}return ge.ascending(e,r)}):"pop"==s?u.sort(function(t,n){var e=a.indexOf(t.key),r=a.indexOf(n.key);return ge.ascending(e>-1?e:1e4,r>-1?r:1e4)}):u.sort(function(t,n){var e=-1,r=-1;try{e=n.values.filter(function(t){return"600"==t.key})[0].percent_diff}catch(t){}try{r=t.values.filter(function(t){return"600"==t.key})[0].percent_diff}catch(t){}return ge.ascending(e,r)});var c=u.map(function(t){return t.key});return l=l.filter(function(t){return c.indexOf(t.key)>-1}).sort(function(t,n){return c.indexOf(t.key)-c.indexOf(n.key)}),{after:n,before:t,category:e,before_categories:u,after_categories:l,sortby:r}}function $n(t,n){var n=n.filter(function(t){return t.selected}).map(function(t){return t.key}),e=ge.nest().key(function(t){return t.domain}).rollup(function(t){return t[0].idf}).map(t.filter(function(t){return"Internet & Telecom"!=t.parent_category_name})),r=function(t){return"NA"==e[t]||e[t]>8686?0:e[t]},i=t.map(function(t){return{key:t.domain,value:t.count,parent_category_name:t.parent_category_name,uniques:t.uniques,url:t.url}});i=ge.nest().key(function(t){return t.key}).rollup(function(t){return{parent_category_name:t[0].parent_category_name,key:t[0].key,value:t.reduce(function(t,n){return t+n.value},0),percent_unique:t.reduce(function(t,n){return t+n.uniques/n.value},0)/t.length,urls:t.reduce(function(t,n){return-1==t.indexOf(n.url)&&t.push(n.url),t},[])}}).entries(i).map(function(t){return t.values}),n.length>0&&(i=i.filter(function(t){return n.indexOf(t.parent_category_name)>-1})),i.map(function(t){t.tf_idf=r(t.key)*(t.value*t.percent_unique)*(t.value*t.percent_unique),t.count=t.value,t.importance=Math.log(t.tf_idf)}),i=i.sort(function(t,n){return n.tf_idf-t.tf_idf});var o=ge.sum(i,function(t){return t.count*t.percent_unique});i.map(function(t){t.pop_percent=1.02/r(t.key)*100,t.pop_percent=t.pop_percent==1/0?0:t.pop_percent,t.sample_percent=t.count*t.percent_unique/o*100});var a=ge.scale.linear().range([0,ge.max(i,function(t){return t.pop_percent})]).domain([0,ge.max(i,function(t){return t.sample_percent})]).nice(),u=ge.sum(i,function(t){return t.pop_percent});return i.map(function(t){t.sample_percent_norm=a(t.sample_percent),t.real_pop_percent=t.pop_percent/u*100,t.ratio=t.sample_percent/t.real_pop_percent}),i}function Jn(t,n){return{key:"Top Domains",values:$n(t,n).slice(0,500)}}function Wn(t,n){var e=ge.nest().key(function(t){return t[n]}).rollup(function(t){return t.length}).entries(t),r=ge.sum(e,function(t){return t.values});return e.map(function(t){return t.percent=t.values/r}),e}function Gn(t,n){var e=n.reduce(function(t,n){return t[n.key]=n.percent,t},{});return t.map(function(t){return t.percent>e[t.key]?t.diff=(t.percent-e[t.key])/e[t.key]:t.diff=-(e[t.key]-t.percent)/e[t.key],t}),t}function Kn(t,n){return n.diff-t.diff}function Qn(t){return function(n,e,r){if(void 0!=r.data){var i=S(r.filters),o=C(r.logic_options),a=z(r.data.original_urls,o,i);if(!r.data.full_urls||r.data.full_urls.length!=a.length||!r.selected_comparison||r.comparison_data!=u.comparison||r.sortby!=r.before_urls.sortby){var u={};u.full_urls=a,u.comparison=r.comparison_data?r.comparison_data.original_urls:r.data.original_urls;var l=wn(u.full_urls,u.comparison),s=b(u.full_urls,u.comparison);t.setStatic("category_summary",l),t.setStatic("summary",s);var c=ge.nest().key(function(t){return t.domain}).rollup(function(t){return t[0].idf}).map(a),f=ge.nest().key(function(t){return t.parent_category_name}).rollup(function(t){return t[0].category_idf}).map(a);t.setStatic("domain_idfs",c),t.setStatic("category_idfs",f);var h=mn(a),p={display_categories:{key:"Categories",values:h},category_hour:xn(a)};t.setStatic("media_plan",p);var d=[Jn(a,h),{key:"Top Categories",values:l.filter(function(t){return t.samp>0})}];r.tab_position&&d.map(function(t){return t.selected=t.key==r.tab_position}),t.setStatic("tabs",d);var g=(ge.nest().key(function(t){return t.domain}).rollup(function(t){return{idf:t[0].idf,count:t.length}}).entries(a),ge.nest().key(function(t){return Mn(t.hour)}).rollup(function(t){return t.length}).entries(a)),v=d[0].values.sort(function(t,n){return n.importance-t.importance}).slice(0,10);if(t.setStatic("execution_plan",{categories:d[1].values.sort(function(t,n){return n.importance-t.importance}).slice(0,10),domains:v,articles:v.map(function(t){return{key:t.urls[0]}}).slice(0,20),times:g.sort(function(t,n){return t.count-n.count}).slice(0,8),filters_used:r.filters}),t.setStatic("category_idfs",f),r.data.before){var y=function(t){return Object.assign(t,{key:t.parent_category_name})},m=function(t){return Object.assign({key:t.domain,idf:c[t.domain]},t)},x=z(r.data.before,o,i).map(m),_=z(r.data.after,o,i).map(m),w=Xn(x,_,l,r.sortby),M=mi(x,_),k=mi(x.map(y),_.map(y)),N=[{key:"Top Domains",values:M,data:w},{key:"Top Categories",values:k,data:w}];r.tab_position&&N.map(function(t){return t.selected=t.key==r.tab_position}),t.setStatic("before_urls",w),t.setStatic("before_tabs",N);var E=w.after_categories,A=w.before_categories,T=[0,10,30,60,120,180,360,720,1440,2880,5760,10080].map(function(t){return 60*t}),q=Lt(A,E,T),L=q.before_stacked,O=q.after_stacked,j=Ot(L,O,T),R=j.before_line,D=j.after_line,P=w.before.filter(function(t){return t.time_diff_bucket<=R}),U=w.after.filter(function(t){return t.time_diff_bucket<=D}),F=w.before.filter(function(t){return t.time_diff_bucket>R}),I=w.after.filter(function(t){return t.time_diff_bucket>D}),H=F.concat(I),Y=Wn(H,"parent_category_name"),V=Gn(Wn(P,"parent_category_name"),Y).sort(Kn),Z=Gn(Wn(U,"parent_category_name"),Y).sort(Kn),B={consideration:P,validation:U,baseline:H},X={consideration:V,validation:Z,baseline:Y},$=[{key:"Top Domains",values:B,category:X}];t.setStatic("stage_tabs",$),r.data.before_hour.map(function(t){t.stage=Math.abs(t.time_diff_bucket)<=R?"Consideration":"Baseline"}),r.data.after_hour.map(function(t){t.stage=Math.abs(t.time_diff_bucket)<=D?"Evaluation":"Baseline",t.time_diff_bucket=t.time_diff_bucket>0?-t.time_diff_bucket:t.time_diff_bucket});var J=z(r.data.before_hour,o,i),W=z(r.data.after_hour,o,i),G=J.concat(W),K=ii(G),Q=ii(G,"stage"),tt=Q.reduce(function(t,n){if("Baseline"!==n.key){var e=Object.keys(n);t=Math.max(t,ge.sum(e.map(function(t){if("total"!==t&&"key"!==t)return n[t]})))}return t},0);Q.map(function(t){if("Baseline"==t.key){var n=Object.keys(t),e=ge.sum(n.map(function(n){if("total"!==n&&"key"!==n)return t[n]}));return n.map(function(n){"total"!==n&&"key"!==n&&(t[n]=t[n]/e*tt)}),t}});var nt=Q.filter(function(t){return"Consideration"==t.key})[0]||{},et=0,rt=0,it=ni.map(Mn).map(function(t){return nt[t]&&(et++,rt+=nt[t]),{key:t,values:nt[t]||0}});considerationMean=rt/et,it.map(function(t){t.values=(t.values-considerationMean)/considerationMean});var ot=g.sort(function(t,n){return t.values-n.values}),at=g.sort(function(t,n){return n.values-t.values}).slice(0,8),ut=ge.map(at,function(t){return t.key}),lt=it.filter(function(t){return t.values>0}).sort(function(t,n){return n.values-t.values}),st=it.filter(function(t,n){return t.values>0}).filter(function(t,n){return!!ut.get(t.key)}).sort(function(t,n){return n.values-t.values}).slice(0,6),ct=ge.map(st,function(t){return t.key}),ft=ri(J,"stage"),ht=de(ft,2),pt=ht[0],dt=(ht[1],pt.filter(function(t){return"Consideration|Consideration"==t.key}).reduce(function(t,n){return n.values},[]).filter(function(t){return!!ct.get(Mn(t.key))}).reduce(function(t,n){return t.concat(n.values.values)},[])),gt=ge.nest().key(function(t){return t.domain}).rollup(function(t){return{urls:t.map(function(t){return t.url}),count:t.length,tf_idf:t.length*c[t[0].domain]}}).entries(dt).sort(function(t,n){return n.values.tf_idf-t.values.tf_idf}).slice(0,20);t.setStatic("distribution_plan",{times:ot,exposure_times:at,correlation_times:lt,engagement_times:st,engagement_sites:gt,engagement_articles:gt.filter(function(t){return t.values.count}).map(function(t){return{key:t.values.urls[0]}}).slice(0,20),filters_used:r.filters});var vt=kn(u.full_urls,u.comparison),yt=ei(a),mt=ei(a,"parent_category_name"),xt=[{key:"Top Domains",values:yt,data:u.full_urls},{key:"Top Categories",values:mt},{key:"Time to Site",values:K},{key:"Stages",values:Q}];r.tab_position&&xt.map(function(t){return t.selected=t.key==r.tab_position}),t.setStatic("time_summary",vt),t.setStatic("time_tabs",xt)}t.publishStatic("formatted_data",u)}}}}function te(){Ce.registerEvent("add-filter",function(t){xi.publish("filters",xi.state().filters.concat(t).filter(function(t){return t.value}))}).registerEvent("modify-filter",function(t){var n=xi.state().filters;if(n.filter(function(n){return n.field+n.op==t.field+t.op}).length){var e=n.reverse().map(function(n){return n.field==t.field&&n.op==t.op&&(n.value+=","+t.value),n});xi.publish("filters",e.filter(function(t){return t.value}))}else xi.publish("filters",xi.state().filters.concat(t).filter(function(t){return t.value}))}).registerEvent("staged-filter.change",function(t){xi.publish("staged_filter",t)}).registerEvent("logic.change",function(t){xi.publish("logic_options",t)}).registerEvent("filter.change",function(t){xi.publishBatch({filters:t})}).registerEvent("updateFilter",Qn(Ce))}function ne(){var t=Ce;Ce.registerEvent("actions.get",function(){t.publishStatic("actions",gi.getAll)}).registerEvent("action.change",function(n){t.publish("selected_action",n)}).registerEvent("action_date.change",function(n){t.publish("action_date",n)}).registerEvent("comparison_date.change",function(n){t.publish("comparison_date",n)}).registerEvent("comparison.change",function(n){if(0==n.value)return t.publish("selected_comparison",!1);t.publish("selected_comparison",n)})}function ee(){te(),ne(),Ce.registerEvent("transform.change",function(t){_i.update("loading"),_i.publishStatic("transform",t.value),_i.prepareEvent("updateFilter")(!1,_i.state().filters,_i.state())}).registerEvent("sort.change",function(t){var n=_i.state(),e=n.sort==t.key;_i.update("loading"),_i.publishStatic("sort",t.key),_i.publishStatic("ascending",e&&!n.ascending),_i.prepareEvent("updateFilter")(!1,_i.state().filters,_i.state())}).registerEvent("view.change",function(t){_i.update("loading");var n=bi(_i.state().dashboard_options).map(function(n){return n.selected=t.value==n.value?1:0,n});_i.publish("dashboard_options",n)}).registerEvent("tab.change",function(t){_i.update("loading"),_i.publishStatic("tab_position",t.key),_i.prepareEvent("updateFilter")(!1,_i.state().filters,_i.state())}).registerEvent("ba.sort",function(t){_i.publish("sortby",t.value),_i.prepareEvent("updateFilter")(!1,_i.state().filters,_i.state())})}function re(t,n){Object.keys(t).length&&(t.qs_state=n,Ce.publishBatch(t))}function ie(){window.onpopstate=function(n){var e=t._state,r=n.state;re(E(r,e),r)};var t=Ce;Ce.subscribe("history",function(n,e){var r=["filters"],i=r.reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},{});e.selected_action&&(i.selected_action=e.selected_action.action_id),e.selected_comparison&&(i.selected_comparison=e.selected_comparison.action_id),e.dashboard_options&&(i.selected_view=e.dashboard_options.filter(function(t){return t.selected})[0].value),e.action_date&&(i.action_date=e.action_date),e.comparison_date&&(i.comparison_date=e.comparison_date),e.transform&&(i.transform=e.transform),e.tab_position&&(i.tab_position=e.tab_position),e.sort&&(i.sort=e.sort),e.ascending&&(i.ascending=e.ascending),e.selected_action&&f(i).to(i)!=window.location.search&&t.publish("qs_state",i)}).subscribe("history.actions",function(n,e,r){var i=f({}).from(window.location.search);if(window.location.search.length&&Object.keys(i).length){return re(E(i,r),i)}t.publish("selected_action",e[0])}).subscribe("history.qs_state",function(t,n,e){JSON.stringify(history.state)!=JSON.stringify(n)&&(""==window.location.search?history.replaceState(n,"",f(n).to(n)):history.pushState(n,"",f(n).to(n)))})}function oe(){Ce.subscribe("receive.data",function(t,n,e){wi.publishStatic("logic_categories",n.categories),wi.prepareEvent("updateFilter")(!1,e.filters,e),wi.publish("filters",e.filters)}).subscribe("receive.comparison_data",function(t,n,e){wi.publish("filters",e.filters)}).subscribe("update.data",function(t,n,e){}),Ce.subscribe("get.action_date",function(t,n,e){}).subscribe("get.comparison_date",function(t,n,e){if(!n)return wi.publishStatic("comparison_data",!1);wi.publishStatic("comparison_data",gi.getData(e.selected_comparison,e.comparison_date))}).subscribe("get.selected_action",function(t,n,e){wi.publishStatic("data",gi.getData(n,e.action_date))}).subscribe("get.selected_comparison",function(t,n,e){if(!n)return wi.publishStatic("comparison_data",!1);wi.publishStatic("comparison_data",gi.getData(n,e.comparison_date))})}function ae(t){ie(),oe(),Ce.subscribe("change.loading",function(n,e,r){ue(t,r.is_comparison)()}).subscribe("change.dashboard_options",Mi.prepareEvent("updateFilter")).subscribe("change.tabs",Mi.prepareEvent("updateFilter")).subscribe("change.logic_options",Mi.prepareEvent("updateFilter")).subscribe("update.filters",Mi.prepareEvent("updateFilter")),Ce.subscribe("redraw.formatted_data",function(n,e,r){Mi.update("loading",!1),ue(t,r.is_comparison)()})}function ue(t,n){return new ki(t,n)}function le(t,n){var e=new Si;return Qn(e)(!1,t,n),e.internal}var se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},fe=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),he=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},pe=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},de=function(){function t(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ge=function(t,n){return n={exports:{}},t(n,n.exports),n.exports}(function(t){!function(){function n(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function i(t){return null===t?NaN:+t}function o(t){return!isNaN(t)}function a(t){return{left:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}function u(t){return t.length}function l(t){for(var n=1;t*n%1;)n*=10;return n}function s(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function c(){this._=Object.create(null)}function f(t){return(t+="")===ba||t[0]===wa?wa+t:t}function h(t){return(t+="")[0]===wa?t.slice(1):t}function p(t){return f(t)in this._}function d(t){return(t=f(t))in this._&&delete this._[t]}function g(){var t=[];for(var n in this._)t.push(h(n));return t}function v(){var t=0;for(var n in this._)++t;return t}function y(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function x(t){return t}function _(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function b(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=Ma.length;e<r;++e){var i=Ma[e]+n;if(i in t)return i}}function w(){}function M(){}function k(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new c;return n.on=function(n,i){var o,a=r.get(n);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function S(){ca.event.preventDefault()}function N(){for(var t,n=ca.event;t=n.sourceEvent;)n=t;return n}function E(t){for(var n=new M,e=0,r=arguments.length;++e<r;)n[arguments[e]]=k(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=ca.event;i.target=t,ca.event=i,n[i.type].apply(e,r)}finally{ca.event=o}}},n}function A(t){return Sa(t,Ca),t}function C(t){return"function"==typeof t?t:function(){return Na(t,this)}}function z(t){return"function"==typeof t?t:function(){return Ea(t,this)}}function T(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=ca.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?u:a:t.local?o:i}function q(t){return t.trim().replace(/\s+/g," ")}function L(t){return new RegExp("(?:^|\\s+)"+ca.requote(t)+"(?:\\s+|$)","g")}function O(t){return(t+"").trim().split(/^|\s+/)}function j(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=O(t).map(R);var i=t.length;return"function"==typeof n?r:e}function R(t){var n=L(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",q(i+" "+t))):e.setAttribute("class",q(i.replace(n," ")))}}function D(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function P(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function U(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e?n.createElementNS(e,t):n.createElement(t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ca.ns.qualify(t)).local?e:n}function F(){var t=this.parentNode;t&&t.removeChild(this)}function I(t){return{__data__:t}}function H(t){return function(){return Aa(this,t)}}function Y(t){return arguments.length||(t=r),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],a=0,u=o.length;a<u;a++)(i=o[a])&&n(i,a,e);return t}function Z(t){return Sa(t,Ta),t}function B(t){var n,e;return function(r,i,o){var a,u=t[o].update,l=u.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(a=u[n])&&++n<l;);return a}}function X(t,n,e){function r(){var n=this[a];n&&(this.removeEventListener(t,n,n.$),delete this[a])}function i(){var i=l(n,ha(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+ca.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var a="__on"+t,u=t.indexOf("."),l=$;u>0&&(t=t.slice(0,u));var s=qa.get(t);return s&&(t=s,l=J),u?n?i:r:n?w:o}function $(t,n){return function(e){var r=ca.event;ca.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{ca.event=r}}}function J(t,n){var e=$(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function W(t){var r=".dragsuppress-"+ ++Oa,i="click"+r,o=ca.select(e(t)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==La&&(La=!("onselectstart"in t)&&b(t.style,"userSelect")),La){var a=n(t).style,u=a[La];a[La]="none"}return function(t){if(o.on(r,null),La&&(a[La]=u),t){var n=function(){o.on(i,null)};o.on(i,function(){S(),n()},!0),setTimeout(n,0)}}}function G(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(ja<0){var o=e(t);if(o.scrollX||o.scrollY){r=ca.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();ja=!(a.f||a.e),r.remove()}}return ja?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function K(){return ca.event.changedTouches[0].identifier}function Q(t){return t>0?1:t<0?-1:0}function tt(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function nt(t){return t>1?0:t<-1?Pa:Math.acos(t)}function et(t){return t>1?Ia:t<-1?-Ia:Math.asin(t)}function rt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function ot(t){return((t=Math.exp(2*t))-1)/(t+1)}function at(t){return(t=Math.sin(t/2))*t}function ut(){}function lt(t,n,e){return this instanceof lt?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof lt?new lt(t.h,t.s,t.l):wt(""+t,Mt,lt):new lt(t,n,e)}function st(t,n,e){function r(t){return t>360?t-=360:t<0&&(t+=360),t<60?o+(a-o)*t/60:t<180?a:t<240?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:n<0?0:n>1?1:n,e=e<0?0:e>1?1:e,a=e<=.5?e*(1+n):e+n-e*n,o=2*e-a,new mt(i(t+120),i(t),i(t-120))}function ct(t,n,e){return this instanceof ct?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof ct?new ct(t.h,t.c,t.l):t instanceof ht?dt(t.l,t.a,t.b):dt((t=kt((t=ca.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ct(t,n,e)}function ft(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new ht(e,Math.cos(t*=Ha)*n,Math.sin(t)*n)}function ht(t,n,e){return this instanceof ht?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof ct?ft(t.h,t.c,t.l):kt((t=mt(t)).r,t.g,t.b):new ht(t,n,e)}function pt(t,n,e){var r=(t+16)/116,i=r+n/500,o=r-e/200;return i=gt(i)*Ga,r=gt(r)*Ka,o=gt(o)*Qa,new mt(yt(3.2404542*i-1.5371385*r-.4985314*o),yt(-.969266*i+1.8760108*r+.041556*o),yt(.0556434*i-.2040259*r+1.0572252*o))}function dt(t,n,e){return t>0?new ct(Math.atan2(e,n)*Ya,Math.sqrt(n*n+e*e),t):new ct(NaN,NaN,t)}function gt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function vt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function yt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,n,e){return this instanceof mt?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):wt(""+t,mt,st):new mt(t,n,e)}function xt(t){return new mt(t>>16,t>>8&255,255&t)}function _t(t){return xt(t)+""}function bt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,n,e){var r,i,o,a=0,u=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(Nt(i[0]),Nt(i[1]),Nt(i[2]))}return(o=eu.get(t))?n(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,l=255&o)),n(a,u,l))}function Mt(t,n,e){var r,i,o=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),u=a-o,l=(a+o)/2;return u?(i=l<.5?u/(a+o):u/(2-a-o),r=t==a?(n-e)/u+(n<e?6:0):n==a?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new lt(r,i,l)}function kt(t,n,e){t=St(t),n=St(n),e=St(e);var r=vt((.4124564*t+.3575761*n+.1804375*e)/Ga),i=vt((.2126729*t+.7151522*n+.072175*e)/Ka);return ht(116*i-16,500*(r-i),200*(i-vt((.0193339*t+.119192*n+.9503041*e)/Qa)))}function St(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Nt(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function Et(t){return"function"==typeof t?t:function(){return t}}function At(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Ct(n,e,t,r)}}function Ct(t,n,e,r){function i(){var t,n=l.status;if(!n&&Tt(l)||n>=200&&n<300||304===n){try{t=e.call(o,l)}catch(t){return void a.error.call(o,t)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=ca.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,s=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var n=ca.event;ca.event=t;try{a.progress.call(o,l)}finally{ca.event=n}},o.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(s=t,o):s},o.response=function(t){return e=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ha(arguments)))}}),o.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),l.setRequestHeader)for(var c in u)l.setRequestHeader(c,u[c]);return null!=n&&l.overrideMimeType&&l.overrideMimeType(n),null!=s&&(l.responseType=s),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},ca.rebind(o,a,"on"),null==r?o:o.get(zt(r))}function zt(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}function Tt(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function qt(t,n,e){var r=arguments.length;r<2&&(n=0),r<3&&(e=Date.now());var i=e+n,o={c:t,t:i,n:null};return iu?iu.n=o:ru=o,iu=o,ou||(au=clearTimeout(au),ou=1,uu(Lt)),o}function Lt(){var t=Ot(),n=jt()-t;n>24?(isFinite(n)&&(clearTimeout(au),au=setTimeout(Lt,n)),ou=0):(ou=1,uu(Lt))}function Ot(){for(var t=Date.now(),n=ru;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function jt(){for(var t,n=ru,e=1/0;n;)n.c?(n.t<e&&(e=n.t),n=(t=n).n):n=t?t.n=n.n:ru=n.n;return iu=t,e}function Rt(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Dt(t,n){var e=Math.pow(10,3*_a(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function Pt(t){var n=t.decimal,e=t.thousands,r=t.grouping,i=t.currency,o=r&&e?function(t,n){for(var i=t.length,o=[],a=0,u=r[0],l=0;i>0&&u>0&&(l+u+1>n&&(u=Math.max(1,n-l)),o.push(t.substring(i-=u,i+u)),!((l+=u+1)>n));)u=r[a=(a+1)%r.length];return o.reverse().join(e)}:x;return function(t){var e=su.exec(t),r=e[1]||" ",a=e[2]||">",u=e[3]||"-",l=e[4]||"",s=e[5],c=+e[6],f=e[7],h=e[8],p=e[9],d=1,g="",v="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(s||"0"===r&&"="===a)&&(s=r="0",a="="),p){case"n":f=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":d=-1,p="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=cu.get(p)||Ut;var x=s&&f;return function(t){var e=v;if(y&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===u?"":u;if(d<0){var l=ca.formatPrefix(t,h);t=l.scale(t),e=l.symbol+v}else t*=d;t=p(t,h);var _,b,w=t.lastIndexOf(".");if(w<0){var M=m?t.lastIndexOf("e"):-1;M<0?(_=t,b=""):(_=t.substring(0,M),b=t.substring(M))}else _=t.substring(0,w),b=n+t.substring(w+1);!s&&f&&(_=o(_,1/0));var k=g.length+_.length+b.length+(x?0:i.length),S=k<c?new Array(k=c-k+1).join(r):"";return x&&(_=o(S+_,S.length?c-b.length:1/0)),i+=g,t=_+b,("<"===a?i+t+S:">"===a?S+i+t:"^"===a?S.substring(0,k>>=1)+i+t+S.substring(k):i+(x?t:S+t))+e}}}function Ut(t){return t+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function It(t,n,e){function r(n){var e=t(n),r=o(e,1);return n-e<r-n?e:r}function i(e){return n(e=t(new hu(e-1)),1),e}function o(t,e){return n(t=new hu(+t),e),t}function a(t,r,o){var a=i(t),u=[];if(o>1)for(;a<r;)e(a)%o||u.push(new Date(+a)),n(a,1);else for(;a<r;)u.push(new Date(+a)),n(a,1);return u}function u(t,n,e){try{hu=Ft;var r=new Ft;return r._=t,a(r,n,e)}finally{hu=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var l=t.utc=Ht(t);return l.floor=l,l.round=Ht(r),l.ceil=Ht(i),l.offset=Ht(o),l.range=u,t}function Ht(t){return function(n,e){try{hu=Ft;var r=new Ft;return r._=n,t(r,e)._}finally{hu=Date}}}function Yt(t){function n(t){function n(n){for(var e,i,o,a=[],u=-1,l=0;++u<r;)37===t.charCodeAt(u)&&(a.push(t.slice(l,u)),null!=(i=du[e=t.charAt(++u)])&&(e=t.charAt(++u)),(o=A[e])&&(e=o(n,null==i?"e"===e?" ":"0":i)),a.push(e),l=u+1);return a.push(t.slice(l,u)),a.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(r,t,n,0)!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&hu!==Ft,o=new(i?Ft:hu);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},n.toString=function(){return t},n}function e(t,n,e,r){for(var i,o,a,u=0,l=n.length,s=e.length;u<l;){if(r>=s)return-1;if(37===(i=n.charCodeAt(u++))){if(a=n.charAt(u++),!(o=C[a in du?n.charAt(u++):a])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function r(t,n,e){w.lastIndex=0;var r=w.exec(n.slice(e));return r?(t.w=M.get(r[0].toLowerCase()),e+r[0].length):-1}function i(t,n,e){_.lastIndex=0;var r=_.exec(n.slice(e))
;return r?(t.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function o(t,n,e){N.lastIndex=0;var r=N.exec(n.slice(e));return r?(t.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function a(t,n,e){k.lastIndex=0;var r=k.exec(n.slice(e));return r?(t.m=S.get(r[0].toLowerCase()),e+r[0].length):-1}function u(t,n,r){return e(t,A.c.toString(),n,r)}function l(t,n,r){return e(t,A.x.toString(),n,r)}function s(t,n,r){return e(t,A.X.toString(),n,r)}function c(t,n,e){var r=x.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}var f=t.dateTime,h=t.date,p=t.time,d=t.periods,g=t.days,v=t.shortDays,y=t.months,m=t.shortMonths;n.utc=function(t){function e(t){try{hu=Ft;var n=new hu;return n._=t,r(n)}finally{hu=Date}}var r=n(t);return e.parse=function(t){try{hu=Ft;var n=r.parse(t);return n&&n._}finally{hu=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=cn;var x=ca.map(),_=Zt(g),b=Bt(g),w=Zt(v),M=Bt(v),k=Zt(y),S=Bt(y),N=Zt(m),E=Bt(m);d.forEach(function(t,n){x.set(t.toLowerCase(),n)});var A={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:n(f),d:function(t,n){return Vt(t.getDate(),n,2)},e:function(t,n){return Vt(t.getDate(),n,2)},H:function(t,n){return Vt(t.getHours(),n,2)},I:function(t,n){return Vt(t.getHours()%12||12,n,2)},j:function(t,n){return Vt(1+fu.dayOfYear(t),n,3)},L:function(t,n){return Vt(t.getMilliseconds(),n,3)},m:function(t,n){return Vt(t.getMonth()+1,n,2)},M:function(t,n){return Vt(t.getMinutes(),n,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,n){return Vt(t.getSeconds(),n,2)},U:function(t,n){return Vt(fu.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Vt(fu.mondayOfYear(t),n,2)},x:n(h),X:n(p),y:function(t,n){return Vt(t.getFullYear()%100,n,2)},Y:function(t,n){return Vt(t.getFullYear()%1e4,n,4)},Z:ln,"%":function(){return"%"}},C={a:r,A:i,b:o,B:a,c:u,d:nn,e:nn,H:rn,I:rn,j:en,L:un,m:tn,M:on,p:c,S:an,U:$t,w:Xt,W:Jt,x:l,X:s,y:Gt,Y:Wt,Z:Kt,"%":sn};return n}function Vt(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Zt(t){return new RegExp("^(?:"+t.map(ca.requote).join("|")+")","i")}function Bt(t){for(var n=new c,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Xt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function $t(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Jt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Wt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Gt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.y=Qt(+r[0]),e+r[0].length):-1}function Kt(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function tn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function nn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function en(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function rn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function on(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function an(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function un(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ln(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=_a(n)/60|0,i=_a(n)%60;return e+Vt(r,"0",2)+Vt(i,"0",2)}function sn(t,n,e){vu.lastIndex=0;var r=vu.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function cn(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function fn(){}function hn(t,n,e){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function pn(t,n){t&&_u.hasOwnProperty(t.type)&&_u[t.type](t,n)}function dn(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function gn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)dn(t[e],n,1);n.polygonEnd()}function vn(){function t(t,n){t*=Ha,n=n*Ha/2+Pa/4;var e=t-r,a=e>=0?1:-1,u=a*e,l=Math.cos(n),s=Math.sin(n),c=o*s,f=i*l+c*Math.cos(u),h=c*a*Math.sin(u);wu.add(Math.atan2(h,f)),r=t,i=l,o=s}var n,e,r,i,o;Mu.point=function(a,u){Mu.point=t,r=(n=a)*Ha,i=Math.cos(u=(e=u)*Ha/2+Pa/4),o=Math.sin(u)},Mu.lineEnd=function(){t(n,e)}}function yn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function mn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function xn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function _n(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function bn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function wn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Mn(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function kn(t,n){return _a(t[0]-n[0])<Ra&&_a(t[1]-n[1])<Ra}function Sn(t,n){t*=Ha;var e=Math.cos(n*=Ha);Nn(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function Nn(t,n,e){++ku,Nu+=(t-Nu)/ku,Eu+=(n-Eu)/ku,Au+=(e-Au)/ku}function En(){function t(t,i){t*=Ha;var o=Math.cos(i*=Ha),a=o*Math.cos(t),u=o*Math.sin(t),l=Math.sin(i),s=Math.atan2(Math.sqrt((s=e*l-r*u)*s+(s=r*a-n*l)*s+(s=n*u-e*a)*s),n*a+e*u+r*l);Su+=s,Cu+=s*(n+(n=a)),zu+=s*(e+(e=u)),Tu+=s*(r+(r=l)),Nn(n,e,r)}var n,e,r;ju.point=function(i,o){i*=Ha;var a=Math.cos(o*=Ha);n=a*Math.cos(i),e=a*Math.sin(i),r=Math.sin(o),ju.point=t,Nn(n,e,r)}}function An(){ju.point=Sn}function Cn(){function t(t,n){t*=Ha;var e=Math.cos(n*=Ha),a=e*Math.cos(t),u=e*Math.sin(t),l=Math.sin(n),s=i*l-o*u,c=o*a-r*l,f=r*u-i*a,h=Math.sqrt(s*s+c*c+f*f),p=r*a+i*u+o*l,d=h&&-nt(p)/h,g=Math.atan2(h,p);qu+=d*s,Lu+=d*c,Ou+=d*f,Su+=g,Cu+=g*(r+(r=a)),zu+=g*(i+(i=u)),Tu+=g*(o+(o=l)),Nn(r,i,o)}var n,e,r,i,o;ju.point=function(a,u){n=a,e=u,ju.point=t,a*=Ha;var l=Math.cos(u*=Ha);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(u),Nn(r,i,o)},ju.lineEnd=function(){t(n,e),ju.lineEnd=An,ju.point=Sn}}function zn(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Tn(){return!0}function qn(t,n,e,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(kn(e,r)){i.lineStart();for(var u=0;u<n;++u)i.point((e=t[u])[0],e[1]);return void i.lineEnd()}var l=new On(e,t,null,!0),s=new On(e,null,l,!1);l.o=s,o.push(l),a.push(s),l=new On(r,t,null,!1),s=new On(r,null,l,!0),l.o=s,o.push(l),a.push(s)}}),a.sort(n),Ln(o),Ln(a),o.length){for(var u=0,l=e,s=a.length;u<s;++u)a[u].e=l=!l;for(var c,f,h=o[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Ln(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function On(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function jn(t,n,e,r){return function(i,o){function a(n,e){var r=i(n,e);t(n=r[0],e=r[1])&&o.point(n,e)}function u(t,n){var e=i(t,n);v.point(e[0],e[1])}function l(){m.point=u,v.lineStart()}function s(){m.point=a,v.lineEnd()}function c(t,n){g.push([t,n]);var e=i(t,n);_.point(e[0],e[1])}function f(){_.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),_.lineEnd();var t,n=_.clean(),e=x.buffer(),r=e.length;if(g.pop(),d.push(g),g=null,r)if(1&n){t=e[0];var i,r=t.length-1,a=-1;if(r>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&n&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Rn))}var p,d,g,v=n(o),y=i.invert(r[0],r[1]),m={point:a,lineStart:l,lineEnd:s,polygonStart:function(){m.point=c,m.lineStart=f,m.lineEnd=h,p=[],d=[]},polygonEnd:function(){m.point=a,m.lineStart=l,m.lineEnd=s,p=ca.merge(p);var t=Hn(y,d);p.length?(b||(o.polygonStart(),b=!0),qn(p,Pn,t,e,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=Dn(),_=n(x),b=!1;return m}}function Rn(t){return t.length>1}function Dn(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:w,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Pn(t,n){return((t=t.x)[0]<0?t[1]-Ia-Ra:Ia-t[1])-((n=n.x)[0]<0?n[1]-Ia-Ra:Ia-n[1])}function Un(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Pa:-Pa,l=_a(o-e);_a(l-Pa)<Ra?(t.point(e,r=(r+a)/2>0?Ia:-Ia),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&l>=Pa&&(_a(e-i)<Ra&&(e-=i*Ra),_a(o-u)<Ra&&(o-=u*Ra),r=Fn(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function Fn(t,n,e,r){var i,o,a=Math.sin(t-e);return _a(a)>Ra?Math.atan((Math.sin(n)*(o=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(n))*Math.sin(t))/(i*o*a)):(n+r)/2}function In(t,n,e,r){var i;if(null==t)i=e*Ia,r.point(-Pa,i),r.point(0,i),r.point(Pa,i),r.point(Pa,0),r.point(Pa,-i),r.point(0,-i),r.point(-Pa,-i),r.point(-Pa,0),r.point(-Pa,i);else if(_a(t[0]-n[0])>Ra){var o=t[0]<n[0]?Pa:-Pa;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Hn(t,n){var e=t[0],r=t[1],i=[Math.sin(e),-Math.cos(e),0],o=0,a=0;wu.reset();for(var u=0,l=n.length;u<l;++u){var s=n[u],c=s.length;if(c)for(var f=s[0],h=f[0],p=f[1]/2+Pa/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===c&&(v=0),t=s[v];var y=t[0],m=t[1]/2+Pa/4,x=Math.sin(m),_=Math.cos(m),b=y-h,w=b>=0?1:-1,M=w*b,k=M>Pa,S=d*x;if(wu.add(Math.atan2(S*w*Math.sin(M),g*_+S*Math.cos(M))),o+=k?b+w*Ua:b,k^h>=e^y>=e){var N=xn(yn(f),yn(t));wn(N);var E=xn(i,N);wn(E);var A=(k^b>=0?-1:1)*et(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(a+=k^b>=0?1:-1)}if(!v++)break;h=y,d=x,g=_,f=t}}return(o<-Ra||o<Ra&&wu<0)^1&a}function Yn(t){function n(t,n){return Math.cos(t)*Math.cos(n)>o}function e(t){var e,o,l,s,c;return{lineStart:function(){s=l=!1,c=1},point:function(f,h){var p,d=[f,h],g=n(f,h),v=a?g?0:i(f,h):g?i(f+(f<0?Pa:-Pa),h):0;if(!e&&(s=l=g)&&t.lineStart(),g!==l&&(p=r(e,d),(kn(e,p)||kn(d,p))&&(d[0]+=Ra,d[1]+=Ra,g=n(d[0],d[1]))),g!==l)c=0,g?(t.lineStart(),p=r(d,e),t.point(p[0],p[1])):(p=r(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(u&&e&&a^g){var y;v&o||!(y=r(d,e,!0))||(c=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&kn(e,d)||t.point(d[0],d[1]),e=d,l=g,o=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(s&&l)<<1}}}function r(t,n,e){var r=yn(t),i=yn(n),a=[1,0,0],u=xn(r,i),l=mn(u,u),s=u[0],c=l-s*s;if(!c)return!e&&t;var f=o*l/c,h=-o*s/c,p=xn(a,u),d=bn(a,f);_n(d,bn(u,h));var g=p,v=mn(d,g),y=mn(g,g),m=v*v-y*(mn(d,d)-1);if(!(m<0)){var x=Math.sqrt(m),_=bn(g,(-v-x)/y);if(_n(_,d),_=Mn(_),!e)return _;var b,w=t[0],M=n[0],k=t[1],S=n[1];M<w&&(b=w,w=M,M=b);var N=M-w,E=_a(N-Pa)<Ra,A=E||N<Ra;if(!E&&S<k&&(b=k,k=S,S=b),A?E?k+S>0^_[1]<(_a(_[0]-w)<Ra?k:S):k<=_[1]&&_[1]<=S:N>Pa^(w<=_[0]&&_[0]<=M)){var C=bn(g,(-v+x)/y);return _n(C,d),[_,Mn(C)]}}}function i(n,e){var r=a?t:Pa-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var o=Math.cos(t),a=o>0,u=_a(o)>Ra;return jn(n,e,ye(t,6*Ha),a?[0,-t]:[-Pa,t-Pa])}function Vn(t,n,e,r){return function(i){var o,a=i.a,u=i.b,l=a.x,s=a.y,c=u.x,f=u.y,h=0,p=1,d=c-l,g=f-s;if(o=t-l,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>h&&(h=o)}if(o=e-l,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<p&&(p=o)}if(o=n-s,g||!(o>0)){if(o/=g,g<0){if(o<h)return;o<p&&(p=o)}else if(g>0){if(o>p)return;o>h&&(h=o)}if(o=r-s,g||!(o<0)){if(o/=g,g<0){if(o>p)return;o>h&&(h=o)}else if(g>0){if(o<h)return;o<p&&(p=o)}return h>0&&(i.a={x:l+h*d,y:s+h*g}),p<1&&(i.b={x:l+p*d,y:s+p*g}),i}}}}}}function Zn(t,n,e,r){function i(r,i){return _a(r[0]-t)<Ra?i>0?0:3:_a(r[0]-e)<Ra?i>0?2:1:_a(r[1]-n)<Ra?i>0?1:0:i>0?3:2}function o(t,n){return a(t.x,n.x)}function a(t,n){var e=i(t,1),r=i(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function l(t){for(var n=0,e=v.length,r=t[1],i=0;i<e;++i)for(var o,a=1,u=v[i],l=u.length,s=u[0];a<l;++a)o=u[a],s[1]<=r?o[1]>r&&tt(s,o,t)>0&&++n:o[1]<=r&&tt(s,o,t)<0&&--n,s=o;return 0!==n}function s(o,u,l,s){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(u,l))||a(o,u)<0^l>0)do{s.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+l+4)%4)!==f);else s.point(u[0],u[1])}function c(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function f(t,n){c(t,n)&&u.point(t,n)}function h(){C.point=d,v&&v.push(y=[]),k=!0,M=!1,b=w=NaN}function p(){g&&(d(m,x),_&&M&&E.rejoin(),g.push(E.buffer())),C.point=f,M&&u.lineEnd()}function d(t,n){t=Math.max(-Du,Math.min(Du,t)),n=Math.max(-Du,Math.min(Du,n));var e=c(t,n);if(v&&y.push([t,n]),k)m=t,x=n,_=e,k=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&M)u.point(t,n);else{var r={a:{x:b,y:w},b:{x:t,y:n}};A(r)?(M||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),S=!1):e&&(u.lineStart(),u.point(t,n),S=!1)}b=t,w=n,M=e}var g,v,y,m,x,_,b,w,M,k,S,N=u,E=Dn(),A=Vn(t,n,e,r),C={point:f,lineStart:h,lineEnd:p,polygonStart:function(){u=E,g=[],v=[],S=!0},polygonEnd:function(){u=N,g=ca.merge(g);var n=l([t,r]),e=S&&n,i=g.length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),i&&qn(g,o,n,s,u),u.polygonEnd()),g=v=y=null}};return C}}function Bn(t){var n=0,e=Pa/3,r=le(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Pa/180,e=t[1]*Pa/180):[n/Pa*180,e/Pa*180]},i}function Xn(t,n){function e(t,n){var e=Math.sqrt(o-2*i*Math.sin(n))/i;return[e*Math.sin(t*=i),a-e*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(n))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return e.invert=function(t,n){var e=a-n;return[Math.atan2(t,e)/i,et((o-(t*t+e*e)*i*i)/(2*i))]},e}function $n(){function t(t,n){Uu+=i*t-r*n,r=t,i=n}var n,e,r,i;Vu.point=function(o,a){Vu.point=t,n=r=o,e=i=a},Vu.lineEnd=function(){t(n,e)}}function Jn(t,n){t<Fu&&(Fu=t),t>Hu&&(Hu=t),n<Iu&&(Iu=n),n>Yu&&(Yu=n)}function Wn(){function t(t,n){a.push("M",t,",",n,o)}function n(t,n){a.push("M",t,",",n),u.point=e}function e(t,n){a.push("L",t,",",n)}function r(){u.point=t}function i(){a.push("Z")}var o=Gn(4.5),a=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return o=Gn(t),u},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return u}function Gn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Kn(t,n){Nu+=t,Eu+=n,++Au}function Qn(){function t(t,r){var i=t-n,o=r-e,a=Math.sqrt(i*i+o*o);Cu+=a*(n+t)/2,zu+=a*(e+r)/2,Tu+=a,Kn(n=t,e=r)}var n,e;Bu.point=function(r,i){Bu.point=t,Kn(n=r,e=i)}}function te(){Bu.point=Kn}function ne(){function t(t,n){var e=t-r,o=n-i,a=Math.sqrt(e*e+o*o);Cu+=a*(r+t)/2,zu+=a*(i+n)/2,Tu+=a,a=i*t-r*n,qu+=a*(r+t),Lu+=a*(i+n),Ou+=3*a,Kn(r=t,i=n)}var n,e,r,i;Bu.point=function(o,a){Bu.point=t,Kn(n=r=o,e=i=a)},Bu.lineEnd=function(){t(n,e)}}function ee(t){function n(n,e){t.moveTo(n+a,e),t.arc(n,e,a,0,Ua)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function i(){u.point=n}function o(){t.closePath()}var a=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:i,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=i,u.point=n},pointRadius:function(t){return a=t,u},result:w};return u}function re(t){function n(t){return(u?r:e)(t)}function e(n){return ae(n,function(e,r){e=t(e,r),n.point(e[0],e[1])})}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){x=NaN,k.point=o,n.lineStart()}function o(e,r){var o=yn([e,r]),a=t(e,r);i(x,_,m,b,w,M,x=a[0],_=a[1],m=e,b=o[0],w=o[1],M=o[2],u,n),n.point(x,_)}function a(){k.point=e,n.lineEnd()}function l(){r(),k.point=s,k.lineEnd=c}function s(t,n){o(f=t,h=n),p=x,d=_,g=b,v=w,y=M,k.point=o}function c(){i(x,_,m,b,w,M,p,d,f,g,v,y,u,n),k.lineEnd=a,a()}var f,h,p,d,g,v,y,m,x,_,b,w,M,k={point:e,lineStart:r,lineEnd:a,polygonStart:function(){n.polygonStart(),k.lineStart=l},polygonEnd:function(){n.polygonEnd(),k.lineStart=r}};return k}function i(n,e,r,u,l,s,c,f,h,p,d,g,v,y){var m=c-n,x=f-e,_=m*m+x*x;if(_>4*o&&v--){var b=u+p,w=l+d,M=s+g,k=Math.sqrt(b*b+w*w+M*M),S=Math.asin(M/=k),N=_a(_a(M)-1)<Ra||_a(r-h)<Ra?(r+h)/2:Math.atan2(w,b),E=t(N,S),A=E[0],C=E[1],z=A-n,T=C-e,q=x*z-m*T;(q*q/_>o||_a((m*z+x*T)/_-.5)>.3||u*p+l*d+s*g<a)&&(i(n,e,r,u,l,s,A,C,N,b/=k,w/=k,M,v,y),y.point(A,C),i(A,C,N,b,w,M,c,f,h,p,d,g,v,y))}}var o=.5,a=Math.cos(30*Ha),u=16;return n.precision=function(t){return arguments.length?(u=(o=t*t)>0&&16,n):Math.sqrt(o)},n}function ie(t){var n=re(function(n,e){return t([n*Ya,e*Ya])});return function(t){return ce(n(t))}}function oe(t){this.stream=t}function ae(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ue(t){return le(function(){return t})()}function le(t){function n(t){return t=u(t[0]*Ha,t[1]*Ha),[t[0]*h+l,s-t[1]*h]}function e(t){return(t=u.invert((t[0]-l)/h,(s-t[1])/h))&&[t[0]*Ya,t[1]*Ya]}function r(){u=zn(a=pe(y,m,_),o);var t=o(g,v);return l=p-t[0]*h,s=d+t[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),n}var o,a,u,l,s,c,f=re(function(t,n){return t=o(t,n),[t[0]*h+l,s-t[1]*h]}),h=150,p=480,d=250,g=0,v=0,y=0,m=0,_=0,b=Ru,w=x,M=null,k=null;return n.stream=function(t){return c&&(c.valid=!1),c=ce(b(a,f(w(t)))),c.valid=!0,c},n.clipAngle=function(t){return arguments.length?(b=null==t?(M=t,Ru):Yn((M=+t)*Ha),i()):M},n.clipExtent=function(t){return arguments.length?(k=t,w=t?Zn(t[0][0],t[0][1],t[1][0],t[1][1]):x,i()):k},n.scale=function(t){return arguments.length?(h=+t,r()):h},n.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},n.center=function(t){return arguments.length?(g=t[0]%360*Ha,v=t[1]%360*Ha,r()):[g*Ya,v*Ya]},n.rotate=function(t){return arguments.length?(y=t[0]%360*Ha,m=t[1]%360*Ha,_=t.length>2?t[2]%360*Ha:0,r()):[y*Ya,m*Ya,_*Ya]},ca.rebind(n,f,"precision"),function(){return o=t.apply(this,arguments),n.invert=o.invert&&e,r()}}function ce(t){return ae(t,function(n,e){t.point(n*Ha,e*Ha)})}function fe(t,n){return[t,n]}function he(t,n){return[t>Pa?t-Ua:t<-Pa?t+Ua:t,n]}function pe(t,n,e){return t?n||e?zn(ge(t),ve(n,e)):ge(t):n||e?ve(n,e):he}function de(t){return function(n,e){return n+=t,[n>Pa?n-Ua:n<-Pa?n+Ua:n,e]}}function ge(t){var n=de(t);return n.invert=de(-t),n}function ve(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,s=Math.sin(n),c=s*r+u*i;return[Math.atan2(l*o-c*a,u*r-s*i),et(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(n),a=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,s=Math.sin(n),c=s*o-l*a;return[Math.atan2(l*o+s*a,u*r+c*i),et(c*r-u*i)]},e}function ye(t,n){var e=Math.cos(t),r=Math.sin(t);return function(i,o,a,u){var l=a*n;null!=i?(i=me(e,i),o=me(e,o),(a>0?i<o:i>o)&&(i+=a*Ua)):(i=t+a*Ua,o=t-.5*l);for(var s,c=i;a>0?c>o:c<o;c-=l)u.point((s=Mn([e,-r*Math.cos(c),-r*Math.sin(c)]))[0],s[1])}}function me(t,n){var e=yn(n);e[0]-=t,wn(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ra)%(2*Math.PI)}function xe(t,n,e){var r=ca.range(t,n-Ra,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function _e(t,n,e){var r=ca.range(t,n-Ra,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function be(t){return t.source}function we(t){return t.target}function Me(t,n,e,r){var i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),u=Math.sin(r),l=i*Math.cos(t),s=i*Math.sin(t),c=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(at(r-n)+i*a*at(e-t))),p=1/Math.sin(h),d=h?function(t){var n=Math.sin(t*=h)*p,e=Math.sin(h-t)*p,r=e*l+n*c,i=e*s+n*f,a=e*o+n*u;return[Math.atan2(i,r)*Ya,Math.atan2(a,Math.sqrt(r*r+i*i))*Ya]}:function(){return[t*Ya,n*Ya]};return d.distance=h,d}function ke(){function t(t,i){var o=Math.sin(i*=Ha),a=Math.cos(i),u=_a((t*=Ha)-n),l=Math.cos(u);Xu+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=r*o-e*a*l)*u),e*o+r*a*l),n=t,e=o,r=a}var n,e,r;$u.point=function(i,o){n=i*Ha,e=Math.sin(o*=Ha),r=Math.cos(o),$u.point=t},$u.lineEnd=function(){$u.point=$u.lineEnd=w}}function Se(t,n){function e(n,e){var r=Math.cos(n),i=Math.cos(e),o=t(r*i);return[o*i*Math.sin(n),o*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),i=n(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&e*o/r)]},e}function Ne(t,n){function e(t,n){a>0?n<-Ia+Ra&&(n=-Ia+Ra):n>Ia-Ra&&(n=Ia-Ra);var e=a/Math.pow(i(n),o);return[e*Math.sin(o*t),a-e*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Pa/4+t/2)},o=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(i(n)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(e.invert=function(t,n){var e=a-n,r=Q(o)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/o,2*Math.atan(Math.pow(a/r,1/o))-Ia]},e):Ae}function Ee(t,n){function e(t,n){var e=o-n;return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}var r=Math.cos(t),i=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),o=r/i+t;return _a(i)<Ra?fe:(e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/i,o-Q(i)*Math.sqrt(t*t+e*e)]},e)}function Ae(t,n){return[t,Math.log(Math.tan(Pa/4+n/2))]}function Ce(t){var n,e=ue(t),r=e.scale,i=e.translate,o=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=i.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var a=o.apply(e,arguments);if(a===e){if(n=null==t){var u=Pa*r(),l=i();o([[l[0]-u,l[1]-u],[l[0]+u,l[1]+u]])}}else n&&(a=null);return a},e.clipExtent(null)}function ze(t,n){return[Math.log(Math.tan(Pa/4+n/2)),-t]}function Te(t){return t[0]}function qe(t){return t[1]}function Le(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;i++){for(;r>1&&tt(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function Oe(t,n){return t[0]-n[0]||t[1]-n[1]}function je(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function Re(t,n,e,r){var i=t[0],o=e[0],a=n[0]-i,u=r[0]-o,l=t[1],s=e[1],c=n[1]-l,f=r[1]-s,h=(u*(l-s)-f*(i-o))/(f*a-u*c);return[i+h*a,l+h*c]}function De(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function Pe(){or(this),this.edge=this.site=this.circle=null}function Ue(t){var n=al.pop()||new Pe;return n.site=t,n}function Fe(t){We(t),rl.remove(t),al.push(t),or(t)}function Ie(t){var n=t.circle,e=n.x,r=n.cy,i={x:e,y:r},o=t.P,a=t.N,u=[t];Fe(t);for(var l=o;l.circle&&_a(e-l.circle.x)<Ra&&_a(r-l.circle.cy)<Ra;)o=l.P,u.unshift(l),Fe(l),l=o;u.unshift(l),We(l);for(var s=a;s.circle&&_a(e-s.circle.x)<Ra&&_a(r-s.circle.cy)<Ra;)a=s.N,u.push(s),Fe(s),s=a;u.push(s),We(s);var c,f=u.length;for(c=1;c<f;++c)s=u[c],l=u[c-1],er(s.edge,l.site,s.site,i);l=u[0],s=u[f-1],s.edge=tr(l.site,s.site,null,i),Je(l),Je(s)}function He(t){for(var n,e,r,i,o=t.x,a=t.y,u=rl._;u;)if((r=Ye(u,a)-o)>Ra)u=u.L;else{if(!((i=o-Ve(u,a))>Ra)){r>-Ra?(n=u.P,e=u):i>-Ra?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var l=Ue(t);if(rl.insert(n,l),n||e){if(n===e)return We(n),e=Ue(n.site),rl.insert(l,e),l.edge=e.edge=tr(n.site,l.site),Je(n),void Je(e);if(!e)return void(l.edge=tr(n.site,l.site));We(n),We(e);var s=n.site,c=s.x,f=s.y,h=t.x-c,p=t.y-f,d=e.site,g=d.x-c,v=d.y-f,y=2*(h*v-p*g),m=h*h+p*p,x=g*g+v*v,_={x:(v*m-p*x)/y+c,y:(h*x-g*m)/y+f};er(e.edge,s,d,_),l.edge=tr(s,t,null,_),e.edge=tr(t,d,null,_),Je(n),Je(e)}}function Ye(t,n){var e=t.site,r=e.x,i=e.y,o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;e=a.site;var u=e.x,l=e.y,s=l-n;if(!s)return u;var c=u-r,f=1/o-1/s,h=c/s;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*s)-l+s/2+i-o/2)))/f+r:(r+u)/2}function Ve(t,n){var e=t.N;if(e)return Ye(e,n);var r=t.site;return r.y===n?r.x:1/0}function Ze(t){this.site=t,this.edges=[]}function Be(t){for(var n,e,r,i,o,a,u,l,s,c,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],g=el,v=g.length;v--;)if((o=g[v])&&o.prepare())for(u=o.edges,l=u.length,a=0;a<l;)c=u[a].end(),r=c.x,i=c.y,s=u[++a%l].start(),n=s.x,e=s.y,(_a(r-n)>Ra||_a(i-e)>Ra)&&(u.splice(a,0,new rr(nr(o.site,c,_a(r-f)<Ra&&d-i>Ra?{x:f,y:_a(n-f)<Ra?e:d}:_a(i-d)<Ra&&h-r>Ra?{x:_a(e-d)<Ra?n:h,y:d}:_a(r-h)<Ra&&i-p>Ra?{x:h,y:_a(n-h)<Ra?e:p}:_a(i-p)<Ra&&r-f>Ra?{x:_a(e-p)<Ra?n:f,y:p}:null),o.site,null)),++l)}function Xe(t,n){return n.angle-t.angle}function $e(){or(this),this.x=this.y=this.arc=this.site=this.cy=null}function Je(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i.x,u=i.y,l=r.x-a,s=r.y-u,c=o.x-a,f=o.y-u,h=2*(l*f-s*c);if(!(h>=-Da)){var p=l*l+s*s,d=c*c+f*f,g=(f*p-s*d)/h,v=(l*d-c*p)/h,f=v+u,y=ul.pop()||new $e;y.arc=t,y.site=i,y.x=g+a,y.y=f+Math.sqrt(g*g+v*v),y.cy=f,t.circle=y;for(var m=null,x=ol._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}ol.insert(m,y),m||(il=y)}}}}function We(t){var n=t.circle;n&&(n.P||(il=n.N),ol.remove(n),ul.push(n),or(n),t.circle=null)}function Ge(t){for(var n,e=nl,r=Vn(t[0][0],t[0][1],t[1][0],t[1][1]),i=e.length;i--;)n=e[i],(!Ke(n,t)||!r(n)||_a(n.a.x-n.b.x)<Ra&&_a(n.a.y-n.b.y)<Ra)&&(n.a=n.b=null,e.splice(i,1))}function Ke(t,n){var e=t.b;if(e)return!0;var r,i,o=t.a,a=n[0][0],u=n[1][0],l=n[0][1],s=n[1][1],c=t.l,f=t.r,h=c.x,p=c.y,d=f.x,g=f.y,v=(h+d)/2,y=(p+g)/2;if(g===p){if(v<a||v>=u)return;if(h>d){if(o){if(o.y>=s)return}else o={x:v,y:l};e={x:v,y:s}}else{if(o){if(o.y<l)return}else o={x:v,y:s};e={x:v,y:l}}}else if(r=(h-d)/(g-p),i=y-r*v,r<-1||r>1)if(h>d){if(o){if(o.y>=s)return}else o={x:(l-i)/r,y:l};e={x:(s-i)/r,y:s}}else{if(o){if(o.y<l)return}else o={x:(s-i)/r,y:s};e={x:(l-i)/r,y:l}}else if(p<g){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};e={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};e={x:a,y:r*a+i}}return t.a=o,t.b=e,!0}function Qe(t,n){this.l=t,this.r=n,this.a=this.b=null}function tr(t,n,e,r){var i=new Qe(t,n);return nl.push(i),e&&er(i,t,n,e),r&&er(i,n,t,r),el[t.i].edges.push(new rr(i,t,n)),el[n.i].edges.push(new rr(i,n,t)),i}function nr(t,n,e){var r=new Qe(t,null);return r.a=n,r.b=e,nl.push(r),r}function er(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function rr(t,n,e){var r=t.a,i=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ir(){this._=null}function or(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ar(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ur(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function lr(t){for(;t.L;)t=t.L;return t}function sr(t,n){var e,r,i,o=t.sort(cr).pop();for(nl=[],el=new Array(t.length),rl=new ir,ol=new ir;;)if(i=il,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===e&&o.y===r||(el[o.i]=new Ze(o),He(o),e=o.x,r=o.y),o=t.pop();else{if(!i)break;Ie(i.arc)}n&&(Ge(n),Be(n));var a={cells:el,edges:nl};return rl=ol=nl=el=null,a}function cr(t,n){return n.y-t.y||n.x-t.x}function fr(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function hr(t){return t.x}function pr(t){return t.y}function dr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gr(t,n,e,r,i,o){if(!t(n,e,r,i,o)){var a=.5*(e+i),u=.5*(r+o),l=n.nodes;l[0]&&gr(t,l[0],e,r,a,u),l[1]&&gr(t,l[1],a,r,i,u),l[2]&&gr(t,l[2],e,u,a,o),l[3]&&gr(t,l[3],a,u,i,o)}}function vr(t,n,e,r,i,o,a){var u,l=1/0;return function t(s,c,f,h,p){if(!(c>o||f>a||h<r||p<i)){if(d=s.point){var d,g=n-s.x,v=e-s.y,y=g*g+v*v;if(y<l){var m=Math.sqrt(l=y);r=n-m,i=e-m,o=n+m,a=e+m,u=d}}for(var x=s.nodes,_=.5*(c+h),b=.5*(f+p),w=n>=_,M=e>=b,k=M<<1|w,S=k+4;k<S;++k)if(s=x[3&k])switch(3&k){case 0:t(s,c,f,_,b);break;case 1:t(s,_,f,h,b);break;case 2:t(s,c,b,_,p);break;case 3:t(s,_,b,h,p)}}}(t,r,i,o,a),u}function yr(t,n){t=ca.rgb(t),n=ca.rgb(n);var e=t.r,r=t.g,i=t.b,o=n.r-e,a=n.g-r,u=n.b-i;return function(t){return"#"+bt(Math.round(e+o*t))+bt(Math.round(r+a*t))+bt(Math.round(i+u*t))}}function mr(t,n){var e,r={},i={};for(e in t)e in n?r[e]=br(t[e],n[e]):i[e]=t[e];for(e in n)e in t||(i[e]=n[e]);return function(t){for(e in r)i[e]=r[e](t);return i}}function xr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function _r(t,n){var e,r,i,o=sl.lastIndex=cl.lastIndex=0,a=-1,u=[],l=[];for(t+="",n+="";(e=sl.exec(t))&&(r=cl.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,l.push({i:a,x:xr(e,r)})),o=cl.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?l[0]?(n=l[0].x,function(t){return n(t)+""}):function(){return n}:(n=l.length,function(t){for(var e,r=0;r<n;++r)u[(e=l[r]).i]=e.x(t);return u.join("")})}function br(t,n){for(var e,r=ca.interpolators.length;--r>=0&&!(e=ca.interpolators[r](t,n)););return e}function wr(t,n){var e,r=[],i=[],o=t.length,a=n.length,u=Math.min(t.length,n.length);for(e=0;e<u;++e)r.push(br(t[e],n[e]));for(;e<o;++e)i[e]=t[e];for(;e<a;++e)i[e]=n[e];return function(t){for(e=0;e<u;++e)i[e]=r[e](t);return i}}function Mr(t){return function(n){return n<=0?0:n>=1?1:t(n)}}function kr(t){return function(n){return 1-t(1-n)}}function Sr(t){return function(n){return.5*(n<.5?t(2*n):2-t(2-2*n))}}function Nr(t){return t*t}function Er(t){return t*t*t}function Ar(t){if(t<=0)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(t<.5?e:3*(t-n)+e-.75)}function Cr(t){return function(n){return Math.pow(n,t)}}function zr(t){return 1-Math.cos(t*Ia)}function Tr(t){return Math.pow(2,10*(t-1))}function qr(t){return 1-Math.sqrt(1-t*t)}function Lr(t,n){var e;return arguments.length<2&&(n=.45),arguments.length?e=n/Ua*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Ua/n)}}function Or(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function jr(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Rr(t,n){t=ca.hcl(t),n=ca.hcl(n);var e=t.h,r=t.c,i=t.l,o=n.h-e,a=n.c-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.c:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:o<-180&&(o+=360),function(t){return ft(e+o*t,r+a*t,i+u*t)+""}}function Dr(t,n){t=ca.hsl(t),n=ca.hsl(n);var e=t.h,r=t.s,i=t.l,o=n.h-e,a=n.s-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.s:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:o<-180&&(o+=360),function(t){return st(e+o*t,r+a*t,i+u*t)+""}}function Pr(t,n){t=ca.lab(t),n=ca.lab(n);var e=t.l,r=t.a,i=t.b,o=n.l-e,a=n.a-r,u=n.b-i;return function(t){return pt(e+o*t,r+a*t,i+u*t)+""}}function Ur(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Fr(t){var n=[t.a,t.b],e=[t.c,t.d],r=Hr(n),i=Ir(n,e),o=Hr(Yr(e,n,-i))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Ya,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ya:0}function Ir(t,n){return t[0]*n[0]+t[1]*n[1]}function Hr(t){var n=Math.sqrt(Ir(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Yr(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function Vr(t){return t.length?t.pop()+",":""}function Zr(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:xr(t[0],n[0])},{i:i-2,x:xr(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}function Br(t,n,e,r){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),r.push({i:e.push(Vr(e)+"rotate(",null,")")-2,x:xr(t,n)})):n&&e.push(Vr(e)+"rotate("+n+")")}function Xr(t,n,e,r){t!==n?r.push({i:e.push(Vr(e)+"skewX(",null,")")-2,x:xr(t,n)
}):n&&e.push(Vr(e)+"skewX("+n+")")}function $r(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push(Vr(e)+"scale(",null,",",null,")");r.push({i:i-4,x:xr(t[0],n[0])},{i:i-2,x:xr(t[1],n[1])})}else 1===n[0]&&1===n[1]||e.push(Vr(e)+"scale("+n+")")}function Jr(t,n){var e=[],r=[];return t=ca.transform(t),n=ca.transform(n),Zr(t.translate,n.translate,e,r),Br(t.rotate,n.rotate,e,r),Xr(t.skew,n.skew,e,r),$r(t.scale,n.scale,e,r),t=n=null,function(t){for(var n,i=-1,o=r.length;++i<o;)e[(n=r[i]).i]=n.x(t);return e.join("")}}function Wr(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Gr(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Kr(t){for(var n=t.source,e=t.target,r=ti(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var o=i.length;e!==r;)i.splice(o,0,e),e=e.parent;return i}function Qr(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function ti(t,n){if(t===n)return t;for(var e=Qr(t),r=Qr(n),i=e.pop(),o=r.pop(),a=null;i===o;)a=i,i=e.pop(),o=r.pop();return a}function ni(t){t.fixed|=2}function ei(t){t.fixed&=-7}function ri(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ii(t){t.fixed&=-5}function oi(t,n,e){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,u=a.length,l=-1;++l<u;)null!=(o=a[l])&&(oi(o,n,e),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var s=n*e[t.point.index];t.charge+=t.pointCharge=s,r+=s*t.point.x,i+=s*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function ai(t,n){return ca.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=hi,t}function ui(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)e.push(i[r])}function li(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)e.push(o[a]);for(;null!=(t=r.pop());)n(t)}function si(t){return t.children}function ci(t){return t.value}function fi(t,n){return n.value-t.value}function hi(t){return ca.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function pi(t){return t.x}function di(t){return t.y}function gi(t,n,e){t.y0=n,t.y=e}function vi(t){return ca.range(t.length)}function yi(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function mi(t){for(var n,e=1,r=0,i=t[0][1],o=t.length;e<o;++e)(n=t[e][1])>i&&(r=e,i=n);return r}function xi(t){return t.reduce(_i,0)}function _i(t,n){return t+n[1]}function bi(t,n){return wi(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function wi(t,n){for(var e=-1,r=+t[0],i=(t[1]-r)/n,o=[];++e<=n;)o[e]=i*e+r;return o}function Mi(t){return[ca.min(t),ca.max(t)]}function ki(t,n){return t.value-n.value}function Si(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function Ni(t,n){t._pack_next=n,n._pack_prev=t}function Ei(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return.999*i*i>e*e+r*r}function Ai(t){function n(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}if((e=t.children)&&(s=e.length)){var e,r,i,o,a,u,l,s,c=1/0,f=-1/0,h=1/0,p=-1/0;if(e.forEach(Ci),r=e[0],r.x=-r.r,r.y=0,n(r),s>1&&(i=e[1],i.x=i.r,i.y=0,n(i),s>2))for(o=e[2],qi(r,i,o),n(o),Si(r,o),r._pack_prev=o,Si(o,i),i=r._pack_next,a=3;a<s;a++){qi(r,i,o=e[a]);var d=0,g=1,v=1;for(u=i._pack_next;u!==i;u=u._pack_next,g++)if(Ei(u,o)){d=1;break}if(1==d)for(l=r._pack_prev;l!==u._pack_prev&&!Ei(l,o);l=l._pack_prev,v++);d?(g<v||g==v&&i.r<r.r?Ni(r,i=u):Ni(r=l,i),a--):(Si(r,o),i=o,n(o))}var y=(c+f)/2,m=(h+p)/2,x=0;for(a=0;a<s;a++)o=e[a],o.x-=y,o.y-=m,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,e.forEach(zi)}}function Ci(t){t._pack_next=t._pack_prev=t}function zi(t){delete t._pack_next,delete t._pack_prev}function Ti(t,n,e,r){var i=t.children;if(t.x=n+=r*t.x,t.y=e+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ti(i[o],n,e,r)}function qi(t,n,e){var r=t.r+e.r,i=n.x-t.x,o=n.y-t.y;if(r&&(i||o)){var a=n.r+e.r,u=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*u),s=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);e.x=t.x+l*i+s*o,e.y=t.y+l*o-s*i}else e.x=t.x+r,e.y=t.y}function Li(t,n){return t.parent==n.parent?1:2}function Oi(t){var n=t.children;return n.length?n[0]:t.t}function ji(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function Ri(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Di(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)n=i[o],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function Pi(t,n,e){return t.a.parent===n.parent?t.a:e}function Ui(t){return 1+ca.max(t,function(t){return t.y})}function Fi(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function Ii(t){var n=t.children;return n&&n.length?Ii(n[0]):t}function Hi(t){var n,e=t.children;return e&&(n=e.length)?Hi(e[n-1]):t}function Yi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Vi(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return i<0&&(e+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:e,y:r,dx:i,dy:o}}function Zi(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}function Bi(t){return t.rangeExtent?t.rangeExtent():Zi(t.range())}function Xi(t,n,e,r){var i=e(t[0],t[1]),o=r(n[0],n[1]);return function(t){return o(i(t))}}function $i(t,n){var e,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Ji(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:bl}function Wi(t,n,e,r){var i=[],o=[],a=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<=u;)i.push(e(t[a-1],t[a])),o.push(r(n[a-1],n[a]));return function(n){var e=ca.bisect(t,n,1,u)-1;return o[e](i[e](n))}}function Gi(t,n,e,r){function i(){var i=Math.min(t.length,n.length)>2?Wi:Xi,l=r?Gr:Wr;return a=i(t,n,l,e),u=i(n,t,l,br),o}function o(t){return a(t)}var a,u;return o.invert=function(t){return u(t)},o.domain=function(n){return arguments.length?(t=n.map(Number),i()):t},o.range=function(t){return arguments.length?(n=t,i()):n},o.rangeRound=function(t){return o.range(t).interpolate(Ur)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(e=t,i()):e},o.ticks=function(n){return no(t,n)},o.tickFormat=function(n,e){return eo(t,n,e)},o.nice=function(n){return Qi(t,n),i()},o.copy=function(){return Gi(t,n,e,r)},i()}function Ki(t,n){return ca.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Qi(t,n){return $i(t,Ji(to(t,n)[2])),$i(t,Ji(to(t,n)[2])),t}function to(t,n){null==n&&(n=10);var e=Zi(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function no(t,n){return ca.range.apply(ca,to(t,n))}function eo(t,n,e){var r=to(t,n);if(e){var i=su.exec(e);if(i.shift(),"s"===i[8]){var o=ca.formatPrefix(Math.max(_a(r[0]),_a(r[1])));return i[7]||(i[7]="."+ro(o.scale(r[2]))),i[8]="f",e=ca.format(i.join("")),function(t){return e(o.scale(t))+o.symbol}}i[7]||(i[7]="."+io(i[8],r)),e=i.join("")}else e=",."+ro(r[2])+"f";return ca.format(e)}function ro(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function io(t,n){var e=ro(n[2]);return t in wl?Math.abs(e-ro(Math.max(_a(n[0]),_a(n[1]))))+ +("e"!==t):e-2*("%"===t)}function oo(t,n,e,r){function i(t){return(e?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function o(t){return e?Math.pow(n,t):-Math.pow(n,-t)}function a(n){return t(i(n))}return a.invert=function(n){return o(t.invert(n))},a.domain=function(n){return arguments.length?(e=n[0]>=0,t.domain((r=n.map(Number)).map(i)),a):r},a.base=function(e){return arguments.length?(n=+e,t.domain(r.map(i)),a):n},a.nice=function(){var n=$i(r.map(i),e?Math:kl);return t.domain(n),r=n.map(o),a},a.ticks=function(){var t=Zi(r),a=[],u=t[0],l=t[1],s=Math.floor(i(u)),c=Math.ceil(i(l)),f=n%1?2:n;if(isFinite(c-s)){if(e){for(;s<c;s++)for(var h=1;h<f;h++)a.push(o(s)*h);a.push(o(s))}else for(a.push(o(s));s++<c;)for(var h=f-1;h>0;h--)a.push(o(s)*h);for(s=0;a[s]<u;s++);for(c=a.length;a[c-1]>l;c--);a=a.slice(s,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return Ml;arguments.length<2?e=Ml:"function"!=typeof e&&(e=ca.format(e));var r=Math.max(1,n*t/a.ticks().length);return function(t){var a=t/o(Math.round(i(t)));return a*n<n-.5&&(a*=n),a<=r?e(t):""}},a.copy=function(){return oo(t.copy(),n,e,r)},Ki(a,t)}function ao(t,n,e){function r(n){return t(i(n))}var i=uo(n),o=uo(1/n);return r.invert=function(n){return o(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain((e=n.map(Number)).map(i)),r):e},r.ticks=function(t){return no(e,t)},r.tickFormat=function(t,n){return eo(e,t,n)},r.nice=function(t){return r.domain(Qi(e,t))},r.exponent=function(a){return arguments.length?(i=uo(n=a),o=uo(1/n),t.domain(e.map(i)),r):n},r.copy=function(){return ao(t.copy(),n,e)},Ki(r,t)}function uo(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function lo(t,n){function e(e){return o[((i.get(e)||("range"===n.t?i.set(e,t.push(e)):NaN))-1)%o.length]}function r(n,e){return ca.range(t.length).map(function(t){return n+e*t})}var i,o,a;return e.domain=function(r){if(!arguments.length)return t;t=[],i=new c;for(var o,a=-1,u=r.length;++a<u;)i.has(o=r[a])||i.set(o,t.push(o));return e[n.t].apply(e,n.a)},e.range=function(t){return arguments.length?(o=t,a=0,n={t:"range",a:arguments},e):o},e.rangePoints=function(i,u){arguments.length<2&&(u=0);var l=i[0],s=i[1],c=t.length<2?(l=(l+s)/2,0):(s-l)/(t.length-1+u);return o=r(l+c*u/2,c),a=0,n={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var l=i[0],s=i[1],c=t.length<2?(l=s=Math.round((l+s)/2),0):(s-l)/(t.length-1+u)|0;return o=r(l+Math.round(c*u/2+(s-l-(t.length-1+u)*c)/2),c),a=0,n={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(i,u,l){arguments.length<2&&(u=0),arguments.length<3&&(l=u);var s=i[1]<i[0],c=i[s-0],f=i[1-s],h=(f-c)/(t.length-u+2*l);return o=r(c+h*l,h),s&&o.reverse(),a=h*(1-u),n={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,u,l){arguments.length<2&&(u=0),arguments.length<3&&(l=u);var s=i[1]<i[0],c=i[s-0],f=i[1-s],h=Math.floor((f-c)/(t.length-u+2*l));return o=r(c+Math.round((f-c-(t.length-u)*h)/2),h),s&&o.reverse(),a=Math.round(h*(1-u)),n={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Zi(n.a[0])},e.copy=function(){return lo(t,n)},e.domain(t)}function so(t,n){function e(){var e=0,r=n.length;for(u=[];++e<r;)u[e-1]=ca.quantile(t,e/r);return a}function a(t){if(!isNaN(t=+t))return n[ca.bisect(u,t)]}var u;return a.domain=function(n){return arguments.length?(t=n.map(i).filter(o).sort(r),e()):t},a.range=function(t){return arguments.length?(n=t,e()):n},a.quantiles=function(){return u},a.invertExtent=function(e){return e=n.indexOf(e),e<0?[NaN,NaN]:[e>0?u[e-1]:t[0],e<u.length?u[e]:t[t.length-1]]},a.copy=function(){return so(t,n)},e()}function co(t,n,e){function r(n){return e[Math.max(0,Math.min(a,Math.floor(o*(n-t))))]}function i(){return o=e.length/(n-t),a=e.length-1,r}var o,a;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],i()):[t,n]},r.range=function(t){return arguments.length?(e=t,i()):e},r.invertExtent=function(n){return n=e.indexOf(n),n=n<0?NaN:n/o+t,[n,n+1/o]},r.copy=function(){return co(t,n,e)},i()}function fo(t,n){function e(e){if(e<=e)return n[ca.bisect(t,e)]}return e.domain=function(n){return arguments.length?(t=n,e):t},e.range=function(t){return arguments.length?(n=t,e):n},e.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},e.copy=function(){return fo(t,n)},e}function ho(t){function n(t){return+t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(n){return no(t,n)},n.tickFormat=function(n,e){return eo(t,n,e)},n.copy=function(){return ho(t)},n}function po(){return 0}function go(t){return t.innerRadius}function vo(t){return t.outerRadius}function yo(t){return t.startAngle}function mo(t){return t.endAngle}function xo(t){return t&&t.padAngle}function _o(t,n,e,r){return(t-e)*n-(n-r)*t>0?0:1}function bo(t,n,e,r,i){var o=t[0]-n[0],a=t[1]-n[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),l=u*a,s=-u*o,c=t[0]+l,f=t[1]+s,h=n[0]+l,p=n[1]+s,d=(c+h)/2,g=(f+p)/2,v=h-c,y=p-f,m=v*v+y*y,x=e-r,_=c*p-h*f,b=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-_*_)),w=(_*y-v*b)/m,M=(-_*v-y*b)/m,k=(_*y+v*b)/m,S=(-_*v+y*b)/m,N=w-d,E=M-g,A=k-d,C=S-g;return N*N+E*E>A*A+C*C&&(w=k,M=S),[[w-l,M-s],[w*e/x,M*e/x]]}function wo(t){function n(n){function a(){s.push("M",o(t(c),u))}for(var l,s=[],c=[],f=-1,h=n.length,p=Et(e),d=Et(r);++f<h;)i.call(this,l=n[f],f)?c.push([+p.call(this,l,f),+d.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),s.length?s.join(""):null}var e=Te,r=qe,i=Tn,o=Mo,a=o.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(i=t,n):i},n.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=zl.get(t)||Mo).key,n):a},n.tension=function(t){return arguments.length?(u=t,n):u},n}function Mo(t){return t.length>1?t.join("L"):t+"Z"}function ko(t){return t.join("L")+"Z"}function So(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function No(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function Eo(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function Ao(t,n){return t.length<4?Mo(t):t[1]+To(t.slice(1,-1),qo(t,n))}function Co(t,n){return t.length<3?ko(t):t[0]+To((t.push(t[0]),t),qo([t[t.length-2]].concat(t,[t[1]]),n))}function zo(t,n){return t.length<3?Mo(t):t[0]+To(t,qo(t,n))}function To(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return Mo(t);var e=t.length!=n.length,r="",i=t[0],o=t[1],a=n[0],u=a,l=1;if(e&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),n.length>1){u=n[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var s=2;s<n.length;s++,l++)o=t[l],u=n[s],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(e){var c=t[l];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function qo(t,n){for(var e,r=[],i=(1-n)/2,o=t[0],a=t[1],u=1,l=t.length;++u<l;)e=o,o=a,a=t[u],r.push([i*(a[0]-e[0]),i*(a[1]-e[1])]);return r}function Lo(t){if(t.length<3)return Mo(t);var n=1,e=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],l=[i,",",o,"L",Do(Ll,a),",",Do(Ll,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),Po(l,a,u);return t.pop(),l.push("L",r),l.join("")}function Oo(t){if(t.length<4)return Mo(t);for(var n,e=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)n=t[r],o.push(n[0]),a.push(n[1]);for(e.push(Do(Ll,o)+","+Do(Ll,a)),--r;++r<i;)n=t[r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),Po(e,o,a);return e.join("")}function jo(t){for(var n,e,r=-1,i=t.length,o=i+4,a=[],u=[];++r<4;)e=t[r%i],a.push(e[0]),u.push(e[1]);for(n=[Do(Ll,a),",",Do(Ll,u)],--r;++r<o;)e=t[r%i],a.shift(),a.push(e[0]),u.shift(),u.push(e[1]),Po(n,a,u);return n.join("")}function Ro(t,n){var e=t.length-1;if(e)for(var r,i,o=t[0][0],a=t[0][1],u=t[e][0]-o,l=t[e][1]-a,s=-1;++s<=e;)r=t[s],i=s/e,r[0]=n*r[0]+(1-n)*(o+i*u),r[1]=n*r[1]+(1-n)*(a+i*l);return Lo(t)}function Do(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Po(t,n,e){t.push("C",Do(Tl,n),",",Do(Tl,e),",",Do(ql,n),",",Do(ql,e),",",Do(Ll,n),",",Do(Ll,e))}function Uo(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Fo(t){for(var n=0,e=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Uo(i,o);++n<e;)r[n]=(a+(a=Uo(i=o,o=t[n+1])))/2;return r[n]=a,r}function Io(t){for(var n,e,r,i,o=[],a=Fo(t),u=-1,l=t.length-1;++u<l;)n=Uo(t[u],t[u+1]),_a(n)<Ra?a[u]=a[u+1]=0:(e=a[u]/n,r=a[u+1]/n,(i=e*e+r*r)>9&&(i=3*n/Math.sqrt(i),a[u]=i*e,a[u+1]=i*r));for(u=-1;++u<=l;)i=(t[Math.min(l,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}function Ho(t){return t.length<3?Mo(t):t[0]+To(t,Io(t))}function Yo(t){for(var n,e,r,i=-1,o=t.length;++i<o;)n=t[i],e=n[0],r=n[1]-Ia,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Vo(t){function n(n){function l(){g.push("M",u(t(y),f),c,s(t(v.reverse()),f),"Z")}for(var h,p,d,g=[],v=[],y=[],m=-1,x=n.length,_=Et(e),b=Et(i),w=e===r?function(){return p}:Et(r),M=i===o?function(){return d}:Et(o);++m<x;)a.call(this,h=n[m],m)?(v.push([p=+_.call(this,h,m),d=+b.call(this,h,m)]),y.push([+w.call(this,h,m),+M.call(this,h,m)])):v.length&&(l(),v=[],y=[]);return v.length&&l(),g.length?g.join(""):null}var e=Te,r=Te,i=0,o=qe,a=Tn,u=Mo,l=u.key,s=u,c="L",f=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(i=o=t,n):o},n.y0=function(t){return arguments.length?(i=t,n):i},n.y1=function(t){return arguments.length?(o=t,n):o},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(l="function"==typeof t?u=t:(u=zl.get(t)||Mo).key,s=u.reverse||u,c=u.closed?"M":"L",n):l},n.tension=function(t){return arguments.length?(f=t,n):f},n}function Zo(t){return t.radius}function Bo(t){return[t.x,t.y]}function Xo(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Ia;return[e*Math.cos(r),e*Math.sin(r)]}}function $o(){return 64}function Jo(){return"circle"}function Wo(t){var n=Math.sqrt(t/Pa);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function Go(t){return function(){var n,e,r;(n=this[t])&&(r=n[e=n.active])&&(r.timer.c=null,r.timer.t=NaN,--n.count?delete n[e]:delete this[t],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ko(t,n,e){return Sa(t,Fl),t.namespace=n,t.id=e,t}function Qo(t,n,e,r){var i=t.id,o=t.namespace;return V(t,"function"==typeof e?function(t,a,u){t[o][i].tween.set(n,r(e.call(t,t.__data__,a,u)))}:(e=r(e),function(t){t[o][i].tween.set(n,e)}))}function ta(t){return null==t&&(t=""),function(){this.textContent=t}}function na(t){return null==t?"__transition__":"__transition_"+t+"__"}function ea(t,n,e,r,i){function o(t){var n=g.delay;if(s.t=n+l,n<=t)return a(t-n);s.c=a}function a(e){var i=d.active,o=d[i];o&&(o.timer.c=null,o.timer.t=NaN,--d.count,delete d[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var a in d)if(+a<r){var c=d[a];c.timer.c=null,c.timer.t=NaN,--d.count,delete d[a]}s.c=u,qt(function(){return s.c&&u(e||1)&&(s.c=null,s.t=NaN),1},0,l),d.active=r,g.event&&g.event.start.call(t,t.__data__,n),p=[],g.tween.forEach(function(e,r){(r=r.call(t,t.__data__,n))&&p.push(r)}),h=g.ease,f=g.duration}function u(i){for(var o=i/f,a=h(o),u=p.length;u>0;)p[--u].call(t,a);if(o>=1)return g.event&&g.event.end.call(t,t.__data__,n),--d.count?delete d[r]:delete t[e],1}var l,s,f,h,p,d=t[e]||(t[e]={active:0,count:0}),g=d[r];g||(l=i.time,s=qt(o,0,l),g=d[r]={tween:new c,time:l,timer:s,delay:i.delay,duration:i.duration,ease:i.ease,index:n},i=null,++d.count)}function ra(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"})}function ia(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"})}function oa(t){return t.toISOString()}function aa(t,n,e){function r(n){return t(n)}function i(t,e){var r=t[1]-t[0],i=r/e,o=ca.bisect(Jl,i);return o==Jl.length?[n.year,to(t.map(function(t){return t/31536e6}),e)[2]]:o?n[i/Jl[o-1]<Jl[o]/i?o-1:o]:[Kl,to(t,e)[2]]}return r.invert=function(n){return ua(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(ua)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,ua(+e+1),n).length}var o=r.domain(),a=Zi(o),u=null==t?i(a,10):"number"==typeof t&&i(a,t);return u&&(t=u[0],n=u[1]),r.domain($i(o,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=ua(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=ua(+n+1);return n}}:t))},r.ticks=function(t,n){var e=Zi(r.domain()),o=null==t?i(e,10):"number"==typeof t?i(e,t):!t.range&&[{range:t},n];return o&&(t=o[0],n=o[1]),t.range(e[0],ua(+e[1]+1),n<1?1:n)},r.tickFormat=function(){return e},r.copy=function(){return aa(t.copy(),n,e)},Ki(r,t)}function ua(t){return new Date(t)}function la(t){return JSON.parse(t.responseText)}function sa(t){var n=pa.createRange();return n.selectNode(pa.body),n.createContextualFragment(t.responseText)}var ca={version:"3.5.12"},fa=[].slice,ha=function(t){return fa.call(t)},pa=this.document;if(pa)try{ha(pa.documentElement.childNodes)[0].nodeType}catch(t){ha=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),pa)try{pa.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var da=this.Element.prototype,ga=da.setAttribute,va=da.setAttributeNS,ya=this.CSSStyleDeclaration.prototype,ma=ya.setProperty;da.setAttribute=function(t,n){ga.call(this,t,n+"")},da.setAttributeNS=function(t,n,e){va.call(this,t,n,e+"")},ya.setProperty=function(t,n,e){ma.call(this,t,n+"",e)}}ca.ascending=r,ca.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},ca.min=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&e>r&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&e>r&&(e=r)}return e},ca.max=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&r>e&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&r>e&&(e=r)}return e},ca.extent=function(t,n){var e,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){e=i=r;break}for(;++o<a;)null!=(r=t[o])&&(e>r&&(e=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=n.call(t,t[o],o))&&r>=r){e=i=r;break}for(;++o<a;)null!=(r=n.call(t,t[o],o))&&(e>r&&(e=r),i<r&&(i=r))}return[e,i]},ca.sum=function(t,n){var e,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)o(e=+t[a])&&(r+=e);else for(;++a<i;)o(e=+n.call(t,t[a],a))&&(r+=e);return r},ca.mean=function(t,n){var e,r=0,a=t.length,u=-1,l=a;if(1===arguments.length)for(;++u<a;)o(e=i(t[u]))?r+=e:--l;else for(;++u<a;)o(e=i(n.call(t,t[u],u)))?r+=e:--l;if(l)return r/l},ca.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],o=e-r;return o?i+o*(t[r]-i):i},ca.median=function(t,n){var e,a=[],u=t.length,l=-1;if(1===arguments.length)for(;++l<u;)o(e=i(t[l]))&&a.push(e);else for(;++l<u;)o(e=i(n.call(t,t[l],l)))&&a.push(e);if(a.length)return ca.quantile(a.sort(r),.5)},ca.variance=function(t,n){var e,r,a=t.length,u=0,l=0,s=-1,c=0;if(1===arguments.length)for(;++s<a;)o(e=i(t[s]))&&(r=e-u,u+=r/++c,l+=r*(e-u));else for(;++s<a;)o(e=i(n.call(t,t[s],s)))&&(r=e-u,u+=r/++c,l+=r*(e-u));if(c>1)return l/(c-1)},ca.deviation=function(){var t=ca.variance.apply(this,arguments);return t?Math.sqrt(t):t};var xa=a(r);ca.bisectLeft=xa.left,ca.bisect=ca.bisectRight=xa.right,ca.bisector=function(t){return a(1===t.length?function(n,e){return r(t(n),e)}:t)},ca.shuffle=function(t,n,e){(o=arguments.length)<3&&(e=t.length,o<2&&(n=0));for(var r,i,o=e-n;o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},ca.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},ca.pairs=function(t){for(var n=0,e=t.length-1,r=t[0],i=new Array(e<0?0:e);n<e;)i[n]=[r,r=t[++n]];return i},ca.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=ca.min(arguments,u),e=new Array(n);++t<n;)for(var r,i=-1,o=e[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return e},ca.transpose=function(t){return ca.zip.apply(ca,t)},ca.keys=function(t){var n=[];for(var e in t)n.push(e);return n},ca.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},ca.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},ca.merge=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(r=t[i],n=r.length;--n>=0;)e[--a]=r[n];return e};var _a=Math.abs;ca.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,i=[],o=l(_a(e)),a=-1;if(t*=o,n*=o,e*=o,e<0)for(;(r=t+e*++a)>n;)i.push(r/o);else for(;(r=t+e*++a)<n;)i.push(r/o);return i},ca.map=function(t,n){var e=new c;if(t instanceof c)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var ba="__proto__",wa="\0";s(c,{has:p,get:function(t){return this._[f(t)]},set:function(t,n){return this._[f(t)]=n},remove:d,keys:g,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:h(n),value:this._[n]});return t},size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n),this._[n])}}),ca.nest=function(){function t(n,a,u){if(u>=o.length)return r?r.call(i,a):e?a.sort(e):a;for(var l,s,f,h,p=-1,d=a.length,g=o[u++],v=new c;++p<d;)(h=v.get(l=g(s=a[p])))?h.push(s):v.set(l,[s]);return n?(s=n(),f=function(e,r){s.set(e,t(n,r,u))}):(s={},f=function(e,r){s[e]=t(n,r,u)}),v.forEach(f),s}function n(t,e){if(e>=o.length)return t;var r=[],i=a[e++];return t.forEach(function(t,i){r.push({key:t,values:n(i,e)})}),i?r.sort(function(t,n){return i(t.key,n.key)}):r}var e,r,i={},o=[],a=[];return i.map=function(n,e){return t(e,n,0)},i.entries=function(e){return n(t(ca.map,e,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return e=t,i},i.rollup=function(t){return r=t,i},i},ca.set=function(t){var n=new m;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},s(m,{has:p,add:function(t){return this._[f(t+="")]=!0,t},remove:d,values:g,size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n))}}),ca.behavior={},ca.rebind=function(t,n){for(var e,r=1,i=arguments.length;++r<i;)t[e=arguments[r]]=_(t,n,n[e]);return t};var Ma=["webkit","ms","moz","Moz","o","O"];ca.dispatch=function(){for(var t=new M,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=k(t);return t},M.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ca.event=null,ca.requote=function(t){return t.replace(ka,"\\$&")};var ka=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},Na=function(t,n){return n.querySelector(t)},Ea=function(t,n){return n.querySelectorAll(t)},Aa=function(t,n){var e=t.matches||t[b(t,"matchesSelector")];return(Aa=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(Na=function(t,n){return Sizzle(t,n)[0]||null},Ea=Sizzle,Aa=Sizzle.matchesSelector),ca.selection=function(){return ca.select(pa.documentElement)};var Ca=ca.selection.prototype=[];Ca.select=function(t){var n,e,r,i,o=[];t=C(t);for(var a=-1,u=this.length;++a<u;){o.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var l=-1,s=r.length;++l<s;)(i=r[l])?(n.push(e=t.call(i,i.__data__,l,a)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return A(o)},Ca.selectAll=function(t){var n,e,r=[];t=z(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,l=a.length;++u<l;)(e=a[u])&&(r.push(n=ha(t.call(e,e.__data__,u,i))),n.parentNode=e);return A(r)};var za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ca.ns={prefix:za,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),za.hasOwnProperty(e)?{space:za[e],local:t}:t}},Ca.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=ca.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(T(n,t[n]));return this}return this.each(T(t,n))},Ca.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=O(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!L(t[i]).test(n))return!1;return!0}for(n in t)this.each(j(n,t[n]));return this}return this.each(j(t,n))},Ca.style=function(t,n,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(n="");for(r in t)this.each(D(r,t[r],n));return this}if(i<2){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(D(t,n,r))},Ca.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(P(n,t[n]));return this}return this.each(P(t,n))},Ca.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ca.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ca.append=function(t){return t=U(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ca.insert=function(t,n){return t=U(t),n=C(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},Ca.remove=function(){return this.each(F)},Ca.data=function(t,n){function e(t,e){var r,i,o,a=t.length,f=e.length,h=Math.min(a,f),p=new Array(f),d=new Array(f),g=new Array(a);if(n){var v,y=new c,m=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(y.has(v=n.call(i,i.__data__,r))?g[r]=i:y.set(v,i),m[r]=v);for(r=-1;++r<f;)(i=y.get(v=n.call(e,o=e[r],r)))?!0!==i&&(p[r]=i,i.__data__=o):d[r]=I(o),y.set(v,!0);for(r=-1;++r<a;)r in m&&!0!==y.get(m[r])&&(g[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):d[r]=I(o);for(;r<f;++r)d[r]=I(e[r]);for(;r<a;++r)g[r]=t[r]}d.update=p,d.parentNode=p.parentNode=g.parentNode=t.parentNode,u.push(d),l.push(p),s.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var u=Z([]),l=A([]),s=A([]);if("function"==typeof t)for(;++o<a;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],t);return l.enter=function(){return u},l.exit=function(){return s},l},Ca.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ca.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return A(i)},Ca.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},Ca.sort=function(t){t=Y.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},Ca.each=function(t){return V(this,function(n,e,r){t.call(n,n.__data__,e,r)})},Ca.call=function(t){var n=ha(arguments);return t.apply(n[0]=this,n),this},Ca.empty=function(){return!this.node()},Ca.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},Ca.size=function(){var t=0;return V(this,function(){++t}),t};var Ta=[];ca.selection.enter=Z,ca.selection.enter.prototype=Ta,Ta.append=Ca.append,Ta.empty=Ca.empty,Ta.node=Ca.node,Ta.call=Ca.call,
Ta.size=Ca.size,Ta.select=function(t){for(var n,e,r,i,o,a=[],u=-1,l=this.length;++u<l;){r=(i=this[u]).update,a.push(n=[]),n.parentNode=i.parentNode;for(var s=-1,c=i.length;++s<c;)(o=i[s])?(n.push(r[s]=e=t.call(i.parentNode,o.__data__,s,u)),e.__data__=o.__data__):n.push(null)}return A(a)},Ta.insert=function(t,n){return arguments.length<2&&(n=B(this)),Ca.insert.call(this,t,n)},ca.select=function(t){var e;return"string"==typeof t?(e=[Na(t,pa)],e.parentNode=pa.documentElement):(e=[t],e.parentNode=n(t)),A([e])},ca.selectAll=function(t){var n;return"string"==typeof t?(n=ha(Ea(t,pa)),n.parentNode=pa.documentElement):(n=ha(t),n.parentNode=null),A([n])},Ca.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n=!1);for(e in t)this.each(X(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(X(t,n,e))};var qa=ca.map({mouseenter:"mouseover",mouseleave:"mouseout"});pa&&qa.forEach(function(t){"on"+t in pa&&qa.remove(t)});var La,Oa=0;ca.mouse=function(t){return G(t,N())};var ja=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ca.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=N().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return G(t,r)},ca.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,n,e,o,a){return function(){function u(){var t,e,r=n(h,g);r&&(t=r[0]-x[0],e=r[1]-x[1],d|=t|e,x=r,p({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:e}))}function l(){n(h,g)&&(y.on(o+v,null).on(a+v,null),m(d),p({type:"dragend"}))}var s,c=this,f=ca.event.target,h=c.parentNode,p=r.of(c,arguments),d=0,g=t(),v=".drag"+(null==g?"":"-"+g),y=ca.select(e(f)).on(o+v,u).on(a+v,l),m=W(f),x=n(h,g);i?(s=i.apply(c,arguments),s=[s.x-x[0],s.y-x[1]]):s=[0,0],p({type:"dragstart"})}}var r=E(t,"drag","dragstart","dragend"),i=null,o=n(w,ca.mouse,e,"mousemove","mouseup"),a=n(K,ca.touch,x,"touchmove","touchend");return t.origin=function(n){return arguments.length?(i=n,t):i},ca.rebind(t,r,"on")},ca.touches=function(t,n){return arguments.length<2&&(n=N().touches),n?ha(n).map(function(n){var e=G(t,n);return e.identifier=n.identifier,e}):[]};var Ra=1e-6,Da=Ra*Ra,Pa=Math.PI,Ua=2*Pa,Fa=Ua-Ra,Ia=Pa/2,Ha=Pa/180,Ya=180/Pa,Va=Math.SQRT2;ca.interpolateZoom=function(t,n){var e,r,i=t[0],o=t[1],a=t[2],u=n[0],l=n[1],s=n[2],c=u-i,f=l-o,h=c*c+f*f;if(h<Da)r=Math.log(s/a)/Va,e=function(t){return[i+t*c,o+t*f,a*Math.exp(Va*t*r)]};else{var p=Math.sqrt(h),d=(s*s-a*a+4*h)/(2*a*2*p),g=(s*s-a*a-4*h)/(2*s*2*p),v=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-v)/Va,e=function(t){var n=t*r,e=it(v),u=a/(2*p)*(e*ot(Va*n+v)-rt(v));return[i+u*c,o+u*f,a*e/it(Va*n+v)]}}return e.duration=1e3*r,e},ca.behavior.zoom=function(){function t(t){t.on(T,f).on(Ba+".zoom",p).on("dblclick.zoom",d).on(O,h)}function n(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function r(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}function i(t){k.k=Math.max(A[0],Math.min(A[1],t))}function o(t,n){n=r(n),k.x+=t[0]-n[0],k.y+=t[1]-n[1]}function a(n,e,r,a){n.__chart__={x:k.x,y:k.y,k:k.k},i(Math.pow(2,a)),o(v=e,r),n=ca.select(n),C>0&&(n=n.transition().duration(C)),n.call(t.event)}function u(){b&&b.domain(_.range().map(function(t){return(t-k.x)/k.k}).map(_.invert)),M&&M.domain(w.range().map(function(t){return(t-k.y)/k.k}).map(w.invert))}function l(t){z++||t({type:"zoomstart"})}function s(t){u(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function c(t){--z||(t({type:"zoomend"}),v=null)}function f(){function t(){u=1,o(ca.mouse(i),h),s(a)}function r(){f.on(q,null).on(L,null),p(u),c(a)}var i=this,a=j.of(i,arguments),u=0,f=ca.select(e(i)).on(q,t).on(L,r),h=n(ca.mouse(i)),p=W(i);Ul.call(i),l(a)}function h(){function t(){var t=ca.touches(d);return p=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var n=ca.event.target;ca.select(n).on(_,r).on(b,u),w.push(n);for(var e=ca.event.changedTouches,i=0,o=e.length;i<o;++i)v[e[i].identifier]=null;var l=t(),s=Date.now();if(1===l.length){if(s-x<500){var c=l[0];a(d,c,v[c.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}x=s}else if(l.length>1){var c=l[0],f=l[1],h=c[0]-f[0],p=c[1]-f[1];y=h*h+p*p}}function r(){var t,n,e,r,a=ca.touches(d);Ul.call(d);for(var u=0,l=a.length;u<l;++u,r=null)if(e=a[u],r=v[e.identifier]){if(n)break;t=e,n=r}if(r){var c=(c=e[0]-t[0])*c+(c=e[1]-t[1])*c,f=y&&Math.sqrt(c/y);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+r[0])/2,(n[1]+r[1])/2],i(f*p)}x=null,o(t,n),s(g)}function u(){if(ca.event.touches.length){for(var n=ca.event.changedTouches,e=0,r=n.length;e<r;++e)delete v[n[e].identifier];for(var i in v)return void t()}ca.selectAll(w).on(m,null),M.on(T,f).on(O,h),N(),c(g)}var p,d=this,g=j.of(d,arguments),v={},y=0,m=".zoom-"+ca.event.changedTouches[0].identifier,_="touchmove"+m,b="touchend"+m,w=[],M=ca.select(d),N=W(d);e(),l(g),M.on(T,null).on(O,e)}function p(){var t=j.of(this,arguments);m?clearTimeout(m):(Ul.call(this),g=n(v=y||ca.mouse(this)),l(t)),m=setTimeout(function(){m=null,c(t)},50),S(),i(Math.pow(2,.002*Za())*k.k),o(v,g),s(t)}function d(){var t=ca.mouse(this),e=Math.log(k.k)/Math.LN2;a(this,t,n(t),ca.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,v,y,m,x,_,b,w,M,k={x:0,y:0,k:1},N=[960,500],A=Xa,C=250,z=0,T="mousedown.zoom",q="mousemove.zoom",L="mouseup.zoom",O="touchstart.zoom",j=E(t,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in pa?(Za=function(){return-ca.event.deltaY*(ca.event.deltaMode?120:1)},"wheel"):"onmousewheel"in pa?(Za=function(){return ca.event.wheelDelta},"mousewheel"):(Za=function(){return-ca.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=j.of(this,arguments),n=k;Dl?ca.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var e=N[0],r=N[1],i=v?v[0]:e/2,o=v?v[1]:r/2,a=ca.interpolateZoom([(i-k.x)/k.k,(o-k.y)/k.k,e/k.k],[(i-n.x)/n.k,(o-n.y)/n.k,e/n.k]);return function(n){var r=a(n),u=e/r[2];this.__chart__=k={x:i-r[0]*u,y:o-r[1]*u,k:u},s(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=k,l(t),s(t),c(t))})},t.translate=function(n){return arguments.length?(k={x:+n[0],y:+n[1],k:k.k},u(),t):[k.x,k.y]},t.scale=function(n){return arguments.length?(k={x:k.x,y:k.y,k:null},i(+n),u(),t):k.k},t.scaleExtent=function(n){return arguments.length?(A=null==n?Xa:[+n[0],+n[1]],t):A},t.center=function(n){return arguments.length?(y=n&&[+n[0],+n[1]],t):y},t.size=function(n){return arguments.length?(N=n&&[+n[0],+n[1]],t):N},t.duration=function(n){return arguments.length?(C=+n,t):C},t.x=function(n){return arguments.length?(b=n,_=n.copy(),k={x:0,y:0,k:1},t):b},t.y=function(n){return arguments.length?(M=n,w=n.copy(),k={x:0,y:0,k:1},t):M},ca.rebind(t,j,"on")};var Za,Ba,Xa=[0,1/0];ca.color=ut,ut.prototype.toString=function(){return this.rgb()+""},ca.hsl=lt;var $a=lt.prototype=new ut;$a.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,this.l/t)},$a.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,t*this.l)},$a.rgb=function(){return st(this.h,this.s,this.l)},ca.hcl=ct;var Ja=ct.prototype=new ut;Ja.brighter=function(t){return new ct(this.h,this.c,Math.min(100,this.l+Wa*(arguments.length?t:1)))},Ja.darker=function(t){return new ct(this.h,this.c,Math.max(0,this.l-Wa*(arguments.length?t:1)))},Ja.rgb=function(){return ft(this.h,this.c,this.l).rgb()},ca.lab=ht;var Wa=18,Ga=.95047,Ka=1,Qa=1.08883,tu=ht.prototype=new ut;tu.brighter=function(t){return new ht(Math.min(100,this.l+Wa*(arguments.length?t:1)),this.a,this.b)},tu.darker=function(t){return new ht(Math.max(0,this.l-Wa*(arguments.length?t:1)),this.a,this.b)},tu.rgb=function(){return pt(this.l,this.a,this.b)},ca.rgb=mt;var nu=mt.prototype=new ut;nu.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,i=30;return n||e||r?(n&&n<i&&(n=i),e&&e<i&&(e=i),r&&r<i&&(r=i),new mt(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new mt(i,i,i)},nu.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},nu.hsl=function(){return Mt(this.r,this.g,this.b)},nu.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var eu=ca.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eu.forEach(function(t,n){eu.set(t,xt(n))}),ca.functor=Et,ca.xhr=At(x),ca.dsv=function(t,n){function e(t,e,o){arguments.length<3&&(o=e,e=null);var a=Ct(t,n,null==e?r:i(e),o);return a.row=function(t){return arguments.length?a.response(null==(e=t)?r:i(t)):e},a}function r(t){return e.parse(t.responseText)}function i(t){return function(n){return e.parse(n.responseText,t)}}function o(n){return n.map(a).join(t)}function a(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,function(t,e){if(r)return r(t,e-1);var i=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");r=n?function(t,e){return n(i(t),e)}:i})},e.parseRows=function(t,n){function e(){if(c>=s)return a;if(i)return i=!1,o;var n=c;if(34===t.charCodeAt(n)){for(var e=n;e++<s;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}c=e+2;var r=t.charCodeAt(e+1);return 13===r?(i=!0,10===t.charCodeAt(e+2)&&++c):10===r&&(i=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;c<s;){var r=t.charCodeAt(c++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(r!==l)continue;return t.slice(n,c-u)}return t.slice(n)}for(var r,i,o={},a={},u=[],s=t.length,c=0,f=0;(r=e())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=e();n&&null==(h=n(h,f++))||u.push(h)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new m,i=[];return n.forEach(function(t){for(var n in t)r.has(n)||i.push(r.add(n))}),[i.map(a).join(t)].concat(n.map(function(n){return i.map(function(t){return a(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(o).join("\n")},e},ca.csv=ca.dsv(",","text/csv"),ca.tsv=ca.dsv("\t","text/tab-separated-values");var ru,iu,ou,au,uu=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ca.timer=function(){qt.apply(this,arguments)},ca.timer.flush=function(){Ot(),jt()},ca.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var lu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Dt);ca.formatPrefix=function(t,n){var e=0;return(t=+t)&&(t<0&&(t*=-1),n&&(t=ca.round(t,Rt(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),lu[8+e/3]};var su=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,cu=ca.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=ca.round(t,Rt(t,n))).toFixed(Math.max(0,Math.min(20,Rt(t*(1+1e-15),n))))}}),fu=ca.time={},hu=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){pu.setUTCDate.apply(this._,arguments)},setDay:function(){pu.setUTCDay.apply(this._,arguments)},setFullYear:function(){pu.setUTCFullYear.apply(this._,arguments)},setHours:function(){pu.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){pu.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){pu.setUTCMinutes.apply(this._,arguments)},setMonth:function(){pu.setUTCMonth.apply(this._,arguments)},setSeconds:function(){pu.setUTCSeconds.apply(this._,arguments)},setTime:function(){pu.setTime.apply(this._,arguments)}};var pu=Date.prototype;fu.year=It(function(t){return t=fu.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),fu.years=fu.year.range,fu.years.utc=fu.year.utc.range,fu.day=It(function(t){var n=new hu(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),fu.days=fu.day.range,fu.days.utc=fu.day.utc.range,fu.dayOfYear=function(t){var n=fu.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=fu[t]=It(function(t){return(t=fu.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=fu.year(t).getDay();return Math.floor((fu.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});fu[t+"s"]=e.range,fu[t+"s"].utc=e.utc.range,fu[t+"OfYear"]=function(t){var e=fu.year(t).getDay();return Math.floor((fu.dayOfYear(t)+(e+n)%7)/7)}}),fu.week=fu.sunday,fu.weeks=fu.sunday.range,fu.weeks.utc=fu.sunday.utc.range,fu.weekOfYear=fu.sundayOfYear;var du={"-":"",_:" ",0:"0"},gu=/^\s*\d+/,vu=/^%/;ca.locale=function(t){return{numberFormat:Pt(t),timeFormat:Yt(t)}};var yu=ca.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ca.format=yu.numberFormat,ca.geo={},fn.prototype={s:0,t:0,add:function(t){hn(t,this.t,mu),hn(mu.s,this.s,this),this.s?this.t+=mu.t:this.s=mu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var mu=new fn;ca.geo.stream=function(t,n){t&&xu.hasOwnProperty(t.type)?xu[t.type](t,n):pn(t,n)};var xu={Feature:function(t,n){pn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)pn(e[r].geometry,n)}},_u={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){dn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)dn(e[r],n,0)},Polygon:function(t,n){gn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)gn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)pn(e[r],n)}};ca.geo.area=function(t){return bu=0,ca.geo.stream(t,Mu),bu};var bu,wu=new fn,Mu={sphere:function(){bu+=4*Pa},point:w,lineStart:w,lineEnd:w,polygonStart:function(){wu.reset(),Mu.lineStart=vn},polygonEnd:function(){var t=2*wu;bu+=t<0?4*Pa+t:t,Mu.lineStart=Mu.lineEnd=Mu.point=w}};ca.geo.bounds=function(){function t(t,n){x.push(_=[c=t,h=t]),n<f&&(f=n),n>p&&(p=n)}function n(n,e){var r=yn([n*Ha,e*Ha]);if(y){var i=xn(y,r),o=[i[1],-i[0],0],a=xn(o,i);wn(a),a=Mn(a);var l=n-d,s=l>0?1:-1,g=a[0]*Ya*s,v=_a(l)>180;if(v^(s*d<g&&g<s*n)){var m=a[1]*Ya;m>p&&(p=m)}else if(g=(g+360)%360-180,v^(s*d<g&&g<s*n)){var m=-a[1]*Ya;m<f&&(f=m)}else e<f&&(f=e),e>p&&(p=e);v?n<d?u(c,n)>u(c,h)&&(h=n):u(n,h)>u(c,h)&&(c=n):h>=c?(n<c&&(c=n),n>h&&(h=n)):n>d?u(c,n)>u(c,h)&&(h=n):u(n,h)>u(c,h)&&(c=n)}else t(n,e);y=r,d=n}function e(){b.point=n}function r(){_[0]=c,_[1]=h,b.point=t,y=null}function i(t,e){if(y){var r=t-d;m+=_a(r)>180?r+(r>0?360:-360):r}else g=t,v=e;Mu.point(t,e),n(t,e)}function o(){Mu.lineStart()}function a(){i(g,v),Mu.lineEnd(),_a(m)>Ra&&(c=-(h=180)),_[0]=c,_[1]=h,y=null}function u(t,n){return(n-=t)<0?n+360:n}function l(t,n){return t[0]-n[0]}function s(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var c,f,h,p,d,g,v,y,m,x,_,b={point:t,lineStart:e,lineEnd:r,polygonStart:function(){b.point=i,b.lineStart=o,b.lineEnd=a,m=0,Mu.polygonStart()},polygonEnd:function(){Mu.polygonEnd(),b.point=t,b.lineStart=e,b.lineEnd=r,wu<0?(c=-(h=180),f=-(p=90)):m>Ra?p=90:m<-Ra&&(f=-90),_[0]=c,_[1]=h}};return function(t){p=h=-(c=f=1/0),x=[],ca.geo.stream(t,b);var n=x.length;if(n){x.sort(l);for(var e,r=1,i=x[0],o=[i];r<n;++r)e=x[r],s(e[0],i)||s(e[1],i)?(u(i[0],e[1])>u(i[0],i[1])&&(i[1]=e[1]),u(e[0],i[1])>u(i[0],i[1])&&(i[0]=e[0])):o.push(i=e);for(var a,e,d=-1/0,n=o.length-1,r=0,i=o[n];r<=n;i=e,++r)e=o[r],(a=u(i[1],e[0]))>d&&(d=a,c=e[0],h=i[1])}return x=_=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,p]]}}(),ca.geo.centroid=function(t){ku=Su=Nu=Eu=Au=Cu=zu=Tu=qu=Lu=Ou=0,ca.geo.stream(t,ju);var n=qu,e=Lu,r=Ou,i=n*n+e*e+r*r;return i<Da&&(n=Cu,e=zu,r=Tu,Su<Ra&&(n=Nu,e=Eu,r=Au),(i=n*n+e*e+r*r)<Da)?[NaN,NaN]:[Math.atan2(e,n)*Ya,et(r/Math.sqrt(i))*Ya]};var ku,Su,Nu,Eu,Au,Cu,zu,Tu,qu,Lu,Ou,ju={sphere:w,point:Sn,lineStart:En,lineEnd:An,polygonStart:function(){ju.lineStart=Cn},polygonEnd:function(){ju.lineStart=En}},Ru=jn(Tn,Un,In,[-Pa,-Pa/2]),Du=1e9;ca.geo.clipExtent=function(){var t,n,e,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(u){return arguments.length?(o=Zn(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[t,n],[e,r]]}};return a.extent([[0,0],[960,500]])},(ca.geo.conicEqualArea=function(){return Bn(Xn)}).raw=Xn,ca.geo.albers=function(){return ca.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ca.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return n=null,e(o,a),n||(r(o,a),n)||i(o,a),n}var n,e,r,i,o=ca.geo.albers(),a=ca.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ca.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=o.scale(),e=o.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},t.stream=function(t){var n=o.stream(t),e=a.stream(t),r=u.stream(t);return{point:function(t,i){n.point(t,i),e.point(t,i),r.point(t,i)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(o.precision(n),a.precision(n),u.precision(n),t):o.precision()},t.scale=function(n){return arguments.length?(o.scale(n),a.scale(.35*n),u.scale(n),t.translate(o.translate())):o.scale()},t.translate=function(n){if(!arguments.length)return o.translate();var s=o.scale(),c=+n[0],f=+n[1];return e=o.translate(n).clipExtent([[c-.455*s,f-.238*s],[c+.455*s,f+.238*s]]).stream(l).point,r=a.translate([c-.307*s,f+.201*s]).clipExtent([[c-.425*s+Ra,f+.12*s+Ra],[c-.214*s-Ra,f+.234*s-Ra]]).stream(l).point,i=u.translate([c-.205*s,f+.212*s]).clipExtent([[c-.214*s+Ra,f+.166*s+Ra],[c-.115*s-Ra,f+.234*s-Ra]]).stream(l).point,t},t.scale(1070)};var Pu,Uu,Fu,Iu,Hu,Yu,Vu={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Uu=0,Vu.lineStart=$n},polygonEnd:function(){Vu.lineStart=Vu.lineEnd=Vu.point=w,Pu+=_a(Uu/2)}},Zu={point:Jn,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Bu={point:Kn,lineStart:Qn,lineEnd:te,polygonStart:function(){Bu.lineStart=ne},polygonEnd:function(){Bu.point=Kn,Bu.lineStart=Qn,Bu.lineEnd=te}};ca.geo.path=function(){function t(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),a&&a.valid||(a=i(o)),ca.geo.stream(t,a)),o.result()}function n(){return a=null,t}var e,r,i,o,a,u=4.5;return t.area=function(t){return Pu=0,ca.geo.stream(t,i(Vu)),Pu},t.centroid=function(t){return Nu=Eu=Au=Cu=zu=Tu=qu=Lu=Ou=0,ca.geo.stream(t,i(Bu)),Ou?[qu/Ou,Lu/Ou]:Tu?[Cu/Tu,zu/Tu]:Au?[Nu/Au,Eu/Au]:[NaN,NaN]},t.bounds=function(t){return Hu=Yu=-(Fu=Iu=1/0),ca.geo.stream(t,i(Zu)),[[Fu,Iu],[Hu,Yu]]},t.projection=function(t){return arguments.length?(i=(e=t)?t.stream||ie(t):x,n()):e},t.context=function(t){return arguments.length?(o=null==(r=t)?new Wn:new ee(t),"function"!=typeof u&&o.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(o.pointRadius(+n),+n),t):u},t.projection(ca.geo.albersUsa()).context(null)},ca.geo.transform=function(t){return{stream:function(n){var e=new oe(n);for(var r in t)e[r]=t[r];return e}}},oe.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ca.geo.projection=ue,ca.geo.projectionMutator=le,(ca.geo.equirectangular=function(){return ue(fe)}).raw=fe.invert=fe,ca.geo.rotation=function(t){function n(n){return n=t(n[0]*Ha,n[1]*Ha),n[0]*=Ya,n[1]*=Ya,n}return t=pe(t[0]%360*Ha,t[1]*Ha,t.length>2?t[2]*Ha:0),n.invert=function(n){return n=t.invert(n[0]*Ha,n[1]*Ha),n[0]*=Ya,n[1]*=Ya,n},n},he.invert=fe,ca.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=pe(-t[0]*Ha,-t[1]*Ha,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Ya,t[1]*=Ya}}),{type:"Polygon",coordinates:[i]}}var n,e,r=[0,0],i=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=ye((n=+r)*Ha,i*Ha),t):n},t.precision=function(r){return arguments.length?(e=ye(n*Ha,(i=+r)*Ha),t):i},t.angle(90)},ca.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Ha,i=t[1]*Ha,o=n[1]*Ha,a=Math.sin(r),u=Math.cos(r),l=Math.sin(i),s=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((e=f*a)*e+(e=s*c-l*f*u)*e),l*c+s*f*u)},ca.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return ca.range(Math.ceil(o/v)*v,i,v).map(h).concat(ca.range(Math.ceil(s/y)*y,l,y).map(p)).concat(ca.range(Math.ceil(r/d)*d,e,d).filter(function(t){return _a(t%v)>Ra}).map(c)).concat(ca.range(Math.ceil(u/g)*g,a,g).filter(function(t){return _a(t%y)>Ra}).map(f))}var e,r,i,o,a,u,l,s,c,f,h,p,d=10,g=d,v=90,y=360,m=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(l).slice(1),h(i).reverse().slice(1),p(s).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],s=+n[0][1],l=+n[1][1],o>i&&(n=o,o=i,i=n),s>l&&(n=s,s=l,l=n),t.precision(m)):[[o,s],[i,l]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],a=+n[1][1],r>e&&(n=r,r=e,e=n),u>a&&(n=u,u=a,a=n),t.precision(m)):[[r,u],[e,a]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],y=+n[1],t):[v,y]},t.minorStep=function(n){return arguments.length?(d=+n[0],g=+n[1],t):[d,g]},t.precision=function(n){return arguments.length?(m=+n,c=xe(u,a,90),f=_e(r,e,m),h=xe(s,l,90),p=_e(o,i,m),t):m},t.majorExtent([[-180,-90+Ra],[180,90-Ra]]).minorExtent([[-180,-80-Ra],[180,80+Ra]])},ca.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||i.apply(this,arguments)]}}var n,e,r=be,i=we;return t.distance=function(){return ca.geo.distance(n||r.apply(this,arguments),e||i.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.precision=function(){return arguments.length?t:0},t},ca.geo.interpolate=function(t,n){return Me(t[0]*Ha,t[1]*Ha,n[0]*Ha,n[1]*Ha)},ca.geo.length=function(t){return Xu=0,ca.geo.stream(t,$u),Xu};var Xu,$u={sphere:w,point:w,lineStart:ke,lineEnd:w,polygonStart:w,polygonEnd:w},Ju=Se(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ca.geo.azimuthalEqualArea=function(){return ue(Ju)}).raw=Ju;var Wu=Se(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},x);(ca.geo.azimuthalEquidistant=function(){return ue(Wu)}).raw=Wu,(ca.geo.conicConformal=function(){return Bn(Ne)}).raw=Ne,(ca.geo.conicEquidistant=function(){return Bn(Ee)}).raw=Ee;var Gu=Se(function(t){return 1/t},Math.atan);(ca.geo.gnomonic=function(){return ue(Gu)}).raw=Gu,Ae.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Ia]},(ca.geo.mercator=function(){return Ce(Ae)}).raw=Ae;var Ku=Se(function(){return 1},Math.asin);(ca.geo.orthographic=function(){return ue(Ku)}).raw=Ku;var Qu=Se(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ca.geo.stereographic=function(){return ue(Qu)}).raw=Qu,ze.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Ia]},(ca.geo.transverseMercator=function(){var t=Ce(ze),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90])}).raw=ze,ca.geom={},ca.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,i=Et(e),o=Et(r),a=t.length,u=[],l=[];for(n=0;n<a;n++)u.push([+i.call(this,t[n],n),+o.call(this,t[n],n),n]);for(u.sort(Oe),n=0;n<a;n++)l.push([u[n][0],-u[n][1]]);var s=Le(u),c=Le(l),f=c[0]===s[0],h=c[c.length-1]===s[s.length-1],p=[];for(n=s.length-1;n>=0;--n)p.push(t[u[s[n]][2]]);for(n=+f;n<c.length-h;++n)p.push(t[u[c[n]][2]]);return p}var e=Te,r=qe;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n)},ca.geom.polygon=function(t){return Sa(t,tl),t};var tl=ca.geom.polygon.prototype=[];tl.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],i=0;++n<e;)t=r,r=this[n],i+=t[1]*r[0]-t[0]*r[1];return.5*i},tl.centroid=function(t){var n,e,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o*t,a*t]},tl.clip=function(t){for(var n,e,r,i,o,a,u=De(t),l=-1,s=this.length-De(this),c=this[s-1];++l<s;){for(n=t.slice(),t.length=0,i=this[l],o=n[(r=n.length-u)-1],e=-1;++e<r;)a=n[e],je(a,c,i)?(je(o,c,i)||t.push(Re(o,a,c,i)),t.push(a)):je(o,c,i)&&t.push(Re(o,a,c,i)),o=a;u&&t.push(t[0]),c=i}return t};var nl,el,rl,il,ol,al=[],ul=[];Ze.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)t=n[e].edge,t.b&&t.a||n.splice(e,1);return n.sort(Xe),n.length},rr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ir.prototype={insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=lr(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(ar(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ur(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(ur(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ar(this,r))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?lr(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=a,a.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(n=i.R,n.C&&(n.C=!1,i.C=!0,ar(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,ur(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,ar(this,i),t=this._;break}}else if(n=i.L,n.C&&(n.C=!1,i.C=!0,ur(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,ar(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,ur(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ca.geom.voronoi=function(t){function n(t){var n=new Array(t.length),r=u[0][0],i=u[0][1],o=u[1][0],a=u[1][1];return sr(e(t),u).cells.forEach(function(e,u){var l=e.edges,s=e.site;(n[u]=l.length?l.map(function(t){var n=t.start();return[n.x,n.y]}):s.x>=r&&s.x<=o&&s.y>=i&&s.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[]).point=t[u]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(o(t,n)/Ra)*Ra,y:Math.round(a(t,n)/Ra)*Ra,i:n}})}var r=Te,i=qe,o=r,a=i,u=ll;return t?n(t):(n.links=function(t){return sr(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return sr(e(t)).cells.forEach(function(e,r){for(var i,o=e.site,a=e.edges.sort(Xe),u=-1,l=a.length,s=a[l-1].edge,c=s.l===o?s.r:s.l;++u<l;)s,i=c,s=a[u].edge,c=s.l===o?s.r:s.l,r<i.i&&r<c.i&&fr(o,i,c)<0&&n.push([t[r],t[i.i],t[c.i]])}),n},n.x=function(t){return arguments.length?(o=Et(r=t),n):r},
n.y=function(t){return arguments.length?(a=Et(i=t),n):i},n.clipExtent=function(t){return arguments.length?(u=null==t?ll:t,n):u===ll?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===ll?null:u&&u[1]},n)};var ll=[[-1e6,-1e6],[1e6,1e6]];ca.geom.delaunay=function(t){return ca.geom.voronoi().triangles(t)},ca.geom.quadtree=function(t,n,e,r,i){function o(t){function o(t,n,e,r,i,o,a,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(_a(l-e)+_a(c-r)<.01)s(t,n,e,r,i,o,a,u);else{var f=t.point;t.x=t.y=t.point=null,s(t,f,l,c,i,o,a,u),s(t,n,e,r,i,o,a,u)}else t.x=e,t.y=r,t.point=n}else s(t,n,e,r,i,o,a,u)}function s(t,n,e,r,i,a,u,l){var s=.5*(i+u),c=.5*(a+l),f=e>=s,h=r>=c,p=h<<1|f;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=dr()),f?i=s:u=s,h?a=c:l=c,o(t,n,e,r,i,a,u,l)}var c,f,h,p,d,g,v,y,m,x=Et(u),_=Et(l);if(null!=n)g=n,v=e,y=r,m=i;else if(y=m=-(g=v=1/0),f=[],h=[],d=t.length,a)for(p=0;p<d;++p)c=t[p],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>y&&(y=c.x),c.y>m&&(m=c.y),f.push(c.x),h.push(c.y);else for(p=0;p<d;++p){var b=+x(c=t[p],p),w=+_(c,p);b<g&&(g=b),w<v&&(v=w),b>y&&(y=b),w>m&&(m=w),f.push(b),h.push(w)}var M=y-g,k=m-v;M>k?m=v+M:y=g+k;var S=dr();if(S.add=function(t){o(S,t,+x(t,++p),+_(t,p),g,v,y,m)},S.visit=function(t){gr(t,S,g,v,y,m)},S.find=function(t){return vr(S,t[0],t[1],g,v,y,m)},p=-1,null==n){for(;++p<d;)o(S,t[p],f[p],h[p],g,v,y,m);--p}else t.forEach(S.add);return f=h=t=c=null,S}var a,u=Te,l=qe;return(a=arguments.length)?(u=hr,l=pr,3===a&&(i=e,r=n,e=n=0),o(t)):(o.x=function(t){return arguments.length?(u=t,o):u},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==n?null:[[n,e],[r,i]]},o.size=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=e=0,r=+t[0],i=+t[1]),o):null==n?null:[r-n,i-e]},o)},ca.interpolateRgb=yr,ca.interpolateObject=mr,ca.interpolateNumber=xr,ca.interpolateString=_r;var sl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cl=new RegExp(sl.source,"g");ca.interpolate=br,ca.interpolators=[function(t,n){var e=void 0===n?"undefined":se(n);return("string"===e?eu.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?yr:_r:n instanceof ut?yr:Array.isArray(n)?wr:"object"===e&&isNaN(n)?mr:xr)(t,n)}],ca.interpolateArray=wr;var fl=function(){return x},hl=ca.map({linear:fl,poly:Cr,quad:function(){return Nr},cubic:function(){return Er},sin:function(){return zr},exp:function(){return Tr},circle:function(){return qr},elastic:Lr,back:Or,bounce:function(){return jr}}),pl=ca.map({in:x,out:kr,"in-out":Sr,"out-in":function(t){return Sr(kr(t))}});ca.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.slice(0,n):t,r=n>=0?t.slice(n+1):"in";return e=hl.get(e)||fl,r=pl.get(r)||x,Mr(r(e.apply(null,fa.call(arguments,1))))},ca.interpolateHcl=Rr,ca.interpolateHsl=Dr,ca.interpolateLab=Pr,ca.interpolateRound=Ur,ca.transform=function(t){var n=pa.createElementNS(ca.ns.prefix.svg,"g");return(ca.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Fr(e?e.matrix:dl)})(t)},Fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var dl={a:1,b:0,c:0,d:1,e:0,f:0};ca.interpolateTransform=Jr,ca.layout={},ca.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Kr(t[e]));return n}},ca.layout.chord=function(){function t(){var t,s,f,h,p,d={},g=[],v=ca.range(o),y=[];for(e=[],r=[],t=0,h=-1;++h<o;){for(s=0,p=-1;++p<o;)s+=i[h][p];g.push(s),y.push(ca.range(o)),t+=s}for(a&&v.sort(function(t,n){return a(g[t],g[n])}),u&&y.forEach(function(t,n){t.sort(function(t,e){return u(i[n][t],i[n][e])})}),t=(Ua-c*o)/t,s=0,h=-1;++h<o;){for(f=s,p=-1;++p<o;){var m=v[h],x=y[m][p],_=i[m][x],b=s,w=s+=_*t;d[m+"-"+x]={index:m,subindex:x,startAngle:b,endAngle:w,value:_}}r[m]={index:m,startAngle:f,endAngle:s,value:g[m]},s+=c}for(h=-1;++h<o;)for(p=h-1;++p<o;){var M=d[h+"-"+p],k=d[p+"-"+h];(M.value||k.value)&&e.push(M.value<k.value?{source:k,target:M}:{source:M,target:k})}l&&n()}function n(){e.sort(function(t,n){return l((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,r,i,o,a,u,l,s={},c=0;return s.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,e=r=null,s):i},s.padding=function(t){return arguments.length?(c=t,e=r=null,s):c},s.sortGroups=function(t){return arguments.length?(a=t,e=r=null,s):a},s.sortSubgroups=function(t){return arguments.length?(u=t,e=null,s):u},s.sortChords=function(t){return arguments.length?(l=t,e&&n(),s):l},s.chords=function(){return e||t(),e},s.groups=function(){return r||t(),r},s},ca.layout.force=function(){function t(t){return function(n,e,r,i){if(n.point!==t){var o=n.cx-t.x,a=n.cy-t.y,u=i-e,l=o*o+a*a;if(u*u/y<l){if(l<g){var s=n.charge/l;t.px-=o*s,t.py-=a*s}return!0}if(n.point&&l&&l<g){var s=n.pointCharge/l;t.px-=o*s,t.py-=a*s}}return!n.charge}}function n(t){t.px=ca.event.x,t.py=ca.event.y,l.resume()}var e,r,i,o,a,u,l={},s=ca.dispatch("start","tick","end"),c=[1,1],f=.9,h=gl,p=vl,d=-30,g=yl,v=.1,y=.64,m=[],_=[];return l.tick=function(){if((i*=.99)<.005)return e=null,s.end({type:"end",alpha:i=0}),!0;var n,r,l,h,p,g,y,x,b,w=m.length,M=_.length;for(r=0;r<M;++r)l=_[r],h=l.source,p=l.target,x=p.x-h.x,b=p.y-h.y,(g=x*x+b*b)&&(g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,x*=g,b*=g,p.x-=x*(y=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=b*y,h.x+=x*(y=1-y),h.y+=b*y);if((y=i*v)&&(x=c[0]/2,b=c[1]/2,r=-1,y))for(;++r<w;)l=m[r],l.x+=(x-l.x)*y,l.y+=(b-l.y)*y;if(d)for(oi(n=ca.geom.quadtree(m),i,u),r=-1;++r<w;)(l=m[r]).fixed||n.visit(t(l));for(r=-1;++r<w;)l=m[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);s.tick({type:"tick",alpha:i})},l.nodes=function(t){return arguments.length?(m=t,l):m},l.links=function(t){return arguments.length?(_=t,l):_},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.friction=function(t){return arguments.length?(f=+t,l):f},l.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(y=t*t,l):Math.sqrt(y)},l.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(e.c=null,e.t=NaN,e=null,s.end({type:"end",alpha:i=0})):t>0&&(s.start({type:"start",alpha:i=t}),e=qt(l.tick)),l):i},l.start=function(){function t(t,r){if(!e){for(e=new Array(i),l=0;l<i;++l)e[l]=[];for(l=0;l<s;++l){var o=_[l];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,u=e[n],l=-1,c=u.length;++l<c;)if(!isNaN(a=u[l][t]))return a;return Math.random()*r}var n,e,r,i=m.length,s=_.length,f=c[0],g=c[1];for(n=0;n<i;++n)(r=m[n]).index=n,r.weight=0;for(n=0;n<s;++n)r=_[n],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(n=0;n<i;++n)r=m[n],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof h)for(n=0;n<s;++n)o[n]=+h.call(this,_[n],n);else for(n=0;n<s;++n)o[n]=h;if(a=[],"function"==typeof p)for(n=0;n<s;++n)a[n]=+p.call(this,_[n],n);else for(n=0;n<s;++n)a[n]=p;if(u=[],"function"==typeof d)for(n=0;n<i;++n)u[n]=+d.call(this,m[n],n);else for(n=0;n<i;++n)u[n]=d;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(r||(r=ca.behavior.drag().origin(x).on("dragstart.force",ni).on("drag.force",n).on("dragend.force",ei)),!arguments.length)return r;this.on("mouseover.force",ri).on("mouseout.force",ii).call(r)},ca.rebind(l,s,"on")};var gl=20,vl=1,yl=1/0;ca.layout.hierarchy=function(){function t(i){var o,a=[i],u=[];for(i.depth=0;null!=(o=a.pop());)if(u.push(o),(s=e.call(t,o,o.depth))&&(l=s.length)){for(var l,s,c;--l>=0;)a.push(c=s[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=s}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return li(i,function(t){var e,i;n&&(e=t.children)&&e.sort(n),r&&(i=t.parent)&&(i.value+=t.value)}),u}var n=fi,e=si,r=ci;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(ui(n,function(t){t.children&&(t.value=0)}),li(n,function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},ca.layout.partition=function(){function t(n,e,r,i){var o=n.children;if(n.x=e,n.y=n.depth*i,n.dx=r,n.dy=i,o&&(a=o.length)){var a,u,l,s=-1;for(r=n.value?r/n.value:0;++s<a;)t(u=o[s],e,l=u.value*r,i),e+=l}}function n(t){var e=t.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,n(e[o]));return 1+r}function e(e,o){var a=r.call(this,e,o);return t(a[0],0,i[0],i[1]/n(a[0])),a}var r=ca.layout.hierarchy(),i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},ai(e,r)},ca.layout.pie=function(){function t(a){var u,l=a.length,s=a.map(function(e,r){return+n.call(t,e,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),p=h*(f<0?-1:1),d=ca.sum(s),g=d?(f-l*p)/d:0,v=ca.range(l),y=[];return null!=e&&v.sort(e===ml?function(t,n){return s[n]-s[t]}:function(t,n){return e(a[t],a[n])}),v.forEach(function(t){y[t]={data:a[t],value:u=s[t],startAngle:c,endAngle:c+=u*g+p,padAngle:h}}),y}var n=Number,e=ml,r=0,i=Ua,o=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(i=n,t):i},t.padAngle=function(n){return arguments.length?(o=n,t):o},t};var ml={};ca.layout.stack=function(){function t(u,l){if(!(h=u.length))return u;var s=u.map(function(e,r){return n.call(t,e,r)}),c=s.map(function(n){return n.map(function(n,e){return[o.call(t,n,e),a.call(t,n,e)]})}),f=e.call(t,c,l);s=ca.permute(s,f),c=ca.permute(c,f);var h,p,d,g,v=r.call(t,c,l),y=s[0].length;for(d=0;d<y;++d)for(i.call(t,s[0][d],g=v[d],c[0][d][1]),p=1;p<h;++p)i.call(t,s[p][d],g+=c[p-1][d][1],c[p][d][1]);return u}var n=x,e=vi,r=yi,i=gi,o=pi,a=di;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:xl.get(n)||vi,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:_l.get(n)||yi,t):r},t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(a=n,t):a},t.out=function(n){return arguments.length?(i=n,t):i},t};var xl=ca.map({"inside-out":function(t){var n,e,r=t.length,i=t.map(mi),o=t.map(xi),a=ca.range(r).sort(function(t,n){return i[t]-i[n]}),u=0,l=0,s=[],c=[];for(n=0;n<r;++n)e=a[n],u<l?(u+=o[e],s.push(e)):(l+=o[e],c.push(e));return c.reverse().concat(s)},reverse:function(t){return ca.range(t.length).reverse()},default:vi}),_l=ca.map({silhouette:function(t){var n,e,r,i=t.length,o=t[0].length,a=[],u=0,l=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];r>u&&(u=r),a.push(r)}for(e=0;e<o;++e)l[e]=(u-a[e])/2;return l},wiggle:function(t){var n,e,r,i,o,a,u,l,s,c=t.length,f=t[0],h=f.length,p=[];for(p[0]=l=s=0,e=1;e<h;++e){for(n=0,i=0;n<c;++n)i+=t[n][e][1];for(n=0,o=0,u=f[e][0]-f[e-1][0];n<c;++n){for(r=0,a=(t[n][e][1]-t[n][e-1][1])/(2*u);r<n;++r)a+=(t[r][e][1]-t[r][e-1][1])/u;o+=a*t[n][e][1]}p[e]=l-=i?o/i*u:0,l<s&&(s=l)}for(e=0;e<h;++e)p[e]-=s;return p},expand:function(t){var n,e,r,i=t.length,o=t[0].length,a=1/i,u=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];if(r)for(n=0;n<i;n++)t[n][e][1]/=r;else for(n=0;n<i;n++)t[n][e][1]=a}for(e=0;e<o;++e)u[e]=0;return u},zero:yi});ca.layout.histogram=function(){function t(t,o){for(var a,u,l=[],s=t.map(e,this),c=r.call(this,s,o),f=i.call(this,c,s,o),o=-1,h=s.length,p=f.length-1,d=n?1:1/h;++o<p;)a=l[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(p>0)for(o=-1;++o<h;)(u=s[o])>=c[0]&&u<=c[1]&&(a=l[ca.bisect(f,u,1,p)-1],a.y+=d,a.push(t[o]));return l}var n=!0,e=Number,r=Mi,i=bi;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=Et(n),t):r},t.bins=function(n){return arguments.length?(i="number"==typeof n?function(t){return wi(t,n)}:Et(n),t):i},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},ca.layout.pack=function(){function t(t,o){var a=e.call(this,t,o),u=a[0],l=i[0],s=i[1],c=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,li(u,function(t){t.r=+c(t.value)}),li(u,Ai),r){var f=r*(n?1:Math.max(2*u.r/l,2*u.r/s))/2;li(u,function(t){t.r+=f}),li(u,Ai),li(u,function(t){t.r-=f})}return Ti(u,l/2,s/2,n?1:1/Math.max(2*u.r/l,2*u.r/s)),a}var n,e=ca.layout.hierarchy().sort(ki),r=0,i=[1,1];return t.size=function(n){return arguments.length?(i=n,t):i},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},ai(t,e)},ca.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),f=c[0],h=n(f);if(li(h,e),h.parent.m=-h.z,ui(h,r),s)ui(f,o);else{var p=f,d=f,g=f;ui(f,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>g.depth&&(g=t)});var v=u(p,d)/2-p.x,y=l[0]/(d.x+u(d,p)/2+v),m=l[1]/(g.depth||1);ui(f,function(t){t.x=(t.x+v)*y,t.y=t.depth*m})}return c}function n(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var i,o=n.children,a=0,u=o.length;a<u;++a)r.push((o[a]=i={_:o[a],parent:n,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return e.children[0]}function e(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){Di(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+u(t._,r._));t.parent.A=i(t,r,t.parent.A||e[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,n,e){if(n){for(var r,i=t,o=t,a=n,l=i.parent.children[0],s=i.m,c=o.m,f=a.m,h=l.m;a=ji(a),i=Oi(i),a&&i;)l=Oi(l),o=ji(o),o.a=t,r=a.z+f-i.z-s+u(a._,i._),r>0&&(Ri(Pi(a,t,e),t,r),s+=r,c+=r),f+=a.m,s+=i.m,h+=l.m,c+=o.m;a&&!ji(o)&&(o.t=a,o.m+=f-c),i&&!Oi(l)&&(l.t=i,l.m+=s-h,e=t)}return e}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=ca.layout.hierarchy().sort(null).value(null),u=Li,l=[1,1],s=null;return t.separation=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(s=null==(l=n)?o:null,t):s?null:l},t.nodeSize=function(n){return arguments.length?(s=null==(l=n)?null:o,t):s?l:null},ai(t,a)},ca.layout.cluster=function(){function t(t,o){var a,u=n.call(this,t,o),l=u[0],s=0;li(l,function(t){var n=t.children;n&&n.length?(t.x=Fi(n),t.y=Ui(n)):(t.x=a?s+=e(t,a):0,t.y=0,a=t)});var c=Ii(l),f=Hi(l),h=c.x-e(c,f)/2,p=f.x+e(f,c)/2;return li(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),u}var n=ca.layout.hierarchy().sort(null).value(null),e=Li,r=[1,1],i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(i=null==(r=n),t):i?null:r},t.nodeSize=function(n){return arguments.length?(i=null!=(r=n),t):i?r:null},ai(t,n)},ca.layout.treemap=function(){function t(t,n){for(var e,r,i=-1,o=t.length;++i<o;)r=(e=t[i]).value*(n<0?0:n),e.area=isNaN(r)||r<=0?0:r}function n(e){var o=e.children;if(o&&o.length){var a,u,l,s=f(e),c=[],h=o.slice(),d=1/0,g="slice"===p?s.dx:"dice"===p?s.dy:"slice-dice"===p?1&e.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(t(h,s.dx*s.dy/e.value),c.area=0;(l=h.length)>0;)c.push(a=h[l-1]),c.area+=a.area,"squarify"!==p||(u=r(c,g))<=d?(h.pop(),d=u):(c.area-=c.pop().area,i(c,g,s,!1),g=Math.min(s.dx,s.dy),c.length=c.area=0,d=1/0);c.length&&(i(c,g,s,!0),c.length=c.area=0),o.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var o,a=f(n),u=r.slice(),l=[];for(t(u,a.dx*a.dy/n.value),l.area=0;o=u.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!u.length),l.length=l.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(e=t[a].area)&&(e<o&&(o=e),e>i&&(i=e));return r*=r,n*=n,r?Math.max(n*i*d/r,r/(n*o*d)):1/0}function i(t,n,e,r){var i,o=-1,a=t.length,u=e.x,s=e.y,c=n?l(t.area/n):0;if(n==e.dx){for((r||c>e.dy)&&(c=e.dy);++o<a;)i=t[o],i.x=u,i.y=s,i.dy=c,u+=i.dx=Math.min(e.x+e.dx-u,c?l(i.area/c):0);i.z=!0,i.dx+=e.x+e.dx-u,e.y+=c,e.dy-=c}else{for((r||c>e.dx)&&(c=e.dx);++o<a;)i=t[o],i.x=u,i.y=s,i.dx=c,s+=i.dy=Math.min(e.y+e.dy-s,c?l(i.area/c):0);i.z=!1,i.dy+=e.y+e.dy-s,e.x+=c,e.dx-=c}}function o(r){var i=a||u(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=s[0],o.dy=s[1]):o.dx=o.dy=0,a&&u.revalue(o),t([o],o.dx*o.dy/o.value),(a?e:n)(o),h&&(a=i),i}var a,u=ca.layout.hierarchy(),l=Math.round,s=[1,1],c=null,f=Yi,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(s=t,o):s},o.padding=function(t){function n(n){var e=t.call(o,n,n.depth);return null==e?Yi(n):Vi(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return Vi(n,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Yi:"function"===(r=void 0===t?"undefined":se(t))?n:"number"===r?(t=[t,t,t,t],e):e,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(h=t,a=null,o):h},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},ai(o,u)},ca.random={normal:function(t,n){var e=arguments.length;return e<2&&(n=1),e<1&&(t=0),function(){var e,r,i;do{e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r}while(!i||i>1);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ca.random.normal.apply(ca,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=ca.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;e<t;e++)n+=Math.random();return n}}},ca.scale={};var bl={floor:x,ceil:x};ca.scale.linear=function(){return Gi([0,1],[0,1],br,!1)};var wl={s:1,g:1,p:1,r:1,e:1};ca.scale.log=function(){return oo(ca.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ca.format(".0e"),kl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ca.scale.pow=function(){return ao(ca.scale.linear(),1,[0,1])},ca.scale.sqrt=function(){return ca.scale.pow().exponent(.5)},ca.scale.ordinal=function(){return lo([],{t:"range",a:[[]]})},ca.scale.category10=function(){return ca.scale.ordinal().range(Sl)},ca.scale.category20=function(){return ca.scale.ordinal().range(Nl)},ca.scale.category20b=function(){return ca.scale.ordinal().range(El)},ca.scale.category20c=function(){return ca.scale.ordinal().range(Al)};var Sl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(_t),Nl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(_t),El=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(_t),Al=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(_t);ca.scale.quantile=function(){return so([],[])},ca.scale.quantize=function(){return co(0,1,[0,1])},ca.scale.threshold=function(){return fo([.5],[0,1])},ca.scale.identity=function(){return ho([0,1])},ca.svg={},ca.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),s=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Ia,f=u.apply(this,arguments)-Ia,h=Math.abs(f-c),p=c>f?0:1;if(s<t&&(d=s,s=t,t=d),h>=Fa)return n(s,p)+(t?n(t,1-p):"")+"Z";var d,g,v,y,m,x,_,b,w,M,k,S,N=0,E=0,A=[];if((y=(+l.apply(this,arguments)||0)/2)&&(v=o===Cl?Math.sqrt(t*t+s*s):+o.apply(this,arguments),p||(E*=-1),s&&(E=et(v/s*Math.sin(y))),t&&(N=et(v/t*Math.sin(y)))),s){m=s*Math.cos(c+E),x=s*Math.sin(c+E),_=s*Math.cos(f-E),b=s*Math.sin(f-E);var C=Math.abs(f-c-2*E)<=Pa?0:1;if(E&&_o(m,x,_,b)===p^C){var z=(c+f)/2;m=s*Math.cos(z),x=s*Math.sin(z),_=b=null}}else m=x=0;if(t){w=t*Math.cos(f-N),M=t*Math.sin(f-N),k=t*Math.cos(c+N),S=t*Math.sin(c+N);var T=Math.abs(c-f+2*N)<=Pa?0:1;if(N&&_o(w,M,k,S)===1-p^T){var q=(c+f)/2;w=t*Math.cos(q),M=t*Math.sin(q),k=S=null}}else w=M=0;if(h>Ra&&(d=Math.min(Math.abs(s-t)/2,+i.apply(this,arguments)))>.001){g=t<s^p?0:1;var L=d,O=d;if(h<Pa){var j=null==k?[w,M]:null==_?[m,x]:Re([m,x],[k,S],[_,b],[w,M]),R=m-j[0],D=x-j[1],P=_-j[0],U=b-j[1],F=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),I=Math.sqrt(j[0]*j[0]+j[1]*j[1]);O=Math.min(d,(t-I)/(F-1)),L=Math.min(d,(s-I)/(F+1))}if(null!=_){var H=bo(null==k?[w,M]:[k,S],[m,x],s,L,p),Y=bo([_,b],[w,M],s,L,p);d===L?A.push("M",H[0],"A",L,",",L," 0 0,",g," ",H[1],"A",s,",",s," 0 ",1-p^_o(H[1][0],H[1][1],Y[1][0],Y[1][1]),",",p," ",Y[1],"A",L,",",L," 0 0,",g," ",Y[0]):A.push("M",H[0],"A",L,",",L," 0 1,",g," ",Y[0])}else A.push("M",m,",",x);if(null!=k){var V=bo([m,x],[k,S],t,-O,p),Z=bo([w,M],null==_?[m,x]:[_,b],t,-O,p);d===O?A.push("L",Z[0],"A",O,",",O," 0 0,",g," ",Z[1],"A",t,",",t," 0 ",p^_o(Z[1][0],Z[1][1],V[1][0],V[1][1]),",",1-p," ",V[1],"A",O,",",O," 0 0,",g," ",V[0]):A.push("L",Z[0],"A",O,",",O," 0 0,",g," ",V[0])}else A.push("L",w,",",M)}else A.push("M",m,",",x),null!=_&&A.push("A",s,",",s," 0 ",C,",",p," ",_,",",b),A.push("L",w,",",M),null!=k&&A.push("A",t,",",t," 0 ",T,",",1-p," ",k,",",S);return A.push("Z"),A.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=go,r=vo,i=po,o=Cl,a=yo,u=mo,l=xo;return t.innerRadius=function(n){return arguments.length?(e=Et(n),t):e},t.outerRadius=function(n){return arguments.length?(r=Et(n),t):r},t.cornerRadius=function(n){return arguments.length?(i=Et(n),t):i},t.padRadius=function(n){return arguments.length?(o=n==Cl?Cl:Et(n),t):o},t.startAngle=function(n){return arguments.length?(a=Et(n),t):a},t.endAngle=function(n){return arguments.length?(u=Et(n),t):u},t.padAngle=function(n){return arguments.length?(l=Et(n),t):l},t.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +u.apply(this,arguments))/2-Ia;return[Math.cos(n)*t,Math.sin(n)*t]},t};var Cl="auto";ca.svg.line=function(){return wo(x)};var zl=ca.map({linear:Mo,"linear-closed":ko,step:So,"step-before":No,"step-after":Eo,basis:Lo,"basis-open":Oo,"basis-closed":jo,bundle:Ro,cardinal:zo,"cardinal-open":Ao,"cardinal-closed":Co,monotone:Ho});zl.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Tl=[0,2/3,1/3,0],ql=[0,1/3,2/3,0],Ll=[0,1/6,2/3,1/6];ca.svg.line.radial=function(){var t=wo(Yo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},No.reverse=Eo,Eo.reverse=No,ca.svg.area=function(){return Vo(x)},ca.svg.area.radial=function(){var t=Vo(Yo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ca.svg.chord=function(){function t(t,u){var l=n(this,o,t,u),s=n(this,a,t,u);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,s)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,s.r,s.p0)+r(s.r,s.p1,s.a1-s.a0)+i(s.r,s.p1,l.r,l.p0))+"Z"}function n(t,n,e,r){var i=n.call(t,e,r),o=u.call(t,i,r),a=l.call(t,i,r)-Ia,c=s.call(t,i,r)-Ia;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function e(t,n){return t.a0==n.a0&&t.a1==n.a1}function r(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Pa)+",1 "+n}function i(t,n,e,r){return"Q 0,0 "+r}var o=be,a=we,u=Zo,l=yo,s=mo;return t.radius=function(n){return arguments.length?(u=Et(n),t):u},t.source=function(n){return arguments.length?(o=Et(n),t):o},t.target=function(n){return arguments.length?(a=Et(n),t):a},t.startAngle=function(n){return arguments.length?(l=Et(n),t):l},t.endAngle=function(n){return arguments.length?(s=Et(n),t):s},t},ca.svg.diagonal=function(){function t(t,i){var o=n.call(this,t,i),a=e.call(this,t,i),u=(o.y+a.y)/2,l=[o,{x:o.x,y:u},{x:a.x,y:u},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var n=be,e=we,r=Bo;return t.source=function(e){return arguments.length?(n=Et(e),t):n},t.target=function(n){return arguments.length?(e=Et(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},ca.svg.diagonal.radial=function(){var t=ca.svg.diagonal(),n=Bo,e=t.projection;return t.projection=function(t){return arguments.length?e(Xo(n=t)):n},t},ca.svg.symbol=function(){function t(t,r){return(Ol.get(n.call(this,t,r))||Wo)(e.call(this,t,r))}var n=Jo,e=$o;return t.type=function(e){return arguments.length?(n=Et(e),t):n},t.size=function(n){return arguments.length?(e=Et(n),t):e},t};var Ol=ca.map({circle:Wo,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Rl)),e=n*Rl;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/jl),e=n*jl/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/jl),e=n*jl/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});ca.svg.symbolTypes=Ol.keys();var jl=Math.sqrt(3),Rl=Math.tan(30*Ha);Ca.transition=function(t){for(var n,e,r=Dl||++Il,i=na(t),o=[],a=Pl||{time:Date.now(),ease:Ar,delay:0,duration:250},u=-1,l=this.length;++u<l;){o.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(e=s[c])&&ea(e,c,i,r,a),n.push(e)}return Ko(o,i,r)},Ca.interrupt=function(t){return this.each(null==t?Ul:Go(na(t)))};var Dl,Pl,Ul=Go(na()),Fl=[],Il=0;Fl.call=Ca.call,Fl.empty=Ca.empty,Fl.node=Ca.node,Fl.size=Ca.size,ca.transition=function(t,n){return t&&t.transition?Dl?t.transition(n):t:ca.selection().transition(t)},ca.transition.prototype=Fl,Fl.select=function(t){var n,e,r,i=this.id,o=this.namespace,a=[];t=C(t);for(var u=-1,l=this.length;++u<l;){a.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(r=s[c])&&(e=t.call(r,r.__data__,c,u))?("__data__"in r&&(e.__data__=r.__data__),ea(e,c,o,i,r[o][i]),n.push(e)):n.push(null)}return Ko(a,o,i)},Fl.selectAll=function(t){var n,e,r,i,o,a=this.id,u=this.namespace,l=[];t=z(t);for(var s=-1,c=this.length;++s<c;)for(var f=this[s],h=-1,p=f.length;++h<p;)if(r=f[h]){o=r[u][a],e=t.call(r,r.__data__,h,s),l.push(n=[]);for(var d=-1,g=e.length;++d<g;)(i=e[d])&&ea(i,d,u,a,o),n.push(i)}return Ko(l,u,a)},Fl.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]);for(var e=this[o],u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return Ko(i,this.namespace,this.id)},Fl.tween=function(t,n){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(t):V(this,null==n?function(n){n[r][e].tween.remove(t)}:function(i){i[r][e].tween.set(t,n)})},Fl.attr=function(t,n){function e(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(u);return e!==t&&(n=a(e,t),function(t){this.setAttribute(u,n(t))})})}function o(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(u.space,u.local);return e!==t&&(n=a(e,t),function(t){this.setAttributeNS(u.space,u.local,n(t))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var a="transform"==t?Jr:br,u=ca.ns.qualify(t);return Qo(this,"attr."+t,n,u.local?o:i)},Fl.attrTween=function(t,n){function e(t,e){var r=n.call(this,t,e,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,e){var r=n.call(this,t,e,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=ca.ns.qualify(t);return this.tween("attr."+t,i.local?r:e)},Fl.style=function(t,n,r){function i(){this.style.removeProperty(t)}function o(n){return null==n?i:(n+="",function(){var i,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(i=br(o,n),function(n){this.style.setProperty(t,i(n),r)})})}var a=arguments.length;if(a<3){if("string"!=typeof t){a<2&&(n="");for(r in t)this.style(r,t[r],n);return this}r=""}return Qo(this,"style."+t,n,o)},Fl.styleTween=function(t,n,r){function i(i,o){var a=n.call(this,i,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(n){this.style.setProperty(t,a(n),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Fl.text=function(t){return Qo(this,"text",t,ta)},Fl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Fl.ease=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].ease:("function"!=typeof t&&(t=ca.ease.apply(ca,arguments)),V(this,function(r){r[e][n].ease=t}))},Fl.delay=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].delay:V(this,"function"==typeof t?function(r,i,o){r[e][n].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[e][n].delay=t}))},Fl.duration=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].duration:V(this,"function"==typeof t?function(r,i,o){r[e][n].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))},Fl.each=function(t,n){var e=this.id,r=this.namespace;if(arguments.length<2){var i=Pl,o=Dl;try{Dl=e,V(this,function(n,i,o){Pl=n[r][e],t.call(n,n.__data__,i,o)})}finally{Pl=i,Dl=o}}else V(this,function(i){var o=i[r][e];(o.event||(o.event=ca.dispatch("start","end","interrupt"))).on(t,n)});return this},Fl.transition=function(){for(var t,n,e,r,i=this.id,o=++Il,a=this.namespace,u=[],l=0,s=this.length;l<s;l++){u.push(t=[]);for(var n=this[l],c=0,f=n.length;c<f;c++)(e=n[c])&&(r=e[a][i],ea(e,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(e)}return Ko(u,a,o)},ca.svg.axis=function(){function t(t){t.each(function(){var t,s=ca.select(this),c=this.__chart__||e,f=this.__chart__=e.copy(),h=null==l?f.ticks?f.ticks.apply(f,u):f.domain():l,p=null==n?f.tickFormat?f.tickFormat.apply(f,u):x:n,d=s.selectAll(".tick").data(h,f),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ra),v=ca.transition(d.exit()).style("opacity",Ra).remove(),y=ca.transition(d.order()).style("opacity",1),m=Math.max(i,0)+a,_=Bi(f),b=s.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),ca.transition(b));g.append("line"),g.append("text");var M,k,S,N,E=g.select("line"),A=y.select("line"),C=d.select("text").text(p),z=g.select("text"),T=y.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ra,M="x",S="y",k="x2",N="y2",C.attr("dy",q<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+q*o+"V0H"+_[1]+"V"+q*o)):(t=ia,M="y",S="x",k="y2",N="x2",C.attr("dy",".32em").style("text-anchor",q<0?"end":"start"),w.attr("d","M"+q*o+","+_[0]+"H0V"+_[1]+"H"+q*o)),E.attr(N,q*i),z.attr(S,q*m),A.attr(k,0).attr(N,q*i),T.attr(M,0).attr(S,q*m),f.rangeBand){var L=f,O=L.rangeBand()/2;c=f=function(t){return L(t)+O}}else c.rangeBand?c=f:v.call(t,f,c);g.call(t,c,f),y.call(t,f,f)})}var n,e=ca.scale.linear(),r=Hl,i=6,o=6,a=3,u=[10],l=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in Yl?n+"":Hl,t):r},t.ticks=function(){return arguments.length?(u=ha(arguments),t):u},t.tickValues=function(n){return arguments.length?(l=n,t):l},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){
var e=arguments.length;return e?(i=+n,o=+arguments[e-1],t):i},t.innerTickSize=function(n){return arguments.length?(i=+n,t):i},t.outerTickSize=function(n){return arguments.length?(o=+n,t):o},t.tickPadding=function(n){return arguments.length?(a=+n,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Hl="bottom",Yl={top:1,right:1,bottom:1,left:1};ca.svg.brush=function(){function t(e){e.each(function(){var e=ca.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=e.selectAll(".resize").data(g,x);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Vl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var l,f=ca.transition(e),h=ca.transition(a);s&&(l=Bi(s),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=Bi(c),h.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){32==ca.event.keyCode&&(C||(x=null,T[0]-=f[1],T[1]-=h[1],C=2),S())}function g(){32==ca.event.keyCode&&2==C&&(T[0]+=f[1],T[1]+=h[1],C=0,S())}function v(){var t=ca.mouse(b),e=!1;_&&(t[0]+=_[0],t[1]+=_[1]),C||(ca.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),T[0]=f[+(t[0]<x[0])],T[1]=h[+(t[1]<x[1])]):x=null),E&&y(t,s,0)&&(r(k),e=!0),A&&y(t,c,1)&&(i(k),e=!0),e&&(n(k),M({type:"brush",mode:C?"move":"resize"}))}function y(t,n,e){var r,i,o=Bi(n),l=o[0],s=o[1],c=T[e],g=e?h:f,v=g[1]-g[0];if(C&&(l-=c,s-=v+c),r=(e?d:p)?Math.max(l,Math.min(s,t[e])):t[e],C?i=(r+=c)+v:(x&&(c=Math.max(l,Math.min(s,2*x[e]-r))),c<r?(i=r,r=c):i=c),g[0]!=r||g[1]!=i)return e?u=null:a=null,g[0]=r,g[1]=i,!0}function m(){v(),k.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ca.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),M({type:"brushend"})}var x,_,b=this,w=ca.select(ca.event.target),M=l.of(b,arguments),k=ca.select(b),N=w.datum(),E=!/^(n|s)$/.test(N)&&s,A=!/^(e|w)$/.test(N)&&c,C=w.classed("extent"),z=W(b),T=ca.mouse(b),q=ca.select(e(b)).on("keydown.brush",o).on("keyup.brush",g);if(ca.event.changedTouches?q.on("touchmove.brush",v).on("touchend.brush",m):q.on("mousemove.brush",v).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),C)T[0]=f[0]-T[0],T[1]=h[0]-T[1];else if(N){var L=+/w$/.test(N),O=+/^n/.test(N);_=[f[1-L]-T[0],h[1-O]-T[1]],T[0]=f[L],T[1]=h[O]}else ca.event.altKey&&(x=T.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ca.select("body").style("cursor",w.style("cursor")),M({type:"brushstart"}),v()}var a,u,l=E(t,"brushstart","brush","brushend"),s=null,c=null,f=[0,0],h=[0,0],p=!0,d=!0,g=Zl[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),n={x:f,y:h,i:a,j:u},e=this.__chart__||n;this.__chart__=n,Dl?ca.select(this).transition().each("start.brush",function(){a=e.i,u=e.j,f=e.x,h=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=wr(f,n.x),r=wr(h,n.y);return a=u=null,function(i){f=n.x=e(i),h=n.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=n.i,u=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(s=n,g=Zl[!s<<1|!c],t):s},t.y=function(n){return arguments.length?(c=n,g=Zl[!s<<1|!c],t):c},t.clamp=function(n){return arguments.length?(s&&c?(p=!!n[0],d=!!n[1]):s?p=!!n:c&&(d=!!n),t):s&&c?[p,d]:s?p:c?d:null},t.extent=function(n){var e,r,i,o,l;return arguments.length?(s&&(e=n[0],r=n[1],c&&(e=e[0],r=r[0]),a=[e,r],s.invert&&(e=s(e),r=s(r)),r<e&&(l=e,e=r,r=l),e==f[0]&&r==f[1]||(f=[e,r])),c&&(i=n[0],o=n[1],s&&(i=i[1],o=o[1]),u=[i,o],c.invert&&(i=c(i),o=c(o)),o<i&&(l=i,i=o,o=l),i==h[0]&&o==h[1]||(h=[i,o])),t):(s&&(a?(e=a[0],r=a[1]):(e=f[0],r=f[1],s.invert&&(e=s.invert(e),r=s.invert(r)),r<e&&(l=e,e=r,r=l))),c&&(u?(i=u[0],o=u[1]):(i=h[0],o=h[1],c.invert&&(i=c.invert(i),o=c.invert(o)),o<i&&(l=i,i=o,o=l))),s&&c?[[e,i],[r,o]]:s?[e,r]:c&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],a=u=null),t},t.empty=function(){return!!s&&f[0]==f[1]||!!c&&h[0]==h[1]},ca.rebind(t,l,"on")};var Vl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bl=fu.format=yu.timeFormat,Xl=Bl.utc,$l=Xl("%Y-%m-%dT%H:%M:%S.%LZ");Bl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?oa:$l,oa.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},oa.toString=$l.toString,fu.second=It(function(t){return new hu(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),fu.seconds=fu.second.range,fu.seconds.utc=fu.second.utc.range,fu.minute=It(function(t){return new hu(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),fu.minutes=fu.minute.range,fu.minutes.utc=fu.minute.utc.range,fu.hour=It(function(t){var n=t.getTimezoneOffset()/60;return new hu(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),fu.hours=fu.hour.range,fu.hours.utc=fu.hour.utc.range,fu.month=It(function(t){return t=fu.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),fu.months=fu.month.range,fu.months.utc=fu.month.utc.range;var Jl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wl=[[fu.second,1],[fu.second,5],[fu.second,15],[fu.second,30],[fu.minute,1],[fu.minute,5],[fu.minute,15],[fu.minute,30],[fu.hour,1],[fu.hour,3],[fu.hour,6],[fu.hour,12],[fu.day,1],[fu.day,2],[fu.week,1],[fu.month,1],[fu.month,3],[fu.year,1]],Gl=Bl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Tn]]),Kl={range:function(t,n,e){return ca.range(Math.ceil(t/e)*e,+n,e).map(ua)},floor:x,ceil:x};Wl.year=fu.year,fu.scale=function(){return aa(ca.scale.linear(),Wl,Gl)};var Ql=Wl.map(function(t){return[t[0].utc,t[1]]}),ts=Xl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Tn]]);Ql.year=fu.year.utc,fu.scale.utc=function(){return aa(ca.scale.linear(),Ql,ts)},ca.text=At(function(t){return t.responseText}),ca.json=function(t,n){return Ct(t,"application/json",la,n)},ca.html=function(t,n){return Ct(t,"text/html",sa,n)},ca.xml=At(function(t){return t.responseXML}),t.exports?t.exports=ca:this.d3=ca}()}),ve=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},ye=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),me=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(function(t){return r?[r]:[t]},i||function(t){return[t]});return o.enter().append(e),o},xe=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(r||function(t){return t},i||function(t){return t});return o.enter().append(e),o},_e=function(){function t(n){var e=this;ve(this,t),this._target=n,this._on={},this.props().map(function(t){e[t]=o.bind(e,t)})}return ye(t,[{key:"props",value:function(){return["data"]}},{key:"on",value:function(t,n){return void 0===n?this._on[t]||r:(this._on[t]=n,this)}}]),t}();n(".validation h3 {\n  text-transform: uppercase;\n  font-weight: bold;\n  font-size: 12px;\n}\n.consideration h3 {\n  text-transform: uppercase;\n  font-weight: bold;\n  font-size: 12px;\n}\n\n.consideration .axis path, .consideration .axis line,\n.validation .axis path, .validation .axis line {\n  stroke:none \n}\n\n.scrollbox {\n  /*border-top:1px solid #ccc;*/\n  padding-top:12px;\n  padding-left:5px;\n}\n.option-wrap select {\n  height: 36px;\n  vertical-align: top;\n  width: 200px;\n  margin-left:15px;\n  /*margin-bottom:-10px;*/\n}\n.scrollbox:first-of-type {\n  /*border-right:1px solid #ccc;*/\n}\n\n.inner > select, .inner > input {\n  height: 36px;\n  vertical-align:top\n}\n.selectize-control.multi {\n  display: inline-block\n}\n.selectize-dropdown.multi {\n  padding:5px;\n}\n.expanded thead tr {\n  height:28px;\n  background:none\n}\n\n.expanded .table-wrapper tr { height:28px }\n\n\n.inner .header-wrap, .inner select { flex: 1}\n\n.head-wrap {\n  height: 150px;\n  border-bottom:1px solid #ddd\n}\nbody {\n  padding-top:0px;\n}\nbody > .container {\n  margin-left: 0px;\n}\n.body-wrap {\n  overflow:hidden\n}\n.head-wrap .item, .body-wrap .item {\n  display:table-cell;\n  width:50px;\n  height:50px;\n  position:relative;\n  vertical-align:top\n}\n\n.head-wrap .item {\n  display:table-cell;\n  width:50px;\n  height:150px;\n  position:relative\n}\n\n.tabular-wrapper {\n  width:900px\n}\n\n.head-wrap .item span {\n  transform: rotate(-45deg);\n  display: block;\n  position: absolute;\n  bottom: 50px;\n  width: 155px;\n  text-transform: uppercase;\n  font-size: .85em;\n  font-weight: normal;\n  border-bottom: solid 1px #DDD;\n  line-height: 30px;\n  right: -120px;\n}\n.versus {\n\n  margin-top:10px;\n  margin-right:10px;\n  display:inline-block;\n\n  padding:10px;\n  border-radius:10px;\n  border: 1px solid #ccc;\n}\na.versus:hover {\n  text-decoration:none;\n\n}\n\n.versus.selected, .square.selected {\n  background-color:white\n}\n\n.axis { opacity:.7; font-size:10px }\n.hidden { display:none }\n.conditional-wrap .table-wrapper thead tr {\n  background: rgb(240, 244, 247) \n}\nbackground-color: #e3ebf0;\n",void 0),a.prototype={state:function(){return Object.assign({},this._state)},publish:function(t,n){var e=function(n,e){if(n)return subscriber(n,null);this.update(t,e),this.trigger(t,this.state()[t],this.state())}.bind(this);return"function"==typeof n?n(e):e(!1,n),this},publishBatch:function(t){Object.keys(t).map(function(n){this.update(n,t[n])}.bind(this)),this.triggerBatch(t,this.state())},push:function(t){return this.publish(!1,t),this},subscribe:function(){return"function"==typeof arguments[0]?this._global_subscribe(arguments[0]):-1==arguments[0].indexOf(".")?this._named_subscribe(arguments[0],arguments[1]):arguments[0].indexOf(".")>-1?this._targetted_subscribe(arguments[0].split(".")[0],arguments[0].split(".")[1],arguments[1]):void 0},unsubscribe:function(t){return this.subscribe(t,void 0),this},_global_subscribe:function(t){var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0;return("x"==t?n:3&n|8).toString(16)});return this._targetted_subscribe(n,"*",t),this},_named_subscribe:function(t,n){return this._targetted_subscribe(t,"*",n),this},_targetted_subscribe:function(t,n,e){var r=this.get_subscribers_obj(n);this._state[n],this._state;return arguments.length<2&&void 0===e?r[t]||function(){}:void 0===e?(delete r[t],this):(r[t]=e,this)},get_subscribers_obj:function(t){return this._subscription[t]=this._subscription[t]||{},this._subscription[t]},get_subscribers_fn:function(t){var n=this.get_subscribers_obj(t),e=Object.keys(n).map(function(t){return n[t]});return function(t,n,r){return e.map(function(e){return e(t,n,r)})}},trigger:function(t,n,e){var r=this.get_subscribers_fn(t)||function(){},i=this.get_subscribers_fn("*")||function(){};this.on("change")(t,n,e),r(!1,n,e),i(!1,e)},triggerBatch:function(t,n){var e=this.get_subscribers_fn("*")||function(){};Object.keys(t).map(function(e){return(this.get_subscribers_fn||function(){}).bind(this)(e)(!1,t[e],n)}.bind(this));e(!1,n)},_buildState:function(){return this._state=Object.assign({},this._current),Object.keys(this._static).map(function(t){this._state[t]=this._static[t]}.bind(this)),this.on("build")(this._state,this._current,this._static),this._state},update:function(t,n){if(this._pastPush(this._current),t){var e={};e[t]=n}return this._current=t?Object.assign({},this._current,e):Object.assign({},this._current,n),this._buildState(),this},setStatic:function(t,n){return void 0!=t&&void 0!=n&&(this._static[t]=n),this._buildState(),this},publishStatic:function(t,n){var e=function(n,e){if(n)return subscriber(n,null);this._static[t]=e,this._buildState(),this.trigger(t,this.state()[t],this.state())}.bind(this);return"function"==typeof n?n(e):e(!1,n),this},_pastPush:function(t){this._past.push(t)},_futurePush:function(t){this._future.push(t)},forward:function(){this._pastPush(this._current),this._current=this._future.pop(),this.on("forward")(this._current,this._past,this._future),this._state=this._buildState(),this.trigger(!1,this._state,this._state)},back:function(){this._futurePush(this._current),this._current=this._past.pop(),this.on("back")(this._current,this._future,this._past),this._state=this._buildState(),this.trigger(!1,this._state,this._state)},on:function(t,n){return void 0===n?this._on[t]||this._noop:(this._on[t]=n,this)},registerEvent:function(t,n){return void 0===n?this._events[t]||this._noop:(this._events[t]=n,this)},prepareEvent:function(t){return this._events[t].bind(this)},dispatchEvent:function(t,n){return this.prepareEvent(t)(n),this}},u.prototype=a.prototype;var be="function"==typeof Symbol&&"symbol"===se(Symbol.iterator)?function(t){return void 0===t?"undefined":se(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":se(t)},we=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},Me=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();l.prototype={to:function(t,n){var e=this,r=Object.keys(t).map(function(n){var r=t[n],i=r;return r&&"object"==(void 0===r?"undefined":be(r))&&r.length>0?i=e._encodeArray(r):"object"==(void 0===r?"undefined":be(r))&&(i=e._encodeObject(r)),n+"="+encodeURIComponent(i)});return n?"?encoded="+btoa(escape(s(r.join("&")))):"?"+r.join("&")},from:function(t){var n={};0==t.indexOf("?encoded=")&&(t=c(unescape(atob(t.split("?encoded=")[1]))));for(var e=t.substr(1).split("&"),r=0;r<e.length;r++){var i=e[r].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"");var o=n[decodeURIComponent(i[0])][0];"{"!=o&&"["!=o||(n[decodeURIComponent(i[0])]=JSON.parse(n[decodeURIComponent(i[0])]))}return n}},f.prototype=l.prototype;var ke,Se=function(t){},Ne=function(t,n){return t==n},Ee=function(t,n){return function(e,r){return n?r[t]:e[t]}},Ae=function(){function t(n,e,r){we(this,t),this._obj1=n,this._obj2=e,this._final=r,this._comparisons={}}return Me(t,[{key:"accessor",value:function(t,n,e){return this._comparisons[t]=Object.assign({},this._comparisons[t],{acc1:n,acc2:e}),this}},{key:"success",value:function(t,n){return this._comparisons[t]=Object.assign({},this._comparisons[t],{success:n}),this}},{key:"failure",value:function(t,n){return this._comparisons[t]=Object.assign({},this._comparisons[t],{failure:n}),this}},{key:"equal",value:function(t,n){return this._comparisons[t]=Object.assign({},this._comparisons[t],{eq:n}),this}},{key:"evaluate",value:function(){var t=this;return Object.keys(this._comparisons).map(function(n){t._eval(t._comparisons[n],n)}),this._final}},{key:"comparsion",value:function(t,n,e,r,i,o){return this._comparisons[t]={acc1:n,acc2:e,eq:r||Ne,success:i||Se,failure:o||Se},this}},{key:"_eval",value:function(t,n){var e=t.acc1||Ee(n),r=t.acc2||Ee(n,!0),i=e(this._obj1,this._obj2),o=r(this._obj1,this._obj2),a=t.eq||Ne,u=t.success||Se,l=t.failure||Se;a(i,o)?u.bind(this)(i,o,this._final):l.bind(this)(i,o,this._final)}}]),t}();try{ke=window.__state__||u(),window.__state__=ke}catch(t){ke=u()}var Ce=ke,ze=function(t,n){return n={exports:{}},t(n,n.exports),n.exports}(function(t){!function(){function n(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function i(t){return null===t?NaN:+t}function o(t){return!isNaN(t)}function a(t){return{left:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}function u(t){return t.length}function l(t){for(var n=1;t*n%1;)n*=10;return n}function s(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function c(){this._=Object.create(null)}function f(t){return(t+="")===ba||t[0]===wa?wa+t:t}function h(t){return(t+="")[0]===wa?t.slice(1):t}function p(t){return f(t)in this._}function d(t){return(t=f(t))in this._&&delete this._[t]}function g(){var t=[];for(var n in this._)t.push(h(n));return t}function v(){var t=0;for(var n in this._)++t;return t}function y(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function x(t){return t}function _(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function b(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=Ma.length;e<r;++e){var i=Ma[e]+n;if(i in t)return i}}function w(){}function M(){}function k(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new c;return n.on=function(n,i){var o,a=r.get(n);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function S(){ca.event.preventDefault()}function N(){for(var t,n=ca.event;t=n.sourceEvent;)n=t;return n}function E(t){for(var n=new M,e=0,r=arguments.length;++e<r;)n[arguments[e]]=k(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=ca.event;i.target=t,ca.event=i,n[i.type].apply(e,r)}finally{ca.event=o}}},n}function A(t){return Sa(t,Ca),t}function C(t){return"function"==typeof t?t:function(){return Na(t,this)}}function z(t){return"function"==typeof t?t:function(){return Ea(t,this)}}function T(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=ca.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?u:a:t.local?o:i}function q(t){return t.trim().replace(/\s+/g," ")}function L(t){return new RegExp("(?:^|\\s+)"+ca.requote(t)+"(?:\\s+|$)","g")}function O(t){return(t+"").trim().split(/^|\s+/)}function j(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=O(t).map(R);var i=t.length;return"function"==typeof n?r:e}function R(t){var n=L(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",q(i+" "+t))):e.setAttribute("class",q(i.replace(n," ")))}}function D(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function P(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function U(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e?n.createElementNS(e,t):n.createElement(t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ca.ns.qualify(t)).local?e:n}function F(){var t=this.parentNode;t&&t.removeChild(this)}function I(t){return{__data__:t}}function H(t){return function(){return Aa(this,t)}}function Y(t){return arguments.length||(t=r),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],a=0,u=o.length;a<u;a++)(i=o[a])&&n(i,a,e);return t}function Z(t){return Sa(t,Ta),t}function B(t){var n,e;return function(r,i,o){var a,u=t[o].update,l=u.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(a=u[n])&&++n<l;);return a}}function X(t,n,e){function r(){var n=this[a];n&&(this.removeEventListener(t,n,n.$),delete this[a])}function i(){var i=l(n,ha(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+ca.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var a="__on"+t,u=t.indexOf("."),l=$;u>0&&(t=t.slice(0,u));var s=qa.get(t);return s&&(t=s,l=J),u?n?i:r:n?w:o}function $(t,n){return function(e){var r=ca.event;ca.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{ca.event=r}}}function J(t,n){var e=$(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function W(t){var r=".dragsuppress-"+ ++Oa,i="click"+r,o=ca.select(e(t)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==La&&(La=!("onselectstart"in t)&&b(t.style,"userSelect")),La){var a=n(t).style,u=a[La];a[La]="none"}return function(t){if(o.on(r,null),La&&(a[La]=u),t){var n=function(){o.on(i,null)};o.on(i,function(){S(),n()},!0),setTimeout(n,0)}}}function G(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(ja<0){var o=e(t);if(o.scrollX||o.scrollY){r=ca.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();ja=!(a.f||a.e),r.remove()}}return ja?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function K(){return ca.event.changedTouches[0].identifier}function Q(t){return t>0?1:t<0?-1:0}function tt(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function nt(t){return t>1?0:t<-1?Pa:Math.acos(t)}function et(t){return t>1?Ia:t<-1?-Ia:Math.asin(t)}function rt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function ot(t){return((t=Math.exp(2*t))-1)/(t+1)}function at(t){return(t=Math.sin(t/2))*t}function ut(){}function lt(t,n,e){return this instanceof lt?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof lt?new lt(t.h,t.s,t.l):wt(""+t,Mt,lt):new lt(t,n,e)}function st(t,n,e){function r(t){return t>360?t-=360:t<0&&(t+=360),t<60?o+(a-o)*t/60:t<180?a:t<240?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:n<0?0:n>1?1:n,e=e<0?0:e>1?1:e,a=e<=.5?e*(1+n):e+n-e*n,o=2*e-a,new mt(i(t+120),i(t),i(t-120))}function ct(t,n,e){return this instanceof ct?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof ct?new ct(t.h,t.c,t.l):t instanceof ht?dt(t.l,t.a,t.b):dt((t=kt((t=ca.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ct(t,n,e)}function ft(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new ht(e,Math.cos(t*=Ha)*n,Math.sin(t)*n)}function ht(t,n,e){return this instanceof ht?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof ct?ft(t.h,t.c,t.l):kt((t=mt(t)).r,t.g,t.b):new ht(t,n,e)}function pt(t,n,e){var r=(t+16)/116,i=r+n/500,o=r-e/200;return i=gt(i)*Ga,r=gt(r)*Ka,o=gt(o)*Qa,new mt(yt(3.2404542*i-1.5371385*r-.4985314*o),yt(-.969266*i+1.8760108*r+.041556*o),yt(.0556434*i-.2040259*r+1.0572252*o))}function dt(t,n,e){return t>0?new ct(Math.atan2(e,n)*Ya,Math.sqrt(n*n+e*e),t):new ct(NaN,NaN,t)}function gt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function vt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function yt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,n,e){return this instanceof mt?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):wt(""+t,mt,st):new mt(t,n,e)}function xt(t){return new mt(t>>16,t>>8&255,255&t)}function _t(t){return xt(t)+""}function bt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,n,e){var r,i,o,a=0,u=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(Nt(i[0]),Nt(i[1]),Nt(i[2]))}return(o=eu.get(t))?n(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,l=255&o)),n(a,u,l))}function Mt(t,n,e){var r,i,o=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),u=a-o,l=(a+o)/2;return u?(i=l<.5?u/(a+o):u/(2-a-o),r=t==a?(n-e)/u+(n<e?6:0):n==a?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new lt(r,i,l)}function kt(t,n,e){t=St(t),n=St(n),e=St(e);var r=vt((.4124564*t+.3575761*n+.1804375*e)/Ga),i=vt((.2126729*t+.7151522*n+.072175*e)/Ka);return ht(116*i-16,500*(r-i),200*(i-vt((.0193339*t+.119192*n+.9503041*e)/Qa)))}function St(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Nt(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function Et(t){return"function"==typeof t?t:function(){return t}}function At(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Ct(n,e,t,r)}}function Ct(t,n,e,r){function i(){var t,n=l.status;if(!n&&Tt(l)||n>=200&&n<300||304===n){try{t=e.call(o,l)}catch(t){return void a.error.call(o,t)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=ca.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,s=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var n=ca.event;ca.event=t;try{a.progress.call(o,l)}finally{ca.event=n}},o.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(s=t,o):s},o.response=function(t){return e=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ha(arguments)))}}),o.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),l.setRequestHeader)for(var c in u)l.setRequestHeader(c,u[c]);return null!=n&&l.overrideMimeType&&l.overrideMimeType(n),null!=s&&(l.responseType=s),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},ca.rebind(o,a,"on"),null==r?o:o.get(zt(r))}function zt(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}function Tt(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function qt(t,n,e){var r=arguments.length;r<2&&(n=0),r<3&&(e=Date.now());var i=e+n,o={c:t,t:i,n:null};return iu?iu.n=o:ru=o,iu=o,ou||(au=clearTimeout(au),ou=1,uu(Lt)),o}function Lt(){var t=Ot(),n=jt()-t;n>24?(isFinite(n)&&(clearTimeout(au),au=setTimeout(Lt,n)),ou=0):(ou=1,uu(Lt))}function Ot(){for(var t=Date.now(),n=ru;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function jt(){for(var t,n=ru,e=1/0;n;)n.c?(n.t<e&&(e=n.t),n=(t=n).n):n=t?t.n=n.n:ru=n.n;return iu=t,e}function Rt(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Dt(t,n){var e=Math.pow(10,3*_a(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function Pt(t){var n=t.decimal,e=t.thousands,r=t.grouping,i=t.currency,o=r&&e?function(t,n){for(var i=t.length,o=[],a=0,u=r[0],l=0;i>0&&u>0&&(l+u+1>n&&(u=Math.max(1,n-l)),o.push(t.substring(i-=u,i+u)),!((l+=u+1)>n));)u=r[a=(a+1)%r.length];return o.reverse().join(e)}:x;return function(t){var e=su.exec(t),r=e[1]||" ",a=e[2]||">",u=e[3]||"-",l=e[4]||"",s=e[5],c=+e[6],f=e[7],h=e[8],p=e[9],d=1,g="",v="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(s||"0"===r&&"="===a)&&(s=r="0",a="="),p){case"n":f=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":d=-1,p="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=cu.get(p)||Ut;var x=s&&f;return function(t){var e=v;if(y&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===u?"":u;if(d<0){var l=ca.formatPrefix(t,h);t=l.scale(t),e=l.symbol+v}else t*=d;t=p(t,h);var _,b,w=t.lastIndexOf(".");if(w<0){var M=m?t.lastIndexOf("e"):-1;M<0?(_=t,b=""):(_=t.substring(0,M),b=t.substring(M))}else _=t.substring(0,w),b=n+t.substring(w+1);!s&&f&&(_=o(_,1/0));var k=g.length+_.length+b.length+(x?0:i.length),S=k<c?new Array(k=c-k+1).join(r):"";return x&&(_=o(S+_,S.length?c-b.length:1/0)),i+=g,t=_+b,("<"===a?i+t+S:">"===a?S+i+t:"^"===a?S.substring(0,k>>=1)+i+t+S.substring(k):i+(x?t:S+t))+e}}}function Ut(t){return t+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function It(t,n,e){function r(n){var e=t(n),r=o(e,1);return n-e<r-n?e:r}function i(e){return n(e=t(new hu(e-1)),1),e}function o(t,e){return n(t=new hu(+t),e),t}function a(t,r,o){var a=i(t),u=[];if(o>1)for(;a<r;)e(a)%o||u.push(new Date(+a)),n(a,1);else for(;a<r;)u.push(new Date(+a)),n(a,1);return u}function u(t,n,e){try{hu=Ft;var r=new Ft;return r._=t,a(r,n,e)}finally{hu=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var l=t.utc=Ht(t);return l.floor=l,l.round=Ht(r),l.ceil=Ht(i),l.offset=Ht(o),l.range=u,t}function Ht(t){return function(n,e){try{hu=Ft;var r=new Ft;return r._=n,t(r,e)._}finally{hu=Date}}}function Yt(t){function n(t){function n(n){for(var e,i,o,a=[],u=-1,l=0;++u<r;)37===t.charCodeAt(u)&&(a.push(t.slice(l,u)),null!=(i=du[e=t.charAt(++u)])&&(e=t.charAt(++u)),(o=A[e])&&(e=o(n,null==i?"e"===e?" ":"0":i)),a.push(e),l=u+1);return a.push(t.slice(l,u)),a.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,
Z:null};if(e(r,t,n,0)!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&hu!==Ft,o=new(i?Ft:hu);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},n.toString=function(){return t},n}function e(t,n,e,r){for(var i,o,a,u=0,l=n.length,s=e.length;u<l;){if(r>=s)return-1;if(37===(i=n.charCodeAt(u++))){if(a=n.charAt(u++),!(o=C[a in du?n.charAt(u++):a])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function r(t,n,e){w.lastIndex=0;var r=w.exec(n.slice(e));return r?(t.w=M.get(r[0].toLowerCase()),e+r[0].length):-1}function i(t,n,e){_.lastIndex=0;var r=_.exec(n.slice(e));return r?(t.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function o(t,n,e){N.lastIndex=0;var r=N.exec(n.slice(e));return r?(t.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function a(t,n,e){k.lastIndex=0;var r=k.exec(n.slice(e));return r?(t.m=S.get(r[0].toLowerCase()),e+r[0].length):-1}function u(t,n,r){return e(t,A.c.toString(),n,r)}function l(t,n,r){return e(t,A.x.toString(),n,r)}function s(t,n,r){return e(t,A.X.toString(),n,r)}function c(t,n,e){var r=x.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}var f=t.dateTime,h=t.date,p=t.time,d=t.periods,g=t.days,v=t.shortDays,y=t.months,m=t.shortMonths;n.utc=function(t){function e(t){try{hu=Ft;var n=new hu;return n._=t,r(n)}finally{hu=Date}}var r=n(t);return e.parse=function(t){try{hu=Ft;var n=r.parse(t);return n&&n._}finally{hu=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=cn;var x=ca.map(),_=Zt(g),b=Bt(g),w=Zt(v),M=Bt(v),k=Zt(y),S=Bt(y),N=Zt(m),E=Bt(m);d.forEach(function(t,n){x.set(t.toLowerCase(),n)});var A={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:n(f),d:function(t,n){return Vt(t.getDate(),n,2)},e:function(t,n){return Vt(t.getDate(),n,2)},H:function(t,n){return Vt(t.getHours(),n,2)},I:function(t,n){return Vt(t.getHours()%12||12,n,2)},j:function(t,n){return Vt(1+fu.dayOfYear(t),n,3)},L:function(t,n){return Vt(t.getMilliseconds(),n,3)},m:function(t,n){return Vt(t.getMonth()+1,n,2)},M:function(t,n){return Vt(t.getMinutes(),n,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,n){return Vt(t.getSeconds(),n,2)},U:function(t,n){return Vt(fu.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Vt(fu.mondayOfYear(t),n,2)},x:n(h),X:n(p),y:function(t,n){return Vt(t.getFullYear()%100,n,2)},Y:function(t,n){return Vt(t.getFullYear()%1e4,n,4)},Z:ln,"%":function(){return"%"}},C={a:r,A:i,b:o,B:a,c:u,d:nn,e:nn,H:rn,I:rn,j:en,L:un,m:tn,M:on,p:c,S:an,U:$t,w:Xt,W:Jt,x:l,X:s,y:Gt,Y:Wt,Z:Kt,"%":sn};return n}function Vt(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Zt(t){return new RegExp("^(?:"+t.map(ca.requote).join("|")+")","i")}function Bt(t){for(var n=new c,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Xt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function $t(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Jt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Wt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Gt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.y=Qt(+r[0]),e+r[0].length):-1}function Kt(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function tn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function nn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function en(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function rn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function on(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function an(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function un(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ln(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=_a(n)/60|0,i=_a(n)%60;return e+Vt(r,"0",2)+Vt(i,"0",2)}function sn(t,n,e){vu.lastIndex=0;var r=vu.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function cn(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function fn(){}function hn(t,n,e){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function pn(t,n){t&&_u.hasOwnProperty(t.type)&&_u[t.type](t,n)}function dn(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function gn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)dn(t[e],n,1);n.polygonEnd()}function vn(){function t(t,n){t*=Ha,n=n*Ha/2+Pa/4;var e=t-r,a=e>=0?1:-1,u=a*e,l=Math.cos(n),s=Math.sin(n),c=o*s,f=i*l+c*Math.cos(u),h=c*a*Math.sin(u);wu.add(Math.atan2(h,f)),r=t,i=l,o=s}var n,e,r,i,o;Mu.point=function(a,u){Mu.point=t,r=(n=a)*Ha,i=Math.cos(u=(e=u)*Ha/2+Pa/4),o=Math.sin(u)},Mu.lineEnd=function(){t(n,e)}}function yn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function mn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function xn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function _n(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function bn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function wn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Mn(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function kn(t,n){return _a(t[0]-n[0])<Ra&&_a(t[1]-n[1])<Ra}function Sn(t,n){t*=Ha;var e=Math.cos(n*=Ha);Nn(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function Nn(t,n,e){++ku,Nu+=(t-Nu)/ku,Eu+=(n-Eu)/ku,Au+=(e-Au)/ku}function En(){function t(t,i){t*=Ha;var o=Math.cos(i*=Ha),a=o*Math.cos(t),u=o*Math.sin(t),l=Math.sin(i),s=Math.atan2(Math.sqrt((s=e*l-r*u)*s+(s=r*a-n*l)*s+(s=n*u-e*a)*s),n*a+e*u+r*l);Su+=s,Cu+=s*(n+(n=a)),zu+=s*(e+(e=u)),Tu+=s*(r+(r=l)),Nn(n,e,r)}var n,e,r;ju.point=function(i,o){i*=Ha;var a=Math.cos(o*=Ha);n=a*Math.cos(i),e=a*Math.sin(i),r=Math.sin(o),ju.point=t,Nn(n,e,r)}}function An(){ju.point=Sn}function Cn(){function t(t,n){t*=Ha;var e=Math.cos(n*=Ha),a=e*Math.cos(t),u=e*Math.sin(t),l=Math.sin(n),s=i*l-o*u,c=o*a-r*l,f=r*u-i*a,h=Math.sqrt(s*s+c*c+f*f),p=r*a+i*u+o*l,d=h&&-nt(p)/h,g=Math.atan2(h,p);qu+=d*s,Lu+=d*c,Ou+=d*f,Su+=g,Cu+=g*(r+(r=a)),zu+=g*(i+(i=u)),Tu+=g*(o+(o=l)),Nn(r,i,o)}var n,e,r,i,o;ju.point=function(a,u){n=a,e=u,ju.point=t,a*=Ha;var l=Math.cos(u*=Ha);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(u),Nn(r,i,o)},ju.lineEnd=function(){t(n,e),ju.lineEnd=An,ju.point=Sn}}function zn(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Tn(){return!0}function qn(t,n,e,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(kn(e,r)){i.lineStart();for(var u=0;u<n;++u)i.point((e=t[u])[0],e[1]);return void i.lineEnd()}var l=new On(e,t,null,!0),s=new On(e,null,l,!1);l.o=s,o.push(l),a.push(s),l=new On(r,t,null,!1),s=new On(r,null,l,!0),l.o=s,o.push(l),a.push(s)}}),a.sort(n),Ln(o),Ln(a),o.length){for(var u=0,l=e,s=a.length;u<s;++u)a[u].e=l=!l;for(var c,f,h=o[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Ln(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function On(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function jn(t,n,e,r){return function(i,o){function a(n,e){var r=i(n,e);t(n=r[0],e=r[1])&&o.point(n,e)}function u(t,n){var e=i(t,n);v.point(e[0],e[1])}function l(){m.point=u,v.lineStart()}function s(){m.point=a,v.lineEnd()}function c(t,n){g.push([t,n]);var e=i(t,n);_.point(e[0],e[1])}function f(){_.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),_.lineEnd();var t,n=_.clean(),e=x.buffer(),r=e.length;if(g.pop(),d.push(g),g=null,r)if(1&n){t=e[0];var i,r=t.length-1,a=-1;if(r>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&n&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Rn))}var p,d,g,v=n(o),y=i.invert(r[0],r[1]),m={point:a,lineStart:l,lineEnd:s,polygonStart:function(){m.point=c,m.lineStart=f,m.lineEnd=h,p=[],d=[]},polygonEnd:function(){m.point=a,m.lineStart=l,m.lineEnd=s,p=ca.merge(p);var t=Hn(y,d);p.length?(b||(o.polygonStart(),b=!0),qn(p,Pn,t,e,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=Dn(),_=n(x),b=!1;return m}}function Rn(t){return t.length>1}function Dn(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:w,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Pn(t,n){return((t=t.x)[0]<0?t[1]-Ia-Ra:Ia-t[1])-((n=n.x)[0]<0?n[1]-Ia-Ra:Ia-n[1])}function Un(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Pa:-Pa,l=_a(o-e);_a(l-Pa)<Ra?(t.point(e,r=(r+a)/2>0?Ia:-Ia),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&l>=Pa&&(_a(e-i)<Ra&&(e-=i*Ra),_a(o-u)<Ra&&(o-=u*Ra),r=Fn(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function Fn(t,n,e,r){var i,o,a=Math.sin(t-e);return _a(a)>Ra?Math.atan((Math.sin(n)*(o=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(n))*Math.sin(t))/(i*o*a)):(n+r)/2}function In(t,n,e,r){var i;if(null==t)i=e*Ia,r.point(-Pa,i),r.point(0,i),r.point(Pa,i),r.point(Pa,0),r.point(Pa,-i),r.point(0,-i),r.point(-Pa,-i),r.point(-Pa,0),r.point(-Pa,i);else if(_a(t[0]-n[0])>Ra){var o=t[0]<n[0]?Pa:-Pa;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Hn(t,n){var e=t[0],r=t[1],i=[Math.sin(e),-Math.cos(e),0],o=0,a=0;wu.reset();for(var u=0,l=n.length;u<l;++u){var s=n[u],c=s.length;if(c)for(var f=s[0],h=f[0],p=f[1]/2+Pa/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===c&&(v=0),t=s[v];var y=t[0],m=t[1]/2+Pa/4,x=Math.sin(m),_=Math.cos(m),b=y-h,w=b>=0?1:-1,M=w*b,k=M>Pa,S=d*x;if(wu.add(Math.atan2(S*w*Math.sin(M),g*_+S*Math.cos(M))),o+=k?b+w*Ua:b,k^h>=e^y>=e){var N=xn(yn(f),yn(t));wn(N);var E=xn(i,N);wn(E);var A=(k^b>=0?-1:1)*et(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(a+=k^b>=0?1:-1)}if(!v++)break;h=y,d=x,g=_,f=t}}return(o<-Ra||o<Ra&&wu<0)^1&a}function Yn(t){function n(t,n){return Math.cos(t)*Math.cos(n)>o}function e(t){var e,o,l,s,c;return{lineStart:function(){s=l=!1,c=1},point:function(f,h){var p,d=[f,h],g=n(f,h),v=a?g?0:i(f,h):g?i(f+(f<0?Pa:-Pa),h):0;if(!e&&(s=l=g)&&t.lineStart(),g!==l&&(p=r(e,d),(kn(e,p)||kn(d,p))&&(d[0]+=Ra,d[1]+=Ra,g=n(d[0],d[1]))),g!==l)c=0,g?(t.lineStart(),p=r(d,e),t.point(p[0],p[1])):(p=r(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(u&&e&&a^g){var y;v&o||!(y=r(d,e,!0))||(c=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&kn(e,d)||t.point(d[0],d[1]),e=d,l=g,o=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(s&&l)<<1}}}function r(t,n,e){var r=yn(t),i=yn(n),a=[1,0,0],u=xn(r,i),l=mn(u,u),s=u[0],c=l-s*s;if(!c)return!e&&t;var f=o*l/c,h=-o*s/c,p=xn(a,u),d=bn(a,f);_n(d,bn(u,h));var g=p,v=mn(d,g),y=mn(g,g),m=v*v-y*(mn(d,d)-1);if(!(m<0)){var x=Math.sqrt(m),_=bn(g,(-v-x)/y);if(_n(_,d),_=Mn(_),!e)return _;var b,w=t[0],M=n[0],k=t[1],S=n[1];M<w&&(b=w,w=M,M=b);var N=M-w,E=_a(N-Pa)<Ra,A=E||N<Ra;if(!E&&S<k&&(b=k,k=S,S=b),A?E?k+S>0^_[1]<(_a(_[0]-w)<Ra?k:S):k<=_[1]&&_[1]<=S:N>Pa^(w<=_[0]&&_[0]<=M)){var C=bn(g,(-v+x)/y);return _n(C,d),[_,Mn(C)]}}}function i(n,e){var r=a?t:Pa-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var o=Math.cos(t),a=o>0,u=_a(o)>Ra;return jn(n,e,ye(t,6*Ha),a?[0,-t]:[-Pa,t-Pa])}function Vn(t,n,e,r){return function(i){var o,a=i.a,u=i.b,l=a.x,s=a.y,c=u.x,f=u.y,h=0,p=1,d=c-l,g=f-s;if(o=t-l,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>h&&(h=o)}if(o=e-l,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<p&&(p=o)}if(o=n-s,g||!(o>0)){if(o/=g,g<0){if(o<h)return;o<p&&(p=o)}else if(g>0){if(o>p)return;o>h&&(h=o)}if(o=r-s,g||!(o<0)){if(o/=g,g<0){if(o>p)return;o>h&&(h=o)}else if(g>0){if(o<h)return;o<p&&(p=o)}return h>0&&(i.a={x:l+h*d,y:s+h*g}),p<1&&(i.b={x:l+p*d,y:s+p*g}),i}}}}}}function Zn(t,n,e,r){function i(r,i){return _a(r[0]-t)<Ra?i>0?0:3:_a(r[0]-e)<Ra?i>0?2:1:_a(r[1]-n)<Ra?i>0?1:0:i>0?3:2}function o(t,n){return a(t.x,n.x)}function a(t,n){var e=i(t,1),r=i(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function l(t){for(var n=0,e=v.length,r=t[1],i=0;i<e;++i)for(var o,a=1,u=v[i],l=u.length,s=u[0];a<l;++a)o=u[a],s[1]<=r?o[1]>r&&tt(s,o,t)>0&&++n:o[1]<=r&&tt(s,o,t)<0&&--n,s=o;return 0!==n}function s(o,u,l,s){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(u,l))||a(o,u)<0^l>0)do{s.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+l+4)%4)!==f);else s.point(u[0],u[1])}function c(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function f(t,n){c(t,n)&&u.point(t,n)}function h(){C.point=d,v&&v.push(y=[]),k=!0,M=!1,b=w=NaN}function p(){g&&(d(m,x),_&&M&&E.rejoin(),g.push(E.buffer())),C.point=f,M&&u.lineEnd()}function d(t,n){t=Math.max(-Du,Math.min(Du,t)),n=Math.max(-Du,Math.min(Du,n));var e=c(t,n);if(v&&y.push([t,n]),k)m=t,x=n,_=e,k=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&M)u.point(t,n);else{var r={a:{x:b,y:w},b:{x:t,y:n}};A(r)?(M||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),S=!1):e&&(u.lineStart(),u.point(t,n),S=!1)}b=t,w=n,M=e}var g,v,y,m,x,_,b,w,M,k,S,N=u,E=Dn(),A=Vn(t,n,e,r),C={point:f,lineStart:h,lineEnd:p,polygonStart:function(){u=E,g=[],v=[],S=!0},polygonEnd:function(){u=N,g=ca.merge(g);var n=l([t,r]),e=S&&n,i=g.length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),i&&qn(g,o,n,s,u),u.polygonEnd()),g=v=y=null}};return C}}function Bn(t){var n=0,e=Pa/3,r=le(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Pa/180,e=t[1]*Pa/180):[n/Pa*180,e/Pa*180]},i}function Xn(t,n){function e(t,n){var e=Math.sqrt(o-2*i*Math.sin(n))/i;return[e*Math.sin(t*=i),a-e*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(n))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return e.invert=function(t,n){var e=a-n;return[Math.atan2(t,e)/i,et((o-(t*t+e*e)*i*i)/(2*i))]},e}function $n(){function t(t,n){Uu+=i*t-r*n,r=t,i=n}var n,e,r,i;Vu.point=function(o,a){Vu.point=t,n=r=o,e=i=a},Vu.lineEnd=function(){t(n,e)}}function Jn(t,n){t<Fu&&(Fu=t),t>Hu&&(Hu=t),n<Iu&&(Iu=n),n>Yu&&(Yu=n)}function Wn(){function t(t,n){a.push("M",t,",",n,o)}function n(t,n){a.push("M",t,",",n),u.point=e}function e(t,n){a.push("L",t,",",n)}function r(){u.point=t}function i(){a.push("Z")}var o=Gn(4.5),a=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return o=Gn(t),u},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return u}function Gn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Kn(t,n){Nu+=t,Eu+=n,++Au}function Qn(){function t(t,r){var i=t-n,o=r-e,a=Math.sqrt(i*i+o*o);Cu+=a*(n+t)/2,zu+=a*(e+r)/2,Tu+=a,Kn(n=t,e=r)}var n,e;Bu.point=function(r,i){Bu.point=t,Kn(n=r,e=i)}}function te(){Bu.point=Kn}function ne(){function t(t,n){var e=t-r,o=n-i,a=Math.sqrt(e*e+o*o);Cu+=a*(r+t)/2,zu+=a*(i+n)/2,Tu+=a,a=i*t-r*n,qu+=a*(r+t),Lu+=a*(i+n),Ou+=3*a,Kn(r=t,i=n)}var n,e,r,i;Bu.point=function(o,a){Bu.point=t,Kn(n=r=o,e=i=a)},Bu.lineEnd=function(){t(n,e)}}function ee(t){function n(n,e){t.moveTo(n+a,e),t.arc(n,e,a,0,Ua)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function i(){u.point=n}function o(){t.closePath()}var a=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:i,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=i,u.point=n},pointRadius:function(t){return a=t,u},result:w};return u}function re(t){function n(t){return(u?r:e)(t)}function e(n){return ae(n,function(e,r){e=t(e,r),n.point(e[0],e[1])})}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){x=NaN,k.point=o,n.lineStart()}function o(e,r){var o=yn([e,r]),a=t(e,r);i(x,_,m,b,w,M,x=a[0],_=a[1],m=e,b=o[0],w=o[1],M=o[2],u,n),n.point(x,_)}function a(){k.point=e,n.lineEnd()}function l(){r(),k.point=s,k.lineEnd=c}function s(t,n){o(f=t,h=n),p=x,d=_,g=b,v=w,y=M,k.point=o}function c(){i(x,_,m,b,w,M,p,d,f,g,v,y,u,n),k.lineEnd=a,a()}var f,h,p,d,g,v,y,m,x,_,b,w,M,k={point:e,lineStart:r,lineEnd:a,polygonStart:function(){n.polygonStart(),k.lineStart=l},polygonEnd:function(){n.polygonEnd(),k.lineStart=r}};return k}function i(n,e,r,u,l,s,c,f,h,p,d,g,v,y){var m=c-n,x=f-e,_=m*m+x*x;if(_>4*o&&v--){var b=u+p,w=l+d,M=s+g,k=Math.sqrt(b*b+w*w+M*M),S=Math.asin(M/=k),N=_a(_a(M)-1)<Ra||_a(r-h)<Ra?(r+h)/2:Math.atan2(w,b),E=t(N,S),A=E[0],C=E[1],z=A-n,T=C-e,q=x*z-m*T;(q*q/_>o||_a((m*z+x*T)/_-.5)>.3||u*p+l*d+s*g<a)&&(i(n,e,r,u,l,s,A,C,N,b/=k,w/=k,M,v,y),y.point(A,C),i(A,C,N,b,w,M,c,f,h,p,d,g,v,y))}}var o=.5,a=Math.cos(30*Ha),u=16;return n.precision=function(t){return arguments.length?(u=(o=t*t)>0&&16,n):Math.sqrt(o)},n}function ie(t){var n=re(function(n,e){return t([n*Ya,e*Ya])});return function(t){return ce(n(t))}}function oe(t){this.stream=t}function ae(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ue(t){return le(function(){return t})()}function le(t){function n(t){return t=u(t[0]*Ha,t[1]*Ha),[t[0]*h+l,s-t[1]*h]}function e(t){return(t=u.invert((t[0]-l)/h,(s-t[1])/h))&&[t[0]*Ya,t[1]*Ya]}function r(){u=zn(a=pe(y,m,_),o);var t=o(g,v);return l=p-t[0]*h,s=d+t[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),n}var o,a,u,l,s,c,f=re(function(t,n){return t=o(t,n),[t[0]*h+l,s-t[1]*h]}),h=150,p=480,d=250,g=0,v=0,y=0,m=0,_=0,b=Ru,w=x,M=null,k=null;return n.stream=function(t){return c&&(c.valid=!1),c=ce(b(a,f(w(t)))),c.valid=!0,c},n.clipAngle=function(t){return arguments.length?(b=null==t?(M=t,Ru):Yn((M=+t)*Ha),i()):M},n.clipExtent=function(t){return arguments.length?(k=t,w=t?Zn(t[0][0],t[0][1],t[1][0],t[1][1]):x,i()):k},n.scale=function(t){return arguments.length?(h=+t,r()):h},n.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},n.center=function(t){return arguments.length?(g=t[0]%360*Ha,v=t[1]%360*Ha,r()):[g*Ya,v*Ya]},n.rotate=function(t){return arguments.length?(y=t[0]%360*Ha,m=t[1]%360*Ha,_=t.length>2?t[2]%360*Ha:0,r()):[y*Ya,m*Ya,_*Ya]},ca.rebind(n,f,"precision"),function(){return o=t.apply(this,arguments),n.invert=o.invert&&e,r()}}function ce(t){return ae(t,function(n,e){t.point(n*Ha,e*Ha)})}function fe(t,n){return[t,n]}function he(t,n){return[t>Pa?t-Ua:t<-Pa?t+Ua:t,n]}function pe(t,n,e){return t?n||e?zn(ge(t),ve(n,e)):ge(t):n||e?ve(n,e):he}function de(t){return function(n,e){return n+=t,[n>Pa?n-Ua:n<-Pa?n+Ua:n,e]}}function ge(t){var n=de(t);return n.invert=de(-t),n}function ve(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,s=Math.sin(n),c=s*r+u*i;return[Math.atan2(l*o-c*a,u*r-s*i),et(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(n),a=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,s=Math.sin(n),c=s*o-l*a;return[Math.atan2(l*o+s*a,u*r+c*i),et(c*r-u*i)]},e}function ye(t,n){var e=Math.cos(t),r=Math.sin(t);return function(i,o,a,u){var l=a*n;null!=i?(i=me(e,i),o=me(e,o),(a>0?i<o:i>o)&&(i+=a*Ua)):(i=t+a*Ua,o=t-.5*l);for(var s,c=i;a>0?c>o:c<o;c-=l)u.point((s=Mn([e,-r*Math.cos(c),-r*Math.sin(c)]))[0],s[1])}}function me(t,n){var e=yn(n);e[0]-=t,wn(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ra)%(2*Math.PI)}function xe(t,n,e){var r=ca.range(t,n-Ra,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function _e(t,n,e){var r=ca.range(t,n-Ra,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function be(t){return t.source}function we(t){return t.target}function Me(t,n,e,r){var i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),u=Math.sin(r),l=i*Math.cos(t),s=i*Math.sin(t),c=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(at(r-n)+i*a*at(e-t))),p=1/Math.sin(h),d=h?function(t){var n=Math.sin(t*=h)*p,e=Math.sin(h-t)*p,r=e*l+n*c,i=e*s+n*f,a=e*o+n*u;return[Math.atan2(i,r)*Ya,Math.atan2(a,Math.sqrt(r*r+i*i))*Ya]}:function(){return[t*Ya,n*Ya]};return d.distance=h,d}function ke(){function t(t,i){var o=Math.sin(i*=Ha),a=Math.cos(i),u=_a((t*=Ha)-n),l=Math.cos(u);Xu+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=r*o-e*a*l)*u),e*o+r*a*l),n=t,e=o,r=a}var n,e,r;$u.point=function(i,o){n=i*Ha,e=Math.sin(o*=Ha),r=Math.cos(o),$u.point=t},$u.lineEnd=function(){$u.point=$u.lineEnd=w}}function Se(t,n){function e(n,e){var r=Math.cos(n),i=Math.cos(e),o=t(r*i);return[o*i*Math.sin(n),o*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),i=n(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&e*o/r)]},e}function Ne(t,n){function e(t,n){a>0?n<-Ia+Ra&&(n=-Ia+Ra):n>Ia-Ra&&(n=Ia-Ra);var e=a/Math.pow(i(n),o);return[e*Math.sin(o*t),a-e*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Pa/4+t/2)},o=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(i(n)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(e.invert=function(t,n){var e=a-n,r=Q(o)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/o,2*Math.atan(Math.pow(a/r,1/o))-Ia]},e):Ae}function Ee(t,n){function e(t,n){var e=o-n;return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}var r=Math.cos(t),i=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),o=r/i+t;return _a(i)<Ra?fe:(e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/i,o-Q(i)*Math.sqrt(t*t+e*e)]},e)}function Ae(t,n){return[t,Math.log(Math.tan(Pa/4+n/2))]}function Ce(t){var n,e=ue(t),r=e.scale,i=e.translate,o=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=i.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var a=o.apply(e,arguments);if(a===e){if(n=null==t){var u=Pa*r(),l=i();o([[l[0]-u,l[1]-u],[l[0]+u,l[1]+u]])}}else n&&(a=null);return a},e.clipExtent(null)}function ze(t,n){return[Math.log(Math.tan(Pa/4+n/2)),-t]}function Te(t){return t[0]}function qe(t){return t[1]}function Le(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;i++){for(;r>1&&tt(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function Oe(t,n){return t[0]-n[0]||t[1]-n[1]}function je(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function Re(t,n,e,r){var i=t[0],o=e[0],a=n[0]-i,u=r[0]-o,l=t[1],s=e[1],c=n[1]-l,f=r[1]-s,h=(u*(l-s)-f*(i-o))/(f*a-u*c);return[i+h*a,l+h*c]}function De(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function Pe(){or(this),this.edge=this.site=this.circle=null}function Ue(t){var n=al.pop()||new Pe;return n.site=t,n}function Fe(t){We(t),rl.remove(t),al.push(t),or(t)}function Ie(t){var n=t.circle,e=n.x,r=n.cy,i={x:e,y:r},o=t.P,a=t.N,u=[t];Fe(t);for(var l=o;l.circle&&_a(e-l.circle.x)<Ra&&_a(r-l.circle.cy)<Ra;)o=l.P,u.unshift(l),Fe(l),l=o;u.unshift(l),We(l);for(var s=a;s.circle&&_a(e-s.circle.x)<Ra&&_a(r-s.circle.cy)<Ra;)a=s.N,u.push(s),Fe(s),s=a;u.push(s),We(s);var c,f=u.length;for(c=1;c<f;++c)s=u[c],l=u[c-1],er(s.edge,l.site,s.site,i);l=u[0],s=u[f-1],s.edge=tr(l.site,s.site,null,i),Je(l),Je(s)}function He(t){for(var n,e,r,i,o=t.x,a=t.y,u=rl._;u;)if((r=Ye(u,a)-o)>Ra)u=u.L;else{if(!((i=o-Ve(u,a))>Ra)){r>-Ra?(n=u.P,e=u):i>-Ra?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var l=Ue(t);if(rl.insert(n,l),n||e){if(n===e)return We(n),e=Ue(n.site),rl.insert(l,e),l.edge=e.edge=tr(n.site,l.site),Je(n),void Je(e);if(!e)return void(l.edge=tr(n.site,l.site));We(n),We(e);var s=n.site,c=s.x,f=s.y,h=t.x-c,p=t.y-f,d=e.site,g=d.x-c,v=d.y-f,y=2*(h*v-p*g),m=h*h+p*p,x=g*g+v*v,_={x:(v*m-p*x)/y+c,y:(h*x-g*m)/y+f};er(e.edge,s,d,_),l.edge=tr(s,t,null,_),e.edge=tr(t,d,null,_),Je(n),Je(e)}}function Ye(t,n){var e=t.site,r=e.x,i=e.y,o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;e=a.site;var u=e.x,l=e.y,s=l-n;if(!s)return u;var c=u-r,f=1/o-1/s,h=c/s;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*s)-l+s/2+i-o/2)))/f+r:(r+u)/2}function Ve(t,n){var e=t.N;if(e)return Ye(e,n);var r=t.site;return r.y===n?r.x:1/0}function Ze(t){this.site=t,this.edges=[]}function Be(t){for(var n,e,r,i,o,a,u,l,s,c,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],g=el,v=g.length;v--;)if((o=g[v])&&o.prepare())for(u=o.edges,l=u.length,a=0;a<l;)c=u[a].end(),r=c.x,i=c.y,s=u[++a%l].start(),n=s.x,e=s.y,(_a(r-n)>Ra||_a(i-e)>Ra)&&(u.splice(a,0,new rr(nr(o.site,c,_a(r-f)<Ra&&d-i>Ra?{x:f,y:_a(n-f)<Ra?e:d}:_a(i-d)<Ra&&h-r>Ra?{x:_a(e-d)<Ra?n:h,y:d}:_a(r-h)<Ra&&i-p>Ra?{x:h,y:_a(n-h)<Ra?e:p}:_a(i-p)<Ra&&r-f>Ra?{x:_a(e-p)<Ra?n:f,y:p}:null),o.site,null)),++l)}function Xe(t,n){return n.angle-t.angle}function $e(){or(this),this.x=this.y=this.arc=this.site=this.cy=null}function Je(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i.x,u=i.y,l=r.x-a,s=r.y-u,c=o.x-a,f=o.y-u,h=2*(l*f-s*c);if(!(h>=-Da)){var p=l*l+s*s,d=c*c+f*f,g=(f*p-s*d)/h,v=(l*d-c*p)/h,f=v+u,y=ul.pop()||new $e;y.arc=t,y.site=i,y.x=g+a,y.y=f+Math.sqrt(g*g+v*v),y.cy=f,t.circle=y;for(var m=null,x=ol._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}ol.insert(m,y),m||(il=y)}}}}function We(t){var n=t.circle;n&&(n.P||(il=n.N),ol.remove(n),ul.push(n),or(n),t.circle=null)}function Ge(t){for(var n,e=nl,r=Vn(t[0][0],t[0][1],t[1][0],t[1][1]),i=e.length;i--;)n=e[i],(!Ke(n,t)||!r(n)||_a(n.a.x-n.b.x)<Ra&&_a(n.a.y-n.b.y)<Ra)&&(n.a=n.b=null,e.splice(i,1))}function Ke(t,n){var e=t.b;if(e)return!0;var r,i,o=t.a,a=n[0][0],u=n[1][0],l=n[0][1],s=n[1][1],c=t.l,f=t.r,h=c.x,p=c.y,d=f.x,g=f.y,v=(h+d)/2,y=(p+g)/2;if(g===p){if(v<a||v>=u)return;if(h>d){if(o){if(o.y>=s)return}else o={x:v,y:l};e={x:v,y:s}}else{if(o){if(o.y<l)return}else o={x:v,y:s};e={x:v,y:l}}}else if(r=(h-d)/(g-p),i=y-r*v,r<-1||r>1)if(h>d){if(o){if(o.y>=s)return}else o={x:(l-i)/r,y:l};e={x:(s-i)/r,y:s}}else{if(o){if(o.y<l)return}else o={x:(s-i)/r,y:s};e={x:(l-i)/r,y:l}}else if(p<g){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};e={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};e={x:a,y:r*a+i}}return t.a=o,t.b=e,!0}function Qe(t,n){this.l=t,this.r=n,this.a=this.b=null}function tr(t,n,e,r){var i=new Qe(t,n);return nl.push(i),e&&er(i,t,n,e),r&&er(i,n,t,r),el[t.i].edges.push(new rr(i,t,n)),el[n.i].edges.push(new rr(i,n,t)),i}function nr(t,n,e){var r=new Qe(t,null);return r.a=n,r.b=e,nl.push(r),r}function er(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function rr(t,n,e){var r=t.a,i=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ir(){this._=null}function or(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ar(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ur(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function lr(t){for(;t.L;)t=t.L;return t}function sr(t,n){var e,r,i,o=t.sort(cr).pop();for(nl=[],el=new Array(t.length),rl=new ir,ol=new ir;;)if(i=il,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===e&&o.y===r||(el[o.i]=new Ze(o),He(o),e=o.x,r=o.y),o=t.pop();else{if(!i)break;Ie(i.arc)}n&&(Ge(n),Be(n));var a={cells:el,edges:nl};return rl=ol=nl=el=null,a}function cr(t,n){return n.y-t.y||n.x-t.x}function fr(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function hr(t){return t.x}function pr(t){return t.y}function dr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gr(t,n,e,r,i,o){if(!t(n,e,r,i,o)){var a=.5*(e+i),u=.5*(r+o),l=n.nodes;l[0]&&gr(t,l[0],e,r,a,u),l[1]&&gr(t,l[1],a,r,i,u),l[2]&&gr(t,l[2],e,u,a,o),l[3]&&gr(t,l[3],a,u,i,o)}}function vr(t,n,e,r,i,o,a){var u,l=1/0;return function t(s,c,f,h,p){if(!(c>o||f>a||h<r||p<i)){if(d=s.point){var d,g=n-s.x,v=e-s.y,y=g*g+v*v;if(y<l){var m=Math.sqrt(l=y);r=n-m,i=e-m,o=n+m,a=e+m,u=d}}for(var x=s.nodes,_=.5*(c+h),b=.5*(f+p),w=n>=_,M=e>=b,k=M<<1|w,S=k+4;k<S;++k)if(s=x[3&k])switch(3&k){case 0:t(s,c,f,_,b);break;case 1:t(s,_,f,h,b);break;case 2:t(s,c,b,_,p);break;case 3:t(s,_,b,h,p)}}}(t,r,i,o,a),u}function yr(t,n){t=ca.rgb(t),n=ca.rgb(n);var e=t.r,r=t.g,i=t.b,o=n.r-e,a=n.g-r,u=n.b-i;return function(t){return"#"+bt(Math.round(e+o*t))+bt(Math.round(r+a*t))+bt(Math.round(i+u*t))}}function mr(t,n){var e,r={},i={};for(e in t)e in n?r[e]=br(t[e],n[e]):i[e]=t[e];for(e in n)e in t||(i[e]=n[e]);return function(t){for(e in r)i[e]=r[e](t);return i}}function xr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function _r(t,n){var e,r,i,o=sl.lastIndex=cl.lastIndex=0,a=-1,u=[],l=[];for(t+="",n+="";(e=sl.exec(t))&&(r=cl.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,l.push({i:a,x:xr(e,r)})),o=cl.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?l[0]?(n=l[0].x,function(t){return n(t)+""}):function(){return n}:(n=l.length,function(t){for(var e,r=0;r<n;++r)u[(e=l[r]).i]=e.x(t);return u.join("")})}function br(t,n){for(var e,r=ca.interpolators.length;--r>=0&&!(e=ca.interpolators[r](t,n)););return e}function wr(t,n){var e,r=[],i=[],o=t.length,a=n.length,u=Math.min(t.length,n.length);for(e=0;e<u;++e)r.push(br(t[e],n[e]));for(;e<o;++e)i[e]=t[e];for(;e<a;++e)i[e]=n[e];return function(t){for(e=0;e<u;++e)i[e]=r[e](t);return i}}function Mr(t){return function(n){return n<=0?0:n>=1?1:t(n)}}function kr(t){return function(n){return 1-t(1-n)}}function Sr(t){return function(n){return.5*(n<.5?t(2*n):2-t(2-2*n))}}function Nr(t){return t*t}function Er(t){return t*t*t}function Ar(t){if(t<=0)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(t<.5?e:3*(t-n)+e-.75)}function Cr(t){return function(n){return Math.pow(n,t)}}function zr(t){return 1-Math.cos(t*Ia)}function Tr(t){return Math.pow(2,10*(t-1))}function qr(t){return 1-Math.sqrt(1-t*t)}function Lr(t,n){var e;return arguments.length<2&&(n=.45),arguments.length?e=n/Ua*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Ua/n)}}function Or(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function jr(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Rr(t,n){t=ca.hcl(t),n=ca.hcl(n);var e=t.h,r=t.c,i=t.l,o=n.h-e,a=n.c-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.c:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:o<-180&&(o+=360),function(t){return ft(e+o*t,r+a*t,i+u*t)+""}}function Dr(t,n){t=ca.hsl(t),n=ca.hsl(n);var e=t.h,r=t.s,i=t.l,o=n.h-e,a=n.s-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.s:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:o<-180&&(o+=360),function(t){return st(e+o*t,r+a*t,i+u*t)+""}}function Pr(t,n){t=ca.lab(t),n=ca.lab(n);var e=t.l,r=t.a,i=t.b,o=n.l-e,a=n.a-r,u=n.b-i;return function(t){return pt(e+o*t,r+a*t,i+u*t)+""}}function Ur(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Fr(t){var n=[t.a,t.b],e=[t.c,t.d],r=Hr(n),i=Ir(n,e),o=Hr(Yr(e,n,-i))||0
;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Ya,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ya:0}function Ir(t,n){return t[0]*n[0]+t[1]*n[1]}function Hr(t){var n=Math.sqrt(Ir(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Yr(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function Vr(t){return t.length?t.pop()+",":""}function Zr(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:xr(t[0],n[0])},{i:i-2,x:xr(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}function Br(t,n,e,r){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),r.push({i:e.push(Vr(e)+"rotate(",null,")")-2,x:xr(t,n)})):n&&e.push(Vr(e)+"rotate("+n+")")}function Xr(t,n,e,r){t!==n?r.push({i:e.push(Vr(e)+"skewX(",null,")")-2,x:xr(t,n)}):n&&e.push(Vr(e)+"skewX("+n+")")}function $r(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push(Vr(e)+"scale(",null,",",null,")");r.push({i:i-4,x:xr(t[0],n[0])},{i:i-2,x:xr(t[1],n[1])})}else 1===n[0]&&1===n[1]||e.push(Vr(e)+"scale("+n+")")}function Jr(t,n){var e=[],r=[];return t=ca.transform(t),n=ca.transform(n),Zr(t.translate,n.translate,e,r),Br(t.rotate,n.rotate,e,r),Xr(t.skew,n.skew,e,r),$r(t.scale,n.scale,e,r),t=n=null,function(t){for(var n,i=-1,o=r.length;++i<o;)e[(n=r[i]).i]=n.x(t);return e.join("")}}function Wr(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Gr(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Kr(t){for(var n=t.source,e=t.target,r=ti(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var o=i.length;e!==r;)i.splice(o,0,e),e=e.parent;return i}function Qr(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function ti(t,n){if(t===n)return t;for(var e=Qr(t),r=Qr(n),i=e.pop(),o=r.pop(),a=null;i===o;)a=i,i=e.pop(),o=r.pop();return a}function ni(t){t.fixed|=2}function ei(t){t.fixed&=-7}function ri(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ii(t){t.fixed&=-5}function oi(t,n,e){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,u=a.length,l=-1;++l<u;)null!=(o=a[l])&&(oi(o,n,e),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var s=n*e[t.point.index];t.charge+=t.pointCharge=s,r+=s*t.point.x,i+=s*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function ai(t,n){return ca.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=hi,t}function ui(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)e.push(i[r])}function li(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)e.push(o[a]);for(;null!=(t=r.pop());)n(t)}function si(t){return t.children}function ci(t){return t.value}function fi(t,n){return n.value-t.value}function hi(t){return ca.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function pi(t){return t.x}function di(t){return t.y}function gi(t,n,e){t.y0=n,t.y=e}function vi(t){return ca.range(t.length)}function yi(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function mi(t){for(var n,e=1,r=0,i=t[0][1],o=t.length;e<o;++e)(n=t[e][1])>i&&(r=e,i=n);return r}function xi(t){return t.reduce(_i,0)}function _i(t,n){return t+n[1]}function bi(t,n){return wi(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function wi(t,n){for(var e=-1,r=+t[0],i=(t[1]-r)/n,o=[];++e<=n;)o[e]=i*e+r;return o}function Mi(t){return[ca.min(t),ca.max(t)]}function ki(t,n){return t.value-n.value}function Si(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function Ni(t,n){t._pack_next=n,n._pack_prev=t}function Ei(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return.999*i*i>e*e+r*r}function Ai(t){function n(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}if((e=t.children)&&(s=e.length)){var e,r,i,o,a,u,l,s,c=1/0,f=-1/0,h=1/0,p=-1/0;if(e.forEach(Ci),r=e[0],r.x=-r.r,r.y=0,n(r),s>1&&(i=e[1],i.x=i.r,i.y=0,n(i),s>2))for(o=e[2],qi(r,i,o),n(o),Si(r,o),r._pack_prev=o,Si(o,i),i=r._pack_next,a=3;a<s;a++){qi(r,i,o=e[a]);var d=0,g=1,v=1;for(u=i._pack_next;u!==i;u=u._pack_next,g++)if(Ei(u,o)){d=1;break}if(1==d)for(l=r._pack_prev;l!==u._pack_prev&&!Ei(l,o);l=l._pack_prev,v++);d?(g<v||g==v&&i.r<r.r?Ni(r,i=u):Ni(r=l,i),a--):(Si(r,o),i=o,n(o))}var y=(c+f)/2,m=(h+p)/2,x=0;for(a=0;a<s;a++)o=e[a],o.x-=y,o.y-=m,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,e.forEach(zi)}}function Ci(t){t._pack_next=t._pack_prev=t}function zi(t){delete t._pack_next,delete t._pack_prev}function Ti(t,n,e,r){var i=t.children;if(t.x=n+=r*t.x,t.y=e+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ti(i[o],n,e,r)}function qi(t,n,e){var r=t.r+e.r,i=n.x-t.x,o=n.y-t.y;if(r&&(i||o)){var a=n.r+e.r,u=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*u),s=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);e.x=t.x+l*i+s*o,e.y=t.y+l*o-s*i}else e.x=t.x+r,e.y=t.y}function Li(t,n){return t.parent==n.parent?1:2}function Oi(t){var n=t.children;return n.length?n[0]:t.t}function ji(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function Ri(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Di(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)n=i[o],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function Pi(t,n,e){return t.a.parent===n.parent?t.a:e}function Ui(t){return 1+ca.max(t,function(t){return t.y})}function Fi(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function Ii(t){var n=t.children;return n&&n.length?Ii(n[0]):t}function Hi(t){var n,e=t.children;return e&&(n=e.length)?Hi(e[n-1]):t}function Yi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Vi(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return i<0&&(e+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:e,y:r,dx:i,dy:o}}function Zi(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}function Bi(t){return t.rangeExtent?t.rangeExtent():Zi(t.range())}function Xi(t,n,e,r){var i=e(t[0],t[1]),o=r(n[0],n[1]);return function(t){return o(i(t))}}function $i(t,n){var e,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Ji(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:bl}function Wi(t,n,e,r){var i=[],o=[],a=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<=u;)i.push(e(t[a-1],t[a])),o.push(r(n[a-1],n[a]));return function(n){var e=ca.bisect(t,n,1,u)-1;return o[e](i[e](n))}}function Gi(t,n,e,r){function i(){var i=Math.min(t.length,n.length)>2?Wi:Xi,l=r?Gr:Wr;return a=i(t,n,l,e),u=i(n,t,l,br),o}function o(t){return a(t)}var a,u;return o.invert=function(t){return u(t)},o.domain=function(n){return arguments.length?(t=n.map(Number),i()):t},o.range=function(t){return arguments.length?(n=t,i()):n},o.rangeRound=function(t){return o.range(t).interpolate(Ur)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(e=t,i()):e},o.ticks=function(n){return no(t,n)},o.tickFormat=function(n,e){return eo(t,n,e)},o.nice=function(n){return Qi(t,n),i()},o.copy=function(){return Gi(t,n,e,r)},i()}function Ki(t,n){return ca.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Qi(t,n){return $i(t,Ji(to(t,n)[2])),$i(t,Ji(to(t,n)[2])),t}function to(t,n){null==n&&(n=10);var e=Zi(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function no(t,n){return ca.range.apply(ca,to(t,n))}function eo(t,n,e){var r=to(t,n);if(e){var i=su.exec(e);if(i.shift(),"s"===i[8]){var o=ca.formatPrefix(Math.max(_a(r[0]),_a(r[1])));return i[7]||(i[7]="."+ro(o.scale(r[2]))),i[8]="f",e=ca.format(i.join("")),function(t){return e(o.scale(t))+o.symbol}}i[7]||(i[7]="."+io(i[8],r)),e=i.join("")}else e=",."+ro(r[2])+"f";return ca.format(e)}function ro(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function io(t,n){var e=ro(n[2]);return t in wl?Math.abs(e-ro(Math.max(_a(n[0]),_a(n[1]))))+ +("e"!==t):e-2*("%"===t)}function oo(t,n,e,r){function i(t){return(e?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function o(t){return e?Math.pow(n,t):-Math.pow(n,-t)}function a(n){return t(i(n))}return a.invert=function(n){return o(t.invert(n))},a.domain=function(n){return arguments.length?(e=n[0]>=0,t.domain((r=n.map(Number)).map(i)),a):r},a.base=function(e){return arguments.length?(n=+e,t.domain(r.map(i)),a):n},a.nice=function(){var n=$i(r.map(i),e?Math:kl);return t.domain(n),r=n.map(o),a},a.ticks=function(){var t=Zi(r),a=[],u=t[0],l=t[1],s=Math.floor(i(u)),c=Math.ceil(i(l)),f=n%1?2:n;if(isFinite(c-s)){if(e){for(;s<c;s++)for(var h=1;h<f;h++)a.push(o(s)*h);a.push(o(s))}else for(a.push(o(s));s++<c;)for(var h=f-1;h>0;h--)a.push(o(s)*h);for(s=0;a[s]<u;s++);for(c=a.length;a[c-1]>l;c--);a=a.slice(s,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return Ml;arguments.length<2?e=Ml:"function"!=typeof e&&(e=ca.format(e));var r=Math.max(1,n*t/a.ticks().length);return function(t){var a=t/o(Math.round(i(t)));return a*n<n-.5&&(a*=n),a<=r?e(t):""}},a.copy=function(){return oo(t.copy(),n,e,r)},Ki(a,t)}function ao(t,n,e){function r(n){return t(i(n))}var i=uo(n),o=uo(1/n);return r.invert=function(n){return o(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain((e=n.map(Number)).map(i)),r):e},r.ticks=function(t){return no(e,t)},r.tickFormat=function(t,n){return eo(e,t,n)},r.nice=function(t){return r.domain(Qi(e,t))},r.exponent=function(a){return arguments.length?(i=uo(n=a),o=uo(1/n),t.domain(e.map(i)),r):n},r.copy=function(){return ao(t.copy(),n,e)},Ki(r,t)}function uo(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function lo(t,n){function e(e){return o[((i.get(e)||("range"===n.t?i.set(e,t.push(e)):NaN))-1)%o.length]}function r(n,e){return ca.range(t.length).map(function(t){return n+e*t})}var i,o,a;return e.domain=function(r){if(!arguments.length)return t;t=[],i=new c;for(var o,a=-1,u=r.length;++a<u;)i.has(o=r[a])||i.set(o,t.push(o));return e[n.t].apply(e,n.a)},e.range=function(t){return arguments.length?(o=t,a=0,n={t:"range",a:arguments},e):o},e.rangePoints=function(i,u){arguments.length<2&&(u=0);var l=i[0],s=i[1],c=t.length<2?(l=(l+s)/2,0):(s-l)/(t.length-1+u);return o=r(l+c*u/2,c),a=0,n={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var l=i[0],s=i[1],c=t.length<2?(l=s=Math.round((l+s)/2),0):(s-l)/(t.length-1+u)|0;return o=r(l+Math.round(c*u/2+(s-l-(t.length-1+u)*c)/2),c),a=0,n={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(i,u,l){arguments.length<2&&(u=0),arguments.length<3&&(l=u);var s=i[1]<i[0],c=i[s-0],f=i[1-s],h=(f-c)/(t.length-u+2*l);return o=r(c+h*l,h),s&&o.reverse(),a=h*(1-u),n={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,u,l){arguments.length<2&&(u=0),arguments.length<3&&(l=u);var s=i[1]<i[0],c=i[s-0],f=i[1-s],h=Math.floor((f-c)/(t.length-u+2*l));return o=r(c+Math.round((f-c-(t.length-u)*h)/2),h),s&&o.reverse(),a=Math.round(h*(1-u)),n={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Zi(n.a[0])},e.copy=function(){return lo(t,n)},e.domain(t)}function so(t,n){function e(){var e=0,r=n.length;for(u=[];++e<r;)u[e-1]=ca.quantile(t,e/r);return a}function a(t){if(!isNaN(t=+t))return n[ca.bisect(u,t)]}var u;return a.domain=function(n){return arguments.length?(t=n.map(i).filter(o).sort(r),e()):t},a.range=function(t){return arguments.length?(n=t,e()):n},a.quantiles=function(){return u},a.invertExtent=function(e){return e=n.indexOf(e),e<0?[NaN,NaN]:[e>0?u[e-1]:t[0],e<u.length?u[e]:t[t.length-1]]},a.copy=function(){return so(t,n)},e()}function co(t,n,e){function r(n){return e[Math.max(0,Math.min(a,Math.floor(o*(n-t))))]}function i(){return o=e.length/(n-t),a=e.length-1,r}var o,a;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],i()):[t,n]},r.range=function(t){return arguments.length?(e=t,i()):e},r.invertExtent=function(n){return n=e.indexOf(n),n=n<0?NaN:n/o+t,[n,n+1/o]},r.copy=function(){return co(t,n,e)},i()}function fo(t,n){function e(e){if(e<=e)return n[ca.bisect(t,e)]}return e.domain=function(n){return arguments.length?(t=n,e):t},e.range=function(t){return arguments.length?(n=t,e):n},e.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},e.copy=function(){return fo(t,n)},e}function ho(t){function n(t){return+t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(n){return no(t,n)},n.tickFormat=function(n,e){return eo(t,n,e)},n.copy=function(){return ho(t)},n}function po(){return 0}function go(t){return t.innerRadius}function vo(t){return t.outerRadius}function yo(t){return t.startAngle}function mo(t){return t.endAngle}function xo(t){return t&&t.padAngle}function _o(t,n,e,r){return(t-e)*n-(n-r)*t>0?0:1}function bo(t,n,e,r,i){var o=t[0]-n[0],a=t[1]-n[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),l=u*a,s=-u*o,c=t[0]+l,f=t[1]+s,h=n[0]+l,p=n[1]+s,d=(c+h)/2,g=(f+p)/2,v=h-c,y=p-f,m=v*v+y*y,x=e-r,_=c*p-h*f,b=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-_*_)),w=(_*y-v*b)/m,M=(-_*v-y*b)/m,k=(_*y+v*b)/m,S=(-_*v+y*b)/m,N=w-d,E=M-g,A=k-d,C=S-g;return N*N+E*E>A*A+C*C&&(w=k,M=S),[[w-l,M-s],[w*e/x,M*e/x]]}function wo(t){function n(n){function a(){s.push("M",o(t(c),u))}for(var l,s=[],c=[],f=-1,h=n.length,p=Et(e),d=Et(r);++f<h;)i.call(this,l=n[f],f)?c.push([+p.call(this,l,f),+d.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),s.length?s.join(""):null}var e=Te,r=qe,i=Tn,o=Mo,a=o.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(i=t,n):i},n.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=zl.get(t)||Mo).key,n):a},n.tension=function(t){return arguments.length?(u=t,n):u},n}function Mo(t){return t.length>1?t.join("L"):t+"Z"}function ko(t){return t.join("L")+"Z"}function So(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function No(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function Eo(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function Ao(t,n){return t.length<4?Mo(t):t[1]+To(t.slice(1,-1),qo(t,n))}function Co(t,n){return t.length<3?ko(t):t[0]+To((t.push(t[0]),t),qo([t[t.length-2]].concat(t,[t[1]]),n))}function zo(t,n){return t.length<3?Mo(t):t[0]+To(t,qo(t,n))}function To(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return Mo(t);var e=t.length!=n.length,r="",i=t[0],o=t[1],a=n[0],u=a,l=1;if(e&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),n.length>1){u=n[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var s=2;s<n.length;s++,l++)o=t[l],u=n[s],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(e){var c=t[l];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function qo(t,n){for(var e,r=[],i=(1-n)/2,o=t[0],a=t[1],u=1,l=t.length;++u<l;)e=o,o=a,a=t[u],r.push([i*(a[0]-e[0]),i*(a[1]-e[1])]);return r}function Lo(t){if(t.length<3)return Mo(t);var n=1,e=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],l=[i,",",o,"L",Do(Ll,a),",",Do(Ll,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),Po(l,a,u);return t.pop(),l.push("L",r),l.join("")}function Oo(t){if(t.length<4)return Mo(t);for(var n,e=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)n=t[r],o.push(n[0]),a.push(n[1]);for(e.push(Do(Ll,o)+","+Do(Ll,a)),--r;++r<i;)n=t[r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),Po(e,o,a);return e.join("")}function jo(t){for(var n,e,r=-1,i=t.length,o=i+4,a=[],u=[];++r<4;)e=t[r%i],a.push(e[0]),u.push(e[1]);for(n=[Do(Ll,a),",",Do(Ll,u)],--r;++r<o;)e=t[r%i],a.shift(),a.push(e[0]),u.shift(),u.push(e[1]),Po(n,a,u);return n.join("")}function Ro(t,n){var e=t.length-1;if(e)for(var r,i,o=t[0][0],a=t[0][1],u=t[e][0]-o,l=t[e][1]-a,s=-1;++s<=e;)r=t[s],i=s/e,r[0]=n*r[0]+(1-n)*(o+i*u),r[1]=n*r[1]+(1-n)*(a+i*l);return Lo(t)}function Do(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Po(t,n,e){t.push("C",Do(Tl,n),",",Do(Tl,e),",",Do(ql,n),",",Do(ql,e),",",Do(Ll,n),",",Do(Ll,e))}function Uo(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Fo(t){for(var n=0,e=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Uo(i,o);++n<e;)r[n]=(a+(a=Uo(i=o,o=t[n+1])))/2;return r[n]=a,r}function Io(t){for(var n,e,r,i,o=[],a=Fo(t),u=-1,l=t.length-1;++u<l;)n=Uo(t[u],t[u+1]),_a(n)<Ra?a[u]=a[u+1]=0:(e=a[u]/n,r=a[u+1]/n,(i=e*e+r*r)>9&&(i=3*n/Math.sqrt(i),a[u]=i*e,a[u+1]=i*r));for(u=-1;++u<=l;)i=(t[Math.min(l,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}function Ho(t){return t.length<3?Mo(t):t[0]+To(t,Io(t))}function Yo(t){for(var n,e,r,i=-1,o=t.length;++i<o;)n=t[i],e=n[0],r=n[1]-Ia,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Vo(t){function n(n){function l(){g.push("M",u(t(y),f),c,s(t(v.reverse()),f),"Z")}for(var h,p,d,g=[],v=[],y=[],m=-1,x=n.length,_=Et(e),b=Et(i),w=e===r?function(){return p}:Et(r),M=i===o?function(){return d}:Et(o);++m<x;)a.call(this,h=n[m],m)?(v.push([p=+_.call(this,h,m),d=+b.call(this,h,m)]),y.push([+w.call(this,h,m),+M.call(this,h,m)])):v.length&&(l(),v=[],y=[]);return v.length&&l(),g.length?g.join(""):null}var e=Te,r=Te,i=0,o=qe,a=Tn,u=Mo,l=u.key,s=u,c="L",f=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(i=o=t,n):o},n.y0=function(t){return arguments.length?(i=t,n):i},n.y1=function(t){return arguments.length?(o=t,n):o},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(l="function"==typeof t?u=t:(u=zl.get(t)||Mo).key,s=u.reverse||u,c=u.closed?"M":"L",n):l},n.tension=function(t){return arguments.length?(f=t,n):f},n}function Zo(t){return t.radius}function Bo(t){return[t.x,t.y]}function Xo(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Ia;return[e*Math.cos(r),e*Math.sin(r)]}}function $o(){return 64}function Jo(){return"circle"}function Wo(t){var n=Math.sqrt(t/Pa);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function Go(t){return function(){var n,e,r;(n=this[t])&&(r=n[e=n.active])&&(r.timer.c=null,r.timer.t=NaN,--n.count?delete n[e]:delete this[t],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ko(t,n,e){return Sa(t,Fl),t.namespace=n,t.id=e,t}function Qo(t,n,e,r){var i=t.id,o=t.namespace;return V(t,"function"==typeof e?function(t,a,u){t[o][i].tween.set(n,r(e.call(t,t.__data__,a,u)))}:(e=r(e),function(t){t[o][i].tween.set(n,e)}))}function ta(t){return null==t&&(t=""),function(){this.textContent=t}}function na(t){return null==t?"__transition__":"__transition_"+t+"__"}function ea(t,n,e,r,i){function o(t){var n=g.delay;if(s.t=n+l,n<=t)return a(t-n);s.c=a}function a(e){var i=d.active,o=d[i];o&&(o.timer.c=null,o.timer.t=NaN,--d.count,delete d[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var a in d)if(+a<r){var c=d[a];c.timer.c=null,c.timer.t=NaN,--d.count,delete d[a]}s.c=u,qt(function(){return s.c&&u(e||1)&&(s.c=null,s.t=NaN),1},0,l),d.active=r,g.event&&g.event.start.call(t,t.__data__,n),p=[],g.tween.forEach(function(e,r){(r=r.call(t,t.__data__,n))&&p.push(r)}),h=g.ease,f=g.duration}function u(i){for(var o=i/f,a=h(o),u=p.length;u>0;)p[--u].call(t,a);if(o>=1)return g.event&&g.event.end.call(t,t.__data__,n),--d.count?delete d[r]:delete t[e],1}var l,s,f,h,p,d=t[e]||(t[e]={active:0,count:0}),g=d[r];g||(l=i.time,s=qt(o,0,l),g=d[r]={tween:new c,time:l,timer:s,delay:i.delay,duration:i.duration,ease:i.ease,index:n},i=null,++d.count)}function ra(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"})}function ia(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"})}function oa(t){return t.toISOString()}function aa(t,n,e){function r(n){return t(n)}function i(t,e){var r=t[1]-t[0],i=r/e,o=ca.bisect(Jl,i);return o==Jl.length?[n.year,to(t.map(function(t){return t/31536e6}),e)[2]]:o?n[i/Jl[o-1]<Jl[o]/i?o-1:o]:[Kl,to(t,e)[2]]}return r.invert=function(n){return ua(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(ua)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,ua(+e+1),n).length}var o=r.domain(),a=Zi(o),u=null==t?i(a,10):"number"==typeof t&&i(a,t);return u&&(t=u[0],n=u[1]),r.domain($i(o,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=ua(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=ua(+n+1);return n}}:t))},r.ticks=function(t,n){var e=Zi(r.domain()),o=null==t?i(e,10):"number"==typeof t?i(e,t):!t.range&&[{range:t},n];return o&&(t=o[0],n=o[1]),t.range(e[0],ua(+e[1]+1),n<1?1:n)},r.tickFormat=function(){return e},r.copy=function(){return aa(t.copy(),n,e)},Ki(r,t)}function ua(t){return new Date(t)}function la(t){return JSON.parse(t.responseText)}function sa(t){var n=pa.createRange();return n.selectNode(pa.body),n.createContextualFragment(t.responseText)}var ca={version:"3.5.12"},fa=[].slice,ha=function(t){return fa.call(t)},pa=this.document;if(pa)try{ha(pa.documentElement.childNodes)[0].nodeType}catch(t){ha=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),pa)try{pa.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var da=this.Element.prototype,ga=da.setAttribute,va=da.setAttributeNS,ya=this.CSSStyleDeclaration.prototype,ma=ya.setProperty;da.setAttribute=function(t,n){ga.call(this,t,n+"")},da.setAttributeNS=function(t,n,e){va.call(this,t,n,e+"")},ya.setProperty=function(t,n,e){ma.call(this,t,n+"",e)}}ca.ascending=r,ca.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},ca.min=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&e>r&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&e>r&&(e=r)}return e},ca.max=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&r>e&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&r>e&&(e=r)}return e},ca.extent=function(t,n){var e,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){e=i=r;break}for(;++o<a;)null!=(r=t[o])&&(e>r&&(e=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=n.call(t,t[o],o))&&r>=r){e=i=r;break}for(;++o<a;)null!=(r=n.call(t,t[o],o))&&(e>r&&(e=r),i<r&&(i=r))}return[e,i]},ca.sum=function(t,n){var e,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)o(e=+t[a])&&(r+=e);else for(;++a<i;)o(e=+n.call(t,t[a],a))&&(r+=e);return r},ca.mean=function(t,n){var e,r=0,a=t.length,u=-1,l=a;if(1===arguments.length)for(;++u<a;)o(e=i(t[u]))?r+=e:--l;else for(;++u<a;)o(e=i(n.call(t,t[u],u)))?r+=e:--l;if(l)return r/l},ca.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],o=e-r;return o?i+o*(t[r]-i):i},ca.median=function(t,n){var e,a=[],u=t.length,l=-1;if(1===arguments.length)for(;++l<u;)o(e=i(t[l]))&&a.push(e);else for(;++l<u;)o(e=i(n.call(t,t[l],l)))&&a.push(e);if(a.length)return ca.quantile(a.sort(r),.5)},ca.variance=function(t,n){var e,r,a=t.length,u=0,l=0,s=-1,c=0;if(1===arguments.length)for(;++s<a;)o(e=i(t[s]))&&(r=e-u,u+=r/++c,l+=r*(e-u));else for(;++s<a;)o(e=i(n.call(t,t[s],s)))&&(r=e-u,u+=r/++c,l+=r*(e-u));if(c>1)return l/(c-1)},ca.deviation=function(){var t=ca.variance.apply(this,arguments);return t?Math.sqrt(t):t};var xa=a(r);ca.bisectLeft=xa.left,ca.bisect=ca.bisectRight=xa.right,ca.bisector=function(t){return a(1===t.length?function(n,e){return r(t(n),e)}:t)},ca.shuffle=function(t,n,e){(o=arguments.length)<3&&(e=t.length,o<2&&(n=0));for(var r,i,o=e-n;o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},ca.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},ca.pairs=function(t){for(var n=0,e=t.length-1,r=t[0],i=new Array(e<0?0:e);n<e;)i[n]=[r,r=t[++n]];return i},ca.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=ca.min(arguments,u),e=new Array(n);++t<n;)for(var r,i=-1,o=e[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return e},ca.transpose=function(t){return ca.zip.apply(ca,t)},ca.keys=function(t){var n=[];for(var e in t)n.push(e);return n},ca.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},ca.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},ca.merge=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(r=t[i],n=r.length;--n>=0;)e[--a]=r[n];return e};var _a=Math.abs;ca.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,i=[],o=l(_a(e)),a=-1;if(t*=o,n*=o,e*=o,e<0)for(;(r=t+e*++a)>n;)i.push(r/o);else for(;(r=t+e*++a)<n;)i.push(r/o);return i},ca.map=function(t,n){var e=new c;if(t instanceof c)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var ba="__proto__",wa="\0";s(c,{has:p,get:function(t){return this._[f(t)]},set:function(t,n){return this._[f(t)]=n},remove:d,keys:g,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:h(n),value:this._[n]});return t},size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n),this._[n])}}),ca.nest=function(){function t(n,a,u){if(u>=o.length)return r?r.call(i,a):e?a.sort(e):a;for(var l,s,f,h,p=-1,d=a.length,g=o[u++],v=new c;++p<d;)(h=v.get(l=g(s=a[p])))?h.push(s):v.set(l,[s]);return n?(s=n(),f=function(e,r){s.set(e,t(n,r,u))}):(s={},f=function(e,r){s[e]=t(n,r,u)}),v.forEach(f),s}function n(t,e){if(e>=o.length)return t;var r=[],i=a[e++];return t.forEach(function(t,i){r.push({key:t,values:n(i,e)})}),i?r.sort(function(t,n){return i(t.key,n.key)}):r}var e,r,i={},o=[],a=[];return i.map=function(n,e){return t(e,n,0)},i.entries=function(e){return n(t(ca.map,e,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return e=t,i},i.rollup=function(t){return r=t,i},i},ca.set=function(t){var n=new m;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},s(m,{has:p,add:function(t){return this._[f(t+="")]=!0,t},remove:d,values:g,size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n))}}),ca.behavior={},ca.rebind=function(t,n){for(var e,r=1,i=arguments.length;++r<i;)t[e=arguments[r]]=_(t,n,n[e]);return t};var Ma=["webkit","ms","moz","Moz","o","O"];ca.dispatch=function(){for(var t=new M,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=k(t);return t},M.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ca.event=null,ca.requote=function(t){return t.replace(ka,"\\$&")};var ka=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},Na=function(t,n){return n.querySelector(t)},Ea=function(t,n){return n.querySelectorAll(t)},Aa=function(t,n){var e=t.matches||t[b(t,"matchesSelector")];return(Aa=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(Na=function(t,n){return Sizzle(t,n)[0]||null},Ea=Sizzle,Aa=Sizzle.matchesSelector),ca.selection=function(){return ca.select(pa.documentElement)};var Ca=ca.selection.prototype=[];Ca.select=function(t){var n,e,r,i,o=[];t=C(t);for(var a=-1,u=this.length;++a<u;){o.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var l=-1,s=r.length;++l<s;)(i=r[l])?(n.push(e=t.call(i,i.__data__,l,a)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return A(o)},Ca.selectAll=function(t){var n,e,r=[];t=z(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,l=a.length;++u<l;)(e=a[u])&&(r.push(n=ha(t.call(e,e.__data__,u,i))),n.parentNode=e);return A(r)};var za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ca.ns={prefix:za,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),za.hasOwnProperty(e)?{space:za[e],local:t}:t}},Ca.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=ca.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(T(n,t[n]));return this}return this.each(T(t,n))},Ca.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=O(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!L(t[i]).test(n))return!1;return!0}for(n in t)this.each(j(n,t[n]));return this}return this.each(j(t,n))},Ca.style=function(t,n,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(n="");for(r in t)this.each(D(r,t[r],n));return this}if(i<2){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(D(t,n,r))},Ca.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(P(n,t[n]));return this}return this.each(P(t,n))},Ca.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ca.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ca.append=function(t){return t=U(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ca.insert=function(t,n){return t=U(t),n=C(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},Ca.remove=function(){return this.each(F)},Ca.data=function(t,n){function e(t,e){var r,i,o,a=t.length,f=e.length,h=Math.min(a,f),p=new Array(f),d=new Array(f),g=new Array(a);if(n){var v,y=new c,m=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(y.has(v=n.call(i,i.__data__,r))?g[r]=i:y.set(v,i),m[r]=v);for(r=-1;++r<f;)(i=y.get(v=n.call(e,o=e[r],r)))?!0!==i&&(p[r]=i,i.__data__=o):d[r]=I(o),y.set(v,!0);for(r=-1;++r<a;)r in m&&!0!==y.get(m[r])&&(g[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):d[r]=I(o);for(;r<f;++r)d[r]=I(e[r]);for(;r<a;++r)g[r]=t[r]}d.update=p,d.parentNode=p.parentNode=g.parentNode=t.parentNode,u.push(d),l.push(p),s.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var u=Z([]),l=A([]),s=A([]);if("function"==typeof t)for(;++o<a;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],t);return l.enter=function(){return u},l.exit=function(){return s},l},Ca.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ca.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode
;for(var u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return A(i)},Ca.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},Ca.sort=function(t){t=Y.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},Ca.each=function(t){return V(this,function(n,e,r){t.call(n,n.__data__,e,r)})},Ca.call=function(t){var n=ha(arguments);return t.apply(n[0]=this,n),this},Ca.empty=function(){return!this.node()},Ca.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},Ca.size=function(){var t=0;return V(this,function(){++t}),t};var Ta=[];ca.selection.enter=Z,ca.selection.enter.prototype=Ta,Ta.append=Ca.append,Ta.empty=Ca.empty,Ta.node=Ca.node,Ta.call=Ca.call,Ta.size=Ca.size,Ta.select=function(t){for(var n,e,r,i,o,a=[],u=-1,l=this.length;++u<l;){r=(i=this[u]).update,a.push(n=[]),n.parentNode=i.parentNode;for(var s=-1,c=i.length;++s<c;)(o=i[s])?(n.push(r[s]=e=t.call(i.parentNode,o.__data__,s,u)),e.__data__=o.__data__):n.push(null)}return A(a)},Ta.insert=function(t,n){return arguments.length<2&&(n=B(this)),Ca.insert.call(this,t,n)},ca.select=function(t){var e;return"string"==typeof t?(e=[Na(t,pa)],e.parentNode=pa.documentElement):(e=[t],e.parentNode=n(t)),A([e])},ca.selectAll=function(t){var n;return"string"==typeof t?(n=ha(Ea(t,pa)),n.parentNode=pa.documentElement):(n=ha(t),n.parentNode=null),A([n])},Ca.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n=!1);for(e in t)this.each(X(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(X(t,n,e))};var qa=ca.map({mouseenter:"mouseover",mouseleave:"mouseout"});pa&&qa.forEach(function(t){"on"+t in pa&&qa.remove(t)});var La,Oa=0;ca.mouse=function(t){return G(t,N())};var ja=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ca.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=N().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return G(t,r)},ca.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,n,e,o,a){return function(){function u(){var t,e,r=n(h,g);r&&(t=r[0]-x[0],e=r[1]-x[1],d|=t|e,x=r,p({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:e}))}function l(){n(h,g)&&(y.on(o+v,null).on(a+v,null),m(d),p({type:"dragend"}))}var s,c=this,f=ca.event.target,h=c.parentNode,p=r.of(c,arguments),d=0,g=t(),v=".drag"+(null==g?"":"-"+g),y=ca.select(e(f)).on(o+v,u).on(a+v,l),m=W(f),x=n(h,g);i?(s=i.apply(c,arguments),s=[s.x-x[0],s.y-x[1]]):s=[0,0],p({type:"dragstart"})}}var r=E(t,"drag","dragstart","dragend"),i=null,o=n(w,ca.mouse,e,"mousemove","mouseup"),a=n(K,ca.touch,x,"touchmove","touchend");return t.origin=function(n){return arguments.length?(i=n,t):i},ca.rebind(t,r,"on")},ca.touches=function(t,n){return arguments.length<2&&(n=N().touches),n?ha(n).map(function(n){var e=G(t,n);return e.identifier=n.identifier,e}):[]};var Ra=1e-6,Da=Ra*Ra,Pa=Math.PI,Ua=2*Pa,Fa=Ua-Ra,Ia=Pa/2,Ha=Pa/180,Ya=180/Pa,Va=Math.SQRT2;ca.interpolateZoom=function(t,n){var e,r,i=t[0],o=t[1],a=t[2],u=n[0],l=n[1],s=n[2],c=u-i,f=l-o,h=c*c+f*f;if(h<Da)r=Math.log(s/a)/Va,e=function(t){return[i+t*c,o+t*f,a*Math.exp(Va*t*r)]};else{var p=Math.sqrt(h),d=(s*s-a*a+4*h)/(2*a*2*p),g=(s*s-a*a-4*h)/(2*s*2*p),v=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-v)/Va,e=function(t){var n=t*r,e=it(v),u=a/(2*p)*(e*ot(Va*n+v)-rt(v));return[i+u*c,o+u*f,a*e/it(Va*n+v)]}}return e.duration=1e3*r,e},ca.behavior.zoom=function(){function t(t){t.on(T,f).on(Ba+".zoom",p).on("dblclick.zoom",d).on(O,h)}function n(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function r(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}function i(t){k.k=Math.max(A[0],Math.min(A[1],t))}function o(t,n){n=r(n),k.x+=t[0]-n[0],k.y+=t[1]-n[1]}function a(n,e,r,a){n.__chart__={x:k.x,y:k.y,k:k.k},i(Math.pow(2,a)),o(v=e,r),n=ca.select(n),C>0&&(n=n.transition().duration(C)),n.call(t.event)}function u(){b&&b.domain(_.range().map(function(t){return(t-k.x)/k.k}).map(_.invert)),M&&M.domain(w.range().map(function(t){return(t-k.y)/k.k}).map(w.invert))}function l(t){z++||t({type:"zoomstart"})}function s(t){u(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function c(t){--z||(t({type:"zoomend"}),v=null)}function f(){function t(){u=1,o(ca.mouse(i),h),s(a)}function r(){f.on(q,null).on(L,null),p(u),c(a)}var i=this,a=j.of(i,arguments),u=0,f=ca.select(e(i)).on(q,t).on(L,r),h=n(ca.mouse(i)),p=W(i);Ul.call(i),l(a)}function h(){function t(){var t=ca.touches(d);return p=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var n=ca.event.target;ca.select(n).on(_,r).on(b,u),w.push(n);for(var e=ca.event.changedTouches,i=0,o=e.length;i<o;++i)v[e[i].identifier]=null;var l=t(),s=Date.now();if(1===l.length){if(s-x<500){var c=l[0];a(d,c,v[c.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}x=s}else if(l.length>1){var c=l[0],f=l[1],h=c[0]-f[0],p=c[1]-f[1];y=h*h+p*p}}function r(){var t,n,e,r,a=ca.touches(d);Ul.call(d);for(var u=0,l=a.length;u<l;++u,r=null)if(e=a[u],r=v[e.identifier]){if(n)break;t=e,n=r}if(r){var c=(c=e[0]-t[0])*c+(c=e[1]-t[1])*c,f=y&&Math.sqrt(c/y);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+r[0])/2,(n[1]+r[1])/2],i(f*p)}x=null,o(t,n),s(g)}function u(){if(ca.event.touches.length){for(var n=ca.event.changedTouches,e=0,r=n.length;e<r;++e)delete v[n[e].identifier];for(var i in v)return void t()}ca.selectAll(w).on(m,null),M.on(T,f).on(O,h),N(),c(g)}var p,d=this,g=j.of(d,arguments),v={},y=0,m=".zoom-"+ca.event.changedTouches[0].identifier,_="touchmove"+m,b="touchend"+m,w=[],M=ca.select(d),N=W(d);e(),l(g),M.on(T,null).on(O,e)}function p(){var t=j.of(this,arguments);m?clearTimeout(m):(Ul.call(this),g=n(v=y||ca.mouse(this)),l(t)),m=setTimeout(function(){m=null,c(t)},50),S(),i(Math.pow(2,.002*Za())*k.k),o(v,g),s(t)}function d(){var t=ca.mouse(this),e=Math.log(k.k)/Math.LN2;a(this,t,n(t),ca.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,v,y,m,x,_,b,w,M,k={x:0,y:0,k:1},N=[960,500],A=Xa,C=250,z=0,T="mousedown.zoom",q="mousemove.zoom",L="mouseup.zoom",O="touchstart.zoom",j=E(t,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in pa?(Za=function(){return-ca.event.deltaY*(ca.event.deltaMode?120:1)},"wheel"):"onmousewheel"in pa?(Za=function(){return ca.event.wheelDelta},"mousewheel"):(Za=function(){return-ca.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=j.of(this,arguments),n=k;Dl?ca.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var e=N[0],r=N[1],i=v?v[0]:e/2,o=v?v[1]:r/2,a=ca.interpolateZoom([(i-k.x)/k.k,(o-k.y)/k.k,e/k.k],[(i-n.x)/n.k,(o-n.y)/n.k,e/n.k]);return function(n){var r=a(n),u=e/r[2];this.__chart__=k={x:i-r[0]*u,y:o-r[1]*u,k:u},s(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=k,l(t),s(t),c(t))})},t.translate=function(n){return arguments.length?(k={x:+n[0],y:+n[1],k:k.k},u(),t):[k.x,k.y]},t.scale=function(n){return arguments.length?(k={x:k.x,y:k.y,k:null},i(+n),u(),t):k.k},t.scaleExtent=function(n){return arguments.length?(A=null==n?Xa:[+n[0],+n[1]],t):A},t.center=function(n){return arguments.length?(y=n&&[+n[0],+n[1]],t):y},t.size=function(n){return arguments.length?(N=n&&[+n[0],+n[1]],t):N},t.duration=function(n){return arguments.length?(C=+n,t):C},t.x=function(n){return arguments.length?(b=n,_=n.copy(),k={x:0,y:0,k:1},t):b},t.y=function(n){return arguments.length?(M=n,w=n.copy(),k={x:0,y:0,k:1},t):M},ca.rebind(t,j,"on")};var Za,Ba,Xa=[0,1/0];ca.color=ut,ut.prototype.toString=function(){return this.rgb()+""},ca.hsl=lt;var $a=lt.prototype=new ut;$a.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,this.l/t)},$a.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,t*this.l)},$a.rgb=function(){return st(this.h,this.s,this.l)},ca.hcl=ct;var Ja=ct.prototype=new ut;Ja.brighter=function(t){return new ct(this.h,this.c,Math.min(100,this.l+Wa*(arguments.length?t:1)))},Ja.darker=function(t){return new ct(this.h,this.c,Math.max(0,this.l-Wa*(arguments.length?t:1)))},Ja.rgb=function(){return ft(this.h,this.c,this.l).rgb()},ca.lab=ht;var Wa=18,Ga=.95047,Ka=1,Qa=1.08883,tu=ht.prototype=new ut;tu.brighter=function(t){return new ht(Math.min(100,this.l+Wa*(arguments.length?t:1)),this.a,this.b)},tu.darker=function(t){return new ht(Math.max(0,this.l-Wa*(arguments.length?t:1)),this.a,this.b)},tu.rgb=function(){return pt(this.l,this.a,this.b)},ca.rgb=mt;var nu=mt.prototype=new ut;nu.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,i=30;return n||e||r?(n&&n<i&&(n=i),e&&e<i&&(e=i),r&&r<i&&(r=i),new mt(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new mt(i,i,i)},nu.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},nu.hsl=function(){return Mt(this.r,this.g,this.b)},nu.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var eu=ca.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eu.forEach(function(t,n){eu.set(t,xt(n))}),ca.functor=Et,ca.xhr=At(x),ca.dsv=function(t,n){function e(t,e,o){arguments.length<3&&(o=e,e=null);var a=Ct(t,n,null==e?r:i(e),o);return a.row=function(t){return arguments.length?a.response(null==(e=t)?r:i(t)):e},a}function r(t){return e.parse(t.responseText)}function i(t){return function(n){return e.parse(n.responseText,t)}}function o(n){return n.map(a).join(t)}function a(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,function(t,e){if(r)return r(t,e-1);var i=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");r=n?function(t,e){return n(i(t),e)}:i})},e.parseRows=function(t,n){function e(){if(c>=s)return a;if(i)return i=!1,o;var n=c;if(34===t.charCodeAt(n)){for(var e=n;e++<s;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}c=e+2;var r=t.charCodeAt(e+1);return 13===r?(i=!0,10===t.charCodeAt(e+2)&&++c):10===r&&(i=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;c<s;){var r=t.charCodeAt(c++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(r!==l)continue;return t.slice(n,c-u)}return t.slice(n)}for(var r,i,o={},a={},u=[],s=t.length,c=0,f=0;(r=e())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=e();n&&null==(h=n(h,f++))||u.push(h)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new m,i=[];return n.forEach(function(t){for(var n in t)r.has(n)||i.push(r.add(n))}),[i.map(a).join(t)].concat(n.map(function(n){return i.map(function(t){return a(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(o).join("\n")},e},ca.csv=ca.dsv(",","text/csv"),ca.tsv=ca.dsv("\t","text/tab-separated-values");var ru,iu,ou,au,uu=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ca.timer=function(){qt.apply(this,arguments)},ca.timer.flush=function(){Ot(),jt()},ca.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var lu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Dt);ca.formatPrefix=function(t,n){var e=0;return(t=+t)&&(t<0&&(t*=-1),n&&(t=ca.round(t,Rt(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),lu[8+e/3]};var su=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,cu=ca.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=ca.round(t,Rt(t,n))).toFixed(Math.max(0,Math.min(20,Rt(t*(1+1e-15),n))))}}),fu=ca.time={},hu=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){pu.setUTCDate.apply(this._,arguments)},setDay:function(){pu.setUTCDay.apply(this._,arguments)},setFullYear:function(){pu.setUTCFullYear.apply(this._,arguments)},setHours:function(){pu.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){pu.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){pu.setUTCMinutes.apply(this._,arguments)},setMonth:function(){pu.setUTCMonth.apply(this._,arguments)},setSeconds:function(){pu.setUTCSeconds.apply(this._,arguments)},setTime:function(){pu.setTime.apply(this._,arguments)}};var pu=Date.prototype;fu.year=It(function(t){return t=fu.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),fu.years=fu.year.range,fu.years.utc=fu.year.utc.range,fu.day=It(function(t){var n=new hu(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),fu.days=fu.day.range,fu.days.utc=fu.day.utc.range,fu.dayOfYear=function(t){var n=fu.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=fu[t]=It(function(t){return(t=fu.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=fu.year(t).getDay();return Math.floor((fu.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});fu[t+"s"]=e.range,fu[t+"s"].utc=e.utc.range,fu[t+"OfYear"]=function(t){var e=fu.year(t).getDay();return Math.floor((fu.dayOfYear(t)+(e+n)%7)/7)}}),fu.week=fu.sunday,fu.weeks=fu.sunday.range,fu.weeks.utc=fu.sunday.utc.range,fu.weekOfYear=fu.sundayOfYear;var du={"-":"",_:" ",0:"0"},gu=/^\s*\d+/,vu=/^%/;ca.locale=function(t){return{numberFormat:Pt(t),timeFormat:Yt(t)}};var yu=ca.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ca.format=yu.numberFormat,ca.geo={},fn.prototype={s:0,t:0,add:function(t){hn(t,this.t,mu),hn(mu.s,this.s,this),this.s?this.t+=mu.t:this.s=mu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var mu=new fn;ca.geo.stream=function(t,n){t&&xu.hasOwnProperty(t.type)?xu[t.type](t,n):pn(t,n)};var xu={Feature:function(t,n){pn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)pn(e[r].geometry,n)}},_u={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){dn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)dn(e[r],n,0)},Polygon:function(t,n){gn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)gn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)pn(e[r],n)}};ca.geo.area=function(t){return bu=0,ca.geo.stream(t,Mu),bu};var bu,wu=new fn,Mu={sphere:function(){bu+=4*Pa},point:w,lineStart:w,lineEnd:w,polygonStart:function(){wu.reset(),Mu.lineStart=vn},polygonEnd:function(){var t=2*wu;bu+=t<0?4*Pa+t:t,Mu.lineStart=Mu.lineEnd=Mu.point=w}};ca.geo.bounds=function(){function t(t,n){x.push(_=[c=t,h=t]),n<f&&(f=n),n>p&&(p=n)}function n(n,e){var r=yn([n*Ha,e*Ha]);if(y){var i=xn(y,r),o=[i[1],-i[0],0],a=xn(o,i);wn(a),a=Mn(a);var l=n-d,s=l>0?1:-1,g=a[0]*Ya*s,v=_a(l)>180;if(v^(s*d<g&&g<s*n)){var m=a[1]*Ya;m>p&&(p=m)}else if(g=(g+360)%360-180,v^(s*d<g&&g<s*n)){var m=-a[1]*Ya;m<f&&(f=m)}else e<f&&(f=e),e>p&&(p=e);v?n<d?u(c,n)>u(c,h)&&(h=n):u(n,h)>u(c,h)&&(c=n):h>=c?(n<c&&(c=n),n>h&&(h=n)):n>d?u(c,n)>u(c,h)&&(h=n):u(n,h)>u(c,h)&&(c=n)}else t(n,e);y=r,d=n}function e(){b.point=n}function r(){_[0]=c,_[1]=h,b.point=t,y=null}function i(t,e){if(y){var r=t-d;m+=_a(r)>180?r+(r>0?360:-360):r}else g=t,v=e;Mu.point(t,e),n(t,e)}function o(){Mu.lineStart()}function a(){i(g,v),Mu.lineEnd(),_a(m)>Ra&&(c=-(h=180)),_[0]=c,_[1]=h,y=null}function u(t,n){return(n-=t)<0?n+360:n}function l(t,n){return t[0]-n[0]}function s(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var c,f,h,p,d,g,v,y,m,x,_,b={point:t,lineStart:e,lineEnd:r,polygonStart:function(){b.point=i,b.lineStart=o,b.lineEnd=a,m=0,Mu.polygonStart()},polygonEnd:function(){Mu.polygonEnd(),b.point=t,b.lineStart=e,b.lineEnd=r,wu<0?(c=-(h=180),f=-(p=90)):m>Ra?p=90:m<-Ra&&(f=-90),_[0]=c,_[1]=h}};return function(t){p=h=-(c=f=1/0),x=[],ca.geo.stream(t,b);var n=x.length;if(n){x.sort(l);for(var e,r=1,i=x[0],o=[i];r<n;++r)e=x[r],s(e[0],i)||s(e[1],i)?(u(i[0],e[1])>u(i[0],i[1])&&(i[1]=e[1]),u(e[0],i[1])>u(i[0],i[1])&&(i[0]=e[0])):o.push(i=e);for(var a,e,d=-1/0,n=o.length-1,r=0,i=o[n];r<=n;i=e,++r)e=o[r],(a=u(i[1],e[0]))>d&&(d=a,c=e[0],h=i[1])}return x=_=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,p]]}}(),ca.geo.centroid=function(t){ku=Su=Nu=Eu=Au=Cu=zu=Tu=qu=Lu=Ou=0,ca.geo.stream(t,ju);var n=qu,e=Lu,r=Ou,i=n*n+e*e+r*r;return i<Da&&(n=Cu,e=zu,r=Tu,Su<Ra&&(n=Nu,e=Eu,r=Au),(i=n*n+e*e+r*r)<Da)?[NaN,NaN]:[Math.atan2(e,n)*Ya,et(r/Math.sqrt(i))*Ya]};var ku,Su,Nu,Eu,Au,Cu,zu,Tu,qu,Lu,Ou,ju={sphere:w,point:Sn,lineStart:En,lineEnd:An,polygonStart:function(){ju.lineStart=Cn},polygonEnd:function(){ju.lineStart=En}},Ru=jn(Tn,Un,In,[-Pa,-Pa/2]),Du=1e9;ca.geo.clipExtent=function(){var t,n,e,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(u){return arguments.length?(o=Zn(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[t,n],[e,r]]}};return a.extent([[0,0],[960,500]])},(ca.geo.conicEqualArea=function(){return Bn(Xn)}).raw=Xn,ca.geo.albers=function(){return ca.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ca.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return n=null,e(o,a),n||(r(o,a),n)||i(o,a),n}var n,e,r,i,o=ca.geo.albers(),a=ca.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ca.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=o.scale(),e=o.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},t.stream=function(t){var n=o.stream(t),e=a.stream(t),r=u.stream(t);return{point:function(t,i){n.point(t,i),e.point(t,i),r.point(t,i)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(o.precision(n),a.precision(n),u.precision(n),t):o.precision()},t.scale=function(n){return arguments.length?(o.scale(n),a.scale(.35*n),u.scale(n),t.translate(o.translate())):o.scale()},t.translate=function(n){if(!arguments.length)return o.translate();var s=o.scale(),c=+n[0],f=+n[1];return e=o.translate(n).clipExtent([[c-.455*s,f-.238*s],[c+.455*s,f+.238*s]]).stream(l).point,r=a.translate([c-.307*s,f+.201*s]).clipExtent([[c-.425*s+Ra,f+.12*s+Ra],[c-.214*s-Ra,f+.234*s-Ra]]).stream(l).point,i=u.translate([c-.205*s,f+.212*s]).clipExtent([[c-.214*s+Ra,f+.166*s+Ra],[c-.115*s-Ra,f+.234*s-Ra]]).stream(l).point,t},t.scale(1070)};var Pu,Uu,Fu,Iu,Hu,Yu,Vu={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Uu=0,Vu.lineStart=$n},polygonEnd:function(){Vu.lineStart=Vu.lineEnd=Vu.point=w,Pu+=_a(Uu/2)}},Zu={point:Jn,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Bu={point:Kn,lineStart:Qn,lineEnd:te,polygonStart:function(){Bu.lineStart=ne},polygonEnd:function(){Bu.point=Kn,Bu.lineStart=Qn,Bu.lineEnd=te}};ca.geo.path=function(){function t(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),a&&a.valid||(a=i(o)),ca.geo.stream(t,a)),o.result()}function n(){return a=null,t}var e,r,i,o,a,u=4.5;return t.area=function(t){return Pu=0,ca.geo.stream(t,i(Vu)),Pu},t.centroid=function(t){return Nu=Eu=Au=Cu=zu=Tu=qu=Lu=Ou=0,ca.geo.stream(t,i(Bu)),Ou?[qu/Ou,Lu/Ou]:Tu?[Cu/Tu,zu/Tu]:Au?[Nu/Au,Eu/Au]:[NaN,NaN]},t.bounds=function(t){return Hu=Yu=-(Fu=Iu=1/0),ca.geo.stream(t,i(Zu)),[[Fu,Iu],[Hu,Yu]]},t.projection=function(t){return arguments.length?(i=(e=t)?t.stream||ie(t):x,n()):e},t.context=function(t){return arguments.length?(o=null==(r=t)?new Wn:new ee(t),"function"!=typeof u&&o.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(o.pointRadius(+n),+n),t):u},t.projection(ca.geo.albersUsa()).context(null)},ca.geo.transform=function(t){return{stream:function(n){var e=new oe(n);for(var r in t)e[r]=t[r];return e}}},oe.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ca.geo.projection=ue,ca.geo.projectionMutator=le,(ca.geo.equirectangular=function(){return ue(fe)}).raw=fe.invert=fe,ca.geo.rotation=function(t){function n(n){return n=t(n[0]*Ha,n[1]*Ha),n[0]*=Ya,n[1]*=Ya,n}return t=pe(t[0]%360*Ha,t[1]*Ha,t.length>2?t[2]*Ha:0),n.invert=function(n){return n=t.invert(n[0]*Ha,n[1]*Ha),n[0]*=Ya,n[1]*=Ya,n},n},he.invert=fe,ca.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=pe(-t[0]*Ha,-t[1]*Ha,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Ya,t[1]*=Ya}}),{type:"Polygon",coordinates:[i]}}var n,e,r=[0,0],i=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=ye((n=+r)*Ha,i*Ha),t):n},t.precision=function(r){return arguments.length?(e=ye(n*Ha,(i=+r)*Ha),t):i},t.angle(90)},ca.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Ha,i=t[1]*Ha,o=n[1]*Ha,a=Math.sin(r),u=Math.cos(r),l=Math.sin(i),s=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((e=f*a)*e+(e=s*c-l*f*u)*e),l*c+s*f*u)},ca.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return ca.range(Math.ceil(o/v)*v,i,v).map(h).concat(ca.range(Math.ceil(s/y)*y,l,y).map(p)).concat(ca.range(Math.ceil(r/d)*d,e,d).filter(function(t){return _a(t%v)>Ra}).map(c)).concat(ca.range(Math.ceil(u/g)*g,a,g).filter(function(t){return _a(t%y)>Ra}).map(f))}var e,r,i,o,a,u,l,s,c,f,h,p,d=10,g=d,v=90,y=360,m=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(l).slice(1),h(i).reverse().slice(1),p(s).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],s=+n[0][1],l=+n[1][1],o>i&&(n=o,o=i,i=n),s>l&&(n=s,s=l,l=n),t.precision(m)):[[o,s],[i,l]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],a=+n[1][1],r>e&&(n=r,r=e,e=n),u>a&&(n=u,u=a,a=n),t.precision(m)):[[r,u],[e,a]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],y=+n[1],t):[v,y]},t.minorStep=function(n){return arguments.length?(d=+n[0],g=+n[1],t):[d,g]},t.precision=function(n){return arguments.length?(m=+n,c=xe(u,a,90),f=_e(r,e,m),h=xe(s,l,90),p=_e(o,i,m),t):m},t.majorExtent([[-180,-90+Ra],[180,90-Ra]]).minorExtent([[-180,-80-Ra],[180,80+Ra]])},ca.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||i.apply(this,arguments)]}}var n,e,r=be,i=we;return t.distance=function(){return ca.geo.distance(n||r.apply(this,arguments),e||i.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.precision=function(){return arguments.length?t:0},t},ca.geo.interpolate=function(t,n){return Me(t[0]*Ha,t[1]*Ha,n[0]*Ha,n[1]*Ha)},ca.geo.length=function(t){return Xu=0,ca.geo.stream(t,$u),Xu};var Xu,$u={sphere:w,point:w,lineStart:ke,lineEnd:w,polygonStart:w,polygonEnd:w},Ju=Se(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ca.geo.azimuthalEqualArea=function(){return ue(Ju)}).raw=Ju;var Wu=Se(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},x);(ca.geo.azimuthalEquidistant=function(){return ue(Wu)}).raw=Wu,(ca.geo.conicConformal=function(){return Bn(Ne)}).raw=Ne,(ca.geo.conicEquidistant=function(){return Bn(Ee)}).raw=Ee;var Gu=Se(function(t){return 1/t},Math.atan);(ca.geo.gnomonic=function(){return ue(Gu)}).raw=Gu,Ae.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Ia]},(ca.geo.mercator=function(){return Ce(Ae)}).raw=Ae;var Ku=Se(function(){return 1},Math.asin);(ca.geo.orthographic=function(){return ue(Ku)}).raw=Ku;var Qu=Se(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ca.geo.stereographic=function(){return ue(Qu)}).raw=Qu,ze.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Ia]},(ca.geo.transverseMercator=function(){var t=Ce(ze),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90])}).raw=ze,ca.geom={},ca.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,i=Et(e),o=Et(r),a=t.length,u=[],l=[];for(n=0;n<a;n++)u.push([+i.call(this,t[n],n),+o.call(this,t[n],n),n]);for(u.sort(Oe),n=0;n<a;n++)l.push([u[n][0],-u[n][1]]);var s=Le(u),c=Le(l),f=c[0]===s[0],h=c[c.length-1]===s[s.length-1],p=[];for(n=s.length-1;n>=0;--n)p.push(t[u[s[n]][2]]);for(n=+f;n<c.length-h;++n)p.push(t[u[c[n]][2]]);return p}var e=Te,r=qe;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n)},ca.geom.polygon=function(t){return Sa(t,tl),t};var tl=ca.geom.polygon.prototype=[];tl.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],i=0;++n<e;)t=r,r=this[n],i+=t[1]*r[0]-t[0]*r[1];return.5*i},tl.centroid=function(t){var n,e,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o*t,a*t]},tl.clip=function(t){for(var n,e,r,i,o,a,u=De(t),l=-1,s=this.length-De(this),c=this[s-1];++l<s;){for(n=t.slice(),t.length=0,i=this[l],o=n[(r=n.length-u)-1],e=-1;++e<r;)a=n[e],je(a,c,i)?(je(o,c,i)||t.push(Re(o,a,c,i)),t.push(a)):je(o,c,i)&&t.push(Re(o,a,c,i)),o=a;u&&t.push(t[0]),c=i}return t};var nl,el,rl,il,ol,al=[],ul=[];Ze.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)t=n[e].edge,t.b&&t.a||n.splice(e,1);return n.sort(Xe),n.length},rr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ir.prototype={insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=lr(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(ar(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ur(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(ur(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ar(this,r))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?lr(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=a,a.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(n=i.R,n.C&&(n.C=!1,i.C=!0,ar(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,ur(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,ar(this,i),t=this._;break}}else if(n=i.L,n.C&&(n.C=!1,i.C=!0,ur(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,ar(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,ur(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ca.geom.voronoi=function(t){
function n(t){var n=new Array(t.length),r=u[0][0],i=u[0][1],o=u[1][0],a=u[1][1];return sr(e(t),u).cells.forEach(function(e,u){var l=e.edges,s=e.site;(n[u]=l.length?l.map(function(t){var n=t.start();return[n.x,n.y]}):s.x>=r&&s.x<=o&&s.y>=i&&s.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[]).point=t[u]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(o(t,n)/Ra)*Ra,y:Math.round(a(t,n)/Ra)*Ra,i:n}})}var r=Te,i=qe,o=r,a=i,u=ll;return t?n(t):(n.links=function(t){return sr(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return sr(e(t)).cells.forEach(function(e,r){for(var i,o=e.site,a=e.edges.sort(Xe),u=-1,l=a.length,s=a[l-1].edge,c=s.l===o?s.r:s.l;++u<l;)s,i=c,s=a[u].edge,c=s.l===o?s.r:s.l,r<i.i&&r<c.i&&fr(o,i,c)<0&&n.push([t[r],t[i.i],t[c.i]])}),n},n.x=function(t){return arguments.length?(o=Et(r=t),n):r},n.y=function(t){return arguments.length?(a=Et(i=t),n):i},n.clipExtent=function(t){return arguments.length?(u=null==t?ll:t,n):u===ll?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===ll?null:u&&u[1]},n)};var ll=[[-1e6,-1e6],[1e6,1e6]];ca.geom.delaunay=function(t){return ca.geom.voronoi().triangles(t)},ca.geom.quadtree=function(t,n,e,r,i){function o(t){function o(t,n,e,r,i,o,a,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(_a(l-e)+_a(c-r)<.01)s(t,n,e,r,i,o,a,u);else{var f=t.point;t.x=t.y=t.point=null,s(t,f,l,c,i,o,a,u),s(t,n,e,r,i,o,a,u)}else t.x=e,t.y=r,t.point=n}else s(t,n,e,r,i,o,a,u)}function s(t,n,e,r,i,a,u,l){var s=.5*(i+u),c=.5*(a+l),f=e>=s,h=r>=c,p=h<<1|f;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=dr()),f?i=s:u=s,h?a=c:l=c,o(t,n,e,r,i,a,u,l)}var c,f,h,p,d,g,v,y,m,x=Et(u),_=Et(l);if(null!=n)g=n,v=e,y=r,m=i;else if(y=m=-(g=v=1/0),f=[],h=[],d=t.length,a)for(p=0;p<d;++p)c=t[p],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>y&&(y=c.x),c.y>m&&(m=c.y),f.push(c.x),h.push(c.y);else for(p=0;p<d;++p){var b=+x(c=t[p],p),w=+_(c,p);b<g&&(g=b),w<v&&(v=w),b>y&&(y=b),w>m&&(m=w),f.push(b),h.push(w)}var M=y-g,k=m-v;M>k?m=v+M:y=g+k;var S=dr();if(S.add=function(t){o(S,t,+x(t,++p),+_(t,p),g,v,y,m)},S.visit=function(t){gr(t,S,g,v,y,m)},S.find=function(t){return vr(S,t[0],t[1],g,v,y,m)},p=-1,null==n){for(;++p<d;)o(S,t[p],f[p],h[p],g,v,y,m);--p}else t.forEach(S.add);return f=h=t=c=null,S}var a,u=Te,l=qe;return(a=arguments.length)?(u=hr,l=pr,3===a&&(i=e,r=n,e=n=0),o(t)):(o.x=function(t){return arguments.length?(u=t,o):u},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==n?null:[[n,e],[r,i]]},o.size=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=e=0,r=+t[0],i=+t[1]),o):null==n?null:[r-n,i-e]},o)},ca.interpolateRgb=yr,ca.interpolateObject=mr,ca.interpolateNumber=xr,ca.interpolateString=_r;var sl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cl=new RegExp(sl.source,"g");ca.interpolate=br,ca.interpolators=[function(t,n){var e=void 0===n?"undefined":se(n);return("string"===e?eu.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?yr:_r:n instanceof ut?yr:Array.isArray(n)?wr:"object"===e&&isNaN(n)?mr:xr)(t,n)}],ca.interpolateArray=wr;var fl=function(){return x},hl=ca.map({linear:fl,poly:Cr,quad:function(){return Nr},cubic:function(){return Er},sin:function(){return zr},exp:function(){return Tr},circle:function(){return qr},elastic:Lr,back:Or,bounce:function(){return jr}}),pl=ca.map({in:x,out:kr,"in-out":Sr,"out-in":function(t){return Sr(kr(t))}});ca.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.slice(0,n):t,r=n>=0?t.slice(n+1):"in";return e=hl.get(e)||fl,r=pl.get(r)||x,Mr(r(e.apply(null,fa.call(arguments,1))))},ca.interpolateHcl=Rr,ca.interpolateHsl=Dr,ca.interpolateLab=Pr,ca.interpolateRound=Ur,ca.transform=function(t){var n=pa.createElementNS(ca.ns.prefix.svg,"g");return(ca.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Fr(e?e.matrix:dl)})(t)},Fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var dl={a:1,b:0,c:0,d:1,e:0,f:0};ca.interpolateTransform=Jr,ca.layout={},ca.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Kr(t[e]));return n}},ca.layout.chord=function(){function t(){var t,s,f,h,p,d={},g=[],v=ca.range(o),y=[];for(e=[],r=[],t=0,h=-1;++h<o;){for(s=0,p=-1;++p<o;)s+=i[h][p];g.push(s),y.push(ca.range(o)),t+=s}for(a&&v.sort(function(t,n){return a(g[t],g[n])}),u&&y.forEach(function(t,n){t.sort(function(t,e){return u(i[n][t],i[n][e])})}),t=(Ua-c*o)/t,s=0,h=-1;++h<o;){for(f=s,p=-1;++p<o;){var m=v[h],x=y[m][p],_=i[m][x],b=s,w=s+=_*t;d[m+"-"+x]={index:m,subindex:x,startAngle:b,endAngle:w,value:_}}r[m]={index:m,startAngle:f,endAngle:s,value:g[m]},s+=c}for(h=-1;++h<o;)for(p=h-1;++p<o;){var M=d[h+"-"+p],k=d[p+"-"+h];(M.value||k.value)&&e.push(M.value<k.value?{source:k,target:M}:{source:M,target:k})}l&&n()}function n(){e.sort(function(t,n){return l((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,r,i,o,a,u,l,s={},c=0;return s.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,e=r=null,s):i},s.padding=function(t){return arguments.length?(c=t,e=r=null,s):c},s.sortGroups=function(t){return arguments.length?(a=t,e=r=null,s):a},s.sortSubgroups=function(t){return arguments.length?(u=t,e=null,s):u},s.sortChords=function(t){return arguments.length?(l=t,e&&n(),s):l},s.chords=function(){return e||t(),e},s.groups=function(){return r||t(),r},s},ca.layout.force=function(){function t(t){return function(n,e,r,i){if(n.point!==t){var o=n.cx-t.x,a=n.cy-t.y,u=i-e,l=o*o+a*a;if(u*u/y<l){if(l<g){var s=n.charge/l;t.px-=o*s,t.py-=a*s}return!0}if(n.point&&l&&l<g){var s=n.pointCharge/l;t.px-=o*s,t.py-=a*s}}return!n.charge}}function n(t){t.px=ca.event.x,t.py=ca.event.y,l.resume()}var e,r,i,o,a,u,l={},s=ca.dispatch("start","tick","end"),c=[1,1],f=.9,h=gl,p=vl,d=-30,g=yl,v=.1,y=.64,m=[],_=[];return l.tick=function(){if((i*=.99)<.005)return e=null,s.end({type:"end",alpha:i=0}),!0;var n,r,l,h,p,g,y,x,b,w=m.length,M=_.length;for(r=0;r<M;++r)l=_[r],h=l.source,p=l.target,x=p.x-h.x,b=p.y-h.y,(g=x*x+b*b)&&(g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,x*=g,b*=g,p.x-=x*(y=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=b*y,h.x+=x*(y=1-y),h.y+=b*y);if((y=i*v)&&(x=c[0]/2,b=c[1]/2,r=-1,y))for(;++r<w;)l=m[r],l.x+=(x-l.x)*y,l.y+=(b-l.y)*y;if(d)for(oi(n=ca.geom.quadtree(m),i,u),r=-1;++r<w;)(l=m[r]).fixed||n.visit(t(l));for(r=-1;++r<w;)l=m[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);s.tick({type:"tick",alpha:i})},l.nodes=function(t){return arguments.length?(m=t,l):m},l.links=function(t){return arguments.length?(_=t,l):_},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.friction=function(t){return arguments.length?(f=+t,l):f},l.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(y=t*t,l):Math.sqrt(y)},l.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(e.c=null,e.t=NaN,e=null,s.end({type:"end",alpha:i=0})):t>0&&(s.start({type:"start",alpha:i=t}),e=qt(l.tick)),l):i},l.start=function(){function t(t,r){if(!e){for(e=new Array(i),l=0;l<i;++l)e[l]=[];for(l=0;l<s;++l){var o=_[l];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,u=e[n],l=-1,c=u.length;++l<c;)if(!isNaN(a=u[l][t]))return a;return Math.random()*r}var n,e,r,i=m.length,s=_.length,f=c[0],g=c[1];for(n=0;n<i;++n)(r=m[n]).index=n,r.weight=0;for(n=0;n<s;++n)r=_[n],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(n=0;n<i;++n)r=m[n],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof h)for(n=0;n<s;++n)o[n]=+h.call(this,_[n],n);else for(n=0;n<s;++n)o[n]=h;if(a=[],"function"==typeof p)for(n=0;n<s;++n)a[n]=+p.call(this,_[n],n);else for(n=0;n<s;++n)a[n]=p;if(u=[],"function"==typeof d)for(n=0;n<i;++n)u[n]=+d.call(this,m[n],n);else for(n=0;n<i;++n)u[n]=d;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(r||(r=ca.behavior.drag().origin(x).on("dragstart.force",ni).on("drag.force",n).on("dragend.force",ei)),!arguments.length)return r;this.on("mouseover.force",ri).on("mouseout.force",ii).call(r)},ca.rebind(l,s,"on")};var gl=20,vl=1,yl=1/0;ca.layout.hierarchy=function(){function t(i){var o,a=[i],u=[];for(i.depth=0;null!=(o=a.pop());)if(u.push(o),(s=e.call(t,o,o.depth))&&(l=s.length)){for(var l,s,c;--l>=0;)a.push(c=s[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=s}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return li(i,function(t){var e,i;n&&(e=t.children)&&e.sort(n),r&&(i=t.parent)&&(i.value+=t.value)}),u}var n=fi,e=si,r=ci;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(ui(n,function(t){t.children&&(t.value=0)}),li(n,function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},ca.layout.partition=function(){function t(n,e,r,i){var o=n.children;if(n.x=e,n.y=n.depth*i,n.dx=r,n.dy=i,o&&(a=o.length)){var a,u,l,s=-1;for(r=n.value?r/n.value:0;++s<a;)t(u=o[s],e,l=u.value*r,i),e+=l}}function n(t){var e=t.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,n(e[o]));return 1+r}function e(e,o){var a=r.call(this,e,o);return t(a[0],0,i[0],i[1]/n(a[0])),a}var r=ca.layout.hierarchy(),i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},ai(e,r)},ca.layout.pie=function(){function t(a){var u,l=a.length,s=a.map(function(e,r){return+n.call(t,e,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),p=h*(f<0?-1:1),d=ca.sum(s),g=d?(f-l*p)/d:0,v=ca.range(l),y=[];return null!=e&&v.sort(e===ml?function(t,n){return s[n]-s[t]}:function(t,n){return e(a[t],a[n])}),v.forEach(function(t){y[t]={data:a[t],value:u=s[t],startAngle:c,endAngle:c+=u*g+p,padAngle:h}}),y}var n=Number,e=ml,r=0,i=Ua,o=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(i=n,t):i},t.padAngle=function(n){return arguments.length?(o=n,t):o},t};var ml={};ca.layout.stack=function(){function t(u,l){if(!(h=u.length))return u;var s=u.map(function(e,r){return n.call(t,e,r)}),c=s.map(function(n){return n.map(function(n,e){return[o.call(t,n,e),a.call(t,n,e)]})}),f=e.call(t,c,l);s=ca.permute(s,f),c=ca.permute(c,f);var h,p,d,g,v=r.call(t,c,l),y=s[0].length;for(d=0;d<y;++d)for(i.call(t,s[0][d],g=v[d],c[0][d][1]),p=1;p<h;++p)i.call(t,s[p][d],g+=c[p-1][d][1],c[p][d][1]);return u}var n=x,e=vi,r=yi,i=gi,o=pi,a=di;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:xl.get(n)||vi,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:_l.get(n)||yi,t):r},t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(a=n,t):a},t.out=function(n){return arguments.length?(i=n,t):i},t};var xl=ca.map({"inside-out":function(t){var n,e,r=t.length,i=t.map(mi),o=t.map(xi),a=ca.range(r).sort(function(t,n){return i[t]-i[n]}),u=0,l=0,s=[],c=[];for(n=0;n<r;++n)e=a[n],u<l?(u+=o[e],s.push(e)):(l+=o[e],c.push(e));return c.reverse().concat(s)},reverse:function(t){return ca.range(t.length).reverse()},default:vi}),_l=ca.map({silhouette:function(t){var n,e,r,i=t.length,o=t[0].length,a=[],u=0,l=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];r>u&&(u=r),a.push(r)}for(e=0;e<o;++e)l[e]=(u-a[e])/2;return l},wiggle:function(t){var n,e,r,i,o,a,u,l,s,c=t.length,f=t[0],h=f.length,p=[];for(p[0]=l=s=0,e=1;e<h;++e){for(n=0,i=0;n<c;++n)i+=t[n][e][1];for(n=0,o=0,u=f[e][0]-f[e-1][0];n<c;++n){for(r=0,a=(t[n][e][1]-t[n][e-1][1])/(2*u);r<n;++r)a+=(t[r][e][1]-t[r][e-1][1])/u;o+=a*t[n][e][1]}p[e]=l-=i?o/i*u:0,l<s&&(s=l)}for(e=0;e<h;++e)p[e]-=s;return p},expand:function(t){var n,e,r,i=t.length,o=t[0].length,a=1/i,u=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];if(r)for(n=0;n<i;n++)t[n][e][1]/=r;else for(n=0;n<i;n++)t[n][e][1]=a}for(e=0;e<o;++e)u[e]=0;return u},zero:yi});ca.layout.histogram=function(){function t(t,o){for(var a,u,l=[],s=t.map(e,this),c=r.call(this,s,o),f=i.call(this,c,s,o),o=-1,h=s.length,p=f.length-1,d=n?1:1/h;++o<p;)a=l[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(p>0)for(o=-1;++o<h;)(u=s[o])>=c[0]&&u<=c[1]&&(a=l[ca.bisect(f,u,1,p)-1],a.y+=d,a.push(t[o]));return l}var n=!0,e=Number,r=Mi,i=bi;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=Et(n),t):r},t.bins=function(n){return arguments.length?(i="number"==typeof n?function(t){return wi(t,n)}:Et(n),t):i},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},ca.layout.pack=function(){function t(t,o){var a=e.call(this,t,o),u=a[0],l=i[0],s=i[1],c=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,li(u,function(t){t.r=+c(t.value)}),li(u,Ai),r){var f=r*(n?1:Math.max(2*u.r/l,2*u.r/s))/2;li(u,function(t){t.r+=f}),li(u,Ai),li(u,function(t){t.r-=f})}return Ti(u,l/2,s/2,n?1:1/Math.max(2*u.r/l,2*u.r/s)),a}var n,e=ca.layout.hierarchy().sort(ki),r=0,i=[1,1];return t.size=function(n){return arguments.length?(i=n,t):i},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},ai(t,e)},ca.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),f=c[0],h=n(f);if(li(h,e),h.parent.m=-h.z,ui(h,r),s)ui(f,o);else{var p=f,d=f,g=f;ui(f,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>g.depth&&(g=t)});var v=u(p,d)/2-p.x,y=l[0]/(d.x+u(d,p)/2+v),m=l[1]/(g.depth||1);ui(f,function(t){t.x=(t.x+v)*y,t.y=t.depth*m})}return c}function n(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var i,o=n.children,a=0,u=o.length;a<u;++a)r.push((o[a]=i={_:o[a],parent:n,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return e.children[0]}function e(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){Di(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+u(t._,r._));t.parent.A=i(t,r,t.parent.A||e[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,n,e){if(n){for(var r,i=t,o=t,a=n,l=i.parent.children[0],s=i.m,c=o.m,f=a.m,h=l.m;a=ji(a),i=Oi(i),a&&i;)l=Oi(l),o=ji(o),o.a=t,r=a.z+f-i.z-s+u(a._,i._),r>0&&(Ri(Pi(a,t,e),t,r),s+=r,c+=r),f+=a.m,s+=i.m,h+=l.m,c+=o.m;a&&!ji(o)&&(o.t=a,o.m+=f-c),i&&!Oi(l)&&(l.t=i,l.m+=s-h,e=t)}return e}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=ca.layout.hierarchy().sort(null).value(null),u=Li,l=[1,1],s=null;return t.separation=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(s=null==(l=n)?o:null,t):s?null:l},t.nodeSize=function(n){return arguments.length?(s=null==(l=n)?null:o,t):s?l:null},ai(t,a)},ca.layout.cluster=function(){function t(t,o){var a,u=n.call(this,t,o),l=u[0],s=0;li(l,function(t){var n=t.children;n&&n.length?(t.x=Fi(n),t.y=Ui(n)):(t.x=a?s+=e(t,a):0,t.y=0,a=t)});var c=Ii(l),f=Hi(l),h=c.x-e(c,f)/2,p=f.x+e(f,c)/2;return li(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),u}var n=ca.layout.hierarchy().sort(null).value(null),e=Li,r=[1,1],i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(i=null==(r=n),t):i?null:r},t.nodeSize=function(n){return arguments.length?(i=null!=(r=n),t):i?r:null},ai(t,n)},ca.layout.treemap=function(){function t(t,n){for(var e,r,i=-1,o=t.length;++i<o;)r=(e=t[i]).value*(n<0?0:n),e.area=isNaN(r)||r<=0?0:r}function n(e){var o=e.children;if(o&&o.length){var a,u,l,s=f(e),c=[],h=o.slice(),d=1/0,g="slice"===p?s.dx:"dice"===p?s.dy:"slice-dice"===p?1&e.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(t(h,s.dx*s.dy/e.value),c.area=0;(l=h.length)>0;)c.push(a=h[l-1]),c.area+=a.area,"squarify"!==p||(u=r(c,g))<=d?(h.pop(),d=u):(c.area-=c.pop().area,i(c,g,s,!1),g=Math.min(s.dx,s.dy),c.length=c.area=0,d=1/0);c.length&&(i(c,g,s,!0),c.length=c.area=0),o.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var o,a=f(n),u=r.slice(),l=[];for(t(u,a.dx*a.dy/n.value),l.area=0;o=u.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!u.length),l.length=l.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(e=t[a].area)&&(e<o&&(o=e),e>i&&(i=e));return r*=r,n*=n,r?Math.max(n*i*d/r,r/(n*o*d)):1/0}function i(t,n,e,r){var i,o=-1,a=t.length,u=e.x,s=e.y,c=n?l(t.area/n):0;if(n==e.dx){for((r||c>e.dy)&&(c=e.dy);++o<a;)i=t[o],i.x=u,i.y=s,i.dy=c,u+=i.dx=Math.min(e.x+e.dx-u,c?l(i.area/c):0);i.z=!0,i.dx+=e.x+e.dx-u,e.y+=c,e.dy-=c}else{for((r||c>e.dx)&&(c=e.dx);++o<a;)i=t[o],i.x=u,i.y=s,i.dx=c,s+=i.dy=Math.min(e.y+e.dy-s,c?l(i.area/c):0);i.z=!1,i.dy+=e.y+e.dy-s,e.x+=c,e.dx-=c}}function o(r){var i=a||u(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=s[0],o.dy=s[1]):o.dx=o.dy=0,a&&u.revalue(o),t([o],o.dx*o.dy/o.value),(a?e:n)(o),h&&(a=i),i}var a,u=ca.layout.hierarchy(),l=Math.round,s=[1,1],c=null,f=Yi,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(s=t,o):s},o.padding=function(t){function n(n){var e=t.call(o,n,n.depth);return null==e?Yi(n):Vi(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return Vi(n,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Yi:"function"===(r=void 0===t?"undefined":se(t))?n:"number"===r?(t=[t,t,t,t],e):e,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(h=t,a=null,o):h},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},ai(o,u)},ca.random={normal:function(t,n){var e=arguments.length;return e<2&&(n=1),e<1&&(t=0),function(){var e,r,i;do{e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r}while(!i||i>1);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ca.random.normal.apply(ca,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=ca.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;e<t;e++)n+=Math.random();return n}}},ca.scale={};var bl={floor:x,ceil:x};ca.scale.linear=function(){return Gi([0,1],[0,1],br,!1)};var wl={s:1,g:1,p:1,r:1,e:1};ca.scale.log=function(){return oo(ca.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ca.format(".0e"),kl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ca.scale.pow=function(){return ao(ca.scale.linear(),1,[0,1])},ca.scale.sqrt=function(){return ca.scale.pow().exponent(.5)},ca.scale.ordinal=function(){return lo([],{t:"range",a:[[]]})},ca.scale.category10=function(){return ca.scale.ordinal().range(Sl)},ca.scale.category20=function(){return ca.scale.ordinal().range(Nl)},ca.scale.category20b=function(){return ca.scale.ordinal().range(El)},ca.scale.category20c=function(){return ca.scale.ordinal().range(Al)};var Sl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(_t),Nl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(_t),El=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(_t),Al=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(_t);ca.scale.quantile=function(){return so([],[])},ca.scale.quantize=function(){return co(0,1,[0,1])},ca.scale.threshold=function(){return fo([.5],[0,1])},ca.scale.identity=function(){return ho([0,1])},ca.svg={},ca.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),s=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Ia,f=u.apply(this,arguments)-Ia,h=Math.abs(f-c),p=c>f?0:1;if(s<t&&(d=s,s=t,t=d),h>=Fa)return n(s,p)+(t?n(t,1-p):"")+"Z";var d,g,v,y,m,x,_,b,w,M,k,S,N=0,E=0,A=[];if((y=(+l.apply(this,arguments)||0)/2)&&(v=o===Cl?Math.sqrt(t*t+s*s):+o.apply(this,arguments),p||(E*=-1),s&&(E=et(v/s*Math.sin(y))),t&&(N=et(v/t*Math.sin(y)))),s){m=s*Math.cos(c+E),x=s*Math.sin(c+E),_=s*Math.cos(f-E),b=s*Math.sin(f-E);var C=Math.abs(f-c-2*E)<=Pa?0:1;if(E&&_o(m,x,_,b)===p^C){var z=(c+f)/2;m=s*Math.cos(z),x=s*Math.sin(z),_=b=null}}else m=x=0;if(t){w=t*Math.cos(f-N),M=t*Math.sin(f-N),k=t*Math.cos(c+N),S=t*Math.sin(c+N);var T=Math.abs(c-f+2*N)<=Pa?0:1;if(N&&_o(w,M,k,S)===1-p^T){var q=(c+f)/2;w=t*Math.cos(q),M=t*Math.sin(q),k=S=null}}else w=M=0;if(h>Ra&&(d=Math.min(Math.abs(s-t)/2,+i.apply(this,arguments)))>.001){g=t<s^p?0:1;var L=d,O=d;if(h<Pa){var j=null==k?[w,M]:null==_?[m,x]:Re([m,x],[k,S],[_,b],[w,M]),R=m-j[0],D=x-j[1],P=_-j[0],U=b-j[1],F=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),I=Math.sqrt(j[0]*j[0]+j[1]*j[1]);O=Math.min(d,(t-I)/(F-1)),L=Math.min(d,(s-I)/(F+1))}if(null!=_){var H=bo(null==k?[w,M]:[k,S],[m,x],s,L,p),Y=bo([_,b],[w,M],s,L,p);d===L?A.push("M",H[0],"A",L,",",L," 0 0,",g," ",H[1],"A",s,",",s," 0 ",1-p^_o(H[1][0],H[1][1],Y[1][0],Y[1][1]),",",p," ",Y[1],"A",L,",",L," 0 0,",g," ",Y[0]):A.push("M",H[0],"A",L,",",L," 0 1,",g," ",Y[0])}else A.push("M",m,",",x);if(null!=k){var V=bo([m,x],[k,S],t,-O,p),Z=bo([w,M],null==_?[m,x]:[_,b],t,-O,p);d===O?A.push("L",Z[0],"A",O,",",O," 0 0,",g," ",Z[1],"A",t,",",t," 0 ",p^_o(Z[1][0],Z[1][1],V[1][0],V[1][1]),",",1-p," ",V[1],"A",O,",",O," 0 0,",g," ",V[0]):A.push("L",Z[0],"A",O,",",O," 0 0,",g," ",V[0])}else A.push("L",w,",",M)}else A.push("M",m,",",x),null!=_&&A.push("A",s,",",s," 0 ",C,",",p," ",_,",",b),A.push("L",w,",",M),null!=k&&A.push("A",t,",",t," 0 ",T,",",1-p," ",k,",",S);return A.push("Z"),A.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=go,r=vo,i=po,o=Cl,a=yo,u=mo,l=xo;return t.innerRadius=function(n){return arguments.length?(e=Et(n),t):e},t.outerRadius=function(n){return arguments.length?(r=Et(n),t):r},t.cornerRadius=function(n){return arguments.length?(i=Et(n),t):i},t.padRadius=function(n){return arguments.length?(o=n==Cl?Cl:Et(n),t):o},t.startAngle=function(n){return arguments.length?(a=Et(n),t):a},t.endAngle=function(n){return arguments.length?(u=Et(n),t):u},t.padAngle=function(n){return arguments.length?(l=Et(n),t):l},t.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +u.apply(this,arguments))/2-Ia;return[Math.cos(n)*t,Math.sin(n)*t]},t};var Cl="auto";ca.svg.line=function(){return wo(x)};var zl=ca.map({linear:Mo,"linear-closed":ko,step:So,"step-before":No,"step-after":Eo,basis:Lo,"basis-open":Oo,"basis-closed":jo,bundle:Ro,cardinal:zo,"cardinal-open":Ao,"cardinal-closed":Co,monotone:Ho});zl.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Tl=[0,2/3,1/3,0],ql=[0,1/3,2/3,0],Ll=[0,1/6,2/3,1/6];ca.svg.line.radial=function(){var t=wo(Yo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},No.reverse=Eo,Eo.reverse=No,ca.svg.area=function(){return Vo(x)},ca.svg.area.radial=function(){var t=Vo(Yo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ca.svg.chord=function(){function t(t,u){var l=n(this,o,t,u),s=n(this,a,t,u);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,s)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,s.r,s.p0)+r(s.r,s.p1,s.a1-s.a0)+i(s.r,s.p1,l.r,l.p0))+"Z"}function n(t,n,e,r){var i=n.call(t,e,r),o=u.call(t,i,r),a=l.call(t,i,r)-Ia,c=s.call(t,i,r)-Ia;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function e(t,n){return t.a0==n.a0&&t.a1==n.a1}function r(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Pa)+",1 "+n}function i(t,n,e,r){return"Q 0,0 "+r}var o=be,a=we,u=Zo,l=yo,s=mo;return t.radius=function(n){return arguments.length?(u=Et(n),t):u},t.source=function(n){return arguments.length?(o=Et(n),t):o},t.target=function(n){return arguments.length?(a=Et(n),t):a},t.startAngle=function(n){return arguments.length?(l=Et(n),t):l},t.endAngle=function(n){return arguments.length?(s=Et(n),t):s},t},ca.svg.diagonal=function(){function t(t,i){var o=n.call(this,t,i),a=e.call(this,t,i),u=(o.y+a.y)/2,l=[o,{x:o.x,y:u},{x:a.x,y:u},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var n=be,e=we,r=Bo;return t.source=function(e){return arguments.length?(n=Et(e),t):n},t.target=function(n){return arguments.length?(e=Et(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},ca.svg.diagonal.radial=function(){var t=ca.svg.diagonal(),n=Bo,e=t.projection;return t.projection=function(t){return arguments.length?e(Xo(n=t)):n},t},ca.svg.symbol=function(){function t(t,r){return(Ol.get(n.call(this,t,r))||Wo)(e.call(this,t,r))}var n=Jo,e=$o;return t.type=function(e){return arguments.length?(n=Et(e),t):n},t.size=function(n){return arguments.length?(e=Et(n),t):e},t};var Ol=ca.map({circle:Wo,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Rl)),e=n*Rl;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/jl),e=n*jl/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/jl),e=n*jl/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});ca.svg.symbolTypes=Ol.keys();var jl=Math.sqrt(3),Rl=Math.tan(30*Ha);Ca.transition=function(t){for(var n,e,r=Dl||++Il,i=na(t),o=[],a=Pl||{time:Date.now(),ease:Ar,delay:0,duration:250},u=-1,l=this.length;++u<l;){o.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(e=s[c])&&ea(e,c,i,r,a),n.push(e)}return Ko(o,i,r)},Ca.interrupt=function(t){return this.each(null==t?Ul:Go(na(t)))};var Dl,Pl,Ul=Go(na()),Fl=[],Il=0;Fl.call=Ca.call,Fl.empty=Ca.empty,Fl.node=Ca.node,Fl.size=Ca.size,ca.transition=function(t,n){return t&&t.transition?Dl?t.transition(n):t:ca.selection().transition(t)},ca.transition.prototype=Fl,Fl.select=function(t){var n,e,r,i=this.id,o=this.namespace,a=[];t=C(t);for(var u=-1,l=this.length;++u<l;){a.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(r=s[c])&&(e=t.call(r,r.__data__,c,u))?("__data__"in r&&(e.__data__=r.__data__),ea(e,c,o,i,r[o][i]),n.push(e)):n.push(null)}return Ko(a,o,i)},Fl.selectAll=function(t){var n,e,r,i,o,a=this.id,u=this.namespace,l=[];t=z(t);for(var s=-1,c=this.length;++s<c;)for(var f=this[s],h=-1,p=f.length;++h<p;)if(r=f[h]){o=r[u][a],e=t.call(r,r.__data__,h,s),l.push(n=[]);for(var d=-1,g=e.length;++d<g;)(i=e[d])&&ea(i,d,u,a,o),n.push(i)}return Ko(l,u,a)},Fl.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]);for(var e=this[o],u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return Ko(i,this.namespace,this.id)},Fl.tween=function(t,n){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(t):V(this,null==n?function(n){n[r][e].tween.remove(t)}:function(i){i[r][e].tween.set(t,n)})},Fl.attr=function(t,n){function e(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(u);return e!==t&&(n=a(e,t),function(t){this.setAttribute(u,n(t))})})}function o(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(u.space,u.local);return e!==t&&(n=a(e,t),function(t){this.setAttributeNS(u.space,u.local,n(t))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var a="transform"==t?Jr:br,u=ca.ns.qualify(t);return Qo(this,"attr."+t,n,u.local?o:i)},Fl.attrTween=function(t,n){function e(t,e){var r=n.call(this,t,e,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,e){var r=n.call(this,t,e,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=ca.ns.qualify(t);return this.tween("attr."+t,i.local?r:e)},Fl.style=function(t,n,r){function i(){this.style.removeProperty(t)}function o(n){return null==n?i:(n+="",function(){var i,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(i=br(o,n),function(n){this.style.setProperty(t,i(n),r)})})}var a=arguments.length;if(a<3){if("string"!=typeof t){a<2&&(n="");for(r in t)this.style(r,t[r],n);return this}r=""}return Qo(this,"style."+t,n,o)},Fl.styleTween=function(t,n,r){function i(i,o){var a=n.call(this,i,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(n){this.style.setProperty(t,a(n),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Fl.text=function(t){return Qo(this,"text",t,ta)},Fl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Fl.ease=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].ease:("function"!=typeof t&&(t=ca.ease.apply(ca,arguments)),V(this,function(r){r[e][n].ease=t}))},Fl.delay=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].delay:V(this,"function"==typeof t?function(r,i,o){r[e][n].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[e][n].delay=t}))},Fl.duration=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].duration:V(this,"function"==typeof t?function(r,i,o){r[e][n].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))},Fl.each=function(t,n){var e=this.id,r=this.namespace;if(arguments.length<2){var i=Pl,o=Dl;try{Dl=e,V(this,function(n,i,o){Pl=n[r][e],t.call(n,n.__data__,i,o)})}finally{Pl=i,Dl=o}}else V(this,function(i){var o=i[r][e];(o.event||(o.event=ca.dispatch("start","end","interrupt"))).on(t,n)});return this},Fl.transition=function(){for(var t,n,e,r,i=this.id,o=++Il,a=this.namespace,u=[],l=0,s=this.length;l<s;l++){u.push(t=[]);for(var n=this[l],c=0,f=n.length;c<f;c++)(e=n[c])&&(r=e[a][i],ea(e,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(e)}return Ko(u,a,o)},ca.svg.axis=function(){function t(t){t.each(function(){var t,s=ca.select(this),c=this.__chart__||e,f=this.__chart__=e.copy(),h=null==l?f.ticks?f.ticks.apply(f,u):f.domain():l,p=null==n?f.tickFormat?f.tickFormat.apply(f,u):x:n,d=s.selectAll(".tick").data(h,f),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ra),v=ca.transition(d.exit()).style("opacity",Ra).remove(),y=ca.transition(d.order()).style("opacity",1),m=Math.max(i,0)+a,_=Bi(f),b=s.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),ca.transition(b));g.append("line"),g.append("text");var M,k,S,N,E=g.select("line"),A=y.select("line"),C=d.select("text").text(p),z=g.select("text"),T=y.select("text"),q="top"===r||"left"===r?-1:1
;if("bottom"===r||"top"===r?(t=ra,M="x",S="y",k="x2",N="y2",C.attr("dy",q<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+q*o+"V0H"+_[1]+"V"+q*o)):(t=ia,M="y",S="x",k="y2",N="x2",C.attr("dy",".32em").style("text-anchor",q<0?"end":"start"),w.attr("d","M"+q*o+","+_[0]+"H0V"+_[1]+"H"+q*o)),E.attr(N,q*i),z.attr(S,q*m),A.attr(k,0).attr(N,q*i),T.attr(M,0).attr(S,q*m),f.rangeBand){var L=f,O=L.rangeBand()/2;c=f=function(t){return L(t)+O}}else c.rangeBand?c=f:v.call(t,f,c);g.call(t,c,f),y.call(t,f,f)})}var n,e=ca.scale.linear(),r=Hl,i=6,o=6,a=3,u=[10],l=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in Yl?n+"":Hl,t):r},t.ticks=function(){return arguments.length?(u=ha(arguments),t):u},t.tickValues=function(n){return arguments.length?(l=n,t):l},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(i=+n,o=+arguments[e-1],t):i},t.innerTickSize=function(n){return arguments.length?(i=+n,t):i},t.outerTickSize=function(n){return arguments.length?(o=+n,t):o},t.tickPadding=function(n){return arguments.length?(a=+n,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Hl="bottom",Yl={top:1,right:1,bottom:1,left:1};ca.svg.brush=function(){function t(e){e.each(function(){var e=ca.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=e.selectAll(".resize").data(g,x);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Vl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var l,f=ca.transition(e),h=ca.transition(a);s&&(l=Bi(s),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=Bi(c),h.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){32==ca.event.keyCode&&(C||(x=null,T[0]-=f[1],T[1]-=h[1],C=2),S())}function g(){32==ca.event.keyCode&&2==C&&(T[0]+=f[1],T[1]+=h[1],C=0,S())}function v(){var t=ca.mouse(b),e=!1;_&&(t[0]+=_[0],t[1]+=_[1]),C||(ca.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),T[0]=f[+(t[0]<x[0])],T[1]=h[+(t[1]<x[1])]):x=null),E&&y(t,s,0)&&(r(k),e=!0),A&&y(t,c,1)&&(i(k),e=!0),e&&(n(k),M({type:"brush",mode:C?"move":"resize"}))}function y(t,n,e){var r,i,o=Bi(n),l=o[0],s=o[1],c=T[e],g=e?h:f,v=g[1]-g[0];if(C&&(l-=c,s-=v+c),r=(e?d:p)?Math.max(l,Math.min(s,t[e])):t[e],C?i=(r+=c)+v:(x&&(c=Math.max(l,Math.min(s,2*x[e]-r))),c<r?(i=r,r=c):i=c),g[0]!=r||g[1]!=i)return e?u=null:a=null,g[0]=r,g[1]=i,!0}function m(){v(),k.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ca.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),M({type:"brushend"})}var x,_,b=this,w=ca.select(ca.event.target),M=l.of(b,arguments),k=ca.select(b),N=w.datum(),E=!/^(n|s)$/.test(N)&&s,A=!/^(e|w)$/.test(N)&&c,C=w.classed("extent"),z=W(b),T=ca.mouse(b),q=ca.select(e(b)).on("keydown.brush",o).on("keyup.brush",g);if(ca.event.changedTouches?q.on("touchmove.brush",v).on("touchend.brush",m):q.on("mousemove.brush",v).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),C)T[0]=f[0]-T[0],T[1]=h[0]-T[1];else if(N){var L=+/w$/.test(N),O=+/^n/.test(N);_=[f[1-L]-T[0],h[1-O]-T[1]],T[0]=f[L],T[1]=h[O]}else ca.event.altKey&&(x=T.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ca.select("body").style("cursor",w.style("cursor")),M({type:"brushstart"}),v()}var a,u,l=E(t,"brushstart","brush","brushend"),s=null,c=null,f=[0,0],h=[0,0],p=!0,d=!0,g=Zl[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),n={x:f,y:h,i:a,j:u},e=this.__chart__||n;this.__chart__=n,Dl?ca.select(this).transition().each("start.brush",function(){a=e.i,u=e.j,f=e.x,h=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=wr(f,n.x),r=wr(h,n.y);return a=u=null,function(i){f=n.x=e(i),h=n.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=n.i,u=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(s=n,g=Zl[!s<<1|!c],t):s},t.y=function(n){return arguments.length?(c=n,g=Zl[!s<<1|!c],t):c},t.clamp=function(n){return arguments.length?(s&&c?(p=!!n[0],d=!!n[1]):s?p=!!n:c&&(d=!!n),t):s&&c?[p,d]:s?p:c?d:null},t.extent=function(n){var e,r,i,o,l;return arguments.length?(s&&(e=n[0],r=n[1],c&&(e=e[0],r=r[0]),a=[e,r],s.invert&&(e=s(e),r=s(r)),r<e&&(l=e,e=r,r=l),e==f[0]&&r==f[1]||(f=[e,r])),c&&(i=n[0],o=n[1],s&&(i=i[1],o=o[1]),u=[i,o],c.invert&&(i=c(i),o=c(o)),o<i&&(l=i,i=o,o=l),i==h[0]&&o==h[1]||(h=[i,o])),t):(s&&(a?(e=a[0],r=a[1]):(e=f[0],r=f[1],s.invert&&(e=s.invert(e),r=s.invert(r)),r<e&&(l=e,e=r,r=l))),c&&(u?(i=u[0],o=u[1]):(i=h[0],o=h[1],c.invert&&(i=c.invert(i),o=c.invert(o)),o<i&&(l=i,i=o,o=l))),s&&c?[[e,i],[r,o]]:s?[e,r]:c&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],a=u=null),t},t.empty=function(){return!!s&&f[0]==f[1]||!!c&&h[0]==h[1]},ca.rebind(t,l,"on")};var Vl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bl=fu.format=yu.timeFormat,Xl=Bl.utc,$l=Xl("%Y-%m-%dT%H:%M:%S.%LZ");Bl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?oa:$l,oa.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},oa.toString=$l.toString,fu.second=It(function(t){return new hu(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),fu.seconds=fu.second.range,fu.seconds.utc=fu.second.utc.range,fu.minute=It(function(t){return new hu(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),fu.minutes=fu.minute.range,fu.minutes.utc=fu.minute.utc.range,fu.hour=It(function(t){var n=t.getTimezoneOffset()/60;return new hu(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),fu.hours=fu.hour.range,fu.hours.utc=fu.hour.utc.range,fu.month=It(function(t){return t=fu.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),fu.months=fu.month.range,fu.months.utc=fu.month.utc.range;var Jl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wl=[[fu.second,1],[fu.second,5],[fu.second,15],[fu.second,30],[fu.minute,1],[fu.minute,5],[fu.minute,15],[fu.minute,30],[fu.hour,1],[fu.hour,3],[fu.hour,6],[fu.hour,12],[fu.day,1],[fu.day,2],[fu.week,1],[fu.month,1],[fu.month,3],[fu.year,1]],Gl=Bl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Tn]]),Kl={range:function(t,n,e){return ca.range(Math.ceil(t/e)*e,+n,e).map(ua)},floor:x,ceil:x};Wl.year=fu.year,fu.scale=function(){return aa(ca.scale.linear(),Wl,Gl)};var Ql=Wl.map(function(t){return[t[0].utc,t[1]]}),ts=Xl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Tn]]);Ql.year=fu.year.utc,fu.scale.utc=function(){return aa(ca.scale.linear(),Ql,ts)},ca.text=At(function(t){return t.responseText}),ca.json=function(t,n){return Ct(t,"application/json",la,n)},ca.html=function(t,n){return Ct(t,"text/html",sa,n)},ca.xml=At(function(t){return t.responseXML}),t.exports?t.exports=ca:this.d3=ca}()}),Te=function(){var t=0;return function(n,e){clearTimeout(t),t=setTimeout(n,e)}}();g.prototype={draw:function(){var t=p(this._target,".filters-wrapper","div",this.data(),function(){return 1}).classed("filters-wrapper",!0).style("padding-left","10px").style("padding-right","20px"),n=p(t,".filters","div",!1,function(t){return 1}).classed("filters",!0),e=d(n,".filter","div",function(t){return t},function(t,n){return n+t.field}).classed("filter",!0).style("line-height","33px");e.exit().remove();var r=this;return e.each(function(t,n){var e=ze.select(this);r.filterRow(e,r._fields,r._ops,t)}),this.filterFooter(t),this},ops:function(t){return void 0===t?this._ops:(this._ops=t,this)},fields:function(t){return void 0===t?this._fields:(this._fields=t,this)},data:function(t){return void 0===t?this._data:(this._data=t,this)},text:function(t){return void 0===t?this._fn||function(t){return t.key}:(this._fn=t,this)},render_op:function(t,n){return void 0===n?this._render_op[t]||function(){}:(this._render_op[t]=n,this)},on:function(t,n){return void 0===n?this._on[t]||function(){}:(this._on[t]=n,this)},buildOp:function(t){var n=t.op,e=t.field,r=t.value;return[n,e,r].indexOf(void 0)>-1?function(){return!0}:this._ops[n](e,r)},filterRow:function(t,n,e,r){var i=this,o=(p(t,".remove","a").classed("remove",!0).style("float","right").style("font-weight","bold").html("&#10005;").on("click",function(t){var n=i.data().filter(function(n){return n!==t});i.data(n),i.draw(),i.on("update")(i.data())}),p(t,".inner","div").classed("inner",!0)),a=p(o,"select.field","select",n).classed("field",!0).style("width","165px").on("change",function(t,a){r.field=this.selectedOptions[0].__data__;var u=0;n.map(function(t,n){t==r.field&&(u=n)}),0==e[u].filter(function(t){return t.key==r.op}).length&&(r.op=e[u][0].key),i.on("update")(i.data()),i.drawOps(o,e[u],r,u)});if(p(a,"option","option").property("disabled",!0).property("hidden",!0).text("Filter..."),d(a,"option","option").text(function(t){return t}).attr("selected",function(t){return t==r.field?"selected":void 0}),r.op&&r.field&&r.value){var u=n.indexOf(r.field);i.drawOps(o,e[u],r,u)}},drawOps:function(t,n,e){var r=this,i=p(t,"select.op","select",!1,function(t){return 1}).classed("op",!0).style("width","100px").style("margin-left","10px").style("margin-right","10px").on("change",function(n){e.op=this.selectedOptions[0].__data__.key,r.on("update")(r.data()),r.drawInput(t,e,e.op)}),o=n;e.op=e.op||o[0].key;var n=d(i,"option","option",o,function(t){return t.key}).text(function(t){return t.key.split(".")[0]}).attr("selected",function(t){return t.key==e.op?"selected":void 0});n.exit().remove(),r.drawInput(t,e,e.op)},drawInput:function(t,n,e){var r=this;t.selectAll(".value").remove();var i=this._render_op[e];if(i)return i.bind(this)(t,n);p(t,"input.value","input").classed("value",!0).style("padding-left","10px").style("width","150px").style("line-height","1em").attr("value",n.value).on("keyup",function(t){var e=this;Te(function(){n.value=e.value,r.on("update")(r.data())},1e3)})},filterFooter:function(t){var n=p(t,".filter-footer","div",!1,function(t){return 1}).classed("filter-footer",!0).style("margin-bottom","15px").style("margin-top","10px"),e=this;p(n,".add","a",!1,function(t){return 1}).classed("add",!0).style("font-weight","bold").html("&#65291;").style("width","24px").style("height","24px").style("line-height","24px").style("text-align","center").style("border-radius","15px").style("border","1.5px solid #428BCC").style("cursor","pointer").style("display","inline-block").on("click",function(t){var n=e._data;(0==n.length||Object.keys(n.slice(-1)).length>0)&&n.push({}),e.draw()})},typewatch:Te},m.prototype={data:function(t){return y.bind(this)("data",t)},logic:function(t){return void 0==t?this._l:(this._l="and"==t?"and":"or",this)},op:function(t,n){return void 0===n?this._ops[t]||this._ops.equals:(this._ops[t]=n,this)},by:function(t){var n=this,e=function(e){if(0==t.length)return!0;var r=t.map(function(t){var r=t.field.split("."),i=r.slice(-1)[0],o=r.slice(0,-1).reduce(function(t,n){return t[n]},e),a=t.op.split("."),u=a[0];return n.op(u)(i,t.value)(o)}).filter(function(t){return t});return"and"==n._l?r.length==t.length:r.length>0};return this._data.filter(e)},on:function(t,n){return void 0===n?this._on[t]:(this._on[t]=n,this)},_ops:{equals:function(t,n){return function(e){return String(e[t])==String(n)}},"starts with":function(t,n){return function(e){return 0==String(e[t]).indexOf(String(n))}},"ends with":function(t,n){return function(e){return String(e[t]).length-String(n).length==String(e[t]).indexOf(String(n))}},"does not equal":function(t,n){return function(e){return String(e[t])!=String(n)}},"is set":function(t,n){return function(n){return void 0!=n[t]&&""!=n[t]}},"is not set":function(t,n){return function(n){return void 0==n[t]}},between:function(t,n){return function(e){return parseInt(e[t])>=n[0]&&parseInt(e[t])<=n[1]}},"is in":function(t,n){return function(e){return n.split(",").reduce(function(n,r){return n+String(e[t]).indexOf(String(r))>-1},0)>0}},"is not in":function(t,n){return function(e){return 0==n.split(",").reduce(function(n,r){return n+String(e[t]).indexOf(String(r))>-1},0)}},"does not contain":function(t,n){return function(e){return 0==n.toLowerCase().split(",").reduce(function(n,r){return n+String(e[t]).indexOf(String(r).toLowerCase())>-1},0)}},contains:function(t,n){return function(e){return n.toLowerCase().split(",").reduce(function(n,r){return n+String(e[t]).toLowerCase().indexOf(String(r).toLowerCase())>-1},0)>0}}}};var qe={"is in":function(t,n){return function(e){return n.split(",").reduce(function(n,r){return n+String(e[t]).indexOf(String(r))>-1},0)>0}},"is not in":function(t,n){return function(e){return 0==n.split(",").reduce(function(n,r){return n+String(e[t]).indexOf(String(r))>-1},0)}}};T.prototype={options:function(t){return A.bind(this)("options",t)},draw:function(){var t=this;this._select=me(this.target,"select","select",this._options);var n=this.on("select").bind(this);return this._select.on("change",function(t){n(this.selectedOptions[0].__data__)}),this._options=xe(this._select,"option","option",L,O).text(O).property("selected",function(n){return console.log(t._selected,n.value),n.value&&n.value==t._selected?"selected":1==n.selected?"selected":null}),this},selected:function(t){return A.bind(this)("selected",t)},on:function(t,n){return void 0===n?this._on[t]||q:(this._on[t]=n,this)}},F.prototype={text:function(t){return A.bind(this)("text",t)},navigation:function(t){return A.bind(this)("navigation",t)},select_only:function(t){return A.bind(this)("select_only",t)},options:function(t){return A.bind(this)("options",t)},buttons:function(t){return A.bind(this)("buttons",t)},expansion:function(t){return A.bind(this)("expansion",t)},draw:function(){var t=this,n=me(this.target,".header-wrap","div").classed("header-wrap semantic-base",!0),r=(P(n),D(n)),i=U(n);if(!this._select_only){if(me(i,"span.title","span").classed("title",!0).text(this._text),this._options){var o=this.on("select").bind(this),a=j(i).options(this._options).on("select",function(t){o(t)}).draw();a._select.style("width","19px").style("margin-left","12px"),a._options.style("color","#888").style("min-width","100px").style("text-align","center").style("display","inline-block").style("padding","5px")}if(this._buttons){if(this._navigation){i.remove();var u=n.selectAll(".buttons").style("font-family","Lato, sans-serif"),l=e(u,"breadcrumb").classed("ui big breadcrumb",!0),s=xe(l,"span","span",this._navigation);e(s,"section").text(String),e(s,"divider","i").attr("aria-hidden","true").classed("right angle icon divider",!0),e(u,"nav_divider").classed("ui divider",!0)}xe(r,"a","a",this._buttons,function(t){return t.text}).html(function(t){return"<span class='"+t.icon+"'></span><span style='padding-left:3px'>"+t.text+"</span>"}).attr("class",function(t){return t.class+" "+t.color}).classed("ui basic button",!0).on("click",function(n){return t.on(n.class+".click")(n)})}return this}var o=this.on("select").bind(this),a=j(i).options(this._options).on("select",function(t){o(t)}).draw()},on:function(t,n){return void 0===n?this._on[t]||R:(this._on[t]=n,this)}};var Le=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},Oe=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),je=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":se(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},Re=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":se(n))&&"function"!=typeof n?t:n},De=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(function(t){return r?[r]:[t]},i||function(t){return[t]});return o.enter().append(e),o},Pe=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(r||function(t){return t},i||function(t){return t});return o.enter().append(e),o},Ue=function(){function t(n){var e=this;Le(this,t),this._target=n,this._on={},this.props().map(function(t){e[t]=Z.bind(e,t)})}return Oe(t,[{key:"props",value:function(){return["data"]}},{key:"on",value:function(t,n){return void 0===n?this._on[t]||V:(this._on[t]=n,this)}}]),t}();H(".table-wrapper tr { height:33px}\n.table-wrapper tr th { border-right:1px dotted #ccc } \n.table-wrapper tr th:last-of-type { border-right:none } \n\n.table-wrapper tr { border-bottom:1px solid #ddd }\n.table-wrapper tr th, .table-wrapper tr td { \n  padding-left:10px;\n  max-width:200px\n}\n\n.table-wrapper thead tr { \n  background-color:#e3ebf0;\n}\n.table-wrapper thead tr th .title { \n  text-transform:uppercase\n}\n.table-wrapper tbody tr { \n}\n.table-wrapper tbody tr:hover { \n  background-color:white;\n  background-color:#f9f9fb\n}\n",void 0),B.prototype={data:function(t){var n=Z.bind(this)("data",t);if(t&&t.values.length&&void 0==this._headers){var e=Object.keys(t.values[0]).map(function(t){return{key:t,value:t}});this.headers(e)}return n},skip_option:function(t){return Z.bind(this)("skip_option",t)},wrapper_class:function(t){return Z.bind(this)("wrapper_class",t)},title:function(t){return Z.bind(this)("title",t)},row:function(t){return Z.bind(this)("render_row",t)},default_renderer:function(t){return Z.bind(this)("default_renderer",t)},top:function(t){return Z.bind(this)("top",t)},header:function(t){return Z.bind(this)("render_header",t)},headers:function(t){return Z.bind(this)("headers",t)},hidden_fields:function(t){return Z.bind(this)("hidden_fields",t)},all_headers:function(){var t=this.headers().reduce(function(t,n){return t[n.key]=n.value,t},{}),n=this.headers().filter(function(t){return!!t.locked}).map(function(t){return t.key});if(this._data.values&&this._data.values.length){var e=Object.keys(this._data.values[0]).map(function(e){return!(this._hidden_fields&&this._hidden_fields.indexOf(e)>-1)&&{key:e,value:t[e]||e,selected:!!t[e],locked:n.indexOf(e)>-1||void 0}}.bind(this)).filter(function(t){return t}),r=function(t){return n.indexOf(t)>-1?n.indexOf(t)+10:0};return e=e.sort(function(t,n){return r(n.key||-1/0)-r(t.key||-1/0)})}return this.headers()},sort:function(t,n){return t?(this._sort={key:t,value:!!n},this):this._sort},render_wrapper:function(){var t=this._target,n=De(t,"."+this._wrapper_class,"div").classed(this._wrapper_class,!0).style("position","relative"),e=De(n,"table.main","table").classed("main",!0).style("width","100%");this._table_main=e;De(e,"thead","thead");De(e,"tbody","tbody");var r=De(n,"table.fixed","table").classed("hidden",!0).classed("fixed",!0).style("width",n.style("width")).style("top",this._top+"px").style("position","fixed"),i=this;try{ge.select(window).on("scroll",function(){console.log(e.node().getBoundingClientRect().top,i._top),e.node().getBoundingClientRect().top<i._top?r.classed("hidden",!1):r.classed("hidden",!0);var n=[];t.selectAll(".main").selectAll(".table-headers").selectAll("th").each(function(t,e){n.push(this.offsetWidth)}),t.selectAll(".fixed").selectAll(".table-headers").selectAll("th").each(function(t,e){ge.select(this).style("width",n[e]+"px")})})}catch(t){}this._table_fixed=r;De(r,"thead","thead");if(!this._skip_option){De(n,".table-option","a").classed("table-option",!0).style("position","absolute").style("top","-1px").style("right","0px").style("cursor","pointer").style("line-height","33px").style("font-weight","bold").style("padding-right","8px").style("padding-left","8px").text("OPTIONS").style("background","#e3ebf0").on("click",function(t){this._options_header.classed("hidden",!this._options_header.classed("hidden")),this._show_options=!this._options_header.classed("hidden")}.bind(this))}return n},render_header:function(t){var n=t.selectAll("thead"),e=t.selectAll("tbody");if(void 0!=this.headers()){var r=De(n,"tr.table-options","tr",this.all_headers(),function(t){return 1}).classed("hidden",!this._show_options).classed("table-options",!0),i=this._skip_option?this.headers():this.headers().concat([{key:"spacer",width:"70px"}]),o=De(n,"tr.table-headers","tr",i,function(t){return 1}).classed("table-headers",!0),a=Pe(o,"th","th",!1,function(t,n){return t.key+n}).style("width",function(t){return t.width}).style("position","relative").order(),u=function(t){!1===t.sort?(delete t.sort,this._sort={},this.draw()):(t.sort=!!t.sort,this.sort(t.key,t.sort),this.draw())}.bind(this);De(a,"span","span").classed("title",!0).style("cursor","pointer").text(function(t){return t.value}).on("click",this.on("sort")!=V?this.on("sort"):u),De(a,"i","i").style("padding-left","5px").classed("fa",!0).classed("fa-sort-asc",function(t){return t.key==this._sort.key?!0===this._sort.value:void 0}.bind(this)).classed("fa-sort-desc",function(t){return t.key==this._sort.key?!1===this._sort.value:void 0}.bind(this));var l=this,s=!0,c=ge.behavior.drag().on("drag",function(t,n){var r=ge.event.dx,i=parseInt(ge.select(this.parentNode).style("width").replace("px"));this.parentNode.__data__.width=i+r+"px",ge.select(this.parentNode).style("width",i+r+"px");var o=Array.prototype.slice.call(this.parentNode.parentNode.children,0).indexOf(this.parentNode)+1;ge.select(this.parentNode.parentNode.children[o]).style("width",void 0),s&&(s=!1,setTimeout(function(){s=!0,e.selectAll("tr").selectAll("td:nth-of-type("+o+")").each(function(t){var n=l._renderers[t.key];n&&n.bind(this)(t)})},1))});De(a,"b","b").style("cursor","ew-resize").style("font-size","100%").style("height","100%").style("position","absolute").style("right","-8px").style("top","0").style("width","10px").style("z-index",1).on("mouseover",function(){var t=Array.prototype.slice.call(this.parentNode.parentNode.children,0).indexOf(this.parentNode)+1;e.selectAll("tr").selectAll("td:nth-of-type("+t+")").style("border-right","1px dotted #ccc")}).on("mouseout",function(){var t=Array.prototype.slice.call(this.parentNode.parentNode.children,0).indexOf(this.parentNode)+1;e.selectAll("tr").selectAll("td:nth-of-type("+t+")").style("border-right",void 0)}).call(c);if(a.exit().remove(),!this._skip_option){var f=De(r,"th","th",!1,function(){return 1}).attr("colspan",this.headers().length+1).style("padding-top","10px").style("padding-bottom","10px"),h=Pe(f,".option","div",!1,function(t){return t.key}).classed("option",!0).style("width","240px").style("display","inline-block");h.exit().remove();var l=this;De(h,"input","input").attr("type","checkbox").property("checked",function(t){return this.checked=t.selected,t.selected?"checked":void 0}).attr("disabled",function(t){return t.locked}).on("click",function(t){if(t.selected=this.checked,t.selected)return l.headers().push(t),l.draw();var n=l.headers().map(function(n,e){return n.key==t.key?e:void 0}),e=n.filter(function(t){return t})||0;l.headers().splice(e,1),l.draw()}),De(h,"span","span").text(function(t){return" "+t.value})}this._options_header=this._target.selectAll(".table-options")}},render_rows:function(t){var n=this,e=t.selectAll("tbody");if(void 0!=this.headers()&&this._data&&this._data.values&&this._data.values.length){var r=this._data.values,i=this._sort||{};r=r.sort(function(t,n){var e=t[i.key]||-1/0,r=n[i.key]||-1/0;return i.value?ge.ascending(e,r):ge.descending(e,r)});var o=Pe(e,"tr","tr",r,function(t,n){return String(i.key+t[i.key])+n}).order().on("click",function(t){if(n.on("expand")!=V){var e=n._render_expand.bind(this)(t);n.on("expand").bind(this)(t,e)}});o.exit().remove();Pe(o,"td","td",this.headers(),function(t,n){return t.key+n}).each(function(t){var e=(ge.select(this),n._renderers[t.key]);if(e)return e.bind(this)(t);e=n._default_renderer.bind(this)(t)}).exit().remove();var a=De(o,"td.option-header","td",!1,function(){return 1}).classed("option-header",!0).style("width","70px").style("text-align","center");this._skip_option&&a.classed("hidden",!0),De(a,"a","a").style("font-weight","bold").html(n.option_text())}},option_text:function(t){return Z.bind(this)("option_text",t)},render:function(t,n){return void 0==n?this._renderers[t]||!1:(this._renderers[t]=n,this)},draw:function(){var t=this;return this.render_wrapper().selectAll("table").each(function(n){t.render_header(ge.select(this))}),this.render_rows(this._table_main),this.on("draw").bind(this)(),this},on:function(t,n){return void 0===n?this._on[t]||V:(this._on[t]=n,this)},d3:ge},H(".summary-table { \n  display:inline-block;\n  vertical-align:top;\n}\n.summary-table > .title {\n  font-weight:bold;\n  font-size:14px;\n}\n\n.summary-table .wrap {\n  width:100%\n}\n",void 0);!function(t){function n(t){Le(this,n);var e=Re(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._wrapper_class="table-summary-wrapper",e}je(n,t),Oe(n,[{key:"props",value:function(){return["title","headers","data","wrapper_class"]}},{key:"draw",value:function(){var t=Y(this._target,"summary-table");Y(t,"title").text(this.title()),X(Y(t,"wrap")).wrapper_class(this.wrapper_class(),!0).data({values:this.data()}).skip_option(!0).headers(this.headers()).draw()}}])}(Ue);W.prototype={data:function(t){return A.bind(this)("data",t)},logic:function(t){return A.bind(this)("logic",t)},categories:function(t){return A.bind(this)("categories",t)},filters:function(t){return A.bind(this)("filters",t)},draw:function(){function t(t,n){var e=this,r=me(t,"input","input").style("width","200px").property("value",n.value);t.selectAll(".selectize-control").each(function(t){var n=d3.select(this).on("destroy");n&&n()});var i=$(r.node()).selectize({persist:!1,create:function(t){return n.value=(n.value?n.value+",":"")+t,e.on("update")(e.data()),{value:t,text:t}},onDelete:function(t){return n.value=n.value.split(",").filter(function(n){return n!=t[0]}).join(","),e.on("update")(e.data()),{value:t,text:t}}});t.selectAll(".selectize-control").on("destroy",function(){i[0].selectize.destroy()})}function n(t,n){var e=this;t.selectAll(".selectize-control").remove(),t.selectAll(".selectize-control").each(function(t){var n=d3.select(this).on("destroy");n&&n()});var r=me(t,"select.value","select").classed("value",!0).style("margin-bottom","10px").style("padding-left","10px").style("min-width","200px").style("max-width","500px").attr("multiple",!0).on("change",function(t){n.value=this.value,e.on("update")(e.data())});xe(r,"option","option",i,function(t){return t.key}).attr("selected",function(t){return n.value&&n.value.indexOf(t.key)>-1?"selected":void 0}).text(function(t){return t.key});var o=$(r.node()).selectize({persist:!1,onChange:function(t){n.value=t.join(","),e.on("update")(e.data())}});t.selectAll(".selectize-control").on("destroy",function(){o[0].selectize.destroy()})}var e=me(this.target,".filter-wrap","div",!1,function(){return 1}).classed("filter-wrap",!0),r=me(e,".subtitle-filter","div").classed("subtitle-filter",!0).style("padding-left","10px").style("text-transform"," uppercase").style("font-weight"," bold").style("line-height"," 33px").style("background","rgb(240, 244, 247)").style("margin-bottom","10px");me(r,"span.first","span").text("Filter users matching ").classed("first",!0),j(me(r,"span.middle","span").classed("middle",!0)).options(this.logic()).on("select",function(t){this.logic().map(function(n){n.selected=n.key==t.key}),this.on("logic.change")(this.logic())}.bind(this)).draw(),me(r,"span.last","span").text(" of the following:").classed("last",!0);var i=this.categories(),o=this.on("filter.change").bind(this);return this._logic_filter=v(e).fields(Object.keys(this._filter_options)).ops([[{key:"is in.category"},{key:"is not in.category"}],[{key:"contains.selectize"},{key:"does not contain.selectize"}],[{key:"equals"},{key:"between",input:2}]]).data(this.filters()).render_op("contains.selectize",t).render_op("does not contain.selectize",t).render_op("is in.category",n).render_op("is not in.category",n).render_op("between",function(t,n){var e=this;n.value="object"==se(n.value)?n.value:[0,24],me(t,"input.value.low","input").classed("value low",!0).style("margin-bottom","10px").style("padding-left","10px").style("width","90px").attr("value",n.value[0]).on("keyup",function(t){var r=this;e.typewatch(function(){n.value[0]=r.value,e.on("update")(e.data())},1e3)}),me(t,"span.value-and","span").classed("value-and",!0).text(" and "),me(t,"input.value.high","input").classed("value high",!0).style("margin-bottom","10px").style("padding-left","10px").style("width","90px").attr("value",n.value[1]).on("keyup",function(t){var r=this;e.typewatch(function(){n.value[1]=r.value,e.on("update")(e.data())},1e3)})}).on("update",function(t){o(t)}).draw(),this},on:function(t,n){return void 0===n?this._on[t]||J:(this._on[t]=n,this)}},n(".options-view { \n  text-align:right \n}\n.show-button {\n  width: 150px;\n  text-align: center;\n  line-height: 40px;\n  border-radius: 15px;\n  border: 1px solid #ccc;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: bold;\n  display:inline-block;\n  margin-right:15px;\n}\n.show-button:hover { \n  text-decoration:none; color:#555 \n}\n.show-button.selected {\n  background: #e3ebf0;\n  color: #555;\n}\n",void 0),Q.prototype={data:function(t){return A.bind(this)("data",t)},options:function(t){return A.bind(this)("options",t)},draw:function(){var t=me(this.target,".option-wrap","div").classed("option-wrap",!0),n=me(t,".subtitle-filter","div").classed("subtitle-filter",!0).style("padding-left","10px").style("text-transform"," uppercase").style("font-weight"," bold").style("line-height"," 33px").style("background","rgb(240, 244, 247)").style("margin-bottom","10px");return me(n,"span.first","span").classed("first",!0).text("Choose dataset: "),j(t).on("select",this.on("select")).options(this.data()).draw(),this},on:function(t,n){return void 0===n?this._on[t]||K:(this._on[t]=n,this)}};var Fe={key:"Browsing behavior by time",values:[{key:1,
value:12344},{key:2,value:12344},{key:2.25,value:12344},{key:2.5,value:12344},{key:3,value:1234},{key:4,value:12344}]};et.prototype={data:function(t){return A.bind(this)("data",t)},on:function(t,n){return void 0===n?this._on[t]||function(){}:(this._on[t]=n,this)},title:function(t){return A.bind(this)("title",t)},height:function(t){return A.bind(this)("height",t)},draw:function(){var t=this._target,n=me(t,".vendor-domains-bar-desc","div").classed("vendor-domains-bar-desc",!0).style("display","inherit").style("height","100%").style("width","100%").datum(this._data),e=me(n,".w","div").classed("w",!0).style("height","100%").style("width","100%"),r=this;e.each(function(t){var n=t.values.sort(function(t,n){return n.key-t.key}),i=n.length,o=N(e,function(t){return t-10},function(t){return r._height||60}),a=Math.floor(o.width/24/3),u=function(t){return t.value},l=function(t){return t.value2},s=function(t){return t.key},c=Array.apply(null,Array(i)).map(function(t,n){return n+1}),f=["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],h=f,p=d3.scale.ordinal().range(c),d=d3.scale.linear().range([o.height,0]),g=d3.scale.quantile().domain([0,d3.max(n,function(t){return t.frequency})]).range(h),v=me(e,"svg","svg").attr("width",o.width+o.margin.left+o.margin.right).attr("height",o.height+o.margin.top+o.margin.bottom),y=xe(v,"g","g",function(t){return[t.values]},function(t,n){return n}).attr("transform","translate("+o.margin.left+",0)");p.domain([0,72]),d.domain([0,d3.max(n,function(t){return Math.sqrt(u(t))})]);var m=function(t,n,e,i,u){xe(y,".timing-bar"+u,"rect",t,n).attr("class","timing-bar"+u).attr("x",function(t){return(n(t)-1)*a}).attr("width",a-1).attr("y",function(t){return i(Math.sqrt(e(t)))}).attr("fill","#aaa").attr("fill",function(t){return g(n(t)+u)||"grey"}).attr("height",function(t){return o.height-i(Math.sqrt(e(t)))}).style("opacity","1").on("mouseover",function(t){r.on("hover").bind(this)(t)})};if(n&&n.length&&n[0].value2){var x=d3.scale.linear().range([o.height,0]);x.domain([0,d3.max(n,function(t){return Math.sqrt(l(t))})]),m(n,s,l,x,"-2")}m(n,s,u,d,"");var _=d3.time.scale().range([0,24*a*3]).nice(d3.time.hour,24),b=d3.svg.axis().scale(_).ticks(3).tickFormat(d3.time.format("%I %p"));y.append("g").attr("class","x axis").attr("transform","translate(0,"+o.height+")").call(b)})}};var Ie=function(t){function n(t){ce(this,n);var e=pe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._transforms=!1,e._selected_transform=!1,e._skip_values=!1,e}return he(n,t),fe(n,[{key:"props",value:function(){return["transforms","datasets","selected_transform","skip_values"]}},{key:"draw",value:function(){var t=e(this._target,"transform");j(e(t,"header","span")).options(this.datasets()).on("select",this.on("dataset.change")).draw(),this.transforms()&&j(e(t,"trans","span")).options(this.transforms()).on("select",this.on("transform.change")).selected(this.selected_transform()).draw();var n=e(t,"show-values").style("display",this.skip_values()?"none":null);me(n,"span","span").text("show values? "),me(n,"input","input").attr("type","checkbox").on("change",this.on("toggle.values"));var n=e(t,"filter-values");return this}}]),n}(_e),He="function"==typeof Symbol&&"symbol"===se(Symbol.iterator)?function(t){return void 0===t?"undefined":se(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":se(t)},Ye=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},Ve=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),Ze=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":se(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},Be=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":se(n))&&"function"!=typeof n?t:n},Xe=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(function(t){return r?[r]:[t]},i||function(t){return[t]});return o.enter().append(e),o},$e=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(r||function(t){return t},i||function(t){return t});return o.enter().append(e),o},Je=function(){function t(n){var e=this;Ye(this,t),this._target=n,this._on={},this.props().map(function(t){e[t]=lt.bind(e,t)})}return Ve(t,[{key:"props",value:function(){return["data"]}},{key:"on",value:function(t,n){return void 0===n?this._on[t]||ut:(this._on[t]=n,this)}}]),t}(),We=function(t){function n(t){Ye(this,n);var e=Be(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._target=t,e.WIDTH=144,e._label="URL",e._headers=["12am","12pm","12am"],e._xs=[0,e.WIDTH/2,e.WIDTH],e._anchors=["start","middle","end"],e}return Ze(n,t),Ve(n,[{key:"props",value:function(){return["label","headers"]}},{key:"draw",value:function(){var t=this,n=at(this._target,"expansion-urls-title");at(n,"title").text(this.label()),at(n,"view").text("Views");var e=at(n,"legend","svg");2==this.headers().length&&(this._xs=[this.WIDTH/2-this.WIDTH/4,this.WIDTH/2+this.WIDTH/4],this._anchors=["middle","middle"]),$e(e,"text","text",this.headers(),function(t,n){return n}).attr("y","20").attr("x",function(n,e){return t._xs[e]}).style("text-anchor",function(n,e){return t._anchors[e]}).text(String),$e(e,"line","line",this.headers(),function(t,n){return n}).style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",2==this.headers().length?0:25).attr("y2",35).attr("x1",function(n,e){return 2==t.headers().length?t.WIDTH/2:t._xs[e]}).attr("x2",function(n,e){return 2==t.headers().length?t.WIDTH/2:t._xs[e]})}}]),n}(Je),Ge=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},Ke=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),Qe=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(function(t){return r?[r]:[t]},i||function(t){return[t]});return o.enter().append(e),o},tr=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(r||function(t){return t},i||function(t){return t});return o.enter().append(e),o},nr=function(){function t(n){var e=this;Ge(this,t),this._target=n,this._on={},this.props().map(function(t){e[t]=ft.bind(e,t)})}return Ke(t,[{key:"props",value:function(){return["data"]}},{key:"on",value:function(t,n){return void 0===n?this._on[t]||ct:(this._on[t]=n,this)}}]),t}(),er=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},rr=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),ir=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":He(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},or=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":He(n))&&"function"!=typeof n?t:n},ar=(function(t){function n(t){er(this,n);var e=or(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._wrapper_class="ba-timeseries-wrap",e}ir(n,t),rr(n,[{key:"props",value:function(){return["data","before","after","wrapper_class"]}},{key:"draw",value:function(){var t=250/this.data().length,n=this.before(),e=this.after(),r=st(this._target,this.wrapper_class(),"svg").style("display","block").style("margin","auto").style("margin-bottom","30px").attr("width","250px").attr("height","70px");return ht(r,this.data(),250),st(r,"middle","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",0).attr("y2",55).attr("x1",125).attr("x2",125),st(r,"middle-text","text").attr("x",125).attr("y",67).style("text-anchor","middle").text("On-site"),st(r,"before","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",39).attr("y2",45).attr("x1",t*n).attr("x2",t*n),st(r,"before-text","text").attr("x",t*n-8).attr("y",48).style("text-anchor","end").text("Consideration"),st(r,"window","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",45).attr("y2",45).attr("x1",t*n).attr("x2",t*(e+1)+1),st(r,"after","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",39).attr("y2",45).attr("x1",t*(e+1)).attr("x2",t*(e+1)),st(r,"after-text","text").attr("x",t*(e+1)+8).attr("y",48).style("text-anchor","start").text("Validation"),this}}])}(nr),function(t){function n(t){er(this,n);var e=or(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.target=t,e}ir(n,t),rr(n,[{key:"props",value:function(){return["data","max"]}},{key:"draw",value:function(){var t=(this.target.style("width").replace("px","")||this.offsetWidth)-50,n=d3.scale.linear().range([0,t]).domain([0,this.max()]);this.target.text()&&this.target.text("");var e=Qe(this.target,".bullet","div",this.data(),function(t){return 1}).classed("bullet",!0).style("margin-top","3px"),r=Qe(e,"svg","svg",!1,function(t){return 1}).attr("width",t).attr("height",28);return Qe(r,".bar-1","rect",!1,function(t){return 1}).classed("bar-1",!0).attr("x",0).attr("width",function(t){return n(t.pop_percent)}).attr("height",28).attr("fill","#888"),Qe(r,".bar-2","rect",!1,function(t){return 1}).classed("bar-2",!0).attr("x",0).attr("y",7).attr("width",function(t){return n(t.sample_percent_norm)}).attr("height",14).attr("fill","rgb(8, 29, 88)"),this}}])}(nr),function(t){function n(t){Ye(this,n);var e=Be(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._target=t,e}return Ze(n,t),Ve(n,[{key:"props",value:function(){return["data","split"]}},{key:"draw",value:function(){var t=this,n=this,e=this._target,r=at(e,"expansion-urls").classed("scrollbox",!0);r.html("");var i=this.data().sort(function(t,n){return n.total-t.total}).slice(0,500),o=$e(r,".url-row","div",i,function(t){return t.key}).classed("url-row",!0),a=Xe(o,".name","div").classed("name",!0);Xe(a,"input","input").attr("type","checkbox").on("click",n.on("stage-filter")),at(a,"url","a").text(function(n){return t.split()?n.key.split(t.split())[1]||n.key:n.key}).attr("href",function(t){return t.url?t.url:void 0}).attr("target","_blank"),Xe(o,".number","div").classed("number",!0).text(function(t){return t.total}),Xe(o,".plot","svg").classed("plot",!0).each(function(t){ht(d3.select(this),t.values||t.value,144,20)})}}]),n}(Je));ot(".expansion-urls-title {\n  height:36px;\n  line-height:36px;\n  display:inline-block;\n  vertical-align:top;\n}\n.expansion-urls-title .title {\n  width:265px;\n  font-weight:bold;\n  display:inline-block;\n  vertical-align:top;\n}\n\n.expansion-urls-title .view {\n  width:40px;\n  margin-left:20px;\n  margin-right:20px;\n  font-weight:bold;\n  display:inline-block;\n  vertical-align:top;\n}\n.expansion-urls-title .legend {\n  width:144px;\n  height:36px;\n  vertical-align:top;\n}\n\n.scrollbox {\n  display:inline-block;\n  vertical-align:top;\n  max-height:250px;\n  overflow:scroll;\n}\n\n.url-row .name {\n  width:260px;\n  overflow:hidden;\n  line-height:20px;\n  height:20px;\n  display:inline-block;\n}\n\n.url-row input {\n      margin-right:10px;\n      display:inline-block;\n      vertical-align:top;\n}\n\n.url-row .url {\n      display:inline-block;\n      text-overflow:ellipsis;\n      width:205px;\n}\n\n.url-row .number {\n      width:40px;\n      height:20px;\n      line-height:20px;\n      vertical-align:top;\n      text-align:center;\n      font-size:13px;\n      font-weight:bold;\n      margin-left:20px;\n      margin-right:20px;\n      display:inline-block;\n}\n\n.url-row .plot {\n      width:144px;\n      height:20px;\n      display:inline-block;\n}\n",void 0);var ur=function(t){function n(t){Ye(this,n);var e=Be(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._target=t,e._headers=["12am","12pm","12am"],e}return Ze(n,t),Ve(n,[{key:"props",value:function(){return["data","label","split","headers"]}},{key:"draw",value:function(){var t=this._target,n=at(t,"title-row"),e=at(t,"expansion-row");new We(n).label(this.label()).headers(this.headers()).draw(),new ar(e).data(this.data()).split(this.split()||!1).on("stage-filter",this.on("stage-filter")).draw()}}]),n}(Je),lr=function(t,n){return n={exports:{}},t(n,n.exports),n.exports}(function(t){!function(){function n(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function i(t){return null===t?NaN:+t}function o(t){return!isNaN(t)}function a(t){return{left:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}function u(t){return t.length}function l(t){for(var n=1;t*n%1;)n*=10;return n}function s(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function c(){this._=Object.create(null)}function f(t){return(t+="")===ba||t[0]===wa?wa+t:t}function h(t){return(t+="")[0]===wa?t.slice(1):t}function p(t){return f(t)in this._}function d(t){return(t=f(t))in this._&&delete this._[t]}function g(){var t=[];for(var n in this._)t.push(h(n));return t}function v(){var t=0;for(var n in this._)++t;return t}function y(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function x(t){return t}function _(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function b(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=Ma.length;e<r;++e){var i=Ma[e]+n;if(i in t)return i}}function w(){}function M(){}function k(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new c;return n.on=function(n,i){var o,a=r.get(n);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function S(){ca.event.preventDefault()}function N(){for(var t,n=ca.event;t=n.sourceEvent;)n=t;return n}function E(t){for(var n=new M,e=0,r=arguments.length;++e<r;)n[arguments[e]]=k(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=ca.event;i.target=t,ca.event=i,n[i.type].apply(e,r)}finally{ca.event=o}}},n}function A(t){return Sa(t,Ca),t}function C(t){return"function"==typeof t?t:function(){return Na(t,this)}}function z(t){return"function"==typeof t?t:function(){return Ea(t,this)}}function T(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=ca.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?u:a:t.local?o:i}function q(t){return t.trim().replace(/\s+/g," ")}function L(t){return new RegExp("(?:^|\\s+)"+ca.requote(t)+"(?:\\s+|$)","g")}function O(t){return(t+"").trim().split(/^|\s+/)}function j(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=O(t).map(R);var i=t.length;return"function"==typeof n?r:e}function R(t){var n=L(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",q(i+" "+t))):e.setAttribute("class",q(i.replace(n," ")))}}function D(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function P(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function U(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e?n.createElementNS(e,t):n.createElement(t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ca.ns.qualify(t)).local?e:n}function F(){var t=this.parentNode;t&&t.removeChild(this)}function I(t){return{__data__:t}}function H(t){return function(){return Aa(this,t)}}function Y(t){return arguments.length||(t=r),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],a=0,u=o.length;a<u;a++)(i=o[a])&&n(i,a,e);return t}function Z(t){return Sa(t,Ta),t}function B(t){var n,e;return function(r,i,o){var a,u=t[o].update,l=u.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(a=u[n])&&++n<l;);return a}}function X(t,n,e){function r(){var n=this[a];n&&(this.removeEventListener(t,n,n.$),delete this[a])}function i(){var i=l(n,ha(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+ca.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var a="__on"+t,u=t.indexOf("."),l=$;u>0&&(t=t.slice(0,u));var s=qa.get(t);return s&&(t=s,l=J),u?n?i:r:n?w:o}function $(t,n){return function(e){var r=ca.event;ca.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{ca.event=r}}}function J(t,n){var e=$(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function W(t){var r=".dragsuppress-"+ ++Oa,i="click"+r,o=ca.select(e(t)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==La&&(La=!("onselectstart"in t)&&b(t.style,"userSelect")),La){var a=n(t).style,u=a[La];a[La]="none"}return function(t){if(o.on(r,null),La&&(a[La]=u),t){var n=function(){o.on(i,null)};o.on(i,function(){S(),n()},!0),setTimeout(n,0)}}}function G(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(ja<0){var o=e(t);if(o.scrollX||o.scrollY){r=ca.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();ja=!(a.f||a.e),r.remove()}}return ja?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function K(){return ca.event.changedTouches[0].identifier}function Q(t){return t>0?1:t<0?-1:0}function tt(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function nt(t){return t>1?0:t<-1?Pa:Math.acos(t)}function et(t){return t>1?Ia:t<-1?-Ia:Math.asin(t)}function rt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function ot(t){return((t=Math.exp(2*t))-1)/(t+1)}function at(t){return(t=Math.sin(t/2))*t}function ut(){}function lt(t,n,e){return this instanceof lt?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof lt?new lt(t.h,t.s,t.l):wt(""+t,Mt,lt):new lt(t,n,e)}function st(t,n,e){function r(t){return t>360?t-=360:t<0&&(t+=360),t<60?o+(a-o)*t/60:t<180?a:t<240?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:n<0?0:n>1?1:n,e=e<0?0:e>1?1:e,a=e<=.5?e*(1+n):e+n-e*n,o=2*e-a,new mt(i(t+120),i(t),i(t-120))}function ct(t,n,e){return this instanceof ct?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof ct?new ct(t.h,t.c,t.l):t instanceof ht?dt(t.l,t.a,t.b):dt((t=kt((t=ca.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ct(t,n,e)}function ft(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new ht(e,Math.cos(t*=Ha)*n,Math.sin(t)*n)}function ht(t,n,e){return this instanceof ht?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof ct?ft(t.h,t.c,t.l):kt((t=mt(t)).r,t.g,t.b):new ht(t,n,e)}function pt(t,n,e){var r=(t+16)/116,i=r+n/500,o=r-e/200;return i=gt(i)*Ga,r=gt(r)*Ka,o=gt(o)*Qa,new mt(yt(3.2404542*i-1.5371385*r-.4985314*o),yt(-.969266*i+1.8760108*r+.041556*o),yt(.0556434*i-.2040259*r+1.0572252*o))}function dt(t,n,e){return t>0?new ct(Math.atan2(e,n)*Ya,Math.sqrt(n*n+e*e),t):new ct(NaN,NaN,t)}function gt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function vt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function yt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,n,e){return this instanceof mt?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):wt(""+t,mt,st):new mt(t,n,e)}function xt(t){return new mt(t>>16,t>>8&255,255&t)}function _t(t){return xt(t)+""}function bt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,n,e){var r,i,o,a=0,u=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(Nt(i[0]),Nt(i[1]),Nt(i[2]))}return(o=eu.get(t))?n(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,l=255&o)),n(a,u,l))}function Mt(t,n,e){var r,i,o=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),u=a-o,l=(a+o)/2;return u?(i=l<.5?u/(a+o):u/(2-a-o),r=t==a?(n-e)/u+(n<e?6:0):n==a?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new lt(r,i,l)}function kt(t,n,e){t=St(t),n=St(n),e=St(e);var r=vt((.4124564*t+.3575761*n+.1804375*e)/Ga),i=vt((.2126729*t+.7151522*n+.072175*e)/Ka);return ht(116*i-16,500*(r-i),200*(i-vt((.0193339*t+.119192*n+.9503041*e)/Qa)))}function St(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Nt(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function Et(t){return"function"==typeof t?t:function(){return t}}function At(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Ct(n,e,t,r)}}function Ct(t,n,e,r){function i(){var t,n=l.status;if(!n&&Tt(l)||n>=200&&n<300||304===n){try{t=e.call(o,l)}catch(t){return void a.error.call(o,t)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=ca.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,s=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var n=ca.event;ca.event=t;try{a.progress.call(o,l)}finally{ca.event=n}},o.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(s=t,o):s},o.response=function(t){return e=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ha(arguments)))}}),o.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),l.setRequestHeader)for(var c in u)l.setRequestHeader(c,u[c]);return null!=n&&l.overrideMimeType&&l.overrideMimeType(n),null!=s&&(l.responseType=s),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},ca.rebind(o,a,"on"),null==r?o:o.get(zt(r))}function zt(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}function Tt(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function qt(t,n,e){var r=arguments.length;r<2&&(n=0),r<3&&(e=Date.now());var i=e+n,o={c:t,t:i,n:null};return iu?iu.n=o:ru=o,iu=o,ou||(au=clearTimeout(au),ou=1,uu(Lt)),o}function Lt(){var t=Ot(),n=jt()-t;n>24?(isFinite(n)&&(clearTimeout(au),au=setTimeout(Lt,n)),ou=0):(ou=1,uu(Lt))}function Ot(){for(var t=Date.now(),n=ru;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function jt(){for(var t,n=ru,e=1/0;n;)n.c?(n.t<e&&(e=n.t),n=(t=n).n):n=t?t.n=n.n:ru=n.n;return iu=t,e}function Rt(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Dt(t,n){var e=Math.pow(10,3*_a(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function Pt(t){var n=t.decimal,e=t.thousands,r=t.grouping,i=t.currency,o=r&&e?function(t,n){for(var i=t.length,o=[],a=0,u=r[0],l=0;i>0&&u>0&&(l+u+1>n&&(u=Math.max(1,n-l)),o.push(t.substring(i-=u,i+u)),!((l+=u+1)>n));)u=r[a=(a+1)%r.length];return o.reverse().join(e)}:x;return function(t){var e=su.exec(t),r=e[1]||" ",a=e[2]||">",u=e[3]||"-",l=e[4]||"",s=e[5],c=+e[6],f=e[7],h=e[8],p=e[9],d=1,g="",v="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(s||"0"===r&&"="===a)&&(s=r="0",a="="),p){case"n":f=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":d=-1,p="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=cu.get(p)||Ut;var x=s&&f;return function(t){var e=v;if(y&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===u?"":u;if(d<0){var l=ca.formatPrefix(t,h);t=l.scale(t),e=l.symbol+v}else t*=d;t=p(t,h);var _,b,w=t.lastIndexOf(".");if(w<0){var M=m?t.lastIndexOf("e"):-1;M<0?(_=t,b=""):(_=t.substring(0,M),b=t.substring(M))}else _=t.substring(0,w),b=n+t.substring(w+1);!s&&f&&(_=o(_,1/0));var k=g.length+_.length+b.length+(x?0:i.length),S=k<c?new Array(k=c-k+1).join(r):"";return x&&(_=o(S+_,S.length?c-b.length:1/0)),i+=g,t=_+b,("<"===a?i+t+S:">"===a?S+i+t:"^"===a?S.substring(0,k>>=1)+i+t+S.substring(k):i+(x?t:S+t))+e}}}function Ut(t){return t+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function It(t,n,e){function r(n){var e=t(n),r=o(e,1);return n-e<r-n?e:r}function i(e){return n(e=t(new hu(e-1)),1),e}function o(t,e){return n(t=new hu(+t),e),t}function a(t,r,o){var a=i(t),u=[];if(o>1)for(;a<r;)e(a)%o||u.push(new Date(+a)),n(a,1);else for(;a<r;)u.push(new Date(+a)),n(a,1);return u}function u(t,n,e){try{hu=Ft;var r=new Ft;return r._=t,a(r,n,e)}finally{hu=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var l=t.utc=Ht(t);return l.floor=l,l.round=Ht(r),l.ceil=Ht(i),l.offset=Ht(o),l.range=u,t}function Ht(t){return function(n,e){try{hu=Ft;var r=new Ft;return r._=n,t(r,e)._}finally{hu=Date}}}function Yt(t){function n(t){function n(n){for(var e,i,o,a=[],u=-1,l=0;++u<r;)37===t.charCodeAt(u)&&(a.push(t.slice(l,u)),null!=(i=du[e=t.charAt(++u)])&&(e=t.charAt(++u)),(o=A[e])&&(e=o(n,null==i?"e"===e?" ":"0":i)),a.push(e),l=u+1);return a.push(t.slice(l,u)),a.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(r,t,n,0)!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&hu!==Ft,o=new(i?Ft:hu);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},n.toString=function(){return t},n}function e(t,n,e,r){for(var i,o,a,u=0,l=n.length,s=e.length;u<l;){if(r>=s)return-1;if(37===(i=n.charCodeAt(u++))){if(a=n.charAt(u++),!(o=C[a in du?n.charAt(u++):a])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function r(t,n,e){w.lastIndex=0;var r=w.exec(n.slice(e));return r?(t.w=M.get(r[0].toLowerCase()),e+r[0].length):-1}function i(t,n,e){_.lastIndex=0;var r=_.exec(n.slice(e));return r?(t.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function o(t,n,e){N.lastIndex=0;var r=N.exec(n.slice(e));return r?(t.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function a(t,n,e){k.lastIndex=0;var r=k.exec(n.slice(e));return r?(t.m=S.get(r[0].toLowerCase()),e+r[0].length):-1}function u(t,n,r){return e(t,A.c.toString(),n,r)}function l(t,n,r){return e(t,A.x.toString(),n,r)}function s(t,n,r){return e(t,A.X.toString(),n,r)}function c(t,n,e){var r=x.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}var f=t.dateTime,h=t.date,p=t.time,d=t.periods,g=t.days,v=t.shortDays,y=t.months,m=t.shortMonths;n.utc=function(t){function e(t){try{hu=Ft;var n=new hu;return n._=t,r(n)}finally{hu=Date}}var r=n(t);return e.parse=function(t){try{hu=Ft;var n=r.parse(t);return n&&n._}finally{hu=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=cn;var x=ca.map(),_=Zt(g),b=Bt(g),w=Zt(v),M=Bt(v),k=Zt(y),S=Bt(y),N=Zt(m),E=Bt(m);d.forEach(function(t,n){x.set(t.toLowerCase(),n)});var A={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:n(f),d:function(t,n){return Vt(t.getDate(),n,2)},e:function(t,n){return Vt(t.getDate(),n,2)},H:function(t,n){return Vt(t.getHours(),n,2)},I:function(t,n){return Vt(t.getHours()%12||12,n,2)},j:function(t,n){return Vt(1+fu.dayOfYear(t),n,3)},L:function(t,n){return Vt(t.getMilliseconds(),n,3)},m:function(t,n){return Vt(t.getMonth()+1,n,2)},M:function(t,n){return Vt(t.getMinutes(),n,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,n){return Vt(t.getSeconds(),n,2)},U:function(t,n){return Vt(fu.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Vt(fu.mondayOfYear(t),n,2)},x:n(h),X:n(p),y:function(t,n){return Vt(t.getFullYear()%100,n,2)},Y:function(t,n){return Vt(t.getFullYear()%1e4,n,4)},Z:ln,"%":function(){return"%"}},C={a:r,A:i,b:o,B:a,c:u,d:nn,e:nn,H:rn,I:rn,j:en,L:un,m:tn,M:on,p:c,S:an,U:$t,w:Xt,W:Jt,x:l,X:s,y:Gt,Y:Wt,Z:Kt,"%":sn};return n}function Vt(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Zt(t){return new RegExp("^(?:"+t.map(ca.requote).join("|")+")","i")}function Bt(t){for(var n=new c,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Xt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function $t(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Jt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Wt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Gt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.y=Qt(+r[0]),e+r[0].length):-1}function Kt(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function tn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function nn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function en(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function rn(t,n,e){
gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function on(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function an(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function un(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ln(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=_a(n)/60|0,i=_a(n)%60;return e+Vt(r,"0",2)+Vt(i,"0",2)}function sn(t,n,e){vu.lastIndex=0;var r=vu.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function cn(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function fn(){}function hn(t,n,e){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function pn(t,n){t&&_u.hasOwnProperty(t.type)&&_u[t.type](t,n)}function dn(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function gn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)dn(t[e],n,1);n.polygonEnd()}function vn(){function t(t,n){t*=Ha,n=n*Ha/2+Pa/4;var e=t-r,a=e>=0?1:-1,u=a*e,l=Math.cos(n),s=Math.sin(n),c=o*s,f=i*l+c*Math.cos(u),h=c*a*Math.sin(u);wu.add(Math.atan2(h,f)),r=t,i=l,o=s}var n,e,r,i,o;Mu.point=function(a,u){Mu.point=t,r=(n=a)*Ha,i=Math.cos(u=(e=u)*Ha/2+Pa/4),o=Math.sin(u)},Mu.lineEnd=function(){t(n,e)}}function yn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function mn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function xn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function _n(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function bn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function wn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Mn(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function kn(t,n){return _a(t[0]-n[0])<Ra&&_a(t[1]-n[1])<Ra}function Sn(t,n){t*=Ha;var e=Math.cos(n*=Ha);Nn(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function Nn(t,n,e){++ku,Nu+=(t-Nu)/ku,Eu+=(n-Eu)/ku,Au+=(e-Au)/ku}function En(){function t(t,i){t*=Ha;var o=Math.cos(i*=Ha),a=o*Math.cos(t),u=o*Math.sin(t),l=Math.sin(i),s=Math.atan2(Math.sqrt((s=e*l-r*u)*s+(s=r*a-n*l)*s+(s=n*u-e*a)*s),n*a+e*u+r*l);Su+=s,Cu+=s*(n+(n=a)),zu+=s*(e+(e=u)),Tu+=s*(r+(r=l)),Nn(n,e,r)}var n,e,r;ju.point=function(i,o){i*=Ha;var a=Math.cos(o*=Ha);n=a*Math.cos(i),e=a*Math.sin(i),r=Math.sin(o),ju.point=t,Nn(n,e,r)}}function An(){ju.point=Sn}function Cn(){function t(t,n){t*=Ha;var e=Math.cos(n*=Ha),a=e*Math.cos(t),u=e*Math.sin(t),l=Math.sin(n),s=i*l-o*u,c=o*a-r*l,f=r*u-i*a,h=Math.sqrt(s*s+c*c+f*f),p=r*a+i*u+o*l,d=h&&-nt(p)/h,g=Math.atan2(h,p);qu+=d*s,Lu+=d*c,Ou+=d*f,Su+=g,Cu+=g*(r+(r=a)),zu+=g*(i+(i=u)),Tu+=g*(o+(o=l)),Nn(r,i,o)}var n,e,r,i,o;ju.point=function(a,u){n=a,e=u,ju.point=t,a*=Ha;var l=Math.cos(u*=Ha);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(u),Nn(r,i,o)},ju.lineEnd=function(){t(n,e),ju.lineEnd=An,ju.point=Sn}}function zn(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Tn(){return!0}function qn(t,n,e,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(kn(e,r)){i.lineStart();for(var u=0;u<n;++u)i.point((e=t[u])[0],e[1]);return void i.lineEnd()}var l=new On(e,t,null,!0),s=new On(e,null,l,!1);l.o=s,o.push(l),a.push(s),l=new On(r,t,null,!1),s=new On(r,null,l,!0),l.o=s,o.push(l),a.push(s)}}),a.sort(n),Ln(o),Ln(a),o.length){for(var u=0,l=e,s=a.length;u<s;++u)a[u].e=l=!l;for(var c,f,h=o[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Ln(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function On(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function jn(t,n,e,r){return function(i,o){function a(n,e){var r=i(n,e);t(n=r[0],e=r[1])&&o.point(n,e)}function u(t,n){var e=i(t,n);v.point(e[0],e[1])}function l(){m.point=u,v.lineStart()}function s(){m.point=a,v.lineEnd()}function c(t,n){g.push([t,n]);var e=i(t,n);_.point(e[0],e[1])}function f(){_.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),_.lineEnd();var t,n=_.clean(),e=x.buffer(),r=e.length;if(g.pop(),d.push(g),g=null,r)if(1&n){t=e[0];var i,r=t.length-1,a=-1;if(r>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&n&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Rn))}var p,d,g,v=n(o),y=i.invert(r[0],r[1]),m={point:a,lineStart:l,lineEnd:s,polygonStart:function(){m.point=c,m.lineStart=f,m.lineEnd=h,p=[],d=[]},polygonEnd:function(){m.point=a,m.lineStart=l,m.lineEnd=s,p=ca.merge(p);var t=Hn(y,d);p.length?(b||(o.polygonStart(),b=!0),qn(p,Pn,t,e,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=Dn(),_=n(x),b=!1;return m}}function Rn(t){return t.length>1}function Dn(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:w,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Pn(t,n){return((t=t.x)[0]<0?t[1]-Ia-Ra:Ia-t[1])-((n=n.x)[0]<0?n[1]-Ia-Ra:Ia-n[1])}function Un(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Pa:-Pa,l=_a(o-e);_a(l-Pa)<Ra?(t.point(e,r=(r+a)/2>0?Ia:-Ia),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&l>=Pa&&(_a(e-i)<Ra&&(e-=i*Ra),_a(o-u)<Ra&&(o-=u*Ra),r=Fn(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function Fn(t,n,e,r){var i,o,a=Math.sin(t-e);return _a(a)>Ra?Math.atan((Math.sin(n)*(o=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(n))*Math.sin(t))/(i*o*a)):(n+r)/2}function In(t,n,e,r){var i;if(null==t)i=e*Ia,r.point(-Pa,i),r.point(0,i),r.point(Pa,i),r.point(Pa,0),r.point(Pa,-i),r.point(0,-i),r.point(-Pa,-i),r.point(-Pa,0),r.point(-Pa,i);else if(_a(t[0]-n[0])>Ra){var o=t[0]<n[0]?Pa:-Pa;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Hn(t,n){var e=t[0],r=t[1],i=[Math.sin(e),-Math.cos(e),0],o=0,a=0;wu.reset();for(var u=0,l=n.length;u<l;++u){var s=n[u],c=s.length;if(c)for(var f=s[0],h=f[0],p=f[1]/2+Pa/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===c&&(v=0),t=s[v];var y=t[0],m=t[1]/2+Pa/4,x=Math.sin(m),_=Math.cos(m),b=y-h,w=b>=0?1:-1,M=w*b,k=M>Pa,S=d*x;if(wu.add(Math.atan2(S*w*Math.sin(M),g*_+S*Math.cos(M))),o+=k?b+w*Ua:b,k^h>=e^y>=e){var N=xn(yn(f),yn(t));wn(N);var E=xn(i,N);wn(E);var A=(k^b>=0?-1:1)*et(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(a+=k^b>=0?1:-1)}if(!v++)break;h=y,d=x,g=_,f=t}}return(o<-Ra||o<Ra&&wu<0)^1&a}function Yn(t){function n(t,n){return Math.cos(t)*Math.cos(n)>o}function e(t){var e,o,l,s,c;return{lineStart:function(){s=l=!1,c=1},point:function(f,h){var p,d=[f,h],g=n(f,h),v=a?g?0:i(f,h):g?i(f+(f<0?Pa:-Pa),h):0;if(!e&&(s=l=g)&&t.lineStart(),g!==l&&(p=r(e,d),(kn(e,p)||kn(d,p))&&(d[0]+=Ra,d[1]+=Ra,g=n(d[0],d[1]))),g!==l)c=0,g?(t.lineStart(),p=r(d,e),t.point(p[0],p[1])):(p=r(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(u&&e&&a^g){var y;v&o||!(y=r(d,e,!0))||(c=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&kn(e,d)||t.point(d[0],d[1]),e=d,l=g,o=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(s&&l)<<1}}}function r(t,n,e){var r=yn(t),i=yn(n),a=[1,0,0],u=xn(r,i),l=mn(u,u),s=u[0],c=l-s*s;if(!c)return!e&&t;var f=o*l/c,h=-o*s/c,p=xn(a,u),d=bn(a,f);_n(d,bn(u,h));var g=p,v=mn(d,g),y=mn(g,g),m=v*v-y*(mn(d,d)-1);if(!(m<0)){var x=Math.sqrt(m),_=bn(g,(-v-x)/y);if(_n(_,d),_=Mn(_),!e)return _;var b,w=t[0],M=n[0],k=t[1],S=n[1];M<w&&(b=w,w=M,M=b);var N=M-w,E=_a(N-Pa)<Ra,A=E||N<Ra;if(!E&&S<k&&(b=k,k=S,S=b),A?E?k+S>0^_[1]<(_a(_[0]-w)<Ra?k:S):k<=_[1]&&_[1]<=S:N>Pa^(w<=_[0]&&_[0]<=M)){var C=bn(g,(-v+x)/y);return _n(C,d),[_,Mn(C)]}}}function i(n,e){var r=a?t:Pa-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var o=Math.cos(t),a=o>0,u=_a(o)>Ra;return jn(n,e,ve(t,6*Ha),a?[0,-t]:[-Pa,t-Pa])}function Vn(t,n,e,r){return function(i){var o,a=i.a,u=i.b,l=a.x,s=a.y,c=u.x,f=u.y,h=0,p=1,d=c-l,g=f-s;if(o=t-l,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>h&&(h=o)}if(o=e-l,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<p&&(p=o)}if(o=n-s,g||!(o>0)){if(o/=g,g<0){if(o<h)return;o<p&&(p=o)}else if(g>0){if(o>p)return;o>h&&(h=o)}if(o=r-s,g||!(o<0)){if(o/=g,g<0){if(o>p)return;o>h&&(h=o)}else if(g>0){if(o<h)return;o<p&&(p=o)}return h>0&&(i.a={x:l+h*d,y:s+h*g}),p<1&&(i.b={x:l+p*d,y:s+p*g}),i}}}}}}function Zn(t,n,e,r){function i(r,i){return _a(r[0]-t)<Ra?i>0?0:3:_a(r[0]-e)<Ra?i>0?2:1:_a(r[1]-n)<Ra?i>0?1:0:i>0?3:2}function o(t,n){return a(t.x,n.x)}function a(t,n){var e=i(t,1),r=i(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function l(t){for(var n=0,e=v.length,r=t[1],i=0;i<e;++i)for(var o,a=1,u=v[i],l=u.length,s=u[0];a<l;++a)o=u[a],s[1]<=r?o[1]>r&&tt(s,o,t)>0&&++n:o[1]<=r&&tt(s,o,t)<0&&--n,s=o;return 0!==n}function s(o,u,l,s){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(u,l))||a(o,u)<0^l>0)do{s.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+l+4)%4)!==f);else s.point(u[0],u[1])}function c(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function f(t,n){c(t,n)&&u.point(t,n)}function h(){C.point=d,v&&v.push(y=[]),k=!0,M=!1,b=w=NaN}function p(){g&&(d(m,x),_&&M&&E.rejoin(),g.push(E.buffer())),C.point=f,M&&u.lineEnd()}function d(t,n){t=Math.max(-Du,Math.min(Du,t)),n=Math.max(-Du,Math.min(Du,n));var e=c(t,n);if(v&&y.push([t,n]),k)m=t,x=n,_=e,k=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&M)u.point(t,n);else{var r={a:{x:b,y:w},b:{x:t,y:n}};A(r)?(M||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),S=!1):e&&(u.lineStart(),u.point(t,n),S=!1)}b=t,w=n,M=e}var g,v,y,m,x,_,b,w,M,k,S,N=u,E=Dn(),A=Vn(t,n,e,r),C={point:f,lineStart:h,lineEnd:p,polygonStart:function(){u=E,g=[],v=[],S=!0},polygonEnd:function(){u=N,g=ca.merge(g);var n=l([t,r]),e=S&&n,i=g.length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),i&&qn(g,o,n,s,u),u.polygonEnd()),g=v=y=null}};return C}}function Bn(t){var n=0,e=Pa/3,r=le(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Pa/180,e=t[1]*Pa/180):[n/Pa*180,e/Pa*180]},i}function Xn(t,n){function e(t,n){var e=Math.sqrt(o-2*i*Math.sin(n))/i;return[e*Math.sin(t*=i),a-e*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(n))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return e.invert=function(t,n){var e=a-n;return[Math.atan2(t,e)/i,et((o-(t*t+e*e)*i*i)/(2*i))]},e}function $n(){function t(t,n){Uu+=i*t-r*n,r=t,i=n}var n,e,r,i;Vu.point=function(o,a){Vu.point=t,n=r=o,e=i=a},Vu.lineEnd=function(){t(n,e)}}function Jn(t,n){t<Fu&&(Fu=t),t>Hu&&(Hu=t),n<Iu&&(Iu=n),n>Yu&&(Yu=n)}function Wn(){function t(t,n){a.push("M",t,",",n,o)}function n(t,n){a.push("M",t,",",n),u.point=e}function e(t,n){a.push("L",t,",",n)}function r(){u.point=t}function i(){a.push("Z")}var o=Gn(4.5),a=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return o=Gn(t),u},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return u}function Gn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Kn(t,n){Nu+=t,Eu+=n,++Au}function Qn(){function t(t,r){var i=t-n,o=r-e,a=Math.sqrt(i*i+o*o);Cu+=a*(n+t)/2,zu+=a*(e+r)/2,Tu+=a,Kn(n=t,e=r)}var n,e;Bu.point=function(r,i){Bu.point=t,Kn(n=r,e=i)}}function te(){Bu.point=Kn}function ne(){function t(t,n){var e=t-r,o=n-i,a=Math.sqrt(e*e+o*o);Cu+=a*(r+t)/2,zu+=a*(i+n)/2,Tu+=a,a=i*t-r*n,qu+=a*(r+t),Lu+=a*(i+n),Ou+=3*a,Kn(r=t,i=n)}var n,e,r,i;Bu.point=function(o,a){Bu.point=t,Kn(n=r=o,e=i=a)},Bu.lineEnd=function(){t(n,e)}}function ee(t){function n(n,e){t.moveTo(n+a,e),t.arc(n,e,a,0,Ua)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function i(){u.point=n}function o(){t.closePath()}var a=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:i,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=i,u.point=n},pointRadius:function(t){return a=t,u},result:w};return u}function re(t){function n(t){return(u?r:e)(t)}function e(n){return ae(n,function(e,r){e=t(e,r),n.point(e[0],e[1])})}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){x=NaN,k.point=o,n.lineStart()}function o(e,r){var o=yn([e,r]),a=t(e,r);i(x,_,m,b,w,M,x=a[0],_=a[1],m=e,b=o[0],w=o[1],M=o[2],u,n),n.point(x,_)}function a(){k.point=e,n.lineEnd()}function l(){r(),k.point=s,k.lineEnd=c}function s(t,n){o(f=t,h=n),p=x,d=_,g=b,v=w,y=M,k.point=o}function c(){i(x,_,m,b,w,M,p,d,f,g,v,y,u,n),k.lineEnd=a,a()}var f,h,p,d,g,v,y,m,x,_,b,w,M,k={point:e,lineStart:r,lineEnd:a,polygonStart:function(){n.polygonStart(),k.lineStart=l},polygonEnd:function(){n.polygonEnd(),k.lineStart=r}};return k}function i(n,e,r,u,l,s,c,f,h,p,d,g,v,y){var m=c-n,x=f-e,_=m*m+x*x;if(_>4*o&&v--){var b=u+p,w=l+d,M=s+g,k=Math.sqrt(b*b+w*w+M*M),S=Math.asin(M/=k),N=_a(_a(M)-1)<Ra||_a(r-h)<Ra?(r+h)/2:Math.atan2(w,b),E=t(N,S),A=E[0],C=E[1],z=A-n,T=C-e,q=x*z-m*T;(q*q/_>o||_a((m*z+x*T)/_-.5)>.3||u*p+l*d+s*g<a)&&(i(n,e,r,u,l,s,A,C,N,b/=k,w/=k,M,v,y),y.point(A,C),i(A,C,N,b,w,M,c,f,h,p,d,g,v,y))}}var o=.5,a=Math.cos(30*Ha),u=16;return n.precision=function(t){return arguments.length?(u=(o=t*t)>0&&16,n):Math.sqrt(o)},n}function ie(t){var n=re(function(n,e){return t([n*Ya,e*Ya])});return function(t){return se(n(t))}}function oe(t){this.stream=t}function ae(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ue(t){return le(function(){return t})()}function le(t){function n(t){return t=u(t[0]*Ha,t[1]*Ha),[t[0]*h+l,s-t[1]*h]}function e(t){return(t=u.invert((t[0]-l)/h,(s-t[1])/h))&&[t[0]*Ya,t[1]*Ya]}function r(){u=zn(a=he(y,m,_),o);var t=o(g,v);return l=p-t[0]*h,s=d+t[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),n}var o,a,u,l,s,c,f=re(function(t,n){return t=o(t,n),[t[0]*h+l,s-t[1]*h]}),h=150,p=480,d=250,g=0,v=0,y=0,m=0,_=0,b=Ru,w=x,M=null,k=null;return n.stream=function(t){return c&&(c.valid=!1),c=se(b(a,f(w(t)))),c.valid=!0,c},n.clipAngle=function(t){return arguments.length?(b=null==t?(M=t,Ru):Yn((M=+t)*Ha),i()):M},n.clipExtent=function(t){return arguments.length?(k=t,w=t?Zn(t[0][0],t[0][1],t[1][0],t[1][1]):x,i()):k},n.scale=function(t){return arguments.length?(h=+t,r()):h},n.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},n.center=function(t){return arguments.length?(g=t[0]%360*Ha,v=t[1]%360*Ha,r()):[g*Ya,v*Ya]},n.rotate=function(t){return arguments.length?(y=t[0]%360*Ha,m=t[1]%360*Ha,_=t.length>2?t[2]%360*Ha:0,r()):[y*Ya,m*Ya,_*Ya]},ca.rebind(n,f,"precision"),function(){return o=t.apply(this,arguments),n.invert=o.invert&&e,r()}}function se(t){return ae(t,function(n,e){t.point(n*Ha,e*Ha)})}function ce(t,n){return[t,n]}function fe(t,n){return[t>Pa?t-Ua:t<-Pa?t+Ua:t,n]}function he(t,n,e){return t?n||e?zn(de(t),ge(n,e)):de(t):n||e?ge(n,e):fe}function pe(t){return function(n,e){return n+=t,[n>Pa?n-Ua:n<-Pa?n+Ua:n,e]}}function de(t){var n=pe(t);return n.invert=pe(-t),n}function ge(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,s=Math.sin(n),c=s*r+u*i;return[Math.atan2(l*o-c*a,u*r-s*i),et(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(n),a=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,s=Math.sin(n),c=s*o-l*a;return[Math.atan2(l*o+s*a,u*r+c*i),et(c*r-u*i)]},e}function ve(t,n){var e=Math.cos(t),r=Math.sin(t);return function(i,o,a,u){var l=a*n;null!=i?(i=ye(e,i),o=ye(e,o),(a>0?i<o:i>o)&&(i+=a*Ua)):(i=t+a*Ua,o=t-.5*l);for(var s,c=i;a>0?c>o:c<o;c-=l)u.point((s=Mn([e,-r*Math.cos(c),-r*Math.sin(c)]))[0],s[1])}}function ye(t,n){var e=yn(n);e[0]-=t,wn(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ra)%(2*Math.PI)}function me(t,n,e){var r=ca.range(t,n-Ra,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function xe(t,n,e){var r=ca.range(t,n-Ra,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function _e(t){return t.source}function be(t){return t.target}function we(t,n,e,r){var i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),u=Math.sin(r),l=i*Math.cos(t),s=i*Math.sin(t),c=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(at(r-n)+i*a*at(e-t))),p=1/Math.sin(h),d=h?function(t){var n=Math.sin(t*=h)*p,e=Math.sin(h-t)*p,r=e*l+n*c,i=e*s+n*f,a=e*o+n*u;return[Math.atan2(i,r)*Ya,Math.atan2(a,Math.sqrt(r*r+i*i))*Ya]}:function(){return[t*Ya,n*Ya]};return d.distance=h,d}function Me(){function t(t,i){var o=Math.sin(i*=Ha),a=Math.cos(i),u=_a((t*=Ha)-n),l=Math.cos(u);Xu+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=r*o-e*a*l)*u),e*o+r*a*l),n=t,e=o,r=a}var n,e,r;$u.point=function(i,o){n=i*Ha,e=Math.sin(o*=Ha),r=Math.cos(o),$u.point=t},$u.lineEnd=function(){$u.point=$u.lineEnd=w}}function ke(t,n){function e(n,e){var r=Math.cos(n),i=Math.cos(e),o=t(r*i);return[o*i*Math.sin(n),o*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),i=n(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&e*o/r)]},e}function Se(t,n){function e(t,n){a>0?n<-Ia+Ra&&(n=-Ia+Ra):n>Ia-Ra&&(n=Ia-Ra);var e=a/Math.pow(i(n),o);return[e*Math.sin(o*t),a-e*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Pa/4+t/2)},o=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(i(n)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(e.invert=function(t,n){var e=a-n,r=Q(o)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/o,2*Math.atan(Math.pow(a/r,1/o))-Ia]},e):Ee}function Ne(t,n){function e(t,n){var e=o-n;return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}var r=Math.cos(t),i=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),o=r/i+t;return _a(i)<Ra?ce:(e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/i,o-Q(i)*Math.sqrt(t*t+e*e)]},e)}function Ee(t,n){return[t,Math.log(Math.tan(Pa/4+n/2))]}function Ae(t){var n,e=ue(t),r=e.scale,i=e.translate,o=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=i.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var a=o.apply(e,arguments);if(a===e){if(n=null==t){var u=Pa*r(),l=i();o([[l[0]-u,l[1]-u],[l[0]+u,l[1]+u]])}}else n&&(a=null);return a},e.clipExtent(null)}function Ce(t,n){return[Math.log(Math.tan(Pa/4+n/2)),-t]}function ze(t){return t[0]}function Te(t){return t[1]}function qe(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;i++){for(;r>1&&tt(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function Le(t,n){return t[0]-n[0]||t[1]-n[1]}function Oe(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function je(t,n,e,r){var i=t[0],o=e[0],a=n[0]-i,u=r[0]-o,l=t[1],s=e[1],c=n[1]-l,f=r[1]-s,h=(u*(l-s)-f*(i-o))/(f*a-u*c);return[i+h*a,l+h*c]}function Re(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function De(){or(this),this.edge=this.site=this.circle=null}function Pe(t){var n=al.pop()||new De;return n.site=t,n}function Ue(t){We(t),rl.remove(t),al.push(t),or(t)}function Fe(t){var n=t.circle,e=n.x,r=n.cy,i={x:e,y:r},o=t.P,a=t.N,u=[t];Ue(t);for(var l=o;l.circle&&_a(e-l.circle.x)<Ra&&_a(r-l.circle.cy)<Ra;)o=l.P,u.unshift(l),Ue(l),l=o;u.unshift(l),We(l);for(var s=a;s.circle&&_a(e-s.circle.x)<Ra&&_a(r-s.circle.cy)<Ra;)a=s.N,u.push(s),Ue(s),s=a;u.push(s),We(s);var c,f=u.length;for(c=1;c<f;++c)s=u[c],l=u[c-1],er(s.edge,l.site,s.site,i);l=u[0],s=u[f-1],s.edge=tr(l.site,s.site,null,i),Je(l),Je(s)}function Ie(t){for(var n,e,r,i,o=t.x,a=t.y,u=rl._;u;)if((r=Ye(u,a)-o)>Ra)u=u.L;else{if(!((i=o-Ve(u,a))>Ra)){r>-Ra?(n=u.P,e=u):i>-Ra?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var l=Pe(t);if(rl.insert(n,l),n||e){if(n===e)return We(n),e=Pe(n.site),rl.insert(l,e),l.edge=e.edge=tr(n.site,l.site),Je(n),void Je(e);if(!e)return void(l.edge=tr(n.site,l.site));We(n),We(e);var s=n.site,c=s.x,f=s.y,h=t.x-c,p=t.y-f,d=e.site,g=d.x-c,v=d.y-f,y=2*(h*v-p*g),m=h*h+p*p,x=g*g+v*v,_={x:(v*m-p*x)/y+c,y:(h*x-g*m)/y+f};er(e.edge,s,d,_),l.edge=tr(s,t,null,_),e.edge=tr(t,d,null,_),Je(n),Je(e)}}function Ye(t,n){var e=t.site,r=e.x,i=e.y,o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;e=a.site;var u=e.x,l=e.y,s=l-n;if(!s)return u;var c=u-r,f=1/o-1/s,h=c/s;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*s)-l+s/2+i-o/2)))/f+r:(r+u)/2}function Ve(t,n){var e=t.N;if(e)return Ye(e,n);var r=t.site;return r.y===n?r.x:1/0}function Ze(t){this.site=t,this.edges=[]}function Be(t){for(var n,e,r,i,o,a,u,l,s,c,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],g=el,v=g.length;v--;)if((o=g[v])&&o.prepare())for(u=o.edges,l=u.length,a=0;a<l;)c=u[a].end(),r=c.x,i=c.y,s=u[++a%l].start(),n=s.x,e=s.y,(_a(r-n)>Ra||_a(i-e)>Ra)&&(u.splice(a,0,new rr(nr(o.site,c,_a(r-f)<Ra&&d-i>Ra?{x:f,y:_a(n-f)<Ra?e:d}:_a(i-d)<Ra&&h-r>Ra?{x:_a(e-d)<Ra?n:h,y:d}:_a(r-h)<Ra&&i-p>Ra?{x:h,y:_a(n-h)<Ra?e:p}:_a(i-p)<Ra&&r-f>Ra?{x:_a(e-p)<Ra?n:f,y:p}:null),o.site,null)),++l)}function Xe(t,n){return n.angle-t.angle}function $e(){or(this),this.x=this.y=this.arc=this.site=this.cy=null}function Je(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i.x,u=i.y,l=r.x-a,s=r.y-u,c=o.x-a,f=o.y-u,h=2*(l*f-s*c);if(!(h>=-Da)){var p=l*l+s*s,d=c*c+f*f,g=(f*p-s*d)/h,v=(l*d-c*p)/h,f=v+u,y=ul.pop()||new $e;y.arc=t,y.site=i,y.x=g+a,y.y=f+Math.sqrt(g*g+v*v),y.cy=f,t.circle=y;for(var m=null,x=ol._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}ol.insert(m,y),m||(il=y)}}}}function We(t){var n=t.circle;n&&(n.P||(il=n.N),ol.remove(n),ul.push(n),or(n),t.circle=null)}function Ge(t){for(var n,e=nl,r=Vn(t[0][0],t[0][1],t[1][0],t[1][1]),i=e.length;i--;)n=e[i],(!Ke(n,t)||!r(n)||_a(n.a.x-n.b.x)<Ra&&_a(n.a.y-n.b.y)<Ra)&&(n.a=n.b=null,e.splice(i,1))}function Ke(t,n){var e=t.b;if(e)return!0;var r,i,o=t.a,a=n[0][0],u=n[1][0],l=n[0][1],s=n[1][1],c=t.l,f=t.r,h=c.x,p=c.y,d=f.x,g=f.y,v=(h+d)/2,y=(p+g)/2;if(g===p){if(v<a||v>=u)return;if(h>d){if(o){if(o.y>=s)return}else o={x:v,y:l};e={x:v,y:s}}else{if(o){if(o.y<l)return}else o={x:v,y:s};e={x:v,y:l}}}else if(r=(h-d)/(g-p),i=y-r*v,r<-1||r>1)if(h>d){if(o){if(o.y>=s)return}else o={x:(l-i)/r,y:l};e={x:(s-i)/r,y:s}}else{if(o){if(o.y<l)return}else o={x:(s-i)/r,y:s};e={x:(l-i)/r,y:l}}else if(p<g){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};e={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};e={x:a,y:r*a+i}}return t.a=o,t.b=e,!0}function Qe(t,n){this.l=t,this.r=n,this.a=this.b=null}function tr(t,n,e,r){var i=new Qe(t,n);return nl.push(i),e&&er(i,t,n,e),r&&er(i,n,t,r),el[t.i].edges.push(new rr(i,t,n)),el[n.i].edges.push(new rr(i,n,t)),i}function nr(t,n,e){var r=new Qe(t,null);return r.a=n,r.b=e,nl.push(r),r}function er(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function rr(t,n,e){var r=t.a,i=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ir(){this._=null}function or(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ar(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ur(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function lr(t){for(;t.L;)t=t.L;return t}function sr(t,n){var e,r,i,o=t.sort(cr).pop();for(nl=[],el=new Array(t.length),rl=new ir,ol=new ir;;)if(i=il,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===e&&o.y===r||(el[o.i]=new Ze(o),Ie(o),e=o.x,r=o.y),o=t.pop();else{if(!i)break;Fe(i.arc)}n&&(Ge(n),Be(n));var a={cells:el,edges:nl};return rl=ol=nl=el=null,a}function cr(t,n){return n.y-t.y||n.x-t.x}function fr(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function hr(t){return t.x}function pr(t){return t.y}function dr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gr(t,n,e,r,i,o){if(!t(n,e,r,i,o)){var a=.5*(e+i),u=.5*(r+o),l=n.nodes;l[0]&&gr(t,l[0],e,r,a,u),l[1]&&gr(t,l[1],a,r,i,u),l[2]&&gr(t,l[2],e,u,a,o),l[3]&&gr(t,l[3],a,u,i,o)}}function vr(t,n,e,r,i,o,a){var u,l=1/0;return function t(s,c,f,h,p){if(!(c>o||f>a||h<r||p<i)){if(d=s.point){var d,g=n-s.x,v=e-s.y,y=g*g+v*v;if(y<l){var m=Math.sqrt(l=y);r=n-m,i=e-m,o=n+m,a=e+m,u=d}}for(var x=s.nodes,_=.5*(c+h),b=.5*(f+p),w=n>=_,M=e>=b,k=M<<1|w,S=k+4;k<S;++k)if(s=x[3&k])switch(3&k){case 0:t(s,c,f,_,b);break;case 1:t(s,_,f,h,b);break;case 2:t(s,c,b,_,p);break;case 3:t(s,_,b,h,p)}}}(t,r,i,o,a),u}function yr(t,n){t=ca.rgb(t),n=ca.rgb(n);var e=t.r,r=t.g,i=t.b,o=n.r-e,a=n.g-r,u=n.b-i;return function(t){return"#"+bt(Math.round(e+o*t))+bt(Math.round(r+a*t))+bt(Math.round(i+u*t))}}function mr(t,n){var e,r={},i={};for(e in t)e in n?r[e]=br(t[e],n[e]):i[e]=t[e];for(e in n)e in t||(i[e]=n[e]);return function(t){for(e in r)i[e]=r[e](t);return i}}function xr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function _r(t,n){var e,r,i,o=sl.lastIndex=cl.lastIndex=0,a=-1,u=[],l=[];for(t+="",n+="";(e=sl.exec(t))&&(r=cl.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,l.push({i:a,x:xr(e,r)})),o=cl.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?l[0]?(n=l[0].x,function(t){return n(t)+""}):function(){return n}:(n=l.length,function(t){for(var e,r=0;r<n;++r)u[(e=l[r]).i]=e.x(t);return u.join("")})}function br(t,n){for(var e,r=ca.interpolators.length;--r>=0&&!(e=ca.interpolators[r](t,n)););return e}function wr(t,n){var e,r=[],i=[],o=t.length,a=n.length,u=Math.min(t.length,n.length);for(e=0;e<u;++e)r.push(br(t[e],n[e]));for(;e<o;++e)i[e]=t[e];for(;e<a;++e)i[e]=n[e];return function(t){for(e=0;e<u;++e)i[e]=r[e](t);return i}}function Mr(t){return function(n){return n<=0?0:n>=1?1:t(n)}}function kr(t){return function(n){return 1-t(1-n)}}function Sr(t){return function(n){return.5*(n<.5?t(2*n):2-t(2-2*n))}}function Nr(t){return t*t}function Er(t){return t*t*t}function Ar(t){if(t<=0)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(t<.5?e:3*(t-n)+e-.75)}function Cr(t){return function(n){return Math.pow(n,t)}}function zr(t){return 1-Math.cos(t*Ia)}function Tr(t){return Math.pow(2,10*(t-1))}function qr(t){return 1-Math.sqrt(1-t*t)}function Lr(t,n){var e;return arguments.length<2&&(n=.45),arguments.length?e=n/Ua*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Ua/n)}}function Or(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function jr(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Rr(t,n){t=ca.hcl(t),n=ca.hcl(n);var e=t.h,r=t.c,i=t.l,o=n.h-e,a=n.c-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.c:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:o<-180&&(o+=360),function(t){return ft(e+o*t,r+a*t,i+u*t)+""}}function Dr(t,n){t=ca.hsl(t),n=ca.hsl(n);var e=t.h,r=t.s,i=t.l,o=n.h-e,a=n.s-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.s:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:o<-180&&(o+=360),function(t){return st(e+o*t,r+a*t,i+u*t)+""}}function Pr(t,n){t=ca.lab(t),n=ca.lab(n);var e=t.l,r=t.a,i=t.b,o=n.l-e,a=n.a-r,u=n.b-i;return function(t){return pt(e+o*t,r+a*t,i+u*t)+""}}function Ur(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Fr(t){var n=[t.a,t.b],e=[t.c,t.d],r=Hr(n),i=Ir(n,e),o=Hr(Yr(e,n,-i))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Ya,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ya:0}function Ir(t,n){return t[0]*n[0]+t[1]*n[1]}function Hr(t){var n=Math.sqrt(Ir(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Yr(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function Vr(t){return t.length?t.pop()+",":""}function Zr(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:xr(t[0],n[0])},{i:i-2,x:xr(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}function Br(t,n,e,r){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),r.push({i:e.push(Vr(e)+"rotate(",null,")")-2,x:xr(t,n)})):n&&e.push(Vr(e)+"rotate("+n+")")}function Xr(t,n,e,r){t!==n?r.push({i:e.push(Vr(e)+"skewX(",null,")")-2,x:xr(t,n)}):n&&e.push(Vr(e)+"skewX("+n+")")}function $r(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push(Vr(e)+"scale(",null,",",null,")");r.push({i:i-4,x:xr(t[0],n[0])},{i:i-2,x:xr(t[1],n[1])})}else 1===n[0]&&1===n[1]||e.push(Vr(e)+"scale("+n+")")}function Jr(t,n){var e=[],r=[];return t=ca.transform(t),n=ca.transform(n),Zr(t.translate,n.translate,e,r),Br(t.rotate,n.rotate,e,r),Xr(t.skew,n.skew,e,r),$r(t.scale,n.scale,e,r),t=n=null,function(t){for(var n,i=-1,o=r.length;++i<o;)e[(n=r[i]).i]=n.x(t);return e.join("")}}function Wr(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Gr(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Kr(t){for(var n=t.source,e=t.target,r=ti(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var o=i.length;e!==r;)i.splice(o,0,e),e=e.parent;return i}function Qr(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function ti(t,n){if(t===n)return t;for(var e=Qr(t),r=Qr(n),i=e.pop(),o=r.pop(),a=null;i===o;)a=i,i=e.pop(),o=r.pop();return a}function ni(t){t.fixed|=2}function ei(t){t.fixed&=-7}function ri(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ii(t){t.fixed&=-5}function oi(t,n,e){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,u=a.length,l=-1;++l<u;)null!=(o=a[l])&&(oi(o,n,e),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var s=n*e[t.point.index];t.charge+=t.pointCharge=s,r+=s*t.point.x,i+=s*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function ai(t,n){return ca.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=hi,t}function ui(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)e.push(i[r])}function li(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)e.push(o[a]);for(;null!=(t=r.pop());)n(t)}function si(t){return t.children}function ci(t){return t.value}function fi(t,n){return n.value-t.value}function hi(t){return ca.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function pi(t){return t.x}function di(t){return t.y}function gi(t,n,e){t.y0=n,t.y=e}function vi(t){return ca.range(t.length)}function yi(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function mi(t){for(var n,e=1,r=0,i=t[0][1],o=t.length;e<o;++e)(n=t[e][1])>i&&(r=e,i=n);return r}function xi(t){return t.reduce(_i,0)}function _i(t,n){return t+n[1]}function bi(t,n){return wi(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function wi(t,n){for(var e=-1,r=+t[0],i=(t[1]-r)/n,o=[];++e<=n;)o[e]=i*e+r;return o}function Mi(t){return[ca.min(t),ca.max(t)]}function ki(t,n){return t.value-n.value}function Si(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function Ni(t,n){t._pack_next=n,n._pack_prev=t}function Ei(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return.999*i*i>e*e+r*r}function Ai(t){function n(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}if((e=t.children)&&(s=e.length)){var e,r,i,o,a,u,l,s,c=1/0,f=-1/0,h=1/0,p=-1/0;if(e.forEach(Ci),r=e[0],r.x=-r.r,r.y=0,n(r),s>1&&(i=e[1],i.x=i.r,i.y=0,n(i),s>2))for(o=e[2],qi(r,i,o),n(o),Si(r,o),r._pack_prev=o,Si(o,i),
i=r._pack_next,a=3;a<s;a++){qi(r,i,o=e[a]);var d=0,g=1,v=1;for(u=i._pack_next;u!==i;u=u._pack_next,g++)if(Ei(u,o)){d=1;break}if(1==d)for(l=r._pack_prev;l!==u._pack_prev&&!Ei(l,o);l=l._pack_prev,v++);d?(g<v||g==v&&i.r<r.r?Ni(r,i=u):Ni(r=l,i),a--):(Si(r,o),i=o,n(o))}var y=(c+f)/2,m=(h+p)/2,x=0;for(a=0;a<s;a++)o=e[a],o.x-=y,o.y-=m,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,e.forEach(zi)}}function Ci(t){t._pack_next=t._pack_prev=t}function zi(t){delete t._pack_next,delete t._pack_prev}function Ti(t,n,e,r){var i=t.children;if(t.x=n+=r*t.x,t.y=e+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ti(i[o],n,e,r)}function qi(t,n,e){var r=t.r+e.r,i=n.x-t.x,o=n.y-t.y;if(r&&(i||o)){var a=n.r+e.r,u=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*u),s=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);e.x=t.x+l*i+s*o,e.y=t.y+l*o-s*i}else e.x=t.x+r,e.y=t.y}function Li(t,n){return t.parent==n.parent?1:2}function Oi(t){var n=t.children;return n.length?n[0]:t.t}function ji(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function Ri(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Di(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)n=i[o],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function Pi(t,n,e){return t.a.parent===n.parent?t.a:e}function Ui(t){return 1+ca.max(t,function(t){return t.y})}function Fi(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function Ii(t){var n=t.children;return n&&n.length?Ii(n[0]):t}function Hi(t){var n,e=t.children;return e&&(n=e.length)?Hi(e[n-1]):t}function Yi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Vi(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return i<0&&(e+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:e,y:r,dx:i,dy:o}}function Zi(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}function Bi(t){return t.rangeExtent?t.rangeExtent():Zi(t.range())}function Xi(t,n,e,r){var i=e(t[0],t[1]),o=r(n[0],n[1]);return function(t){return o(i(t))}}function $i(t,n){var e,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Ji(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:bl}function Wi(t,n,e,r){var i=[],o=[],a=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<=u;)i.push(e(t[a-1],t[a])),o.push(r(n[a-1],n[a]));return function(n){var e=ca.bisect(t,n,1,u)-1;return o[e](i[e](n))}}function Gi(t,n,e,r){function i(){var i=Math.min(t.length,n.length)>2?Wi:Xi,l=r?Gr:Wr;return a=i(t,n,l,e),u=i(n,t,l,br),o}function o(t){return a(t)}var a,u;return o.invert=function(t){return u(t)},o.domain=function(n){return arguments.length?(t=n.map(Number),i()):t},o.range=function(t){return arguments.length?(n=t,i()):n},o.rangeRound=function(t){return o.range(t).interpolate(Ur)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(e=t,i()):e},o.ticks=function(n){return no(t,n)},o.tickFormat=function(n,e){return eo(t,n,e)},o.nice=function(n){return Qi(t,n),i()},o.copy=function(){return Gi(t,n,e,r)},i()}function Ki(t,n){return ca.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Qi(t,n){return $i(t,Ji(to(t,n)[2])),$i(t,Ji(to(t,n)[2])),t}function to(t,n){null==n&&(n=10);var e=Zi(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function no(t,n){return ca.range.apply(ca,to(t,n))}function eo(t,n,e){var r=to(t,n);if(e){var i=su.exec(e);if(i.shift(),"s"===i[8]){var o=ca.formatPrefix(Math.max(_a(r[0]),_a(r[1])));return i[7]||(i[7]="."+ro(o.scale(r[2]))),i[8]="f",e=ca.format(i.join("")),function(t){return e(o.scale(t))+o.symbol}}i[7]||(i[7]="."+io(i[8],r)),e=i.join("")}else e=",."+ro(r[2])+"f";return ca.format(e)}function ro(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function io(t,n){var e=ro(n[2]);return t in wl?Math.abs(e-ro(Math.max(_a(n[0]),_a(n[1]))))+ +("e"!==t):e-2*("%"===t)}function oo(t,n,e,r){function i(t){return(e?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function o(t){return e?Math.pow(n,t):-Math.pow(n,-t)}function a(n){return t(i(n))}return a.invert=function(n){return o(t.invert(n))},a.domain=function(n){return arguments.length?(e=n[0]>=0,t.domain((r=n.map(Number)).map(i)),a):r},a.base=function(e){return arguments.length?(n=+e,t.domain(r.map(i)),a):n},a.nice=function(){var n=$i(r.map(i),e?Math:kl);return t.domain(n),r=n.map(o),a},a.ticks=function(){var t=Zi(r),a=[],u=t[0],l=t[1],s=Math.floor(i(u)),c=Math.ceil(i(l)),f=n%1?2:n;if(isFinite(c-s)){if(e){for(;s<c;s++)for(var h=1;h<f;h++)a.push(o(s)*h);a.push(o(s))}else for(a.push(o(s));s++<c;)for(var h=f-1;h>0;h--)a.push(o(s)*h);for(s=0;a[s]<u;s++);for(c=a.length;a[c-1]>l;c--);a=a.slice(s,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return Ml;arguments.length<2?e=Ml:"function"!=typeof e&&(e=ca.format(e));var r=Math.max(1,n*t/a.ticks().length);return function(t){var a=t/o(Math.round(i(t)));return a*n<n-.5&&(a*=n),a<=r?e(t):""}},a.copy=function(){return oo(t.copy(),n,e,r)},Ki(a,t)}function ao(t,n,e){function r(n){return t(i(n))}var i=uo(n),o=uo(1/n);return r.invert=function(n){return o(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain((e=n.map(Number)).map(i)),r):e},r.ticks=function(t){return no(e,t)},r.tickFormat=function(t,n){return eo(e,t,n)},r.nice=function(t){return r.domain(Qi(e,t))},r.exponent=function(a){return arguments.length?(i=uo(n=a),o=uo(1/n),t.domain(e.map(i)),r):n},r.copy=function(){return ao(t.copy(),n,e)},Ki(r,t)}function uo(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function lo(t,n){function e(e){return o[((i.get(e)||("range"===n.t?i.set(e,t.push(e)):NaN))-1)%o.length]}function r(n,e){return ca.range(t.length).map(function(t){return n+e*t})}var i,o,a;return e.domain=function(r){if(!arguments.length)return t;t=[],i=new c;for(var o,a=-1,u=r.length;++a<u;)i.has(o=r[a])||i.set(o,t.push(o));return e[n.t].apply(e,n.a)},e.range=function(t){return arguments.length?(o=t,a=0,n={t:"range",a:arguments},e):o},e.rangePoints=function(i,u){arguments.length<2&&(u=0);var l=i[0],s=i[1],c=t.length<2?(l=(l+s)/2,0):(s-l)/(t.length-1+u);return o=r(l+c*u/2,c),a=0,n={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var l=i[0],s=i[1],c=t.length<2?(l=s=Math.round((l+s)/2),0):(s-l)/(t.length-1+u)|0;return o=r(l+Math.round(c*u/2+(s-l-(t.length-1+u)*c)/2),c),a=0,n={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(i,u,l){arguments.length<2&&(u=0),arguments.length<3&&(l=u);var s=i[1]<i[0],c=i[s-0],f=i[1-s],h=(f-c)/(t.length-u+2*l);return o=r(c+h*l,h),s&&o.reverse(),a=h*(1-u),n={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,u,l){arguments.length<2&&(u=0),arguments.length<3&&(l=u);var s=i[1]<i[0],c=i[s-0],f=i[1-s],h=Math.floor((f-c)/(t.length-u+2*l));return o=r(c+Math.round((f-c-(t.length-u)*h)/2),h),s&&o.reverse(),a=Math.round(h*(1-u)),n={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Zi(n.a[0])},e.copy=function(){return lo(t,n)},e.domain(t)}function so(t,n){function e(){var e=0,r=n.length;for(u=[];++e<r;)u[e-1]=ca.quantile(t,e/r);return a}function a(t){if(!isNaN(t=+t))return n[ca.bisect(u,t)]}var u;return a.domain=function(n){return arguments.length?(t=n.map(i).filter(o).sort(r),e()):t},a.range=function(t){return arguments.length?(n=t,e()):n},a.quantiles=function(){return u},a.invertExtent=function(e){return e=n.indexOf(e),e<0?[NaN,NaN]:[e>0?u[e-1]:t[0],e<u.length?u[e]:t[t.length-1]]},a.copy=function(){return so(t,n)},e()}function co(t,n,e){function r(n){return e[Math.max(0,Math.min(a,Math.floor(o*(n-t))))]}function i(){return o=e.length/(n-t),a=e.length-1,r}var o,a;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],i()):[t,n]},r.range=function(t){return arguments.length?(e=t,i()):e},r.invertExtent=function(n){return n=e.indexOf(n),n=n<0?NaN:n/o+t,[n,n+1/o]},r.copy=function(){return co(t,n,e)},i()}function fo(t,n){function e(e){if(e<=e)return n[ca.bisect(t,e)]}return e.domain=function(n){return arguments.length?(t=n,e):t},e.range=function(t){return arguments.length?(n=t,e):n},e.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},e.copy=function(){return fo(t,n)},e}function ho(t){function n(t){return+t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(n){return no(t,n)},n.tickFormat=function(n,e){return eo(t,n,e)},n.copy=function(){return ho(t)},n}function po(){return 0}function go(t){return t.innerRadius}function vo(t){return t.outerRadius}function yo(t){return t.startAngle}function mo(t){return t.endAngle}function xo(t){return t&&t.padAngle}function _o(t,n,e,r){return(t-e)*n-(n-r)*t>0?0:1}function bo(t,n,e,r,i){var o=t[0]-n[0],a=t[1]-n[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),l=u*a,s=-u*o,c=t[0]+l,f=t[1]+s,h=n[0]+l,p=n[1]+s,d=(c+h)/2,g=(f+p)/2,v=h-c,y=p-f,m=v*v+y*y,x=e-r,_=c*p-h*f,b=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-_*_)),w=(_*y-v*b)/m,M=(-_*v-y*b)/m,k=(_*y+v*b)/m,S=(-_*v+y*b)/m,N=w-d,E=M-g,A=k-d,C=S-g;return N*N+E*E>A*A+C*C&&(w=k,M=S),[[w-l,M-s],[w*e/x,M*e/x]]}function wo(t){function n(n){function a(){s.push("M",o(t(c),u))}for(var l,s=[],c=[],f=-1,h=n.length,p=Et(e),d=Et(r);++f<h;)i.call(this,l=n[f],f)?c.push([+p.call(this,l,f),+d.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),s.length?s.join(""):null}var e=ze,r=Te,i=Tn,o=Mo,a=o.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(i=t,n):i},n.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=zl.get(t)||Mo).key,n):a},n.tension=function(t){return arguments.length?(u=t,n):u},n}function Mo(t){return t.length>1?t.join("L"):t+"Z"}function ko(t){return t.join("L")+"Z"}function So(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function No(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function Eo(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function Ao(t,n){return t.length<4?Mo(t):t[1]+To(t.slice(1,-1),qo(t,n))}function Co(t,n){return t.length<3?ko(t):t[0]+To((t.push(t[0]),t),qo([t[t.length-2]].concat(t,[t[1]]),n))}function zo(t,n){return t.length<3?Mo(t):t[0]+To(t,qo(t,n))}function To(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return Mo(t);var e=t.length!=n.length,r="",i=t[0],o=t[1],a=n[0],u=a,l=1;if(e&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),n.length>1){u=n[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var s=2;s<n.length;s++,l++)o=t[l],u=n[s],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(e){var c=t[l];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function qo(t,n){for(var e,r=[],i=(1-n)/2,o=t[0],a=t[1],u=1,l=t.length;++u<l;)e=o,o=a,a=t[u],r.push([i*(a[0]-e[0]),i*(a[1]-e[1])]);return r}function Lo(t){if(t.length<3)return Mo(t);var n=1,e=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],l=[i,",",o,"L",Do(Ll,a),",",Do(Ll,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),Po(l,a,u);return t.pop(),l.push("L",r),l.join("")}function Oo(t){if(t.length<4)return Mo(t);for(var n,e=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)n=t[r],o.push(n[0]),a.push(n[1]);for(e.push(Do(Ll,o)+","+Do(Ll,a)),--r;++r<i;)n=t[r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),Po(e,o,a);return e.join("")}function jo(t){for(var n,e,r=-1,i=t.length,o=i+4,a=[],u=[];++r<4;)e=t[r%i],a.push(e[0]),u.push(e[1]);for(n=[Do(Ll,a),",",Do(Ll,u)],--r;++r<o;)e=t[r%i],a.shift(),a.push(e[0]),u.shift(),u.push(e[1]),Po(n,a,u);return n.join("")}function Ro(t,n){var e=t.length-1;if(e)for(var r,i,o=t[0][0],a=t[0][1],u=t[e][0]-o,l=t[e][1]-a,s=-1;++s<=e;)r=t[s],i=s/e,r[0]=n*r[0]+(1-n)*(o+i*u),r[1]=n*r[1]+(1-n)*(a+i*l);return Lo(t)}function Do(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Po(t,n,e){t.push("C",Do(Tl,n),",",Do(Tl,e),",",Do(ql,n),",",Do(ql,e),",",Do(Ll,n),",",Do(Ll,e))}function Uo(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Fo(t){for(var n=0,e=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Uo(i,o);++n<e;)r[n]=(a+(a=Uo(i=o,o=t[n+1])))/2;return r[n]=a,r}function Io(t){for(var n,e,r,i,o=[],a=Fo(t),u=-1,l=t.length-1;++u<l;)n=Uo(t[u],t[u+1]),_a(n)<Ra?a[u]=a[u+1]=0:(e=a[u]/n,r=a[u+1]/n,(i=e*e+r*r)>9&&(i=3*n/Math.sqrt(i),a[u]=i*e,a[u+1]=i*r));for(u=-1;++u<=l;)i=(t[Math.min(l,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}function Ho(t){return t.length<3?Mo(t):t[0]+To(t,Io(t))}function Yo(t){for(var n,e,r,i=-1,o=t.length;++i<o;)n=t[i],e=n[0],r=n[1]-Ia,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Vo(t){function n(n){function l(){g.push("M",u(t(y),f),c,s(t(v.reverse()),f),"Z")}for(var h,p,d,g=[],v=[],y=[],m=-1,x=n.length,_=Et(e),b=Et(i),w=e===r?function(){return p}:Et(r),M=i===o?function(){return d}:Et(o);++m<x;)a.call(this,h=n[m],m)?(v.push([p=+_.call(this,h,m),d=+b.call(this,h,m)]),y.push([+w.call(this,h,m),+M.call(this,h,m)])):v.length&&(l(),v=[],y=[]);return v.length&&l(),g.length?g.join(""):null}var e=ze,r=ze,i=0,o=Te,a=Tn,u=Mo,l=u.key,s=u,c="L",f=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(i=o=t,n):o},n.y0=function(t){return arguments.length?(i=t,n):i},n.y1=function(t){return arguments.length?(o=t,n):o},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(l="function"==typeof t?u=t:(u=zl.get(t)||Mo).key,s=u.reverse||u,c=u.closed?"M":"L",n):l},n.tension=function(t){return arguments.length?(f=t,n):f},n}function Zo(t){return t.radius}function Bo(t){return[t.x,t.y]}function Xo(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Ia;return[e*Math.cos(r),e*Math.sin(r)]}}function $o(){return 64}function Jo(){return"circle"}function Wo(t){var n=Math.sqrt(t/Pa);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function Go(t){return function(){var n,e,r;(n=this[t])&&(r=n[e=n.active])&&(r.timer.c=null,r.timer.t=NaN,--n.count?delete n[e]:delete this[t],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ko(t,n,e){return Sa(t,Fl),t.namespace=n,t.id=e,t}function Qo(t,n,e,r){var i=t.id,o=t.namespace;return V(t,"function"==typeof e?function(t,a,u){t[o][i].tween.set(n,r(e.call(t,t.__data__,a,u)))}:(e=r(e),function(t){t[o][i].tween.set(n,e)}))}function ta(t){return null==t&&(t=""),function(){this.textContent=t}}function na(t){return null==t?"__transition__":"__transition_"+t+"__"}function ea(t,n,e,r,i){function o(t){var n=g.delay;if(s.t=n+l,n<=t)return a(t-n);s.c=a}function a(e){var i=d.active,o=d[i];o&&(o.timer.c=null,o.timer.t=NaN,--d.count,delete d[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var a in d)if(+a<r){var c=d[a];c.timer.c=null,c.timer.t=NaN,--d.count,delete d[a]}s.c=u,qt(function(){return s.c&&u(e||1)&&(s.c=null,s.t=NaN),1},0,l),d.active=r,g.event&&g.event.start.call(t,t.__data__,n),p=[],g.tween.forEach(function(e,r){(r=r.call(t,t.__data__,n))&&p.push(r)}),h=g.ease,f=g.duration}function u(i){for(var o=i/f,a=h(o),u=p.length;u>0;)p[--u].call(t,a);if(o>=1)return g.event&&g.event.end.call(t,t.__data__,n),--d.count?delete d[r]:delete t[e],1}var l,s,f,h,p,d=t[e]||(t[e]={active:0,count:0}),g=d[r];g||(l=i.time,s=qt(o,0,l),g=d[r]={tween:new c,time:l,timer:s,delay:i.delay,duration:i.duration,ease:i.ease,index:n},i=null,++d.count)}function ra(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"})}function ia(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"})}function oa(t){return t.toISOString()}function aa(t,n,e){function r(n){return t(n)}function i(t,e){var r=t[1]-t[0],i=r/e,o=ca.bisect(Jl,i);return o==Jl.length?[n.year,to(t.map(function(t){return t/31536e6}),e)[2]]:o?n[i/Jl[o-1]<Jl[o]/i?o-1:o]:[Kl,to(t,e)[2]]}return r.invert=function(n){return ua(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(ua)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,ua(+e+1),n).length}var o=r.domain(),a=Zi(o),u=null==t?i(a,10):"number"==typeof t&&i(a,t);return u&&(t=u[0],n=u[1]),r.domain($i(o,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=ua(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=ua(+n+1);return n}}:t))},r.ticks=function(t,n){var e=Zi(r.domain()),o=null==t?i(e,10):"number"==typeof t?i(e,t):!t.range&&[{range:t},n];return o&&(t=o[0],n=o[1]),t.range(e[0],ua(+e[1]+1),n<1?1:n)},r.tickFormat=function(){return e},r.copy=function(){return aa(t.copy(),n,e)},Ki(r,t)}function ua(t){return new Date(t)}function la(t){return JSON.parse(t.responseText)}function sa(t){var n=pa.createRange();return n.selectNode(pa.body),n.createContextualFragment(t.responseText)}var ca={version:"3.5.12"},fa=[].slice,ha=function(t){return fa.call(t)},pa=this.document;if(pa)try{ha(pa.documentElement.childNodes)[0].nodeType}catch(t){ha=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),pa)try{pa.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var da=this.Element.prototype,ga=da.setAttribute,va=da.setAttributeNS,ya=this.CSSStyleDeclaration.prototype,ma=ya.setProperty;da.setAttribute=function(t,n){ga.call(this,t,n+"")},da.setAttributeNS=function(t,n,e){va.call(this,t,n,e+"")},ya.setProperty=function(t,n,e){ma.call(this,t,n+"",e)}}ca.ascending=r,ca.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},ca.min=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&e>r&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&e>r&&(e=r)}return e},ca.max=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&r>e&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&r>e&&(e=r)}return e},ca.extent=function(t,n){var e,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){e=i=r;break}for(;++o<a;)null!=(r=t[o])&&(e>r&&(e=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=n.call(t,t[o],o))&&r>=r){e=i=r;break}for(;++o<a;)null!=(r=n.call(t,t[o],o))&&(e>r&&(e=r),i<r&&(i=r))}return[e,i]},ca.sum=function(t,n){var e,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)o(e=+t[a])&&(r+=e);else for(;++a<i;)o(e=+n.call(t,t[a],a))&&(r+=e);return r},ca.mean=function(t,n){var e,r=0,a=t.length,u=-1,l=a;if(1===arguments.length)for(;++u<a;)o(e=i(t[u]))?r+=e:--l;else for(;++u<a;)o(e=i(n.call(t,t[u],u)))?r+=e:--l;if(l)return r/l},ca.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],o=e-r;return o?i+o*(t[r]-i):i},ca.median=function(t,n){var e,a=[],u=t.length,l=-1;if(1===arguments.length)for(;++l<u;)o(e=i(t[l]))&&a.push(e);else for(;++l<u;)o(e=i(n.call(t,t[l],l)))&&a.push(e);if(a.length)return ca.quantile(a.sort(r),.5)},ca.variance=function(t,n){var e,r,a=t.length,u=0,l=0,s=-1,c=0;if(1===arguments.length)for(;++s<a;)o(e=i(t[s]))&&(r=e-u,u+=r/++c,l+=r*(e-u));else for(;++s<a;)o(e=i(n.call(t,t[s],s)))&&(r=e-u,u+=r/++c,l+=r*(e-u));if(c>1)return l/(c-1)},ca.deviation=function(){var t=ca.variance.apply(this,arguments);return t?Math.sqrt(t):t};var xa=a(r);ca.bisectLeft=xa.left,ca.bisect=ca.bisectRight=xa.right,ca.bisector=function(t){return a(1===t.length?function(n,e){return r(t(n),e)}:t)},ca.shuffle=function(t,n,e){(o=arguments.length)<3&&(e=t.length,o<2&&(n=0));for(var r,i,o=e-n;o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},ca.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},ca.pairs=function(t){for(var n=0,e=t.length-1,r=t[0],i=new Array(e<0?0:e);n<e;)i[n]=[r,r=t[++n]];return i},ca.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=ca.min(arguments,u),e=new Array(n);++t<n;)for(var r,i=-1,o=e[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return e},ca.transpose=function(t){return ca.zip.apply(ca,t)},ca.keys=function(t){var n=[];for(var e in t)n.push(e);return n},ca.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},ca.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},ca.merge=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(r=t[i],n=r.length;--n>=0;)e[--a]=r[n];return e};var _a=Math.abs;ca.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,i=[],o=l(_a(e)),a=-1;if(t*=o,n*=o,e*=o,e<0)for(;(r=t+e*++a)>n;)i.push(r/o);else for(;(r=t+e*++a)<n;)i.push(r/o);return i},ca.map=function(t,n){var e=new c;if(t instanceof c)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var ba="__proto__",wa="\0";s(c,{has:p,get:function(t){return this._[f(t)]},set:function(t,n){return this._[f(t)]=n},remove:d,keys:g,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:h(n),value:this._[n]});return t},size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n),this._[n])}}),ca.nest=function(){function t(n,a,u){if(u>=o.length)return r?r.call(i,a):e?a.sort(e):a;for(var l,s,f,h,p=-1,d=a.length,g=o[u++],v=new c;++p<d;)(h=v.get(l=g(s=a[p])))?h.push(s):v.set(l,[s]);return n?(s=n(),f=function(e,r){s.set(e,t(n,r,u))}):(s={},f=function(e,r){s[e]=t(n,r,u)}),v.forEach(f),s}function n(t,e){if(e>=o.length)return t;var r=[],i=a[e++];return t.forEach(function(t,i){r.push({key:t,values:n(i,e)})}),i?r.sort(function(t,n){return i(t.key,n.key)}):r}var e,r,i={},o=[],a=[];return i.map=function(n,e){return t(e,n,0)},i.entries=function(e){return n(t(ca.map,e,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return e=t,i},i.rollup=function(t){return r=t,i},i},ca.set=function(t){var n=new m;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},s(m,{has:p,add:function(t){return this._[f(t+="")]=!0,t},remove:d,values:g,size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n))}}),ca.behavior={},ca.rebind=function(t,n){for(var e,r=1,i=arguments.length;++r<i;)t[e=arguments[r]]=_(t,n,n[e]);return t};var Ma=["webkit","ms","moz","Moz","o","O"];ca.dispatch=function(){for(var t=new M,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=k(t);return t},M.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ca.event=null,ca.requote=function(t){return t.replace(ka,"\\$&")};var ka=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},Na=function(t,n){return n.querySelector(t)},Ea=function(t,n){return n.querySelectorAll(t)},Aa=function(t,n){var e=t.matches||t[b(t,"matchesSelector")];return(Aa=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(Na=function(t,n){return Sizzle(t,n)[0]||null},Ea=Sizzle,Aa=Sizzle.matchesSelector),ca.selection=function(){return ca.select(pa.documentElement)};var Ca=ca.selection.prototype=[];Ca.select=function(t){var n,e,r,i,o=[];t=C(t);for(var a=-1,u=this.length;++a<u;){o.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var l=-1,s=r.length;++l<s;)(i=r[l])?(n.push(e=t.call(i,i.__data__,l,a)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return A(o)},Ca.selectAll=function(t){var n,e,r=[];t=z(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,l=a.length;++u<l;)(e=a[u])&&(r.push(n=ha(t.call(e,e.__data__,u,i))),n.parentNode=e);return A(r)};var za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ca.ns={prefix:za,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),za.hasOwnProperty(e)?{space:za[e],local:t}:t}},Ca.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=ca.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(T(n,t[n]));return this}return this.each(T(t,n))},Ca.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=O(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!L(t[i]).test(n))return!1;return!0}for(n in t)this.each(j(n,t[n]));return this}return this.each(j(t,n))},Ca.style=function(t,n,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(n="");for(r in t)this.each(D(r,t[r],n));return this}if(i<2){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(D(t,n,r))},Ca.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(P(n,t[n]));return this}return this.each(P(t,n))},Ca.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ca.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ca.append=function(t){return t=U(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ca.insert=function(t,n){return t=U(t),n=C(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},Ca.remove=function(){return this.each(F)},Ca.data=function(t,n){function e(t,e){var r,i,o,a=t.length,f=e.length,h=Math.min(a,f),p=new Array(f),d=new Array(f),g=new Array(a);if(n){var v,y=new c,m=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(y.has(v=n.call(i,i.__data__,r))?g[r]=i:y.set(v,i),m[r]=v);for(r=-1;++r<f;)(i=y.get(v=n.call(e,o=e[r],r)))?!0!==i&&(p[r]=i,i.__data__=o):d[r]=I(o),y.set(v,!0);for(r=-1;++r<a;)r in m&&!0!==y.get(m[r])&&(g[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):d[r]=I(o);for(;r<f;++r)d[r]=I(e[r]);for(;r<a;++r)g[r]=t[r]}d.update=p,d.parentNode=p.parentNode=g.parentNode=t.parentNode,u.push(d),l.push(p),s.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var u=Z([]),l=A([]),s=A([]);if("function"==typeof t)for(;++o<a;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],t);return l.enter=function(){return u},l.exit=function(){return s},l},Ca.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ca.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return A(i)},Ca.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},Ca.sort=function(t){t=Y.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},Ca.each=function(t){return V(this,function(n,e,r){t.call(n,n.__data__,e,r)})},Ca.call=function(t){var n=ha(arguments);return t.apply(n[0]=this,n),this},Ca.empty=function(){return!this.node()},Ca.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},Ca.size=function(){var t=0;return V(this,function(){++t}),t};var Ta=[];ca.selection.enter=Z,ca.selection.enter.prototype=Ta,Ta.append=Ca.append,Ta.empty=Ca.empty,Ta.node=Ca.node,Ta.call=Ca.call,Ta.size=Ca.size,Ta.select=function(t){for(var n,e,r,i,o,a=[],u=-1,l=this.length;++u<l;){r=(i=this[u]).update,a.push(n=[]),n.parentNode=i.parentNode;for(var s=-1,c=i.length;++s<c;)(o=i[s])?(n.push(r[s]=e=t.call(i.parentNode,o.__data__,s,u)),e.__data__=o.__data__):n.push(null)}return A(a)},Ta.insert=function(t,n){return arguments.length<2&&(n=B(this)),Ca.insert.call(this,t,n)},ca.select=function(t){var e;return"string"==typeof t?(e=[Na(t,pa)],e.parentNode=pa.documentElement):(e=[t],e.parentNode=n(t)),A([e])},ca.selectAll=function(t){var n;return"string"==typeof t?(n=ha(Ea(t,pa)),n.parentNode=pa.documentElement):(n=ha(t),n.parentNode=null),A([n])},Ca.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n=!1);for(e in t)this.each(X(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(X(t,n,e))};var qa=ca.map({mouseenter:"mouseover",mouseleave:"mouseout"});pa&&qa.forEach(function(t){"on"+t in pa&&qa.remove(t)});var La,Oa=0;ca.mouse=function(t){return G(t,N())};var ja=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ca.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=N().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return G(t,r)},ca.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,n,e,o,a){return function(){function u(){var t,e,r=n(h,g);r&&(t=r[0]-x[0],e=r[1]-x[1],d|=t|e,x=r,p({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:e}))}function l(){n(h,g)&&(y.on(o+v,null).on(a+v,null),m(d),p({type:"dragend"}))}var s,c=this,f=ca.event.target,h=c.parentNode,p=r.of(c,arguments),d=0,g=t(),v=".drag"+(null==g?"":"-"+g),y=ca.select(e(f)).on(o+v,u).on(a+v,l),m=W(f),x=n(h,g);i?(s=i.apply(c,arguments),s=[s.x-x[0],s.y-x[1]]):s=[0,0],p({type:"dragstart"})}}var r=E(t,"drag","dragstart","dragend"),i=null,o=n(w,ca.mouse,e,"mousemove","mouseup"),a=n(K,ca.touch,x,"touchmove","touchend");return t.origin=function(n){return arguments.length?(i=n,t):i},ca.rebind(t,r,"on")},ca.touches=function(t,n){return arguments.length<2&&(n=N().touches),n?ha(n).map(function(n){var e=G(t,n);return e.identifier=n.identifier,e}):[]};var Ra=1e-6,Da=Ra*Ra,Pa=Math.PI,Ua=2*Pa,Fa=Ua-Ra,Ia=Pa/2,Ha=Pa/180,Ya=180/Pa,Va=Math.SQRT2;ca.interpolateZoom=function(t,n){var e,r,i=t[0],o=t[1],a=t[2],u=n[0],l=n[1],s=n[2],c=u-i,f=l-o,h=c*c+f*f;if(h<Da)r=Math.log(s/a)/Va,e=function(t){return[i+t*c,o+t*f,a*Math.exp(Va*t*r)]};else{var p=Math.sqrt(h),d=(s*s-a*a+4*h)/(2*a*2*p),g=(s*s-a*a-4*h)/(2*s*2*p),v=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-v)/Va,e=function(t){var n=t*r,e=it(v),u=a/(2*p)*(e*ot(Va*n+v)-rt(v));return[i+u*c,o+u*f,a*e/it(Va*n+v)]}}return e.duration=1e3*r,e},ca.behavior.zoom=function(){function t(t){t.on(T,f).on(Ba+".zoom",p).on("dblclick.zoom",d).on(O,h)}function n(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function r(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}function i(t){k.k=Math.max(A[0],Math.min(A[1],t))}function o(t,n){n=r(n),k.x+=t[0]-n[0],k.y+=t[1]-n[1]}function a(n,e,r,a){n.__chart__={x:k.x,y:k.y,k:k.k},i(Math.pow(2,a)),o(v=e,r),n=ca.select(n),C>0&&(n=n.transition().duration(C)),n.call(t.event)}function u(){b&&b.domain(_.range().map(function(t){return(t-k.x)/k.k}).map(_.invert)),
M&&M.domain(w.range().map(function(t){return(t-k.y)/k.k}).map(w.invert))}function l(t){z++||t({type:"zoomstart"})}function s(t){u(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function c(t){--z||(t({type:"zoomend"}),v=null)}function f(){function t(){u=1,o(ca.mouse(i),h),s(a)}function r(){f.on(q,null).on(L,null),p(u),c(a)}var i=this,a=j.of(i,arguments),u=0,f=ca.select(e(i)).on(q,t).on(L,r),h=n(ca.mouse(i)),p=W(i);Ul.call(i),l(a)}function h(){function t(){var t=ca.touches(d);return p=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var n=ca.event.target;ca.select(n).on(_,r).on(b,u),w.push(n);for(var e=ca.event.changedTouches,i=0,o=e.length;i<o;++i)v[e[i].identifier]=null;var l=t(),s=Date.now();if(1===l.length){if(s-x<500){var c=l[0];a(d,c,v[c.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}x=s}else if(l.length>1){var c=l[0],f=l[1],h=c[0]-f[0],p=c[1]-f[1];y=h*h+p*p}}function r(){var t,n,e,r,a=ca.touches(d);Ul.call(d);for(var u=0,l=a.length;u<l;++u,r=null)if(e=a[u],r=v[e.identifier]){if(n)break;t=e,n=r}if(r){var c=(c=e[0]-t[0])*c+(c=e[1]-t[1])*c,f=y&&Math.sqrt(c/y);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+r[0])/2,(n[1]+r[1])/2],i(f*p)}x=null,o(t,n),s(g)}function u(){if(ca.event.touches.length){for(var n=ca.event.changedTouches,e=0,r=n.length;e<r;++e)delete v[n[e].identifier];for(var i in v)return void t()}ca.selectAll(w).on(m,null),M.on(T,f).on(O,h),N(),c(g)}var p,d=this,g=j.of(d,arguments),v={},y=0,m=".zoom-"+ca.event.changedTouches[0].identifier,_="touchmove"+m,b="touchend"+m,w=[],M=ca.select(d),N=W(d);e(),l(g),M.on(T,null).on(O,e)}function p(){var t=j.of(this,arguments);m?clearTimeout(m):(Ul.call(this),g=n(v=y||ca.mouse(this)),l(t)),m=setTimeout(function(){m=null,c(t)},50),S(),i(Math.pow(2,.002*Za())*k.k),o(v,g),s(t)}function d(){var t=ca.mouse(this),e=Math.log(k.k)/Math.LN2;a(this,t,n(t),ca.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,v,y,m,x,_,b,w,M,k={x:0,y:0,k:1},N=[960,500],A=Xa,C=250,z=0,T="mousedown.zoom",q="mousemove.zoom",L="mouseup.zoom",O="touchstart.zoom",j=E(t,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in pa?(Za=function(){return-ca.event.deltaY*(ca.event.deltaMode?120:1)},"wheel"):"onmousewheel"in pa?(Za=function(){return ca.event.wheelDelta},"mousewheel"):(Za=function(){return-ca.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=j.of(this,arguments),n=k;Dl?ca.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var e=N[0],r=N[1],i=v?v[0]:e/2,o=v?v[1]:r/2,a=ca.interpolateZoom([(i-k.x)/k.k,(o-k.y)/k.k,e/k.k],[(i-n.x)/n.k,(o-n.y)/n.k,e/n.k]);return function(n){var r=a(n),u=e/r[2];this.__chart__=k={x:i-r[0]*u,y:o-r[1]*u,k:u},s(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=k,l(t),s(t),c(t))})},t.translate=function(n){return arguments.length?(k={x:+n[0],y:+n[1],k:k.k},u(),t):[k.x,k.y]},t.scale=function(n){return arguments.length?(k={x:k.x,y:k.y,k:null},i(+n),u(),t):k.k},t.scaleExtent=function(n){return arguments.length?(A=null==n?Xa:[+n[0],+n[1]],t):A},t.center=function(n){return arguments.length?(y=n&&[+n[0],+n[1]],t):y},t.size=function(n){return arguments.length?(N=n&&[+n[0],+n[1]],t):N},t.duration=function(n){return arguments.length?(C=+n,t):C},t.x=function(n){return arguments.length?(b=n,_=n.copy(),k={x:0,y:0,k:1},t):b},t.y=function(n){return arguments.length?(M=n,w=n.copy(),k={x:0,y:0,k:1},t):M},ca.rebind(t,j,"on")};var Za,Ba,Xa=[0,1/0];ca.color=ut,ut.prototype.toString=function(){return this.rgb()+""},ca.hsl=lt;var $a=lt.prototype=new ut;$a.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,this.l/t)},$a.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,t*this.l)},$a.rgb=function(){return st(this.h,this.s,this.l)},ca.hcl=ct;var Ja=ct.prototype=new ut;Ja.brighter=function(t){return new ct(this.h,this.c,Math.min(100,this.l+Wa*(arguments.length?t:1)))},Ja.darker=function(t){return new ct(this.h,this.c,Math.max(0,this.l-Wa*(arguments.length?t:1)))},Ja.rgb=function(){return ft(this.h,this.c,this.l).rgb()},ca.lab=ht;var Wa=18,Ga=.95047,Ka=1,Qa=1.08883,tu=ht.prototype=new ut;tu.brighter=function(t){return new ht(Math.min(100,this.l+Wa*(arguments.length?t:1)),this.a,this.b)},tu.darker=function(t){return new ht(Math.max(0,this.l-Wa*(arguments.length?t:1)),this.a,this.b)},tu.rgb=function(){return pt(this.l,this.a,this.b)},ca.rgb=mt;var nu=mt.prototype=new ut;nu.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,i=30;return n||e||r?(n&&n<i&&(n=i),e&&e<i&&(e=i),r&&r<i&&(r=i),new mt(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new mt(i,i,i)},nu.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},nu.hsl=function(){return Mt(this.r,this.g,this.b)},nu.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var eu=ca.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eu.forEach(function(t,n){eu.set(t,xt(n))}),ca.functor=Et,ca.xhr=At(x),ca.dsv=function(t,n){function e(t,e,o){arguments.length<3&&(o=e,e=null);var a=Ct(t,n,null==e?r:i(e),o);return a.row=function(t){return arguments.length?a.response(null==(e=t)?r:i(t)):e},a}function r(t){return e.parse(t.responseText)}function i(t){return function(n){return e.parse(n.responseText,t)}}function o(n){return n.map(a).join(t)}function a(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,function(t,e){if(r)return r(t,e-1);var i=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");r=n?function(t,e){return n(i(t),e)}:i})},e.parseRows=function(t,n){function e(){if(c>=s)return a;if(i)return i=!1,o;var n=c;if(34===t.charCodeAt(n)){for(var e=n;e++<s;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}c=e+2;var r=t.charCodeAt(e+1);return 13===r?(i=!0,10===t.charCodeAt(e+2)&&++c):10===r&&(i=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;c<s;){var r=t.charCodeAt(c++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(r!==l)continue;return t.slice(n,c-u)}return t.slice(n)}for(var r,i,o={},a={},u=[],s=t.length,c=0,f=0;(r=e())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=e();n&&null==(h=n(h,f++))||u.push(h)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new m,i=[];return n.forEach(function(t){for(var n in t)r.has(n)||i.push(r.add(n))}),[i.map(a).join(t)].concat(n.map(function(n){return i.map(function(t){return a(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(o).join("\n")},e},ca.csv=ca.dsv(",","text/csv"),ca.tsv=ca.dsv("\t","text/tab-separated-values");var ru,iu,ou,au,uu=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ca.timer=function(){qt.apply(this,arguments)},ca.timer.flush=function(){Ot(),jt()},ca.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var lu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Dt);ca.formatPrefix=function(t,n){var e=0;return(t=+t)&&(t<0&&(t*=-1),n&&(t=ca.round(t,Rt(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),lu[8+e/3]};var su=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,cu=ca.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=ca.round(t,Rt(t,n))).toFixed(Math.max(0,Math.min(20,Rt(t*(1+1e-15),n))))}}),fu=ca.time={},hu=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){pu.setUTCDate.apply(this._,arguments)},setDay:function(){pu.setUTCDay.apply(this._,arguments)},setFullYear:function(){pu.setUTCFullYear.apply(this._,arguments)},setHours:function(){pu.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){pu.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){pu.setUTCMinutes.apply(this._,arguments)},setMonth:function(){pu.setUTCMonth.apply(this._,arguments)},setSeconds:function(){pu.setUTCSeconds.apply(this._,arguments)},setTime:function(){pu.setTime.apply(this._,arguments)}};var pu=Date.prototype;fu.year=It(function(t){return t=fu.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),fu.years=fu.year.range,fu.years.utc=fu.year.utc.range,fu.day=It(function(t){var n=new hu(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),fu.days=fu.day.range,fu.days.utc=fu.day.utc.range,fu.dayOfYear=function(t){var n=fu.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=fu[t]=It(function(t){return(t=fu.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=fu.year(t).getDay();return Math.floor((fu.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});fu[t+"s"]=e.range,fu[t+"s"].utc=e.utc.range,fu[t+"OfYear"]=function(t){var e=fu.year(t).getDay();return Math.floor((fu.dayOfYear(t)+(e+n)%7)/7)}}),fu.week=fu.sunday,fu.weeks=fu.sunday.range,fu.weeks.utc=fu.sunday.utc.range,fu.weekOfYear=fu.sundayOfYear;var du={"-":"",_:" ",0:"0"},gu=/^\s*\d+/,vu=/^%/;ca.locale=function(t){return{numberFormat:Pt(t),timeFormat:Yt(t)}};var yu=ca.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ca.format=yu.numberFormat,ca.geo={},fn.prototype={s:0,t:0,add:function(t){hn(t,this.t,mu),hn(mu.s,this.s,this),this.s?this.t+=mu.t:this.s=mu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var mu=new fn;ca.geo.stream=function(t,n){t&&xu.hasOwnProperty(t.type)?xu[t.type](t,n):pn(t,n)};var xu={Feature:function(t,n){pn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)pn(e[r].geometry,n)}},_u={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){dn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)dn(e[r],n,0)},Polygon:function(t,n){gn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)gn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)pn(e[r],n)}};ca.geo.area=function(t){return bu=0,ca.geo.stream(t,Mu),bu};var bu,wu=new fn,Mu={sphere:function(){bu+=4*Pa},point:w,lineStart:w,lineEnd:w,polygonStart:function(){wu.reset(),Mu.lineStart=vn},polygonEnd:function(){var t=2*wu;bu+=t<0?4*Pa+t:t,Mu.lineStart=Mu.lineEnd=Mu.point=w}};ca.geo.bounds=function(){function t(t,n){x.push(_=[c=t,h=t]),n<f&&(f=n),n>p&&(p=n)}function n(n,e){var r=yn([n*Ha,e*Ha]);if(y){var i=xn(y,r),o=[i[1],-i[0],0],a=xn(o,i);wn(a),a=Mn(a);var l=n-d,s=l>0?1:-1,g=a[0]*Ya*s,v=_a(l)>180;if(v^(s*d<g&&g<s*n)){var m=a[1]*Ya;m>p&&(p=m)}else if(g=(g+360)%360-180,v^(s*d<g&&g<s*n)){var m=-a[1]*Ya;m<f&&(f=m)}else e<f&&(f=e),e>p&&(p=e);v?n<d?u(c,n)>u(c,h)&&(h=n):u(n,h)>u(c,h)&&(c=n):h>=c?(n<c&&(c=n),n>h&&(h=n)):n>d?u(c,n)>u(c,h)&&(h=n):u(n,h)>u(c,h)&&(c=n)}else t(n,e);y=r,d=n}function e(){b.point=n}function r(){_[0]=c,_[1]=h,b.point=t,y=null}function i(t,e){if(y){var r=t-d;m+=_a(r)>180?r+(r>0?360:-360):r}else g=t,v=e;Mu.point(t,e),n(t,e)}function o(){Mu.lineStart()}function a(){i(g,v),Mu.lineEnd(),_a(m)>Ra&&(c=-(h=180)),_[0]=c,_[1]=h,y=null}function u(t,n){return(n-=t)<0?n+360:n}function l(t,n){return t[0]-n[0]}function s(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var c,f,h,p,d,g,v,y,m,x,_,b={point:t,lineStart:e,lineEnd:r,polygonStart:function(){b.point=i,b.lineStart=o,b.lineEnd=a,m=0,Mu.polygonStart()},polygonEnd:function(){Mu.polygonEnd(),b.point=t,b.lineStart=e,b.lineEnd=r,wu<0?(c=-(h=180),f=-(p=90)):m>Ra?p=90:m<-Ra&&(f=-90),_[0]=c,_[1]=h}};return function(t){p=h=-(c=f=1/0),x=[],ca.geo.stream(t,b);var n=x.length;if(n){x.sort(l);for(var e,r=1,i=x[0],o=[i];r<n;++r)e=x[r],s(e[0],i)||s(e[1],i)?(u(i[0],e[1])>u(i[0],i[1])&&(i[1]=e[1]),u(e[0],i[1])>u(i[0],i[1])&&(i[0]=e[0])):o.push(i=e);for(var a,e,d=-1/0,n=o.length-1,r=0,i=o[n];r<=n;i=e,++r)e=o[r],(a=u(i[1],e[0]))>d&&(d=a,c=e[0],h=i[1])}return x=_=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,p]]}}(),ca.geo.centroid=function(t){ku=Su=Nu=Eu=Au=Cu=zu=Tu=qu=Lu=Ou=0,ca.geo.stream(t,ju);var n=qu,e=Lu,r=Ou,i=n*n+e*e+r*r;return i<Da&&(n=Cu,e=zu,r=Tu,Su<Ra&&(n=Nu,e=Eu,r=Au),(i=n*n+e*e+r*r)<Da)?[NaN,NaN]:[Math.atan2(e,n)*Ya,et(r/Math.sqrt(i))*Ya]};var ku,Su,Nu,Eu,Au,Cu,zu,Tu,qu,Lu,Ou,ju={sphere:w,point:Sn,lineStart:En,lineEnd:An,polygonStart:function(){ju.lineStart=Cn},polygonEnd:function(){ju.lineStart=En}},Ru=jn(Tn,Un,In,[-Pa,-Pa/2]),Du=1e9;ca.geo.clipExtent=function(){var t,n,e,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(u){return arguments.length?(o=Zn(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[t,n],[e,r]]}};return a.extent([[0,0],[960,500]])},(ca.geo.conicEqualArea=function(){return Bn(Xn)}).raw=Xn,ca.geo.albers=function(){return ca.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ca.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return n=null,e(o,a),n||(r(o,a),n)||i(o,a),n}var n,e,r,i,o=ca.geo.albers(),a=ca.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ca.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=o.scale(),e=o.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},t.stream=function(t){var n=o.stream(t),e=a.stream(t),r=u.stream(t);return{point:function(t,i){n.point(t,i),e.point(t,i),r.point(t,i)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(o.precision(n),a.precision(n),u.precision(n),t):o.precision()},t.scale=function(n){return arguments.length?(o.scale(n),a.scale(.35*n),u.scale(n),t.translate(o.translate())):o.scale()},t.translate=function(n){if(!arguments.length)return o.translate();var s=o.scale(),c=+n[0],f=+n[1];return e=o.translate(n).clipExtent([[c-.455*s,f-.238*s],[c+.455*s,f+.238*s]]).stream(l).point,r=a.translate([c-.307*s,f+.201*s]).clipExtent([[c-.425*s+Ra,f+.12*s+Ra],[c-.214*s-Ra,f+.234*s-Ra]]).stream(l).point,i=u.translate([c-.205*s,f+.212*s]).clipExtent([[c-.214*s+Ra,f+.166*s+Ra],[c-.115*s-Ra,f+.234*s-Ra]]).stream(l).point,t},t.scale(1070)};var Pu,Uu,Fu,Iu,Hu,Yu,Vu={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Uu=0,Vu.lineStart=$n},polygonEnd:function(){Vu.lineStart=Vu.lineEnd=Vu.point=w,Pu+=_a(Uu/2)}},Zu={point:Jn,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Bu={point:Kn,lineStart:Qn,lineEnd:te,polygonStart:function(){Bu.lineStart=ne},polygonEnd:function(){Bu.point=Kn,Bu.lineStart=Qn,Bu.lineEnd=te}};ca.geo.path=function(){function t(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),a&&a.valid||(a=i(o)),ca.geo.stream(t,a)),o.result()}function n(){return a=null,t}var e,r,i,o,a,u=4.5;return t.area=function(t){return Pu=0,ca.geo.stream(t,i(Vu)),Pu},t.centroid=function(t){return Nu=Eu=Au=Cu=zu=Tu=qu=Lu=Ou=0,ca.geo.stream(t,i(Bu)),Ou?[qu/Ou,Lu/Ou]:Tu?[Cu/Tu,zu/Tu]:Au?[Nu/Au,Eu/Au]:[NaN,NaN]},t.bounds=function(t){return Hu=Yu=-(Fu=Iu=1/0),ca.geo.stream(t,i(Zu)),[[Fu,Iu],[Hu,Yu]]},t.projection=function(t){return arguments.length?(i=(e=t)?t.stream||ie(t):x,n()):e},t.context=function(t){return arguments.length?(o=null==(r=t)?new Wn:new ee(t),"function"!=typeof u&&o.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(o.pointRadius(+n),+n),t):u},t.projection(ca.geo.albersUsa()).context(null)},ca.geo.transform=function(t){return{stream:function(n){var e=new oe(n);for(var r in t)e[r]=t[r];return e}}},oe.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ca.geo.projection=ue,ca.geo.projectionMutator=le,(ca.geo.equirectangular=function(){return ue(ce)}).raw=ce.invert=ce,ca.geo.rotation=function(t){function n(n){return n=t(n[0]*Ha,n[1]*Ha),n[0]*=Ya,n[1]*=Ya,n}return t=he(t[0]%360*Ha,t[1]*Ha,t.length>2?t[2]*Ha:0),n.invert=function(n){return n=t.invert(n[0]*Ha,n[1]*Ha),n[0]*=Ya,n[1]*=Ya,n},n},fe.invert=ce,ca.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=he(-t[0]*Ha,-t[1]*Ha,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Ya,t[1]*=Ya}}),{type:"Polygon",coordinates:[i]}}var n,e,r=[0,0],i=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=ve((n=+r)*Ha,i*Ha),t):n},t.precision=function(r){return arguments.length?(e=ve(n*Ha,(i=+r)*Ha),t):i},t.angle(90)},ca.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Ha,i=t[1]*Ha,o=n[1]*Ha,a=Math.sin(r),u=Math.cos(r),l=Math.sin(i),s=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((e=f*a)*e+(e=s*c-l*f*u)*e),l*c+s*f*u)},ca.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return ca.range(Math.ceil(o/v)*v,i,v).map(h).concat(ca.range(Math.ceil(s/y)*y,l,y).map(p)).concat(ca.range(Math.ceil(r/d)*d,e,d).filter(function(t){return _a(t%v)>Ra}).map(c)).concat(ca.range(Math.ceil(u/g)*g,a,g).filter(function(t){return _a(t%y)>Ra}).map(f))}var e,r,i,o,a,u,l,s,c,f,h,p,d=10,g=d,v=90,y=360,m=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(l).slice(1),h(i).reverse().slice(1),p(s).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],s=+n[0][1],l=+n[1][1],o>i&&(n=o,o=i,i=n),s>l&&(n=s,s=l,l=n),t.precision(m)):[[o,s],[i,l]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],a=+n[1][1],r>e&&(n=r,r=e,e=n),u>a&&(n=u,u=a,a=n),t.precision(m)):[[r,u],[e,a]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],y=+n[1],t):[v,y]},t.minorStep=function(n){return arguments.length?(d=+n[0],g=+n[1],t):[d,g]},t.precision=function(n){return arguments.length?(m=+n,c=me(u,a,90),f=xe(r,e,m),h=me(s,l,90),p=xe(o,i,m),t):m},t.majorExtent([[-180,-90+Ra],[180,90-Ra]]).minorExtent([[-180,-80-Ra],[180,80+Ra]])},ca.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||i.apply(this,arguments)]}}var n,e,r=_e,i=be;return t.distance=function(){return ca.geo.distance(n||r.apply(this,arguments),e||i.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.precision=function(){return arguments.length?t:0},t},ca.geo.interpolate=function(t,n){return we(t[0]*Ha,t[1]*Ha,n[0]*Ha,n[1]*Ha)},ca.geo.length=function(t){return Xu=0,ca.geo.stream(t,$u),Xu};var Xu,$u={sphere:w,point:w,lineStart:Me,lineEnd:w,polygonStart:w,polygonEnd:w},Ju=ke(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ca.geo.azimuthalEqualArea=function(){return ue(Ju)}).raw=Ju;var Wu=ke(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},x);(ca.geo.azimuthalEquidistant=function(){return ue(Wu)}).raw=Wu,(ca.geo.conicConformal=function(){return Bn(Se)}).raw=Se,(ca.geo.conicEquidistant=function(){return Bn(Ne)}).raw=Ne;var Gu=ke(function(t){return 1/t},Math.atan);(ca.geo.gnomonic=function(){return ue(Gu)}).raw=Gu,Ee.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Ia]},(ca.geo.mercator=function(){return Ae(Ee)}).raw=Ee;var Ku=ke(function(){return 1},Math.asin);(ca.geo.orthographic=function(){return ue(Ku)}).raw=Ku;var Qu=ke(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ca.geo.stereographic=function(){return ue(Qu)}).raw=Qu,Ce.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Ia]},(ca.geo.transverseMercator=function(){var t=Ae(Ce),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90])}).raw=Ce,ca.geom={},ca.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,i=Et(e),o=Et(r),a=t.length,u=[],l=[];for(n=0;n<a;n++)u.push([+i.call(this,t[n],n),+o.call(this,t[n],n),n]);for(u.sort(Le),n=0;n<a;n++)l.push([u[n][0],-u[n][1]]);var s=qe(u),c=qe(l),f=c[0]===s[0],h=c[c.length-1]===s[s.length-1],p=[];for(n=s.length-1;n>=0;--n)p.push(t[u[s[n]][2]]);for(n=+f;n<c.length-h;++n)p.push(t[u[c[n]][2]]);return p}var e=ze,r=Te;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n)},ca.geom.polygon=function(t){return Sa(t,tl),t};var tl=ca.geom.polygon.prototype=[];tl.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],i=0;++n<e;)t=r,r=this[n],i+=t[1]*r[0]-t[0]*r[1];return.5*i},tl.centroid=function(t){var n,e,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o*t,a*t]},tl.clip=function(t){for(var n,e,r,i,o,a,u=Re(t),l=-1,s=this.length-Re(this),c=this[s-1];++l<s;){for(n=t.slice(),t.length=0,i=this[l],o=n[(r=n.length-u)-1],e=-1;++e<r;)a=n[e],Oe(a,c,i)?(Oe(o,c,i)||t.push(je(o,a,c,i)),t.push(a)):Oe(o,c,i)&&t.push(je(o,a,c,i)),o=a;u&&t.push(t[0]),c=i}return t};var nl,el,rl,il,ol,al=[],ul=[];Ze.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)t=n[e].edge,t.b&&t.a||n.splice(e,1);return n.sort(Xe),n.length},rr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ir.prototype={insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=lr(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(ar(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ur(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(ur(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ar(this,r))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?lr(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=a,a.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(n=i.R,n.C&&(n.C=!1,i.C=!0,ar(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,ur(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,ar(this,i),t=this._;break}}else if(n=i.L,n.C&&(n.C=!1,i.C=!0,ur(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,ar(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,ur(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ca.geom.voronoi=function(t){function n(t){var n=new Array(t.length),r=u[0][0],i=u[0][1],o=u[1][0],a=u[1][1];return sr(e(t),u).cells.forEach(function(e,u){var l=e.edges,s=e.site;(n[u]=l.length?l.map(function(t){var n=t.start();return[n.x,n.y]}):s.x>=r&&s.x<=o&&s.y>=i&&s.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[]).point=t[u]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(o(t,n)/Ra)*Ra,y:Math.round(a(t,n)/Ra)*Ra,i:n}})}var r=ze,i=Te,o=r,a=i,u=ll;return t?n(t):(n.links=function(t){return sr(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return sr(e(t)).cells.forEach(function(e,r){for(var i,o=e.site,a=e.edges.sort(Xe),u=-1,l=a.length,s=a[l-1].edge,c=s.l===o?s.r:s.l;++u<l;)s,i=c,s=a[u].edge,c=s.l===o?s.r:s.l,r<i.i&&r<c.i&&fr(o,i,c)<0&&n.push([t[r],t[i.i],t[c.i]])}),n},n.x=function(t){return arguments.length?(o=Et(r=t),n):r},n.y=function(t){return arguments.length?(a=Et(i=t),n):i},n.clipExtent=function(t){return arguments.length?(u=null==t?ll:t,n):u===ll?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===ll?null:u&&u[1]},n)};var ll=[[-1e6,-1e6],[1e6,1e6]];ca.geom.delaunay=function(t){return ca.geom.voronoi().triangles(t)},ca.geom.quadtree=function(t,n,e,r,i){function o(t){function o(t,n,e,r,i,o,a,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(_a(l-e)+_a(c-r)<.01)s(t,n,e,r,i,o,a,u);else{var f=t.point;t.x=t.y=t.point=null,s(t,f,l,c,i,o,a,u),s(t,n,e,r,i,o,a,u)}else t.x=e,t.y=r,t.point=n}else s(t,n,e,r,i,o,a,u)}function s(t,n,e,r,i,a,u,l){var s=.5*(i+u),c=.5*(a+l),f=e>=s,h=r>=c,p=h<<1|f;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=dr()),f?i=s:u=s,h?a=c:l=c,o(t,n,e,r,i,a,u,l)}var c,f,h,p,d,g,v,y,m,x=Et(u),_=Et(l);if(null!=n)g=n,v=e,y=r,m=i;else if(y=m=-(g=v=1/0),f=[],h=[],d=t.length,a)for(p=0;p<d;++p)c=t[p],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>y&&(y=c.x),c.y>m&&(m=c.y),f.push(c.x),h.push(c.y);else for(p=0;p<d;++p){var b=+x(c=t[p],p),w=+_(c,p);b<g&&(g=b),w<v&&(v=w),b>y&&(y=b),w>m&&(m=w),f.push(b),h.push(w)}var M=y-g,k=m-v;M>k?m=v+M:y=g+k;var S=dr();if(S.add=function(t){o(S,t,+x(t,++p),+_(t,p),g,v,y,m)},S.visit=function(t){gr(t,S,g,v,y,m)},S.find=function(t){return vr(S,t[0],t[1],g,v,y,m)},p=-1,null==n){for(;++p<d;)o(S,t[p],f[p],h[p],g,v,y,m);--p}else t.forEach(S.add);return f=h=t=c=null,S}var a,u=ze,l=Te;return(a=arguments.length)?(u=hr,l=pr,3===a&&(i=e,r=n,e=n=0),o(t)):(o.x=function(t){return arguments.length?(u=t,o):u},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==n?null:[[n,e],[r,i]]},o.size=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=e=0,r=+t[0],i=+t[1]),o):null==n?null:[r-n,i-e]},o)},ca.interpolateRgb=yr,ca.interpolateObject=mr,ca.interpolateNumber=xr,ca.interpolateString=_r;var sl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cl=new RegExp(sl.source,"g");ca.interpolate=br,ca.interpolators=[function(t,n){var e=void 0===n?"undefined":He(n);return("string"===e?eu.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?yr:_r:n instanceof ut?yr:Array.isArray(n)?wr:"object"===e&&isNaN(n)?mr:xr)(t,n)}],ca.interpolateArray=wr;var fl=function(){return x},hl=ca.map({linear:fl,poly:Cr,quad:function(){return Nr},cubic:function(){return Er},sin:function(){return zr},exp:function(){return Tr},circle:function(){return qr},elastic:Lr,back:Or,bounce:function(){return jr}}),pl=ca.map({in:x,out:kr,"in-out":Sr,"out-in":function(t){return Sr(kr(t))}});ca.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.slice(0,n):t,r=n>=0?t.slice(n+1):"in";return e=hl.get(e)||fl,r=pl.get(r)||x,Mr(r(e.apply(null,fa.call(arguments,1))))},ca.interpolateHcl=Rr,ca.interpolateHsl=Dr,ca.interpolateLab=Pr,ca.interpolateRound=Ur,ca.transform=function(t){var n=pa.createElementNS(ca.ns.prefix.svg,"g");return(ca.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Fr(e?e.matrix:dl)})(t)},Fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var dl={a:1,b:0,c:0,d:1,e:0,
f:0};ca.interpolateTransform=Jr,ca.layout={},ca.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Kr(t[e]));return n}},ca.layout.chord=function(){function t(){var t,s,f,h,p,d={},g=[],v=ca.range(o),y=[];for(e=[],r=[],t=0,h=-1;++h<o;){for(s=0,p=-1;++p<o;)s+=i[h][p];g.push(s),y.push(ca.range(o)),t+=s}for(a&&v.sort(function(t,n){return a(g[t],g[n])}),u&&y.forEach(function(t,n){t.sort(function(t,e){return u(i[n][t],i[n][e])})}),t=(Ua-c*o)/t,s=0,h=-1;++h<o;){for(f=s,p=-1;++p<o;){var m=v[h],x=y[m][p],_=i[m][x],b=s,w=s+=_*t;d[m+"-"+x]={index:m,subindex:x,startAngle:b,endAngle:w,value:_}}r[m]={index:m,startAngle:f,endAngle:s,value:g[m]},s+=c}for(h=-1;++h<o;)for(p=h-1;++p<o;){var M=d[h+"-"+p],k=d[p+"-"+h];(M.value||k.value)&&e.push(M.value<k.value?{source:k,target:M}:{source:M,target:k})}l&&n()}function n(){e.sort(function(t,n){return l((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,r,i,o,a,u,l,s={},c=0;return s.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,e=r=null,s):i},s.padding=function(t){return arguments.length?(c=t,e=r=null,s):c},s.sortGroups=function(t){return arguments.length?(a=t,e=r=null,s):a},s.sortSubgroups=function(t){return arguments.length?(u=t,e=null,s):u},s.sortChords=function(t){return arguments.length?(l=t,e&&n(),s):l},s.chords=function(){return e||t(),e},s.groups=function(){return r||t(),r},s},ca.layout.force=function(){function t(t){return function(n,e,r,i){if(n.point!==t){var o=n.cx-t.x,a=n.cy-t.y,u=i-e,l=o*o+a*a;if(u*u/y<l){if(l<g){var s=n.charge/l;t.px-=o*s,t.py-=a*s}return!0}if(n.point&&l&&l<g){var s=n.pointCharge/l;t.px-=o*s,t.py-=a*s}}return!n.charge}}function n(t){t.px=ca.event.x,t.py=ca.event.y,l.resume()}var e,r,i,o,a,u,l={},s=ca.dispatch("start","tick","end"),c=[1,1],f=.9,h=gl,p=vl,d=-30,g=yl,v=.1,y=.64,m=[],_=[];return l.tick=function(){if((i*=.99)<.005)return e=null,s.end({type:"end",alpha:i=0}),!0;var n,r,l,h,p,g,y,x,b,w=m.length,M=_.length;for(r=0;r<M;++r)l=_[r],h=l.source,p=l.target,x=p.x-h.x,b=p.y-h.y,(g=x*x+b*b)&&(g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,x*=g,b*=g,p.x-=x*(y=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=b*y,h.x+=x*(y=1-y),h.y+=b*y);if((y=i*v)&&(x=c[0]/2,b=c[1]/2,r=-1,y))for(;++r<w;)l=m[r],l.x+=(x-l.x)*y,l.y+=(b-l.y)*y;if(d)for(oi(n=ca.geom.quadtree(m),i,u),r=-1;++r<w;)(l=m[r]).fixed||n.visit(t(l));for(r=-1;++r<w;)l=m[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);s.tick({type:"tick",alpha:i})},l.nodes=function(t){return arguments.length?(m=t,l):m},l.links=function(t){return arguments.length?(_=t,l):_},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.friction=function(t){return arguments.length?(f=+t,l):f},l.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(y=t*t,l):Math.sqrt(y)},l.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(e.c=null,e.t=NaN,e=null,s.end({type:"end",alpha:i=0})):t>0&&(s.start({type:"start",alpha:i=t}),e=qt(l.tick)),l):i},l.start=function(){function t(t,r){if(!e){for(e=new Array(i),l=0;l<i;++l)e[l]=[];for(l=0;l<s;++l){var o=_[l];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,u=e[n],l=-1,c=u.length;++l<c;)if(!isNaN(a=u[l][t]))return a;return Math.random()*r}var n,e,r,i=m.length,s=_.length,f=c[0],g=c[1];for(n=0;n<i;++n)(r=m[n]).index=n,r.weight=0;for(n=0;n<s;++n)r=_[n],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(n=0;n<i;++n)r=m[n],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof h)for(n=0;n<s;++n)o[n]=+h.call(this,_[n],n);else for(n=0;n<s;++n)o[n]=h;if(a=[],"function"==typeof p)for(n=0;n<s;++n)a[n]=+p.call(this,_[n],n);else for(n=0;n<s;++n)a[n]=p;if(u=[],"function"==typeof d)for(n=0;n<i;++n)u[n]=+d.call(this,m[n],n);else for(n=0;n<i;++n)u[n]=d;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(r||(r=ca.behavior.drag().origin(x).on("dragstart.force",ni).on("drag.force",n).on("dragend.force",ei)),!arguments.length)return r;this.on("mouseover.force",ri).on("mouseout.force",ii).call(r)},ca.rebind(l,s,"on")};var gl=20,vl=1,yl=1/0;ca.layout.hierarchy=function(){function t(i){var o,a=[i],u=[];for(i.depth=0;null!=(o=a.pop());)if(u.push(o),(s=e.call(t,o,o.depth))&&(l=s.length)){for(var l,s,c;--l>=0;)a.push(c=s[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=s}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return li(i,function(t){var e,i;n&&(e=t.children)&&e.sort(n),r&&(i=t.parent)&&(i.value+=t.value)}),u}var n=fi,e=si,r=ci;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(ui(n,function(t){t.children&&(t.value=0)}),li(n,function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},ca.layout.partition=function(){function t(n,e,r,i){var o=n.children;if(n.x=e,n.y=n.depth*i,n.dx=r,n.dy=i,o&&(a=o.length)){var a,u,l,s=-1;for(r=n.value?r/n.value:0;++s<a;)t(u=o[s],e,l=u.value*r,i),e+=l}}function n(t){var e=t.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,n(e[o]));return 1+r}function e(e,o){var a=r.call(this,e,o);return t(a[0],0,i[0],i[1]/n(a[0])),a}var r=ca.layout.hierarchy(),i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},ai(e,r)},ca.layout.pie=function(){function t(a){var u,l=a.length,s=a.map(function(e,r){return+n.call(t,e,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),p=h*(f<0?-1:1),d=ca.sum(s),g=d?(f-l*p)/d:0,v=ca.range(l),y=[];return null!=e&&v.sort(e===ml?function(t,n){return s[n]-s[t]}:function(t,n){return e(a[t],a[n])}),v.forEach(function(t){y[t]={data:a[t],value:u=s[t],startAngle:c,endAngle:c+=u*g+p,padAngle:h}}),y}var n=Number,e=ml,r=0,i=Ua,o=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(i=n,t):i},t.padAngle=function(n){return arguments.length?(o=n,t):o},t};var ml={};ca.layout.stack=function(){function t(u,l){if(!(h=u.length))return u;var s=u.map(function(e,r){return n.call(t,e,r)}),c=s.map(function(n){return n.map(function(n,e){return[o.call(t,n,e),a.call(t,n,e)]})}),f=e.call(t,c,l);s=ca.permute(s,f),c=ca.permute(c,f);var h,p,d,g,v=r.call(t,c,l),y=s[0].length;for(d=0;d<y;++d)for(i.call(t,s[0][d],g=v[d],c[0][d][1]),p=1;p<h;++p)i.call(t,s[p][d],g+=c[p-1][d][1],c[p][d][1]);return u}var n=x,e=vi,r=yi,i=gi,o=pi,a=di;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:xl.get(n)||vi,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:_l.get(n)||yi,t):r},t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(a=n,t):a},t.out=function(n){return arguments.length?(i=n,t):i},t};var xl=ca.map({"inside-out":function(t){var n,e,r=t.length,i=t.map(mi),o=t.map(xi),a=ca.range(r).sort(function(t,n){return i[t]-i[n]}),u=0,l=0,s=[],c=[];for(n=0;n<r;++n)e=a[n],u<l?(u+=o[e],s.push(e)):(l+=o[e],c.push(e));return c.reverse().concat(s)},reverse:function(t){return ca.range(t.length).reverse()},default:vi}),_l=ca.map({silhouette:function(t){var n,e,r,i=t.length,o=t[0].length,a=[],u=0,l=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];r>u&&(u=r),a.push(r)}for(e=0;e<o;++e)l[e]=(u-a[e])/2;return l},wiggle:function(t){var n,e,r,i,o,a,u,l,s,c=t.length,f=t[0],h=f.length,p=[];for(p[0]=l=s=0,e=1;e<h;++e){for(n=0,i=0;n<c;++n)i+=t[n][e][1];for(n=0,o=0,u=f[e][0]-f[e-1][0];n<c;++n){for(r=0,a=(t[n][e][1]-t[n][e-1][1])/(2*u);r<n;++r)a+=(t[r][e][1]-t[r][e-1][1])/u;o+=a*t[n][e][1]}p[e]=l-=i?o/i*u:0,l<s&&(s=l)}for(e=0;e<h;++e)p[e]-=s;return p},expand:function(t){var n,e,r,i=t.length,o=t[0].length,a=1/i,u=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];if(r)for(n=0;n<i;n++)t[n][e][1]/=r;else for(n=0;n<i;n++)t[n][e][1]=a}for(e=0;e<o;++e)u[e]=0;return u},zero:yi});ca.layout.histogram=function(){function t(t,o){for(var a,u,l=[],s=t.map(e,this),c=r.call(this,s,o),f=i.call(this,c,s,o),o=-1,h=s.length,p=f.length-1,d=n?1:1/h;++o<p;)a=l[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(p>0)for(o=-1;++o<h;)(u=s[o])>=c[0]&&u<=c[1]&&(a=l[ca.bisect(f,u,1,p)-1],a.y+=d,a.push(t[o]));return l}var n=!0,e=Number,r=Mi,i=bi;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=Et(n),t):r},t.bins=function(n){return arguments.length?(i="number"==typeof n?function(t){return wi(t,n)}:Et(n),t):i},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},ca.layout.pack=function(){function t(t,o){var a=e.call(this,t,o),u=a[0],l=i[0],s=i[1],c=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,li(u,function(t){t.r=+c(t.value)}),li(u,Ai),r){var f=r*(n?1:Math.max(2*u.r/l,2*u.r/s))/2;li(u,function(t){t.r+=f}),li(u,Ai),li(u,function(t){t.r-=f})}return Ti(u,l/2,s/2,n?1:1/Math.max(2*u.r/l,2*u.r/s)),a}var n,e=ca.layout.hierarchy().sort(ki),r=0,i=[1,1];return t.size=function(n){return arguments.length?(i=n,t):i},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},ai(t,e)},ca.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),f=c[0],h=n(f);if(li(h,e),h.parent.m=-h.z,ui(h,r),s)ui(f,o);else{var p=f,d=f,g=f;ui(f,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>g.depth&&(g=t)});var v=u(p,d)/2-p.x,y=l[0]/(d.x+u(d,p)/2+v),m=l[1]/(g.depth||1);ui(f,function(t){t.x=(t.x+v)*y,t.y=t.depth*m})}return c}function n(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var i,o=n.children,a=0,u=o.length;a<u;++a)r.push((o[a]=i={_:o[a],parent:n,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return e.children[0]}function e(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){Di(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+u(t._,r._));t.parent.A=i(t,r,t.parent.A||e[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,n,e){if(n){for(var r,i=t,o=t,a=n,l=i.parent.children[0],s=i.m,c=o.m,f=a.m,h=l.m;a=ji(a),i=Oi(i),a&&i;)l=Oi(l),o=ji(o),o.a=t,r=a.z+f-i.z-s+u(a._,i._),r>0&&(Ri(Pi(a,t,e),t,r),s+=r,c+=r),f+=a.m,s+=i.m,h+=l.m,c+=o.m;a&&!ji(o)&&(o.t=a,o.m+=f-c),i&&!Oi(l)&&(l.t=i,l.m+=s-h,e=t)}return e}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=ca.layout.hierarchy().sort(null).value(null),u=Li,l=[1,1],s=null;return t.separation=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(s=null==(l=n)?o:null,t):s?null:l},t.nodeSize=function(n){return arguments.length?(s=null==(l=n)?null:o,t):s?l:null},ai(t,a)},ca.layout.cluster=function(){function t(t,o){var a,u=n.call(this,t,o),l=u[0],s=0;li(l,function(t){var n=t.children;n&&n.length?(t.x=Fi(n),t.y=Ui(n)):(t.x=a?s+=e(t,a):0,t.y=0,a=t)});var c=Ii(l),f=Hi(l),h=c.x-e(c,f)/2,p=f.x+e(f,c)/2;return li(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),u}var n=ca.layout.hierarchy().sort(null).value(null),e=Li,r=[1,1],i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(i=null==(r=n),t):i?null:r},t.nodeSize=function(n){return arguments.length?(i=null!=(r=n),t):i?r:null},ai(t,n)},ca.layout.treemap=function(){function t(t,n){for(var e,r,i=-1,o=t.length;++i<o;)r=(e=t[i]).value*(n<0?0:n),e.area=isNaN(r)||r<=0?0:r}function n(e){var o=e.children;if(o&&o.length){var a,u,l,s=f(e),c=[],h=o.slice(),d=1/0,g="slice"===p?s.dx:"dice"===p?s.dy:"slice-dice"===p?1&e.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(t(h,s.dx*s.dy/e.value),c.area=0;(l=h.length)>0;)c.push(a=h[l-1]),c.area+=a.area,"squarify"!==p||(u=r(c,g))<=d?(h.pop(),d=u):(c.area-=c.pop().area,i(c,g,s,!1),g=Math.min(s.dx,s.dy),c.length=c.area=0,d=1/0);c.length&&(i(c,g,s,!0),c.length=c.area=0),o.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var o,a=f(n),u=r.slice(),l=[];for(t(u,a.dx*a.dy/n.value),l.area=0;o=u.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!u.length),l.length=l.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(e=t[a].area)&&(e<o&&(o=e),e>i&&(i=e));return r*=r,n*=n,r?Math.max(n*i*d/r,r/(n*o*d)):1/0}function i(t,n,e,r){var i,o=-1,a=t.length,u=e.x,s=e.y,c=n?l(t.area/n):0;if(n==e.dx){for((r||c>e.dy)&&(c=e.dy);++o<a;)i=t[o],i.x=u,i.y=s,i.dy=c,u+=i.dx=Math.min(e.x+e.dx-u,c?l(i.area/c):0);i.z=!0,i.dx+=e.x+e.dx-u,e.y+=c,e.dy-=c}else{for((r||c>e.dx)&&(c=e.dx);++o<a;)i=t[o],i.x=u,i.y=s,i.dx=c,s+=i.dy=Math.min(e.y+e.dy-s,c?l(i.area/c):0);i.z=!1,i.dy+=e.y+e.dy-s,e.x+=c,e.dx-=c}}function o(r){var i=a||u(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=s[0],o.dy=s[1]):o.dx=o.dy=0,a&&u.revalue(o),t([o],o.dx*o.dy/o.value),(a?e:n)(o),h&&(a=i),i}var a,u=ca.layout.hierarchy(),l=Math.round,s=[1,1],c=null,f=Yi,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(s=t,o):s},o.padding=function(t){function n(n){var e=t.call(o,n,n.depth);return null==e?Yi(n):Vi(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return Vi(n,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Yi:"function"===(r=void 0===t?"undefined":He(t))?n:"number"===r?(t=[t,t,t,t],e):e,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(h=t,a=null,o):h},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},ai(o,u)},ca.random={normal:function(t,n){var e=arguments.length;return e<2&&(n=1),e<1&&(t=0),function(){var e,r,i;do{e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r}while(!i||i>1);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ca.random.normal.apply(ca,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=ca.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;e<t;e++)n+=Math.random();return n}}},ca.scale={};var bl={floor:x,ceil:x};ca.scale.linear=function(){return Gi([0,1],[0,1],br,!1)};var wl={s:1,g:1,p:1,r:1,e:1};ca.scale.log=function(){return oo(ca.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ca.format(".0e"),kl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ca.scale.pow=function(){return ao(ca.scale.linear(),1,[0,1])},ca.scale.sqrt=function(){return ca.scale.pow().exponent(.5)},ca.scale.ordinal=function(){return lo([],{t:"range",a:[[]]})},ca.scale.category10=function(){return ca.scale.ordinal().range(Sl)},ca.scale.category20=function(){return ca.scale.ordinal().range(Nl)},ca.scale.category20b=function(){return ca.scale.ordinal().range(El)},ca.scale.category20c=function(){return ca.scale.ordinal().range(Al)};var Sl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(_t),Nl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(_t),El=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(_t),Al=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(_t);ca.scale.quantile=function(){return so([],[])},ca.scale.quantize=function(){return co(0,1,[0,1])},ca.scale.threshold=function(){return fo([.5],[0,1])},ca.scale.identity=function(){return ho([0,1])},ca.svg={},ca.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),s=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Ia,f=u.apply(this,arguments)-Ia,h=Math.abs(f-c),p=c>f?0:1;if(s<t&&(d=s,s=t,t=d),h>=Fa)return n(s,p)+(t?n(t,1-p):"")+"Z";var d,g,v,y,m,x,_,b,w,M,k,S,N=0,E=0,A=[];if((y=(+l.apply(this,arguments)||0)/2)&&(v=o===Cl?Math.sqrt(t*t+s*s):+o.apply(this,arguments),p||(E*=-1),s&&(E=et(v/s*Math.sin(y))),t&&(N=et(v/t*Math.sin(y)))),s){m=s*Math.cos(c+E),x=s*Math.sin(c+E),_=s*Math.cos(f-E),b=s*Math.sin(f-E);var C=Math.abs(f-c-2*E)<=Pa?0:1;if(E&&_o(m,x,_,b)===p^C){var z=(c+f)/2;m=s*Math.cos(z),x=s*Math.sin(z),_=b=null}}else m=x=0;if(t){w=t*Math.cos(f-N),M=t*Math.sin(f-N),k=t*Math.cos(c+N),S=t*Math.sin(c+N);var T=Math.abs(c-f+2*N)<=Pa?0:1;if(N&&_o(w,M,k,S)===1-p^T){var q=(c+f)/2;w=t*Math.cos(q),M=t*Math.sin(q),k=S=null}}else w=M=0;if(h>Ra&&(d=Math.min(Math.abs(s-t)/2,+i.apply(this,arguments)))>.001){g=t<s^p?0:1;var L=d,O=d;if(h<Pa){var j=null==k?[w,M]:null==_?[m,x]:je([m,x],[k,S],[_,b],[w,M]),R=m-j[0],D=x-j[1],P=_-j[0],U=b-j[1],F=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),I=Math.sqrt(j[0]*j[0]+j[1]*j[1]);O=Math.min(d,(t-I)/(F-1)),L=Math.min(d,(s-I)/(F+1))}if(null!=_){var H=bo(null==k?[w,M]:[k,S],[m,x],s,L,p),Y=bo([_,b],[w,M],s,L,p);d===L?A.push("M",H[0],"A",L,",",L," 0 0,",g," ",H[1],"A",s,",",s," 0 ",1-p^_o(H[1][0],H[1][1],Y[1][0],Y[1][1]),",",p," ",Y[1],"A",L,",",L," 0 0,",g," ",Y[0]):A.push("M",H[0],"A",L,",",L," 0 1,",g," ",Y[0])}else A.push("M",m,",",x);if(null!=k){var V=bo([m,x],[k,S],t,-O,p),Z=bo([w,M],null==_?[m,x]:[_,b],t,-O,p);d===O?A.push("L",Z[0],"A",O,",",O," 0 0,",g," ",Z[1],"A",t,",",t," 0 ",p^_o(Z[1][0],Z[1][1],V[1][0],V[1][1]),",",1-p," ",V[1],"A",O,",",O," 0 0,",g," ",V[0]):A.push("L",Z[0],"A",O,",",O," 0 0,",g," ",V[0])}else A.push("L",w,",",M)}else A.push("M",m,",",x),null!=_&&A.push("A",s,",",s," 0 ",C,",",p," ",_,",",b),A.push("L",w,",",M),null!=k&&A.push("A",t,",",t," 0 ",T,",",1-p," ",k,",",S);return A.push("Z"),A.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=go,r=vo,i=po,o=Cl,a=yo,u=mo,l=xo;return t.innerRadius=function(n){return arguments.length?(e=Et(n),t):e},t.outerRadius=function(n){return arguments.length?(r=Et(n),t):r},t.cornerRadius=function(n){return arguments.length?(i=Et(n),t):i},t.padRadius=function(n){return arguments.length?(o=n==Cl?Cl:Et(n),t):o},t.startAngle=function(n){return arguments.length?(a=Et(n),t):a},t.endAngle=function(n){return arguments.length?(u=Et(n),t):u},t.padAngle=function(n){return arguments.length?(l=Et(n),t):l},t.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +u.apply(this,arguments))/2-Ia;return[Math.cos(n)*t,Math.sin(n)*t]},t};var Cl="auto";ca.svg.line=function(){return wo(x)};var zl=ca.map({linear:Mo,"linear-closed":ko,step:So,"step-before":No,"step-after":Eo,basis:Lo,"basis-open":Oo,"basis-closed":jo,bundle:Ro,cardinal:zo,"cardinal-open":Ao,"cardinal-closed":Co,monotone:Ho});zl.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Tl=[0,2/3,1/3,0],ql=[0,1/3,2/3,0],Ll=[0,1/6,2/3,1/6];ca.svg.line.radial=function(){var t=wo(Yo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},No.reverse=Eo,Eo.reverse=No,ca.svg.area=function(){return Vo(x)},ca.svg.area.radial=function(){var t=Vo(Yo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ca.svg.chord=function(){function t(t,u){var l=n(this,o,t,u),s=n(this,a,t,u);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,s)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,s.r,s.p0)+r(s.r,s.p1,s.a1-s.a0)+i(s.r,s.p1,l.r,l.p0))+"Z"}function n(t,n,e,r){var i=n.call(t,e,r),o=u.call(t,i,r),a=l.call(t,i,r)-Ia,c=s.call(t,i,r)-Ia;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function e(t,n){return t.a0==n.a0&&t.a1==n.a1}function r(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Pa)+",1 "+n}function i(t,n,e,r){return"Q 0,0 "+r}var o=_e,a=be,u=Zo,l=yo,s=mo;return t.radius=function(n){return arguments.length?(u=Et(n),t):u},t.source=function(n){return arguments.length?(o=Et(n),t):o},t.target=function(n){return arguments.length?(a=Et(n),t):a},t.startAngle=function(n){return arguments.length?(l=Et(n),t):l},t.endAngle=function(n){return arguments.length?(s=Et(n),t):s},t},ca.svg.diagonal=function(){function t(t,i){var o=n.call(this,t,i),a=e.call(this,t,i),u=(o.y+a.y)/2,l=[o,{x:o.x,y:u},{x:a.x,y:u},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var n=_e,e=be,r=Bo;return t.source=function(e){return arguments.length?(n=Et(e),t):n},t.target=function(n){return arguments.length?(e=Et(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},ca.svg.diagonal.radial=function(){var t=ca.svg.diagonal(),n=Bo,e=t.projection;return t.projection=function(t){return arguments.length?e(Xo(n=t)):n},t},ca.svg.symbol=function(){function t(t,r){return(Ol.get(n.call(this,t,r))||Wo)(e.call(this,t,r))}var n=Jo,e=$o;return t.type=function(e){return arguments.length?(n=Et(e),t):n},t.size=function(n){return arguments.length?(e=Et(n),t):e},t};var Ol=ca.map({circle:Wo,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Rl)),e=n*Rl;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/jl),e=n*jl/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/jl),e=n*jl/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});ca.svg.symbolTypes=Ol.keys();var jl=Math.sqrt(3),Rl=Math.tan(30*Ha);Ca.transition=function(t){for(var n,e,r=Dl||++Il,i=na(t),o=[],a=Pl||{time:Date.now(),ease:Ar,delay:0,duration:250},u=-1,l=this.length;++u<l;){o.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(e=s[c])&&ea(e,c,i,r,a),n.push(e)}return Ko(o,i,r)},Ca.interrupt=function(t){return this.each(null==t?Ul:Go(na(t)))};var Dl,Pl,Ul=Go(na()),Fl=[],Il=0;Fl.call=Ca.call,Fl.empty=Ca.empty,Fl.node=Ca.node,Fl.size=Ca.size,ca.transition=function(t,n){return t&&t.transition?Dl?t.transition(n):t:ca.selection().transition(t)},ca.transition.prototype=Fl,Fl.select=function(t){var n,e,r,i=this.id,o=this.namespace,a=[];t=C(t);for(var u=-1,l=this.length;++u<l;){a.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(r=s[c])&&(e=t.call(r,r.__data__,c,u))?("__data__"in r&&(e.__data__=r.__data__),ea(e,c,o,i,r[o][i]),n.push(e)):n.push(null)}return Ko(a,o,i)},Fl.selectAll=function(t){var n,e,r,i,o,a=this.id,u=this.namespace,l=[];t=z(t);for(var s=-1,c=this.length;++s<c;)for(var f=this[s],h=-1,p=f.length;++h<p;)if(r=f[h]){o=r[u][a],e=t.call(r,r.__data__,h,s),l.push(n=[]);for(var d=-1,g=e.length;++d<g;)(i=e[d])&&ea(i,d,u,a,o),n.push(i)}return Ko(l,u,a)},Fl.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]);for(var e=this[o],u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return Ko(i,this.namespace,this.id)},Fl.tween=function(t,n){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(t):V(this,null==n?function(n){n[r][e].tween.remove(t)}:function(i){i[r][e].tween.set(t,n)})},Fl.attr=function(t,n){function e(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(u);return e!==t&&(n=a(e,t),function(t){this.setAttribute(u,n(t))})})}function o(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(u.space,u.local);return e!==t&&(n=a(e,t),function(t){this.setAttributeNS(u.space,u.local,n(t))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var a="transform"==t?Jr:br,u=ca.ns.qualify(t);return Qo(this,"attr."+t,n,u.local?o:i)},Fl.attrTween=function(t,n){function e(t,e){var r=n.call(this,t,e,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,e){var r=n.call(this,t,e,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=ca.ns.qualify(t);return this.tween("attr."+t,i.local?r:e)},Fl.style=function(t,n,r){function i(){this.style.removeProperty(t)}function o(n){return null==n?i:(n+="",function(){var i,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(i=br(o,n),function(n){this.style.setProperty(t,i(n),r)})})}var a=arguments.length;if(a<3){if("string"!=typeof t){a<2&&(n="");for(r in t)this.style(r,t[r],n);return this}r=""}return Qo(this,"style."+t,n,o)},Fl.styleTween=function(t,n,r){function i(i,o){var a=n.call(this,i,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(n){this.style.setProperty(t,a(n),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Fl.text=function(t){return Qo(this,"text",t,ta)},Fl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Fl.ease=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].ease:("function"!=typeof t&&(t=ca.ease.apply(ca,arguments)),V(this,function(r){r[e][n].ease=t}))},Fl.delay=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].delay:V(this,"function"==typeof t?function(r,i,o){r[e][n].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[e][n].delay=t}))},Fl.duration=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].duration:V(this,"function"==typeof t?function(r,i,o){r[e][n].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))},Fl.each=function(t,n){var e=this.id,r=this.namespace;if(arguments.length<2){var i=Pl,o=Dl;try{Dl=e,V(this,function(n,i,o){Pl=n[r][e],t.call(n,n.__data__,i,o)})}finally{Pl=i,Dl=o}}else V(this,function(i){var o=i[r][e];(o.event||(o.event=ca.dispatch("start","end","interrupt"))).on(t,n)});return this},Fl.transition=function(){for(var t,n,e,r,i=this.id,o=++Il,a=this.namespace,u=[],l=0,s=this.length;l<s;l++){u.push(t=[]);for(var n=this[l],c=0,f=n.length;c<f;c++)(e=n[c])&&(r=e[a][i],ea(e,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(e)}return Ko(u,a,o)},ca.svg.axis=function(){function t(t){t.each(function(){var t,s=ca.select(this),c=this.__chart__||e,f=this.__chart__=e.copy(),h=null==l?f.ticks?f.ticks.apply(f,u):f.domain():l,p=null==n?f.tickFormat?f.tickFormat.apply(f,u):x:n,d=s.selectAll(".tick").data(h,f),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ra),v=ca.transition(d.exit()).style("opacity",Ra).remove(),y=ca.transition(d.order()).style("opacity",1),m=Math.max(i,0)+a,_=Bi(f),b=s.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),ca.transition(b));g.append("line"),g.append("text");var M,k,S,N,E=g.select("line"),A=y.select("line"),C=d.select("text").text(p),z=g.select("text"),T=y.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ra,M="x",S="y",k="x2",N="y2",C.attr("dy",q<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+q*o+"V0H"+_[1]+"V"+q*o)):(t=ia,M="y",S="x",k="y2",N="x2",C.attr("dy",".32em").style("text-anchor",q<0?"end":"start"),w.attr("d","M"+q*o+","+_[0]+"H0V"+_[1]+"H"+q*o)),E.attr(N,q*i),z.attr(S,q*m),A.attr(k,0).attr(N,q*i),T.attr(M,0).attr(S,q*m),f.rangeBand){var L=f,O=L.rangeBand()/2;c=f=function(t){return L(t)+O}}else c.rangeBand?c=f:v.call(t,f,c);g.call(t,c,f),y.call(t,f,f)})}var n,e=ca.scale.linear(),r=Hl,i=6,o=6,a=3,u=[10],l=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in Yl?n+"":Hl,t):r},t.ticks=function(){return arguments.length?(u=ha(arguments),t):u},t.tickValues=function(n){return arguments.length?(l=n,t):l},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(i=+n,o=+arguments[e-1],t):i},t.innerTickSize=function(n){return arguments.length?(i=+n,t):i},t.outerTickSize=function(n){return arguments.length?(o=+n,t):o},t.tickPadding=function(n){return arguments.length?(a=+n,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Hl="bottom",Yl={top:1,right:1,bottom:1,left:1};ca.svg.brush=function(){function t(e){e.each(function(){var e=ca.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=e.selectAll(".resize").data(g,x);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Vl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var l,f=ca.transition(e),h=ca.transition(a);s&&(l=Bi(s),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=Bi(c),h.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){32==ca.event.keyCode&&(C||(x=null,T[0]-=f[1],T[1]-=h[1],C=2),S())}function g(){32==ca.event.keyCode&&2==C&&(T[0]+=f[1],T[1]+=h[1],C=0,S())}function v(){var t=ca.mouse(b),e=!1;_&&(t[0]+=_[0],t[1]+=_[1]),C||(ca.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),T[0]=f[+(t[0]<x[0])],T[1]=h[+(t[1]<x[1])]):x=null),E&&y(t,s,0)&&(r(k),e=!0),A&&y(t,c,1)&&(i(k),e=!0),e&&(n(k),M({type:"brush",mode:C?"move":"resize"}))}function y(t,n,e){var r,i,o=Bi(n),l=o[0],s=o[1],c=T[e],g=e?h:f,v=g[1]-g[0];if(C&&(l-=c,s-=v+c),r=(e?d:p)?Math.max(l,Math.min(s,t[e])):t[e],C?i=(r+=c)+v:(x&&(c=Math.max(l,Math.min(s,2*x[e]-r))),c<r?(i=r,r=c):i=c),g[0]!=r||g[1]!=i)return e?u=null:a=null,g[0]=r,g[1]=i,!0}function m(){v(),k.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ca.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),M({type:"brushend"})}var x,_,b=this,w=ca.select(ca.event.target),M=l.of(b,arguments),k=ca.select(b),N=w.datum(),E=!/^(n|s)$/.test(N)&&s,A=!/^(e|w)$/.test(N)&&c,C=w.classed("extent"),z=W(b),T=ca.mouse(b),q=ca.select(e(b)).on("keydown.brush",o).on("keyup.brush",g);if(ca.event.changedTouches?q.on("touchmove.brush",v).on("touchend.brush",m):q.on("mousemove.brush",v).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),C)T[0]=f[0]-T[0],T[1]=h[0]-T[1];else if(N){var L=+/w$/.test(N),O=+/^n/.test(N);_=[f[1-L]-T[0],h[1-O]-T[1]],
T[0]=f[L],T[1]=h[O]}else ca.event.altKey&&(x=T.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ca.select("body").style("cursor",w.style("cursor")),M({type:"brushstart"}),v()}var a,u,l=E(t,"brushstart","brush","brushend"),s=null,c=null,f=[0,0],h=[0,0],p=!0,d=!0,g=Zl[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),n={x:f,y:h,i:a,j:u},e=this.__chart__||n;this.__chart__=n,Dl?ca.select(this).transition().each("start.brush",function(){a=e.i,u=e.j,f=e.x,h=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=wr(f,n.x),r=wr(h,n.y);return a=u=null,function(i){f=n.x=e(i),h=n.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=n.i,u=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(s=n,g=Zl[!s<<1|!c],t):s},t.y=function(n){return arguments.length?(c=n,g=Zl[!s<<1|!c],t):c},t.clamp=function(n){return arguments.length?(s&&c?(p=!!n[0],d=!!n[1]):s?p=!!n:c&&(d=!!n),t):s&&c?[p,d]:s?p:c?d:null},t.extent=function(n){var e,r,i,o,l;return arguments.length?(s&&(e=n[0],r=n[1],c&&(e=e[0],r=r[0]),a=[e,r],s.invert&&(e=s(e),r=s(r)),r<e&&(l=e,e=r,r=l),e==f[0]&&r==f[1]||(f=[e,r])),c&&(i=n[0],o=n[1],s&&(i=i[1],o=o[1]),u=[i,o],c.invert&&(i=c(i),o=c(o)),o<i&&(l=i,i=o,o=l),i==h[0]&&o==h[1]||(h=[i,o])),t):(s&&(a?(e=a[0],r=a[1]):(e=f[0],r=f[1],s.invert&&(e=s.invert(e),r=s.invert(r)),r<e&&(l=e,e=r,r=l))),c&&(u?(i=u[0],o=u[1]):(i=h[0],o=h[1],c.invert&&(i=c.invert(i),o=c.invert(o)),o<i&&(l=i,i=o,o=l))),s&&c?[[e,i],[r,o]]:s?[e,r]:c&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],a=u=null),t},t.empty=function(){return!!s&&f[0]==f[1]||!!c&&h[0]==h[1]},ca.rebind(t,l,"on")};var Vl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bl=fu.format=yu.timeFormat,Xl=Bl.utc,$l=Xl("%Y-%m-%dT%H:%M:%S.%LZ");Bl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?oa:$l,oa.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},oa.toString=$l.toString,fu.second=It(function(t){return new hu(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),fu.seconds=fu.second.range,fu.seconds.utc=fu.second.utc.range,fu.minute=It(function(t){return new hu(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),fu.minutes=fu.minute.range,fu.minutes.utc=fu.minute.utc.range,fu.hour=It(function(t){var n=t.getTimezoneOffset()/60;return new hu(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),fu.hours=fu.hour.range,fu.hours.utc=fu.hour.utc.range,fu.month=It(function(t){return t=fu.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),fu.months=fu.month.range,fu.months.utc=fu.month.utc.range;var Jl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wl=[[fu.second,1],[fu.second,5],[fu.second,15],[fu.second,30],[fu.minute,1],[fu.minute,5],[fu.minute,15],[fu.minute,30],[fu.hour,1],[fu.hour,3],[fu.hour,6],[fu.hour,12],[fu.day,1],[fu.day,2],[fu.week,1],[fu.month,1],[fu.month,3],[fu.year,1]],Gl=Bl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Tn]]),Kl={range:function(t,n,e){return ca.range(Math.ceil(t/e)*e,+n,e).map(ua)},floor:x,ceil:x};Wl.year=fu.year,fu.scale=function(){return aa(ca.scale.linear(),Wl,Gl)};var Ql=Wl.map(function(t){return[t[0].utc,t[1]]}),ts=Xl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Tn]]);Ql.year=fu.year.utc,fu.scale.utc=function(){return aa(ca.scale.linear(),Ql,ts)},ca.text=At(function(t){return t.responseText}),ca.json=function(t,n){return Ct(t,"application/json",la,n)},ca.html=function(t,n){return Ct(t,"text/html",sa,n)},ca.xml=At(function(t){return t.responseXML}),t.exports?t.exports=ca:this.d3=ca}()});ot(".action-header {\n  text-align:center;\n  font-size:16px;\n  font-weight:bold;\n  padding:10px;\n}\n\n.url-depth, .kw-depth {\n  width:50%;\n  display:inline-block;\n}\n",void 0);var sr=[],cr=lr.range(0,24).map(function(t){return String(t).length>1?String(t):"0"+t}),fr=[0,20,40],hr=lr.range(0,24).reduce(function(t,n){return fr.map(function(e){t[n+":"+e]=0}),sr=sr.concat(fr.map(function(t){return n+":"+t})),t},{}),pr=["that","this","what","best","most","from","your","have","first","will","than","says","like","into","after","with"],dr=function(t){function n(t){Ye(this,n);var e=Be(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._target=t,e}return Ze(n,t),Ve(n,[{key:"props",value:function(){return["raw","data","urls","domain","use_domain"]}},{key:"draw",value:function(){var t=this._target;at(t,"action-header").text("Explore and Refine");var n=dt(this.raw()),e=gt(this.raw()),r=vt(e),i=yt(n),o=mt(i,this.domain());pt(at(t,"url-depth")).label(this.use_domain()?"Domain":"URL").data(this.use_domain()?r:i).split(this.domain()).on("stage-filter",this.on("stage-filter")).draw(),pt(at(t,"kw-depth")).label("Keywords").data(o).on("stage-filter",this.on("stage-filter")).draw()}}]),n}(Je);ot(".vertical-options {\n  width:120px;\n  text-align:center;\n}\n\n.vertical-options .show-button {\n  line-height:18px;\n  width:100px;\n  font-size:10px;\n  margin-bottom:5px;\n}\n.vertical-options .show-button.selected {\n  background: #e3ebf0;  \n  color: #555;\n}\n",void 0);var gr=function(t){function n(t){Ye(this,n);var e=Be(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e._target=t,e._options=[],e._wrapper_class="vertical-options",e}return Ze(n,t),Ve(n,[{key:"props",value:function(){return["options","wrapper_class"]}},{key:"draw",value:function(){var t=at(this._target,this.wrapper_class(),"div",this.options());return $e(t,".show-button","a",this.options(),function(t){return t.key}).classed("show-button",!0).classed("selected",function(t){return t.selected}).text(function(t){return t.key}).on("click",this.on("click")),this}}]),n}(Je),vr=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},yr=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),mr=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(function(t){return r?[r]:[t]},i||function(t){return[t]});return o.enter().append(e),o},xr=function(t,n,e,r,i){var e=e||"div",o=t.selectAll(n).data(r||function(t){return t},i||function(t){return t});return o.enter().append(e),o},_r=function(){function t(n){var e=this;vr(this,t),this._target=n,this._on={},this.props().map(function(t){e[t]=Mt.bind(e,t)})}return yr(t,[{key:"props",value:function(){return["data"]}},{key:"on",value:function(t,n){return void 0===n?this._on[t]||wt:(this._on[t]=n,this)}}]),t}(),br=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},wr=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),Mr=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":se(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},kr=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":se(n))&&"function"!=typeof n?t:n},Sr=function(t){function n(t){br(this,n);var e=kr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._wrapper_class="ba-timeseries-wrap",e}return Mr(n,t),wr(n,[{key:"props",value:function(){return["data","before","after","wrapper_class"]}},{key:"draw",value:function(){var t=250/this.data().length,n=this.before(),e=this.after(),r=bt(this._target,this.wrapper_class(),"svg").style("display","block").style("margin","auto").style("margin-bottom","30px").attr("width","250px").attr("height","70px");return kt(r,this.data(),250),bt(r,"middle","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",0).attr("y2",55).attr("x1",125).attr("x2",125),bt(r,"middle-text","text").attr("x",125).attr("y",67).style("text-anchor","middle").text("On-site"),bt(r,"before","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",39).attr("y2",45).attr("x1",t*n).attr("x2",t*n),bt(r,"before-text","text").attr("x",t*n-8).attr("y",48).style("text-anchor","end").text("Consideration"),bt(r,"window","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",45).attr("y2",45).attr("x1",t*n).attr("x2",t*(e+1)+1),bt(r,"after","line").style("stroke-dasharray","1,5").attr("stroke-width",1).attr("stroke","black").attr("y1",39).attr("y2",45).attr("x1",t*(e+1)).attr("x2",t*(e+1)),bt(r,"after-text","text").attr("x",t*(e+1)+8).attr("y",48).style("text-anchor","start").text("Validation"),this}}]),n}(_r),Nr=function(t){function n(t){br(this,n);var e=kr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.target=t,e}return Mr(n,t),wr(n,[{key:"props",value:function(){return["data","max"]}},{key:"draw",value:function(){var t=(this.target.style("width").replace("px","")||this.offsetWidth)-50,n=d3.scale.linear().range([0,t]).domain([0,this.max()]);this.target.text()&&this.target.text("");var e=mr(this.target,".bullet","div",this.data(),function(t){return 1}).classed("bullet",!0).style("margin-top","3px"),r=mr(e,"svg","svg",!1,function(t){return 1}).attr("width",t).attr("height",28);return mr(r,".bar-1","rect",!1,function(t){return 1}).classed("bar-1",!0).attr("x",0).attr("width",function(t){return n(t.pop_percent)}).attr("height",28).attr("fill","#888"),mr(r,".bar-2","rect",!1,function(t){return 1}).classed("bar-2",!0).attr("x",0).attr("y",7).attr("width",function(t){return n(t.sample_percent_norm)}).attr("height",14).attr("fill","rgb(8, 29, 88)"),this}}]),n}(_r),Er=function(t){function n(t){return ce(this,n),pe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return he(n,t),fe(n,[{key:"props",value:function(){return["data","options","sort","ascending","top"]}},{key:"draw",value:function(){var t=this,n=this,r=this._target,i=this.options(),o=this.data(),a=i.filter(function(t){return t.selected}),u=a.length?a[0]:i[0],l=[{key:"key",value:u.key.replace("Top ",""),locked:!0,width:"200px"},{key:"sample_percent",value:"Segment",selected:!1},{key:"real_pop_percent",value:"Baseline",selected:!1},{key:"ratio",value:"Ratio",selected:!1},{key:"importance",value:"Importance",selected:!1},{key:"value",value:"Segment versus Baseline",locked:!0}],s=d3.max(u.values,function(t){return t.sample_percent_norm}),c=d3.max(u.values,function(t){return t.pop_percent}),f=Math.max(s,c),h=this.sort(),p=this.ascending(),d=l.filter(function(t){return t.key==h}),g=d.length?d[0].key:"importance";it(r).datasets(i).skip_values(!0).on("dataset.change",function(n){t.on("select")(n)}).draw(),r.selectAll(".vendor-domains-bar-desc").remove(),r.datum(o);var v=e(r,"legend").style("display","inline-block").style("margin-left","358px");e(v,"legend-label","span").style("text-transform","uppercase").style("font-weight","bold").style("line-height","30px").style("vertical-align","top").style("margin-right","10px").text("Key");var y=e(v,"graphic").style("width","300px").style("display","inline-block");Et(y).max(f).data({pop_percent:f/3*2,sample_percent_norm:f}).draw();var m=y.selectAll("svg").attr("width",400).attr("height",68);me(m,"line.segment","line").classed("segment",!0).attr("stroke-width",1).attr("stroke-dasharray","1 3").attr("stroke","#333").attr("y2",14).attr("y1",14).attr("x2",250).attr("x1",265),me(m,"text.segment","text").classed("segment",!0).attr("y",18).attr("x",270).style("text-anchor","start").style("font-weight","bold").text("Users in segment"),me(m,"line.population","line").classed("population",!0).attr("stroke-width",1).attr("stroke-dasharray","1 3").attr("stroke","#333").attr("y2",48).attr("y1",27).attr("x2",140).attr("x1",140),me(m,"text.population","text").classed("population",!0).style("text-anchor","start").style("font-weight","bold").attr("y",53).attr("x",150).text("Users in population");var x="Top Domains"==u.key?"domain":"parent_category_name";return X(r).top(this.top()).data(u).headers(l).sort(g,p).on("sort",this.on("sort")).option_text("&#65291;").on("expand",function(t,e){var r=this.parentElement.__data__.full_urls.filter(function(n){return n[x]==t.key});if("domain"==x){var i=nt(r);xt(e).domain(r[0].domain).raw(r).data(i).urls(t.urls).on("stage-filter",function(t){n.on("stage-filter")(t)}).draw()}if("parent_category_name"==x){var i=nt(r);xt(e).domain("/").use_domain(!0).raw(r).data(i).on("stage-filter",n.on("stage-filter")).draw()}}).hidden_fields(["urls","percent_unique","sample_percent_norm","pop_percent","tf_idf","parent_category_name"]).render("ratio",function(t){this.innerText=Math.trunc(100*this.parentNode.__data__.ratio)/100+"x"}).render("value",function(t){Et(d3.select(this)).max(f).data(this.parentNode.__data__).draw()}).draw(),this}}]),n}(_e),Ar=function(){function t(n){ce(this,t),this._target=n,this._key_accessor="key",this._value_accessor="value",this._bar_height=20,this._bar_width=150,this._show_labels=!1}return fe(t,[{key:"show_labels",value:function(t){return A.bind(this)("show_labels",t)}},{key:"key_accessor",value:function(t){return A.bind(this)("key_accessor",t)}},{key:"value_accessor",value:function(t){return A.bind(this)("value_accessor",t)}},{key:"bar_height",value:function(t){return A.bind(this)("bar_height",t)}},{key:"bar_width",value:function(t){return A.bind(this)("bar_width",t)}},{key:"data",value:function(t){return A.bind(this)("data",t)}},{key:"title",value:function(t){return A.bind(this)("title",t)}},{key:"draw",value:function(){var t=me(this._target,".diff-wrap","div",!1,function(){return 1}).classed("diff-wrap",!0);me(t,"h3","h3").text(this._title);var n=me(t,".svg-wrap","div",this._data,function(t){return 1}).classed("svg-wrap",!0),e=this.key_accessor(),r=this.value_accessor(),i=this.bar_height(),o=this.bar_width(),a=this._data.map(function(t){return t[e]}),u=d3.max(this._data,function(t){return t[r]}),l=d3.max(this._data,function(t){return-t[r]}),s=d3.scale.linear().domain([0,l]).range([0,o]),c=d3.scale.linear().domain([0,u]).range([0,o]),f=d3.scale.linear().domain([0,a.length]).range([0,a.length*i]),h=me(n,"svg","svg",!1,function(){return 1}).attr({width:3*o+(this.show_labels()?60:0),height:a.length*i+10}),p=me(h,"g.canvas","g",!1,function(){return 1}).attr("class","canvas").attr("transform",this.show_labels()?"translate(30,0)":void 0);d3.svg.axis().orient("bottom").scale(c);var d=d3.svg.axis();d.orient("left").scale(f).tickSize(2).tickFormat(function(t,n){return a[n]}).tickValues(d3.range(a.length)),p.selectAll("g.y").remove();var g=me(p,"g.y","g").attr("class","y axis").attr("transform","translate("+(o+o/2)+",15)").attr("id","yaxis").call(d);g.selectAll("text").attr("style","text-anchor: middle;");var v=me(p,"g.chart","g").attr("class","chart").attr("transform","translate("+2*o+",0)").attr("id","bars"),y=xe(v,".pop-bar","rect",function(t){return t},function(t){return t.key}).attr("class","pop-bar").attr("height",i-4).attr({x:0,y:function(t,n){return f(n)+8.5}}).style("fill","#388e3c").attr("width",function(t){return c(t[r])});v.selectAll(".pop-bar-text").remove();var m=(xe(v,".pop-bar-text","text",function(t){return t},function(t){return t.key}).attr("class","pop-bar-text").attr("height",i-4).style("font-size",".9em").attr({x:function(t){return c(t[r])+3},y:function(t,n){return f(n)+i}}).text(function(t){return t[r]>0?d3.format("%")(t[r]):""}),me(p,"g.chart2","g").attr("class","chart2").attr("transform","translate(0,0)").attr("id","bars")),x=xe(m,".samp-bar","rect",function(t){return t},function(t){return t.key}).attr("class","samp-bar").attr("height",i-4).attr({x:function(t){return o-s(-t[r])},y:function(t,n){return f(n)+8.5}}).style("fill","#d32f2f").attr("width",function(t){return s(-t[r])});m.selectAll(".pop-bar-text").remove();xe(m,".pop-bar-text","text",function(t){return t},function(t){return t.key}).attr("class","pop-bar-text").attr("height",i-4).style("text-anchor","end").style("font-size",".9em").attr({x:function(t){return o-s(-t[r])-3},y:function(t,n){return f(n)+i}}).text(function(t){return t[r]<0?d3.format("%")(t[r]):""});return g.exit().remove(),v.exit().remove(),m.exit().remove(),y.exit().remove(),x.exit().remove(),this}}]),t}(),Cr=(function(){function t(n){ce(this,t),this._target=n,this._key_accessor="key",this._height=20,this._space=14,this._middle=180,this._legend_width=80,this._buckets=[10,30,60,120,180,360,720,1440,2880,5760,10080].map(function(t){return 60*t}),this._rows=[]}fe(t,[{key:"key_accessor",value:function(t){return A.bind(this)("key_accessor",t)}},{key:"value_accessor",value:function(t){return A.bind(this)("value_accessor",t)}},{key:"height",value:function(t){return A.bind(this)("height",t)}},{key:"space",value:function(t){return A.bind(this)("space",t)}},{key:"middle",value:function(t){return A.bind(this)("middle",t)}},{key:"buckets",value:function(t){return A.bind(this)("buckets",t)}},{key:"rows",value:function(t){return A.bind(this)("rows",t)}},{key:"after",value:function(t){return A.bind(this)("after",t)}},{key:"data",value:function(t){return A.bind(this)("data",t)}},{key:"title",value:function(t){return A.bind(this)("title",t)}},{key:"buildScales",value:function(){var t=this.rows(),n=this.buckets(),e=this.height(),r=this.space();this._yscale=d3.scale.linear().domain([0,t.length]).range([0,t.length*e]),this._xscale=d3.scale.ordinal().domain(n).range(d3.range(0,n.length*(e+r),e+r)),this._xscalereverse=d3.scale.ordinal().domain(n.reverse()).range(d3.range(0,n.length*(e+r),e+r)),this._rscale=d3.scale.pow().exponent(.5).domain([0,1]).range([.35,1]),this._oscale=d3.scale.quantize().domain([-1,1]).range(["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"])}},{key:"drawLegend",value:function(){var t=this._canvas,n=this.buckets(),e=this.height(),r=this.space(),i=this.middle(),o=this._legend_width,a=this._rscale,u=this._oscale,l=me(t,"g.legend","g").attr("class","legend").attr("transform","translate("+(n.length*(e+r)*2+i-310)+",-130)"),s=me(l,"g.size","g").attr("class","size").attr("transform","translate("+(o+10)+",0)");me(s,"text.more","text").attr("class","more axis").attr("x",-o).html("more activity").style("text-transform","uppercase").style("font-size",".6em").style("font-weight","bold").attr("dominant-baseline","central"),me(s,"text.more-arrow","text").attr("class","more-arrow axis").attr("x",-o-10).html("&#9664;").style("text-transform","uppercase").style("font-size",".6em").style("font-weight","bold").style("font-size",".7em").attr("dominant-baseline","central"),me(s,"text.less","text").attr("class","less axis").attr("x",5*(e+4)+o).style("text-anchor","end").html("less activity").style("text-transform","uppercase").style("font-size",".6em").style("font-weight","bold").attr("dominant-baseline","central"),me(s,"text.less-arrow","text").attr("class","less-arrow axis").attr("x",5*(e+4)+o+10).html("&#9654;").style("text-anchor","end").style("text-transform","uppercase").style("font-size",".6em").style("font-weight","bold").style("font-size",".7em").attr("dominant-baseline","central"),xe(s,"circle","circle",[1,.6,.3,.1,0]).attr("r",function(t){return(e-2)/2*a(t)}).attr("cx",function(t,n){return(e+4)*n+e/2}).attr("stroke","grey").attr("fill","none");var s=me(l,"g.importance","g").attr("class","importance").attr("transform","translate("+(o+10)+",25)");me(s,"text.more","text").attr("class","more axis").attr("x",-o).html("more important").style("text-transform","uppercase").style("font-size",".6em").style("font-weight","bold").attr("dominant-baseline","central"),me(s,"text.more-arrow","text").attr("class","more-arrow axis").attr("x",-o-10).html("&#9664;").style("text-transform","uppercase").style("font-size",".6em").style("font-weight","bold").style("font-size",".7em").attr("dominant-baseline","central"),me(s,"text.less","text").attr("class","less axis").attr("x",5*(e+4)+o).style("text-anchor","end").html("less important").style("text-transform","uppercase").style("font-size",".6em").style("font-weight","bold").attr("dominant-baseline","central"),me(s,"text.less-arrow","text").attr("class","less-arrow axis").attr("x",5*(e+4)+o+10).html("&#9654;").style("text-anchor","end").style("text-transform","uppercase").style("font-size",".6em").style("font-weight","bold").style("font-size",".7em").attr("dominant-baseline","central"),xe(s,"circle","circle",[1,.75,.5,.25,0]).attr("r",e/2-2).attr("fill",function(t){return u(t)}).attr("opacity",function(t){return a(t/2+.2)}).attr("cx",function(t,n){return(e+4)*n+e/2})}},{key:"drawAxes",value:function(){var t=this._canvas,n=this.buckets(),e=this.height(),r=this.space(),i=this.middle(),o=(this._legend_width,this._rscale,this._oscale,this._xscale),a=this._yscale,u=this._xscalereverse,l=this._rows,s=d3.svg.axis();s.orient("top").scale(u).tickFormat(function(t){return 3600==t?"1 hour":t<3600?t/60+" mins":86400==t?"1 day":t>86400?t/86400+" days":t/3600+" hours"});var c=me(t,"g.x.before","g").attr("class","x axis before").attr("transform","translate("+(e+r)+",-4)").attr("id","xaxis").call(s);c.selectAll("text").attr("y",-8).attr("x",-8).attr("dy",".35em").attr("transform","rotate(45)").style("text-anchor","end"),c.selectAll("line").attr("style","stroke:black"),c.selectAll("path").attr("style","stroke:black; display:inherit"),me(c,"text.title","text").attr("class","title").attr("x",n.length*(e+r)/2-e+r).attr("y",-53).attr("transform",void 0).style("text-anchor","middle").style("text-transform","uppercase").style("font-weight","bold").text("before arriving");var s=d3.svg.axis();s.orient("top").scale(o).tickFormat(function(t){return 3600==t?"1 hour":t<3600?t/60+" mins":86400==t?"1 day":t>86400?t/86400+" days":t/3600+" hours"});var c=me(t,"g.x.after","g").attr("class","x axis after").attr("transform","translate("+(n.length*(e+r)+i)+",0)").attr("id","xaxis").call(s);c.selectAll("text").attr("y",-8).attr("x",8).attr("dy",".35em").attr("transform","rotate(-45)").style("text-anchor","start"),c.selectAll("line").attr("style","stroke:black"),c.selectAll("path").attr("style","stroke:black; display:inherit"),me(c,"text.title","text").attr("class","title").attr("x",n.length*(e+r)/2).attr("y",-53).attr("transform",void 0).style("text-anchor","middle").style("text-transform","uppercase").style("font-weight","bold").text("after leaving");var f=d3.svg.axis();f.orient("left").scale(a).tickSize(2).tickFormat(function(t,n){return l[n].key}).tickValues(d3.range(l.length));var h=me(t,"g.y","g").attr("class","y axis").attr("transform","translate("+(n.length*(e+r)+0)+",15)").attr("id","yaxis");h.call(f),h.selectAll("line").attr("x2",18).attr("x1",22).style("stroke-dasharray","0").remove(),h.selectAll("path").attr("x2",18).attr("transform","translate(18,0)"),h.selectAll("text").attr("style","text-anchor: middle; font-weight:bold; fill: #333").attr("x",i/2)}},{key:"draw",value:function(){var t=this.buckets(),n=this.height(),e=this.space(),r=this.middle(),i=(this._legend_width,this.rows()),o=me(this._target,"svg","svg",!1,function(){return 1}).style("margin-left","10px").style("margin-top","-5px").attr({width:t.length*(n+e)*2+r,height:i.length*n+165}).attr("xmlns","http://www.w3.org/2000/svg");this._svg=o,this._canvas=me(o,".canvas","g").attr("class","canvas").attr("transform","translate(0,140)"),this.buildScales(),this.drawLegend(),this.drawAxes();var a=this._canvas,u=this._rscale,l=this._oscale,s=this._xscale,c=this._yscale,i=(this._xscalereverse,this.rows()),f=me(a,"g.chart-before","g",this.rows(),function(){return 1}).attr("class","chart-before").attr("transform","translate("+t.length*(n+e)+",0)").attr("id","bars"),i=xe(f,".row","g",function(t){return t},function(t){return t.key}).attr("class","row").attr({transform:function(t,n){return"translate(0,"+(c(n)+7.5)+")"}}).attr({label:function(t,n){return t.key}});i.exit().remove();var h=(xe(i,".pop-bar","circle",function(t){return t.values},function(t){return t.key}).attr("class","pop-bar").attr("cy",(n-2)/2).attr({cx:function(t,n){return-s(t.key)}}).attr("opacity",".8").attr("r",function(t){return n/2*u(t.norm_time)}).style("fill",function(t){return l(t.percent_diff)}),me(a,"g.chart-after","g",this._after,function(){return 1}).attr("class","chart-after").attr("transform","translate("+(t.length*(n+e)+r)+",0)").attr("id","bars")),i=xe(h,".row","g",function(t){return t},function(t){return t.key}).attr("class","row").attr({transform:function(t,n){return"translate(0,"+(c(n)+7.5)+")"}}).attr({label:function(t,n){return t.key}});i.exit().remove();xe(i,".pop-bar","circle",function(t){return t.values},function(t){return t.key}).attr("class","pop-bar").attr("cy",(n-2)/2).attr({cx:function(t,n){return s(t.key)}}).attr("r",function(t){return(n-2)/2*u(t.norm_time)}).style("fill",function(t){return l(t.percent_diff)}).attr("opacity",".8");return this}}])}(),function(){function t(n){ce(this,t),this._target=n,this._on={},this._buckets=[0,10,30,60,120,180,360,720,1440,2880,5760,10080].map(function(t){return 60*t}),this._width=370,this._height=250,this._middle=180,this._color=d3.scale.ordinal().range(["#999","#aaa","#bbb","#ccc","#ddd","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","rgba(33, 113, 181,.9)","rgba(8, 81, 156,.91)","#08519c","rgba(8, 48, 107,.9)","#08306b"].reverse())}return fe(t,[{key:"key_accessor",value:function(t){return A.bind(this)("key_accessor",t)}},{key:"value_accessor",value:function(t){return A.bind(this)("value_accessor",t)}},{key:"height",value:function(t){return A.bind(this)("height",t)}},{key:"width",value:function(t){return A.bind(this)("width",t)}},{key:"middle",value:function(t){return A.bind(this)("middle",t)}},{key:"skip_middle",value:function(t){return A.bind(this)("skip_middle",t)}},{key:"data",value:function(t){return A.bind(this)("data",t)}},{key:"title",value:function(t){return A.bind(this)("title",t)}},{key:"draw",value:function(){function t(t,n){!1===t&&d.on("category.hover")(!1),E.style("opacity",".5"),M.style("opacity",".5"),E.filter(function(n){return n[0].key==t}).style("opacity",void 0),M.filter(function(n){return n[0].key==t}).style("opacity",void 0),d3.select(this).style("opacity",void 0),me(k,"text","text").style("text-anchor","middle").style("text-transform","uppercase").style("font-weight","bold").style("font-size","10px").style("color","#333").style("opacity",".65").text(t);var e=me(k,"g","g");d.on("category.hover").bind(e.node())(t,n)}function n(n){t.bind(this)(n[0].key)}function e(n){t.bind(this)(!1),E.style("opacity",void 0),M.style("opacity",void 0)}function i(t){var i=E.on("mouseover")==n;E.on("mouseover",i?r:n),E.on("mouseout",i?r:e),M.on("mouseover",i?r:n),M.on("mouseout",i?r:e)}var o=this._data,a=o.order,u=this._buckets,l=o.before_stacked,s=o.after_stacked,c=this._height,f=this._width,h=this._target,p=this._color,d=this;p.domain(a);var g=d3.scale.linear().range([c,0]).domain([0,d3.max(l,function(t){return d3.max(t,function(t){return t.y0+t.y})})]),v=d3.scale.ordinal().domain(u).range(d3.range(0,f+10,f/(u.length-1))),y=d3.scale.ordinal().domain(u.slice().reverse()).range(d3.range(0,f+10,f/(u.length-1)));this._before_scale=y,this._after_scale=v;var m=d3.svg.area().interpolate("zero").x(function(t){return y(t.x)}).y0(function(t){return g(t.y0)}).y1(function(t){return g(t.y0+t.y)}),x=d3.svg.area().interpolate("linear").x(function(t){return v(t.x)}).y0(function(t){return g(t.y0)}).y1(function(t){return g(t.y0+t.y)}),_=me(h,"svg","svg").attr("width",2*f+this._middle).attr("height",c+100);this._svg=_;var b=me(_,".before-canvas","g").attr("class","before-canvas").attr("transform","translate(-1,60)"),w=me(b,"g","g"),M=xe(w,"path","path",l,function(t,n){return t[0].key}).attr("d",m).attr("class",function(t){return t[0].key}).style("fill",function(t,n){return p(t[0].key)}).on("mouseover",n).on("mouseout",e).on("click",i);M.exit().remove();var k=(xe(w,"rect","rect",u.slice().reverse(),function(t,n){return n}).attr("x",function(t){return y(t)}).attr("width",1).attr("height",c).attr("y",0).attr("opacity","0"),me(_,".middle-canvas","g").attr("class","middle-canvas").attr("transform","translate("+(f+this._middle/2)+",60)").style("display",this._skip_middle?"none":"inherit")),S=me(_,".after-canvas","g").attr("class","after-canvas").attr("transform","translate("+(f+this._middle)+",60)"),N=me(S,"g","g"),E=xe(N,"path","path",s,function(t,n){return t[0].key}).attr("d",x).attr("class",function(t){return t[0].key}).style("fill",function(t,n){return p(t[0].key)}).on("mouseover",n).on("mouseout",e).on("click",i);E.exit().remove();var A=Tt(b,y,"before arriving",f);A.selectAll("text").filter(function(t){return 0==t}).remove();var A=Tt(S,v,"after leaving",f);return A.selectAll("text:not(.title)").attr("transform","rotate(-45)").attr("x",20).attr("y",-25),A.selectAll("text").filter(function(t){return 0==t}).remove(),this}},{key:"on",value:function(t,n){return void 0===n?this._on[t]||r:(this._on[t]=n,this)}}]),t}()),zr=function(t){function n(t){return ce(this,n),pe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return he(n,t),fe(n,[{key:"props",value:function(){return["data","options","sort","ascending","top"]}},{key:"draw",value:function(){var t=this._target,n=this.data(),r=n.filter(function(t){return t.selected}),i=r.length?r[0]:n[0],o=[0,10,30,60,120,180,360,720,1440,2880,5760,10080].map(function(t){return 60*t}),a=i.data.before_categories,u=i.data.after_categories,l=Lt(a,u,o),s=l.before_stacked,c=l.after_stacked,f=Ot(s,c,o),h=f.before_line,p=f.after_line,d=i.data.before.filter(function(t){return t.time_diff_bucket<=h}),g=i.data.after.filter(function(t){return t.time_diff_bucket<=p}),v=i.data.before.filter(function(t){return t.time_diff_bucket>h}),y=i.data.after.filter(function(t){return t.time_diff_bucket>p}),m=v.concat(y),x=Rt(m,"parent_category_name"),_=Dt(Rt(d,"parent_category_name"),x).sort(Pt),b=Dt(Rt(g,"parent_category_name"),x).sort(Pt),w=e(t,"wrap-stages").style("margin-left","230px").style("margin-right","-50px").style("margin-top","-30px"),M=Math.min(parseInt(_.length/2),5),k=Math.min(parseInt(b.length/2),5);Ct(e(w,"consideration").style("display","inline-block")).data(_.slice(0,M).concat(_.slice(-M))).value_accessor("diff").bar_width(110).show_labels(!0).title("Consideration Stage").draw(),Ct(e(w,"validation").style("display","inline-block")).data(b.slice(0,k).concat(b.slice(-k))).value_accessor("diff").bar_width(110).show_labels(!0).title("Validation Stage").draw();var S=[{key:"key",value:"Domains",locked:!0,width:"200px"},{key:"consideration_percent",value:"Consideration",locked:!0},{key:"validation_percent",value:"Validation",locked:!0},{key:"baseline_percent",value:"Baseline",locked:!0},{
key:"consideration_ratio",value:"Consideration Ratio",locked:!0},{key:"validation_ratio",value:"Validation Ratio",locked:!0}],N=this.sort(),E=this.ascending(),A=S.filter(function(t){return t.key==N}),C=A.length?A[0].key:"stage_percent",z={consideration:Ut(d,"domain"),validation:Ut(g,"domain"),baseline:Ut(m,"domain")},T=Object.keys(z).reduce(function(t,n){return z[n].reduce(function(t,e){return t[e.key]=t[e.key]||{},t[e.key][n+"_count"]=e.count,t[e.key][n+"_percent"]=isNaN(e.percent)?0:e.percent,t[e.key][n+"_urls"]=e.urls,t},t),t},{}),q=Object.keys(T).reduce(function(t,n){var e=T[n];e.consideration_percent=e.consideration_percent||0,e.validation_percent=e.validation_percent||0,e.baseline_percent=e.baseline_percent||0,e.consideration_ratio=e.consideration_percent/e.baseline_percent,e.validation_ratio=e.validation_percent/e.baseline_percent;var r=e.consideration_ratio,i=e.validation_ratio;e.consideration_ratio=isFinite(r)?r:isNaN(r)?0:1e4,e.validation_ratio=isFinite(i)?i:isNaN(i)?0:1e4;var o=(e.consideration_percent||0)+(e.validation_percent||0);return t.push(Object.assign({key:n,stage_percent:o},e)),t},[]);return X(e(t,"stage-table-wrap").style("margin-top","20px")).top(this.top()).data({values:q}).headers(S).sort(C,E).on("sort",this.on("sort")).option_text("&#65291;").render("consideration_ratio",function(t){var n=this.parentElement.__data__.consideration_ratio;this.innerText=1e4==n?"∞":d3.format(".3r")(n)}).render("validation_ratio",function(t){var n=this.parentElement.__data__.validation_ratio;this.innerText=1e4==n?"∞":d3.format(".3r")(n)}).on("expand",function(t,n){q.filter(function(n){return n.key==t.key});return}).hidden_fields(["urls","percent_unique","sample_percent_norm","pop_percent","tf_idf","parent_category_name","values"]).draw(),this}}]),n}(_e);Ht.prototype={data:function(t){return A.bind(this)("data",t)},segments:function(t){return A.bind(this)("segments",t)},draw:function(){var t=me(this.target,".segment-wrap","div").classed("segment-wrap",!0).style("height",this.is_comparison()?"170px":"120px").style("width",this.target.style("width")).style("position","fixed").style("z-index","300").style("background","white");if(me(this.target,".segment-wrap-spacer","div").classed("segment-wrap-spacer",!0).style("height",t.style("height")),I(t).navigation(["Planning",this.is_comparison()?"Compare":"Explore"]).buttons([{class:"download",icon:"fa-filefa",text:"Export",color:"orange"},{class:"saved-search",icon:"fa-folder-open-o fa",text:"Open",color:"blue"},{class:"new-saved-search",icon:"fa-bookmark fa",text:"Save",color:"green"}]).on("saved-search.click",this.on("saved-search.click")).on("download.click",this.on("download.click")).on("logout.click",function(){window.location="/logout"}).on("create.click",function(){window.location="/segments"}).on("new-saved-search.click",this.on("new-saved-search.click")).text("Segment").draw(),t.selectAll(".header-body").classed("hidden",!this._is_loading).style("text-align","center").style("margin-bottom","-40px").style("padding-top","10px").style("height","0px").style("background","none").html("<img src='/static/img/general/logo-small.gif' style='height:15px'/> loading..."),0!=this._data){var n=me(t,".body","div").classed("body",!0).style("clear","both").style("display","flex").style("flex-direction","column").style("margin-top","-15px").style("margin-bottom","30px"),e=me(n,".row-1","div").classed("row-1",!0).style("flex",1).style("display","flex").style("flex-direction","row"),r=me(n,".row-2","div").classed("row-2",!0).style("flex",1).style("display",this.is_comparison()?"flex":"none").style("flex-direction","row"),i=me(e,".action.inner","div").classed("inner action",!0).style("flex","1").style("display","flex").style("padding-top","10px").style("margin-bottom","0px"),o=me(e,".action.inner-desc","div").classed("inner-desc action",!0).style("flex","1").style("padding","10px").style("padding-bottom","0px").style("display","flex").style("margin-bottom","0px");me(i,"h3","h3").text("Choose Segment").style("margin","0px").style("line-height","32px").style("color","inherit").style("font-size","inherit").style("font-weight","bold").style("text-transform","uppercase").style("flex","1").style("background","rgb(240, 244, 247)").style("padding-left","10px").style("margin-right","10px").style("margin-top","2px").style("margin-bottom","2px").style("height","32px"),me(i,"div.color","div").classed("color",!0).style("background-color","#081d58").style("width","10px").style("height","32px").style("margin-top","2px").style("margin-right","10px").style("margin-left","-10px");var a=this;j(i).options(this._segments).on("select",function(t){a.on("change").bind(this)(t)}).selected(this._action.value||0).draw();var u=me(i,"a.fa-calendar","a").style("line-height","34px").style("width","36px").style("border","1px solid #ccc").style("border-radius","5px").classed("fa fa-calendar",!0).style("text-align","center").style("margin-left","5px").on("click",function(t){l.node()}),l=j(u).options([{key:"Today",value:0},{key:"Yesterday",value:1},{key:"7 days ago",value:7}]).on("select",function(t){a.on("action_date.change").bind(this)(t.value)}).selected(this._action_date||0).draw()._select.style("width","18px").style("margin-left","-18px").style("height","34px").style("opacity",".01").style("flex","none").style("border","none"),s=me(r,".comparison.inner","div").classed("inner comparison",!0).style("flex","1").style("padding-bottom","0px").style("padding-top","10px").style("display","flex"),c=me(r,".comparison-desc.inner","div").classed("inner comparison-desc",!0).style("flex","1").style("padding","10px").style("padding-bottom","0px").style("display","flex");me(o,".bar-wrap-title","h3").classed("bar-wrap-title",!0).style("flex","1 1 0%").style("margin","0px").style("line-height","32px").style("color","inherit").style("font-size","inherit").style("font-weight","bold").style("text-transform","uppercase").style("padding-left","10px").style("margin-right","10px").style("margin-top","2px").style("margin-bottom","2px").style("height","100%").style("text-align","right").text("views"),me(c,".bar-wrap-title","h3").classed("bar-wrap-title",!0).style("flex","1 1 0%").style("margin","0px").style("line-height","32px").style("color","inherit").style("font-size","inherit").style("font-weight","bold").style("text-transform","uppercase").style("padding-left","10px").style("margin-right","10px").style("margin-top","2px").style("margin-bottom","2px").style("height","100%").style("text-align","right").text("views");var f=me(o,"div.bar-wrap","div").classed("bar-wrap",!0).style("flex","2 1 0%").style("margin-top","8px");me(o,".bar-wrap-space","div").classed("bar-wrap-space",!0).style("flex","1 1 0%").style("line-height","36px").style("padding-left","10px").text(ge.format(",")(this._data.views.sample)),me(o,".bar-wrap-opt","div").classed("bar-wrap-opt",!0).style("flex","2 1 0%").style("line-height","36px");var h=ge.scale.linear().domain([0,Math.max(this._data.views.sample,this._data.views.population)]).range([0,f.style("width")]),p=me(c,"div.bar-wrap","div").classed("bar-wrap",!0).style("flex","2 1 0%").style("margin-top","8px");me(c,".bar-wrap-space","div").classed("bar-wrap-space",!0).style("flex","1 1 0%").style("line-height","36px").text(ge.format(",")(this._data.views.population)),me(c,".bar-wrap-opt","div").classed("bar-wrap-opt ",!0).style("flex","2 1 0%").style("margin","0px").style("line-height","32px").style("color","inherit").style("font-size","inherit").style("font-weight","bold").style("text-transform","uppercase").style("height","100%").style("text-align","right"),Nt(f,this._data.views.sample,h,"#081d58"),Nt(p,this._data.views.population,h,"grey"),me(s,"h3","h3").text("Compare Against").style("margin","0px").style("line-height","32px").style("color","inherit").style("font-size","inherit").style("font-weight","bold").style("text-transform","uppercase").style("flex","1").style("background","rgb(240, 244, 247)").style("padding-left","10px").style("margin-right","10px").style("margin-top","2px").style("margin-bottom","2px").style("height","32px"),me(s,"div.color","div").classed("color",!0).style("background-color","grey").style("width","10px").style("height","32px").style("margin-top","2px").style("margin-right","10px").style("margin-left","-10px"),j(s).options([{key:"Current Segment (without filters)",value:!1}].concat(this._segments)).on("select",function(t){a.on("comparison.change").bind(this)(t)}).selected(this._comparison.value||0).draw();var d=me(s,"a.fa-calendar","a").style("line-height","34px").style("width","36px").style("border","1px solid #ccc").style("border-radius","5px").classed("fa fa-calendar",!0).style("text-align","center").style("margin-left","5px").on("click",function(t){g.node()}),g=j(d).options([{key:"Today",value:0},{key:"Yesterday",value:1},{key:"7 days ago",value:7}]).on("select",function(t){a.on("comparison_date.change").bind(this)(t.value)}).selected(this._comparison_date||0).draw()._select.style("width","18px").style("margin-left","-18px").style("height","34px").style("opacity",".01").style("flex","none").style("border","none");return this}},action_date:function(t){return A.bind(this)("action_date",t)},action:function(t){return A.bind(this)("action",t)},comparison_date:function(t){return A.bind(this)("comparison_date",t)},comparison:function(t){return A.bind(this)("comparison",t)},is_loading:function(t){return A.bind(this)("is_loading",t)},is_comparison:function(t){return A.bind(this)("is_comparison",t)},on:function(t,n){return void 0===n?this._on[t]||It:(this._on[t]=n,this)}};var Tr=function(){function t(n){ce(this,t),this._target=n,this._key_accessor="key",this._pop_value_accessor="value",this._samp_value_accessor="value",this._bar_height=20,this._bar_width=300}return fe(t,[{key:"key_accessor",value:function(t){return A.bind(this)("key_accessor",t)}},{key:"pop_value_accessor",value:function(t){return A.bind(this)("pop_value_accessor",t)}},{key:"samp_value_accessor",value:function(t){return A.bind(this)("samp_value_accessor",t)}},{key:"bar_height",value:function(t){return A.bind(this)("bar_height",t)}},{key:"bar_width",value:function(t){return A.bind(this)("bar_width",t)}},{key:"data",value:function(t){return A.bind(this)("data",t)}},{key:"title",value:function(t){return A.bind(this)("title",t)}},{key:"draw",value:function(){var t=me(this._target,".comp-wrap","div",!1,function(){return 1}).classed("comp-wrap",!0);me(t,"h3","h3").text(this._title);var n=me(t,".svg-wrap","div",this._data,function(t){return 1}).classed("svg-wrap",!0),e=this.key_accessor(),r=this.pop_value_accessor(),i=this.samp_value_accessor(),o=this.bar_height(),a=this.bar_width(),u=this._data.map(function(t){return t[e]}),l=d3.max(this._data,function(t){return t[r]}),s=d3.max(this._data,function(t){return t[i]}),c=d3.scale.linear().domain([0,s]).range([0,a]),f=d3.scale.linear().domain([0,l]).range([0,a]),h=d3.scale.linear().domain([0,u.length]).range([0,u.length*o]),p=me(n,"svg","svg",!1,function(){return 1}).attr({width:a+a/2,height:u.length*o+10});d3.svg.axis().orient("bottom").scale(f);var d=d3.svg.axis();d.orient("left").scale(h).tickSize(2).tickFormat(function(t,n){return u[n]}).tickValues(d3.range(u.length));var g=me(p,"g.y","g").attr("class","y axis").attr("transform","translate("+a/2+",15)").attr("id","yaxis").call(d);g.selectAll("text");var v=me(p,"g.chart","g").attr("class","chart").attr("transform","translate("+a/2+",0)").attr("id","bars"),y=xe(v,".pop-bar","rect",function(t){return t},function(t){return t.key}).attr("class","pop-bar").attr("height",o-2).attr({x:0,y:function(t,n){return h(n)+7.5}}).style("fill","gray").attr("width",function(t){return f(t[r])}),m=xe(v,".samp-bar","rect",function(t){return t},function(t){return t.key}).attr("class","samp-bar").attr("height",o-10).attr({x:0,y:function(t,n){return h(n)+11.5}}).style("fill","#081d58").attr("width",function(t){return c(t[i]||0)});return g.exit().remove(),v.exit().remove(),y.exit().remove(),m.exit().remove(),this}}]),t}();Xt.prototype={radius:function(t){return A.bind(this)("radius",t)},data:function(t){return A.bind(this)("data",t)},on:function(t,n){return void 0===n?this._on[t]||noop:(this._on[t]=n,this)},draw:function(){var t=d3.entries({sample:this._data.sample,population:this._data.population-this._data.sample}),n=d3.scale.ordinal().range(["#98abc5","#8a89a6","#7b6888","#6b486b","#a05d56","#d0743c","#ff8c00"]),e=d3.svg.arc().outerRadius(this._radius-10).innerRadius(0),r=d3.layout.pie().sort(null).value(function(t){return t.value}),i=me(this.target,"svg","svg",!1,function(t){return 1}).attr("width",50).attr("height",52);i=me(i,"g","g").attr("transform","translate(25,26)");var o=xe(i,".arc","g",r(t),function(t){return t.data.key}).classed("arc",!0);me(o,"path","path").attr("d",e).style("fill",function(t){return n(t.data.key)})}},n(".summary-view {\n  padding-bottom:50px\n}\n.summary-view .y.axis path.domain {\n  display:none\n}\n.summary-view .table-wrapper { background:none; padding-top:5px; padding-bottom:10px }\n.summary-view .table-wrapper tr { border-bottom:none }\n.summary-view .table-wrapper thead tr { background:#f0f4f7 }\n.summary-view .table-wrapper tbody tr:hover { background:none }\n.summary-view .table-wrapper tbody tr td { border-right:none;text-align:center }\n.summary-view .table-wrapper thead tr th { border-right:none; }\n\n.summary-view .table-wrapper tr td:last-of-type { border-right:none }\n\n.summary-view .ts-row,\n.summary-view .pie-row,\n.summary-view .cat-row,\n.summary-view .key-row,\n.summary-view .ba-row,\n.summary-view .stream-ba-row {\n  padding-bottom:10px\n}\n\n.ba-row .table-wrapper tr th {\n    padding-top:20px\n  }\n\n.ba-row .table-wrapper tr.expanded th {\n  padding-top:0px\n}\n\n.timing-row .table-wrapper tr.expanded th, \n.ba-row .table-wrapper tr.expanded th, \n.ba-row .table-wrapper tr.expanded td  {\n  width:31px;\n  max-width:200px\n}\n\n.timing-row .table-wrapper tr th, \n.timing-row .table-wrapper tr td, \n.ba-row .table-wrapper tr th, \n.ba-row .table-wrapper tr td  {\n  width:31px;\n  max-width:31px\n}\n\n\n.timing-row .table-wrapper tr th:first-of-type, \n.ba-row .table-wrapper tr th:first-of-type, \n.ba-row .table-wrapper tr td:first-of-type {\n  width:300px;\n}\n\n.dash-row > div {\n  display: inline-block;\n  width: 50%;\n  padding: 0px 10px 10px; \n  background-color: none;\n}\n.dash-row > div > h3 {\n  font-size: 12px;\n  color: rgb(51, 51, 51);\n  line-height: 33px;\n  background-color: #f0f4f7;\n  margin-left: -10px;\n  margin-bottom: 10px;\n  padding-left: 10px;\n  margin-top: 0px;\n  font-weight: bold;\n  text-transform: uppercase;\n  \n}\n\n.pie-summary-block .fw {\n    width:50px;\n    display:inline-block;\n    vertical-align:top;\n    padding-top:3px;\n    text-align:center;\n    line-height:16px;\n}\n\n.pie-summary-block .fw2 {\n    width:60px;\n    display:inline-block;\n    vertical-align:top;\n    padding-top:3px;\n    text-align:center;\n    font-size:22px;\n    font-weight:bold;\n    line-height:40px;\n}\n",void 0);var qr=function(t){function n(t){return ce(this,n),pe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return he(n,t),fe(n,[{key:"props",value:function(){return["data","timing","category","keywords","before","after"]}},{key:"draw",value:function(){var t=e(this._target,"summary-view");I(t).text("Summary").draw();var n=e(t,"ts-row"),r=e(t,"pie-row"),i=e(t,"cat-row").classed("dash-row",!0),o=(e(t,"key-row"),e(t,"ba-row"),e(t,"stream-ba-row"),d3.scale.linear().domain([this._data.domains.population,this._data.views.population]).range([20,35]));X(r).data({key:"T",values:[this.data()]}).skip_option(!0).render("domains",function(t){Jt(d3.select(this.parentNode).datum()[t.key],this,o,t)}).render("articles",function(t){Jt(d3.select(this.parentNode).datum()[t.key],this,o,t)}).render("sessions",function(t){Jt(d3.select(this.parentNode).datum()[t.key],this,o,t)}).render("views",function(t){Jt(d3.select(this.parentNode).datum()[t.key],this,o,t)}).draw(),Wt(n,this._timing,o);try{Bt(i,this._category),Zt(i,this._category)}catch(t){}return this}}]),n}(_e),Lr=function(t){function n(t){ce(this,n);var e=pe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._selections=[],e}return he(n,t),fe(n,[{key:"props",value:function(){return["selectAll","key"]}},{key:"add",value:function(t){this._selections.push(t),this.on("add")(this._selections)}},{key:"remove",value:function(t){var n=this._selections.indexOf(t);this._selections.splice(n,1),this.on("remove")(this._selections)}},{key:"draw",value:function(){function t(t,e,r){var i=d3.select(this).classed("selected");r||(0==i&&n.add(n.key()(t,e)),1==i&&n.remove(n.key()(t,e)),d3.select(this).classed("selected",!i)),n.on("interact").bind(this)(n.key()(t,e),r?[n.key()(t,e)]:n._selections)}var n=this;return this._target.selectAll(this._selectAll).on("mouseover",function(e,r){0==n._selections.length&&t.bind(this)(e,r,!0)}).on("mouseout",function(e,r){0==n._selections.length&&(t.bind(this)(e,r,!0),n.on("mouseout").bind(this)(e,r))}).on("click",function(e,r){t.bind(this)(e,r),n.on("click").bind(this)(n.key()(e,r),n._selections)}),this}}]),n}(_e),Or=[10,30,60,120,180,360,720,1440,2880,5760,10080].reverse().map(function(t){return String(60*t)});Or=Or.concat([10,30,60,120,180,360,720,1440,2880,5760,10080].map(function(t){return String(60*-t)}));var jr=function(t,n){return t+n.time_diff_bucket},Rr=function(t){return d3.sum(t,function(t){return t.visits})},Dr=["that","this","what","best","most","from","your","have","first","will","than","says","like","into","after","with"],Pr=function(t,n){if(t)return n.toLowerCase().split(t)[1].split("/").reverse()[0].replace("_","-").split("-");var e=n.toLowerCase().split("://");return(e.length>1?e[1]:e[0]).split("/").reverse()[0].replace("_","-").replace("+","-").split("-")},Ur=function(t){return null==t.match(/\d+/g)&&-1==t.indexOf(",")&&-1==t.indexOf("?")&&-1==t.indexOf(".")&&-1==t.indexOf(":")&&parseInt(t)!=t&&t.length>3},Fr=function(t,n,e){return n[e[t]]=(n[e[t]]||0)+e.visits,n},Ir=function(t,n,e,r){return e[r[t]]=e[r[t]]||{},e[r[t]].key=r[t],e[r[t]][n+r.time_diff_bucket]=r.visits,e},Hr=function(t,n,e){return Pr(t,e.key).map(function(t){Ur(t)&&-1==Dr.indexOf(t)&&(n[t]=n[t]||{},n[t].key=t,Object.keys(e.value).map(function(r){n[t][r]=(n[t][r]||0)+e.value[r]}))}),n};n(".refine-relative .summary-row {\n  margin-bottom:15px;\n  position:relative;\n}\n\n.refine-relative .tables-row .url, .refine-relative .tables-row .kw {\n  width:50%;\n  display:inline-block;\n  vertical-align:top;\n}\n\n.refine-relative .action-header {\n  text-align:center;\n  font-size:16px;\n  font-weight:bold;\n  padding:10px;\n}\n\n.refine-relative .summary-row > .title {\n  font-size:16px;\n  font-weight:bold;\n  text-align:center;\n  line-height:40px;\n  margin-bottom:5px;\n}\n.refine-relative .description {\n  font-size:12px;\n  position:absolute;\n  width:120px;\n  top:35px;\n  right:200px;\n}\n\n.refine-relative .vertical-options {\n  text-align:center;\n  position:absolute;\n  width:120px;\n  top:35px;\n  left:200px;\n}\n",void 0);var Yr=function(t){function n(t){ce(this,n);var e=pe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e._options=[{key:"All",value:"all",selected:1},{key:"Consideration",value:"consideration",selected:0},{key:"Validation",value:"validation",selected:0}],e._summary_headers=[{key:"name",value:""},{key:"all",value:"All"},{key:"consideration",value:"Consideration"},{key:"validation",value:"Validation"}],e}return he(n,t),fe(n,[{key:"props",value:function(){return["data","domain","stages","before_urls","after_urls","summary_headers","options"]}},{key:"draw",value:function(){var t,n,r=e(this._target,"refine-relative"),i=this._before_urls,o=this._after_urls,a=(this._data,this._stages),u=(this._summary_headers,this._options),l=!!this._domain;Or.map(function(e,r){a.consideration==e&&(t=r),a.validation==e&&(n=r)});var s=Qt(i,o),c=ln(i,o,t,n,this._domain),f=(c.url_summary,c.urls),h=(c.urls_consid,c.urls_valid,c.kws_summary,c.kws),p=(c.kws_consid,c.kws_valid,e(r,"summary-row"));e(p,"title").text("Before and After: "+this._domain),St(p).data(s).before(t).after(n).draw();var d=_t(p).options(u).on("click",function(e){u.map(function(t){return t.selected=e.key==t.key?1:0}),d.options(u).draw(),sn(r,u,t,n)}).draw();e(p,"description").text("Select domains and keywords to build and refine your global filter");var g=e(r,"modify-row");e(g,"action-header").text("Explore and Refine"),pt(e(g,"url-depth")).headers(["Before","After"]).label(l?"URL":"Domain").data(f).split(this.domain()).on("stage-filter",this.on("stage-filter")).draw(),pt(e(g,"kw-depth")).headers(["Before","After"]).label("Keywords").data(h).on("stage-filter",this.on("stage-filter")).draw()}}]),n}(_e),Vr=[10,30,60,120,180,360,720,1440,2880,5760,10080].reverse().map(function(t){return String(60*t)});Vr=Vr.concat([10,30,60,120,180,360,720,1440,2880,5760,10080].map(function(t){return String(60*-t)}));var Zr=Vr,Br=function(t){return t<0&&(t=-t),3600==t?"1 hr":t<3600?t/60+" mins":86400==t?"1 day":t>86400?t/86400+" days":t/3600+" hrs"},Xr=Vr.map(function(t){return{key:t,value:Br(t),selected:!0}}),$r=Zr.slice(0,11).map(function(t){return parseInt(t)}).reverse(),Jr=[0].concat($r),Wr=$r.map(function(t,n){return n?(t-Jr[n])/Jr[n]:1}),Gr=Wr.reduce(function(t,n){return t[t.length]=t[t.length-1]*n,t[t.length]=t[t.length-1]*n*(1+(t.length-1)/10),t},[1]),Kr=function(t){var n=t.reduce(function(t,n){return Zr.map(function(e){t=Math.abs(n[e])>t?Math.abs(n[e]):t}),t},0);return d3.scale.linear().range([0,.8]).domain([0,Math.log(n)])};n(".ba-row {\n        padding-bottom:60px;\n}\n\n.ba-row .expanded td {\nbackground:#f9f9fb;\n            padding-top:10px;\n            padding-bottom:10px;\n}\n\n.ba-row th {\n  border-right:1px rgba(0,0,0,.1);\n}\n\n.ba-row th span.less-than, .ba-row th span.greater-than {\nfont-size:.9em;\nwidth:55px;\ntransform:rotate(90deg);\ntext-align:center;\ndisplay:inline-block;\nmargin-left: -20px;\n\n}\n/*\n.ba-row th span.less-than {\n    font-size: .9em;\n    width: 50px;\n    transform: rotate(-90deg);\n    display: inline-block;\n    margin-left: -20px;\n    text-align: center;\n}\n*/\n.ba-row .table-wrapper tr th {\n  border:0px;\n  height:53px\n}\n\n.transform select {\n  height: 36px;\n  vertical-align: top;\n      width:200px;\n}\n\n.transform {\n  width:255px;\n  padding:15px;\n  vertical-align: top;\n  display:inline-block;\n  padding-top:0px;\n}\n.transform span {\n  text-transform:uppercase;\n  font-weight:bold\n}\n\n.transform .filter-values,\n.transform .show-values {\n  text-align:right;\n  padding-top: 10px;\n  margin-right:25px;\n}\n\n.ba-row tr td:not(:first-child) {\n\n  color:transparent;\n  cursor:pointer\n}\n\n.ba-row tr td:not(:first-child):hover, \n.ba-row.show-values tr td:not(:first-child),\n.ba-row tr.expanded td {\n  color:inherit\n}\n.summary-wrap .timeseries-row {\n  /*padding-bottom:80px*/\n}\n.stream-wrap {\n  display:inline-block\n}\n.stream-wrap .inner {\n  margin-top:-60px\n}\n.stream-wrap .axis.before,\n.stream-wrap .axis.after {\n  display:none\n}\n\n.time-wrap {\n}\n.time-wrap rect {\n  fill: grey\n}\n.time-wrap rect.selected,\n.time-wrap rect:hover {\n  fill: black\n}\n\ntr.hide-category, \ntr.hide-time {\n  display:none\n}\n",void 0);var Qr=function(t){function n(t){return ce(this,n),pe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return he(n,t),fe(n,[{key:"props",value:function(){return["data","transform","sort","ascending","top"]}},{key:"draw",value:function(){function t(t){x.classed("show-values",this.checked)}var n=this,o=this,a=this._data,u=a.filter(function(t){return t.selected}),l=u.length?u[0]:a[0],s=e(this._target,"summary-wrap"),c=vn(l.values),f=dn(c);this.on("toggle.values",t);var h=e(s,"timeseries-row").style("padding-bottom","Top Categories"==l.key?"0px":null),p=[{key:"Activity",value:!1},{key:"Intent Score",value:"normalize"},{key:"Importance",value:"importance"},{key:"Percentage",value:"percent"},{key:"Percent Diff",value:"percent_diff"}];it(h).datasets(a).transforms(p).selected_transform(this.transform()).on("toggle.values",this.on("toggle.values")).on("transform.change",this.on("transform.change")).on("dataset.change",function(t){n.on("select")(t)}).draw();var d=e(h.selectAll(".transform"),"details-wrap","svg").style("width","255px").style("height","150px").style("display","Top Categories"==l.key?"none":"inline-block").style("margin-top","20px"),g=e(h,"stream-wrap").style("width","682px").style("height","Top Categories"==l.key?"100px":"390px"),v=jt(g,l.data.before_categories,l.data.after_categories,r);g.selectAll(".before-stream").style("display","Top Categories"==l.key?"none":null);var y=e(g,"time-wrap");Kt(g).selectAll("path").key(function(t,n){return t[0].key}).on("mouseout",function(t,n){g.selectAll("path").style("opacity","1"),x.selectAll("tbody").selectAll("tr").classed("hide-category",!1)}).on("click",function(t,n){g.selectAll("path").filter(function(t){if(!t[0])return!1;var e=t[0].key;return n.filter(function(t){return e==t}).map(function(t){return t}).length}).classed("selected",!0)}).on("interact",function(t,n){g.selectAll("path").style("opacity","1").filter(function(t){return!!t[0]&&!n.filter(function(n){return t[0].key==n}).map(function(t){return t}).length}).style("opacity",".6"),x.selectAll("tbody").selectAll("tr").classed("hide-category",function(t){return!(n.indexOf(t.parent_category_name)>-1)});var r=e(d,"cat","g");e(r,"title","text").text("Categories Selected:").style("font-weight","bold").style("text-transform","uppercase").attr("y",15);var i=me(r,".cats","g",n,function(t){return 1}).classed("cats",!0),o=i.selectAll(".cat").data(function(t){return t});o.enter().append("text").classed("cat",!0).attr("x",15).attr("y",function(t,n){return 30+15*(n+1)}),o.text(String),o.exit().remove()}).draw(),Kt(kt(me(y,"svg","svg").attr("width",682).attr("height",80).style("display","inline-block").style("vertical-align","bottom").style("margin-bottom","15px"),f,682,80,-2)).selectAll("rect").key(function(t,n){return Zr[n]}).on("mouseout",function(t,n){x.selectAll("tbody").selectAll("tr").classed("hide-time",!1)}).on("interact",function(t,n){x.selectAll("tbody").selectAll("tr").classed("hide-time",function(t){return!n.filter(function(n){return void 0!=t[n]&&""!=t[n]}).length})}).draw();var m=a[0].data.category.reduce(function(t,n){return t[n.key]=n,t},{}),x=e(s,"ba-row").style("min-height","600px"),_=pn(l.values),b=l.values.filter(function(t){return""!=t.key}).map("normalize"==this.transform()?gn:"percent"==this.transform()?_:"percent_diff"==this.transform()?function(t){return fn(_(t))}:"importance"==this.transform()&&-1==l.key.indexOf("Cat")?hn(m):i).slice(0,1e3),w=Kr(b),M=[{key:"key",value:l.key.replace("Top ","")}].concat(Xr),k=this.sort(),S=this.ascending(),N=M.filter(function(t){return t.key==k}),E=N.length?N[0].key:"600",A="Top Domains"==l.key?"domain":"parent_category_name";X(x).top(this.top()).headers(M).sort(E,S).on("sort",this.on("sort")).on("expand",function(t,n){var e=a[0].data;cn(n).data(t).domain("domain"==A&&t.key).stages(v).before_urls(e.before.filter(function(n){return n[A]==t.key})).after_urls(e.after.filter(function(n){return n[A]==t.key})).on("stage-filter",o.on("stage-filter")).draw()}).on("draw",function(){this._target.selectAll("th").selectAll("span").classed("less-than",function(t){return parseInt(t.key)==t.key&&t.key<0}).classed("greater-than",function(t){return parseInt(t.key)==t.key&&t.key>0}),this._target.selectAll(".table-option").style("display","none");var t=this._target.selectAll("tr").selectAll("td:not(:first-child)").style("border-right","1px solid white").style("padding-left","0px").style("text-align","center").style("background-color",function(t){var n=this.parentNode.__data__[t.key]||0,e=n>0?"rgba(70, 130, 180,":"rgba(244, 109, 67,";return n=Math.abs(n),e+w(Math.log(n+1))+")"});"percent"==o.transform()&&t.text(function(t){if(this.classList.contains("option-header"))return"";var n=this.parentNode.__data__[t.key]||0,e=d3.format(".1%")(n/100);return(e=e.length>4?e.slice(0,2):e.slice(0,-1))+"%"})}).option_text("<div style='width:40px;text-align:center'>&#65291;</div>").data({values:b}).draw()}}]),n}(_e),ti=function(t){var n=t.reduce(function(t,n){return t.pop_max=(t.pop_max||0)<n.pop?n.pop:t.pop_max,t.pop_total=(t.pop_total||0)+n.pop,n.samp&&(t.samp_max=(t.samp_max||0)>n.samp?t.samp_max:n.samp,t.samp_total=(t.samp_total||0)+n.samp),t},{});t.map(function(t){t.normalized_pop=t.pop/n.pop_max,t.percent_pop=t.pop/n.pop_total,t.normalized_samp=t.samp/n.samp_max,t.percent_samp=t.samp/n.samp_total,t.normalized_diff=(t.normalized_samp-t.normalized_pop)/t.normalized_pop,t.percent_diff=(t.percent_samp-t.percent_pop)/t.percent_pop})},ni=ge.range(0,24).map(function(t){return String(t).length>1?String(t):"0"+t}),ei=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"domain";return ge.nest().key(function(t){return t[n]}).key(function(t){return t.hour}).entries(t).map(function(t){var n=t.values.reduce(function(t,n){return t[n.key]=n.values,t},{});return t.buckets=ni.map(function(t){var e={values:n[t],key:Mn(t)};return e.views=ge.sum(n[t]||[],function(t){return t.uniques}),e}),t.tabular=t.buckets.reduce(function(t,n){return t[n.key]=n.views||void 0,t},{}),t.tabular.key=t.key,t.tabular.total=ge.sum(t.buckets,function(t){return t.views}),t.tabular}).filter(function(t){return"NA"!=t.key})},ri=function(t,n){var e=n||"time_diff_bucket",r=ge.nest().key(function(t){return t[e]+"|"+t.stage}).key(function(t){return t.hour}).rollup(function(t){return{count:t.length,uniques:ge.sum(t,function(t){return t.uniques}),visits:ge.sum(t,function(t){return t.visits}),values:t}}).entries(t).sort(function(t,n){return ge.descending(parseInt(t.key),parseInt(n.key))});return[r,r.map(function(t){var n=ge.map(t.values,function(t){return t.key}),e=ni.reduce(function(t,e){return t[e]=n.get(e)||{values:{}},t[e]=t[e].values.visits||0,t},{});return Object.assign({key:t.key.split("|")[0],stage:t.key.split("|")[1]},e)})]},ii=function(t,n){var e=n||"time_diff_bucket",r=ri(t,e),i=de(r,2),o=i[0],a=i[1],u=o.reduce(function(t,n){return n.values.reduce(function(t,e){return t.push(Object.assign({},e.values,{bucket:n.key,hour:e.key,stage:e.stage})),t},t),t},[]),l=ge.nest().key(function(t){return t.hour}).rollup(function(t){return ge.sum(t,function(t){return t.visits})}).entries(u),s=ge.sum(l,function(t){return t.values});l.map(function(t){t.percent=t.values/s});var c=ge.map(l,function(t){return t.key}),f=a.map(function(t){var n=ni.reduce(function(n,e){return n+=t[e]||0},0),e={key:t.key};return ni.map(function(r){return e[r]=t[r]/n}),e});f.map(function(t){var n={key:t.key};return ni.map(function(e){var r=c.get(e);if(r){var i=r.percent;n[Mn(e)]=t[e]>i?(i-t[e])/i:-(t[e]-i)/i}}),n});return a.map(function(t){var n={key:t.key,stage:t.stage};return ni.map(function(e){n[Mn(e)]=t[e]}),n}).sort(function(t,n){return ge.descending(parseInt(t.key),parseInt(n.key))}).map(function(t,n){return t.total=100-n,t})},oi=ge.range(0,24).map(function(t){return String(t).length>1?String(t):"0"+t}),ai=oi.map(Mn).map(function(t){return{key:t,value:t}}),ui=ai.map(function(t){return t.key}),li=function(t,n){var e=n||10;return ge.scale.linear().range([0,1]).domain([0,Math.log(e+1)])};n(".timing-row {\n        padding-bottom:60px;\n}\n\n.timing-row .expanded {\n  background:white;\n  padding:20px\n}\n\n.timing-row tr td:not(:first-child) {\n          border-right:1px solid white;\n          padding-left:0px;\n          text-align:center;\n\n}\n.timing-row .table-wrapper tr th {\n  padding:5px; text-align:center\n}\n.timing-row tr td:not(:first-child) {\n  color:transparent;\n  cursor:pointer\n}\n\n.timing-row tr td:not(:first-child):hover, \n.timing-row.show-values tr td:not(:first-child),\ntr.expanded td {\n  color:inherit\n}\n\n.timing-wrap rect {\n  fill: grey\n}\n.timing-wrap rect.selected,\n.timing-wrap rect:hover {\n  fill: black\n}\n",void 0);var si=function(t){
return t<0&&(t=-t),3600==t?"1 hr":t<3600?t/60+" mins":86400==t?"1 day":t>86400?t/86400+" days":t/3600+" hrs"},ci=function(t){function n(t){return ce(this,n),pe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t))}return he(n,t),fe(n,[{key:"props",value:function(){return["data","transform","sort","ascending","top"]}},{key:"draw",value:function(){function t(t){A.classed("show-values",this.checked)}var n=this,r=this,i=this._data,o=i.filter(function(t){return t.selected}),a=o.length?o[0]:i[0],u=e(this._target,"timing-wrap"),l=[{key:"key",value:a.key.replace("Top ","")}].concat(ai),s=(i[0].values,this.sort()),c=this.ascending(),f=l.filter(function(t){return t.key==s}),h=f.length?f[0].key:"total",p=a.values.reduce(function(t,n){return ai.map(function(e){var r=e.key;t[r]=(t[r]||0)+(n[r]||0)}),t},{}),d=ge.sum(Object.keys(p).map(function(t){return p[t]})),g=Object.keys(p).reduce(function(t,n){return t[n]=p[n]/d,t},{}),v=a.values.map(function(t){return Math.sqrt(1+t.total)}),y=zn(g),m=Sn(a.values),x=Nn(a.values),_=En(a.values),b=0,w=1/0,M=a.values.map(function(t,e){var r="normalize"==n.transform()?y(t,v[e]):"percent_h"==n.transform()?An(t):"percent_diff_h"==n.transform()?Cn(t):"percent_v"==n.transform()?m(t):"percent_diff_v"==n.transform()?x(t):"percent_diff_pop"==n.transform()?_(t):t,i=ge.max(ai.map(function(t){return t.key}).map(function(t){return r[t]}));b=i>b?i:b;var o=ge.min(ai.map(function(t){return t.key}).map(function(t){return r[t]}));return w=o<w?o:w,Object.assign(r,{key:t.key})});console.log("MAX",b);var k=li(0,b),S=li(0,Math.abs(w)),N=e(u,"timeseries-row"),E=[{key:"Activity",value:!1},{key:"Scored",value:"normalize"},{key:"Percent (column)",value:"percent_v"},{key:"Percent (row)",value:"percent_h"},{key:"Mean Diff Percent (column)",value:"percent_diff_v"},{key:"Mean Diff Percent (row)",value:"percent_diff_h"},{key:"Percent Diff",value:"percent_diff_pop"}];it(N).datasets(i).transforms(E).selected_transform(this.transform()).on("toggle.values",t).on("transform.change",this.on("transform.change")).on("dataset.change",function(t){n.on("select")(t)}).draw(),Kt(kt(me(N,"svg","svg").attr("width",744).attr("height",80),ai.map(function(t){return p[t.key]}),744,80,-1)).selectAll("rect").key(function(t,n){return ai[n].key}).on("mouseout",function(t,n){A.selectAll("tbody").selectAll("tr").classed("hide-time",!1)}).on("interact",function(t,n){A.selectAll("tbody").selectAll("tr").classed("hide-time",function(t){return!n.filter(function(n){return void 0!=t[n]&&""!=t[n]}).length})}).draw();var A=e(u,"timing-row"),C="Top Domains"==a.key?"domain":"parent_category_name";X(A).top(this.top()).headers(l).render("key","Time to Site"==a.key&&function(t){var n=this.parentNode.__data__.key,e=this.parentNode.__data__.stage;e="Baseline"==e?"":" ("+e+") ",this.innerText=si(n)+(n<0?" after":" before")+e}).sort(h,c).on("sort",this.on("sort")).data({values:M.slice(0,500)}).skip_option(!0).on("expand",function(t,n){var e=i[0].data.filter(function(n){return n[C]==t.key}),o=nt(e);"domain"==C&&xt(n).domain(e[0].domain).raw(e).data(o).on("stage-filter",r.on("stage-filter")).draw(),"parent_category_name"==C&&xt(n).domain("/").use_domain(!0).raw(e).data(o).on("stage-filter",r.on("stage-filter")).draw()}).on("draw",function(){var t=this._target.selectAll("tr").selectAll("td:not(:first-child)").style("background-color",function(t){var n=this.parentNode.__data__[t.key]||0,e=n>0?"rgba(70, 130, 180,":"rgba(244, 109, 67,";return n>0?(n=Math.abs(n),e+k(Math.log(n+1))+")"):(n=Math.abs(n),e+.8*S(Math.log(n+1))+")")});"percent"==r.transform()&&t.text(function(t){var n=this.parentNode.__data__[t.key]||0,e=ge.format(".1%")(n/100);return(e=e.length>4?e.slice(0,2):e.slice(0,-1))+"%"})}).draw()}}]),n}(_e),fi=function(){function t(n){ce(this,t),this._target=n,this._on={}}return fe(t,[{key:"data",value:function(t){return A.bind(this)("data",t)}},{key:"on",value:function(t,n){return void 0===n?this._on[t]||noop:(this._on[t]=n,this)}},{key:"draw",value:function(){var t=qn(this._target,"footer-wrap").style("padding-top","5px").style("min-height","60px").style("bottom","0px").style("position","fixed").style("width","1000px").style("background","#F0F4F7"),n=qn(t,"inner-wrap").style("border-top","1px solid #ccc").style("padding-top","5px");qn(n,"header-label").style("line-height","35px").style("text-transform","uppercase").style("font-weight","bold").style("display","inline-block").style("font-size","14px").style("color","#888888").style("width","200px").style("vertical-align","top").text("Build Filters"),qn(n,"text-label").style("line-height","35px").style("text-transform","uppercase").style("font-weight","bold").style("display","inline-block").style("font-size","12px").style("width","60px").style("vertical-align","top").style("display","none").text("Title");var e=j(n).options([{key:"contains",value:"contains"},{key:"does not contain",value:"does not contain"}]).draw()._select.style("height","36px").style("vertical-align","top"),r=qn(n,"footer-row").style("display","inline-block"),i=this.data();!function(){r.selectAll(".selectize-control").each(function(t){var n=d3.select(this).on("destroy");n&&n()});var t=me(r,"input","input").style("margin-left","10px").style("min-width","200px").attr("value",i).property("value",i),n=$(t.node()).selectize({persist:!1,create:function(t){return i=(i.length?i+",":"")+t,o.on("update")(i),{value:t,text:t}},onDelete:function(t){return i=i.split(",").filter(function(n){return n!=t[0]}).join(","),o.on("update")(i),{value:t,text:t}}});r.selectAll(".selectize-control").on("destroy",function(){n[0].selectize.destroy()})}();var o=this;qn(n,"include-submit","button").style("float","right").style("min-width","120px").style("border-radius","5px").style("line-height","29px").style("background","#f9f9fb").style("border","1px solid #ccc").style("border-radius","5px").style("vertical-align","top").attr("type","submit").text("Modify Filters").on("click",function(){var t=r.selectAll("input").property("value"),n=e.node().selectedOptions[0].__data__.key+".selectize";o.on("modify")({field:"Title",op:n,value:t})}),qn(n,"exclude-submit","button").style("float","right").style("min-width","120px").style("border-radius","5px").style("line-height","29px").style("background","#f9f9fb").style("border","1px solid #ccc").style("border-radius","5px").style("vertical-align","top").attr("type","submit").text("New Filter").on("click",function(){var t=r.selectAll("input").property("value"),n=e.node().selectedOptions[0].__data__.key+".selectize";o.on("add")({field:"Title",op:n,value:t})})}}]),t}();Rn.prototype={data:function(t){return A.bind(this)("data",t)},classed:function(t,n){return void 0===t?this._classes:void 0===n?this._classes[t]:(this._classes[t]=n,this)},on:function(t,n){return void 0===n?this._on[t]||On:(this._on[t]=n,this)},draw:function(){var t=this.classed(),n=me(this.target,".conditional-wrap","div",this.data()).classed("conditional-wrap",!0),e=xe(n,".conditional","div",jn,function(t,n){return n}).attr("class",function(t){return t.value}).classed("conditional",!0).classed("hidden",function(t){return!t.selected});return Object.keys(t).map(function(n){e.classed(n,t[n])}),this._objects=e,this},each:function(t){this.draw(),this._objects.each(t)}},Pn.prototype={draw:function(){var t=this,n=me(this._target,".overlay","div").classed("overlay",!0).style("width","100%").style("height","100%").style("position","fixed").style("top","0px").style("background","rgba(0,0,0,.5)").style("z-index","301").on("click",function(){n.remove()});this._overlay=n;me(n,".popup","div").classed("popup col-md-5 col-sm-8",!0).style("margin-left","auto").style("margin-right","auto").style("min-height","300px").style("margin-top","150px").style("background-color","white").style("float","none").on("click",function(){ge.event.stopPropagation()}).each(function(n){t._inner(ge.select(this))});return this},inner:function(t){return this._inner=t.bind(this),this.draw(),this},hide:function(){return this._overlay.remove(),this}},In.prototype={data:function(t){return A.bind(this)("data",t)},transform:function(t){return A.bind(this)("transform",t)||""},staged_filters:function(t){return A.bind(this)("staged_filters",t)||""},media:function(t){return A.bind(this)("media",t)},saved:function(t){return A.bind(this)("saved",t)},line_items:function(t){return A.bind(this)("line_items",t)||[]},selected_action:function(t){return A.bind(this)("selected_action",t)},selected_comparison:function(t){return A.bind(this)("selected_comparison",t)},action_date:function(t){return A.bind(this)("action_date",t)},comparison_date:function(t){return A.bind(this)("comparison_date",t)},view_options:function(t){return A.bind(this)("view_options",t)||[]},logic_options:function(t){return A.bind(this)("logic_options",t)||[]},explore_tabs:function(t){return A.bind(this)("explore_tabs",t)||[]},logic_categories:function(t){return A.bind(this)("logic_categories",t)||[]},actions:function(t){return A.bind(this)("actions",t)||[]},summary:function(t){return A.bind(this)("summary",t)||[]},time_summary:function(t){return A.bind(this)("time_summary",t)||[]},time_tabs:function(t){return A.bind(this)("time_tabs",t)||[]},category_summary:function(t){return A.bind(this)("category_summary",t)||[]},keyword_summary:function(t){return A.bind(this)("keyword_summary",t)||[]},before:function(t){return A.bind(this)("before",t)||[]},before_tabs:function(t){return A.bind(this)("before_tabs",t)||[]},after:function(t){return A.bind(this)("after",t)||[]},filters:function(t){return A.bind(this)("filters",t)||[]},loading:function(t){return void 0!==t&&this._segment_view&&this._segment_view.is_loading(t).draw(),A.bind(this)("loading",t)},sort:function(t){return A.bind(this)("sort",t)},ascending:function(t){return A.bind(this)("ascending",t)},is_comparison:function(t){return A.bind(this)("is_comparison",t)||!1},draw:function(){function t(t){Ln(c).data(t).on("update",function(t){h.on("staged-filter.change")(t)}).on("modify",function(t){h.on("staged-filter.change")(""),h.on("modify-filter")(t)}).on("add",function(t){h.on("staged-filter.change")(""),h.on("add-filter")(t)}).draw()}var n=this.data(),e=(this.media(),JSON.parse(JSON.stringify(this.view_options()))),r=JSON.parse(JSON.stringify(this.explore_tabs())),i=JSON.parse(JSON.stringify(this.logic_options())),o=this.logic_categories(),a=JSON.parse(JSON.stringify(this.filters())),u=JSON.parse(JSON.stringify(this.actions())),l=JSON.parse(JSON.stringify(this.staged_filters())),s=this.is_comparison()?170:120,c=this.target,h=this;return this._segment_view=Yt(c).is_comparison(h.is_comparison()).is_loading(h.loading()||!1).segments(u).data(h.summary()).action(h.selected_action()||{}).action_date(h.action_date()||"").comparison_date(h.comparison_date()||"").comparison(h.selected_comparison()||{}).on("change",this.on("action.change")).on("action_date.change",this.on("action_date.change")).on("comparison.change",this.on("comparison.change")).on("comparison_date.change",this.on("comparison_date.change")).on("download.click",function(){Un(ge.select("body")).draw().inner(function(t){var n=(me(t,".header","h4").classed("header",!0).style("text-align","center").style("text-transform","uppercase").style("font-family","ProximaNova, sans-serif").style("font-size","12px").style("font-weight","bold").style("padding-top","30px").style("padding-bottom","30px").text("Download a saved media plan"),me(t,"div","div",h.saved()).style("text-align","left").style("padding-left","25%"));h.saved()&&0!=h.saved().length?xe(n,".row","a",function(t){return t},function(t){return t.name}).classed("row",!0).attr("href",function(t){return"/mediaplan/cache?format=csv&filter_id="+t.endpoint.split("selected_action=")[1].split("&")[0]+"&name="+t.name}).attr("download",function(t){return t.name+"-export.csv"}).text(function(t){return t.name}):me(n,"span","span").text("You currently have no saved mediaplans")})}).on("saved-search.click",function(){var t=Un(ge.select("body")).draw();t.inner(function(n){var e=(me(n,".header","h4").classed("header",!0).style("text-align","center").style("text-transform","uppercase").style("font-family","ProximaNova, sans-serif").style("font-size","12px").style("font-weight","bold").style("padding-top","30px").style("padding-bottom","30px").text("Open a saved dashboard"),me(n,"div","div",h.saved()).style("text-align","left").style("padding-left","25%"));h.saved()&&0!=h.saved().length?xe(e,".row","a",function(t){return t},function(t){return t.name}).classed("row",!0).text(function(t){return t.name}).on("click",function(n){var e=f({}).from("?"+n.endpoint.split("?")[1]);return t.hide(),window.onpopstate({state:e}),ge.event.preventDefault(),!1}):me(e,"span","span").text("You currently have no saved dashboards")})}).on("new-saved-search.click",function(){var t=Un(ge.select("body")).draw();t.inner(function(n){var e=(me(n,".header","h4").classed("header",!0).style("text-align","center").style("text-transform","uppercase").style("font-family","ProximaNova, sans-serif").style("font-size","12px").style("font-weight","bold").style("padding-top","30px").style("padding-bottom","30px").text("Save this dashboard:"),me(n,"div","div").style("text-align","center")),r=me(e,".name","div").classed("name",!0);me(r,".label","div").style("width","130px").style("display","inline-block").style("text-transform","uppercase").style("font-family","ProximaNova, sans-serif").style("font-size","12px").style("font-weight","bold").style("text-align","left").text("Dashboard Name:");var i=me(r,"input","input").style("width","270px").attr("placeholder","My awesome search"),o=me(e,".advanced","details").classed("advanced",!0).style("width","400px").style("text-align","left").style("margin","auto");me(o,".label","div").style("width","130px").style("display","inline-block").style("text-transform","uppercase").style("font-family","ProximaNova, sans-serif").style("font-size","12px").style("font-weight","bold").style("text-align","left").text("Line Item:");var a=j(o).options(h.line_items().map(function(t){return{key:t.line_item_name,value:t.line_item_id}})).draw()._select.style("width","270px"),u=me(e,".send","div").classed("send",!0).style("text-align","center");me(u,"button","button").style("line-height","16px").style("margin-top","10px").text("Send").on("click",function(n){var e=i.property("value"),r=!!a.node().selectedOptions.length&&a.node().selectedOptions[0].__data__.key;ge.xhr("/crusher/saved_dashboard").post(JSON.stringify({name:e,endpoint:window.location.pathname+window.location.search,line_item:r})),t.hide()}).text("Save")})}).draw(),0!=this.summary()&&(G(c).logic(i).categories(o).filters(a).data(n).on("logic.change",this.on("logic.change")).on("filter.change",this.on("filter.change")).draw(),e=this.is_comparison()?e.filter(function(t){return"Comparison"===t.key}):e.filter(function(t){return"Comparison"!==t.key}),this.is_comparison()||tt(c).data(e).on("select",this.on("view.change")).draw(),Dn(c).data(e).classed("view-option",!0).draw().each(function(e){if(e.selected){var i=ge.select(this);if("data-view"==e.value){At(i).options(r).top(s).data(n).sort(h.sort()).ascending(h.ascending()).on("select",h.on("tab.change")).on("sort",h.on("sort.change")).on("stage-filter",function(n){l=l.split(",").concat(n.key||n.url).filter(function(t){return t.length}).join(","),h.on("staged-filter.change")(l),t(l)}).draw()}if("ba-view"==e.value&&yn(i).top(s).transform(h.transform()).data(h.before_tabs()).sort(h.sort()).ascending(h.ascending()).on("transform.change",h.on("transform.change")).on("select",h.on("tab.change")).on("sort",h.on("sort.change")).on("stage-filter",function(n){l=l.split(",").concat(n.key||n.url).filter(function(t){return t.length}).join(","),h.on("staged-filter.change")(l),t(l)}).draw(),"stage-view"==e.value){Ft(i).options(r).top(s).data(h.before_tabs()).sort(h.sort()).ascending(h.ascending()).on("select",h.on("tab.change")).on("sort",h.on("sort.change")).on("stage-filter",function(n){l=l.split(",").concat(n.key||n.url).filter(function(t){return t.length}).join(","),h.on("staged-filter.change")(l),t(l)}).draw()}"summary-view"==e.value&&Gt(i).data(h.summary()).timing(h.time_summary()).category(h.category_summary()).before(h.before()).keywords(h.keyword_summary()).on("ba.sort",h.on("ba.sort")).draw(),"timing-view"==e.value&&Tn(i).top(s).data(h.time_tabs()).transform(h.transform()).sort(h.sort()).ascending(h.ascending()).on("transform.change",h.on("transform.change")).on("select",h.on("tab.change")).on("sort",h.on("sort.change")).on("stage-filter",function(n){l=l.split(",").concat(n.key||n.url).filter(function(t){return t.length}).join(","),h.on("staged-filter.change")(l),t(l)}).draw()}}),t(l),this)},on:function(t,n){return void 0===n?this._on[t]||Fn:(this._on[t]=n,this)}};var hi="function"==typeof Symbol&&"symbol"===se(Symbol.iterator)?function(t){return void 0===t?"undefined":se(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":se(t)},pi=function(t,n){return n={exports:{}},t(n,n.exports),n.exports}(function(t){!function(){function n(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function i(t){return null===t?NaN:+t}function o(t){return!isNaN(t)}function a(t){return{left:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}function u(t){return t.length}function l(t){for(var n=1;t*n%1;)n*=10;return n}function s(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function c(){this._=Object.create(null)}function f(t){return(t+="")===ba||t[0]===wa?wa+t:t}function h(t){return(t+="")[0]===wa?t.slice(1):t}function p(t){return f(t)in this._}function d(t){return(t=f(t))in this._&&delete this._[t]}function g(){var t=[];for(var n in this._)t.push(h(n));return t}function v(){var t=0;for(var n in this._)++t;return t}function y(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function x(t){return t}function _(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function b(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=Ma.length;e<r;++e){var i=Ma[e]+n;if(i in t)return i}}function w(){}function M(){}function k(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new c;return n.on=function(n,i){var o,a=r.get(n);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function S(){ca.event.preventDefault()}function N(){for(var t,n=ca.event;t=n.sourceEvent;)n=t;return n}function E(t){for(var n=new M,e=0,r=arguments.length;++e<r;)n[arguments[e]]=k(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=ca.event;i.target=t,ca.event=i,n[i.type].apply(e,r)}finally{ca.event=o}}},n}function A(t){return Sa(t,Ca),t}function C(t){return"function"==typeof t?t:function(){return Na(t,this)}}function z(t){return"function"==typeof t?t:function(){return Ea(t,this)}}function T(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=ca.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?u:a:t.local?o:i}function q(t){return t.trim().replace(/\s+/g," ")}function L(t){return new RegExp("(?:^|\\s+)"+ca.requote(t)+"(?:\\s+|$)","g")}function O(t){return(t+"").trim().split(/^|\s+/)}function j(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=O(t).map(R);var i=t.length;return"function"==typeof n?r:e}function R(t){var n=L(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",q(i+" "+t))):e.setAttribute("class",q(i.replace(n," ")))}}function D(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function P(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function U(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e?n.createElementNS(e,t):n.createElement(t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ca.ns.qualify(t)).local?e:n}function F(){var t=this.parentNode;t&&t.removeChild(this)}function I(t){return{__data__:t}}function H(t){return function(){return Aa(this,t)}}function Y(t){return arguments.length||(t=r),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],a=0,u=o.length;a<u;a++)(i=o[a])&&n(i,a,e);return t}function Z(t){return Sa(t,Ta),t}function B(t){var n,e;return function(r,i,o){var a,u=t[o].update,l=u.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(a=u[n])&&++n<l;);return a}}function X(t,n,e){function r(){var n=this[a];n&&(this.removeEventListener(t,n,n.$),delete this[a])}function i(){var i=l(n,ha(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+ca.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var a="__on"+t,u=t.indexOf("."),l=$;u>0&&(t=t.slice(0,u));var s=qa.get(t);return s&&(t=s,l=J),u?n?i:r:n?w:o}function $(t,n){return function(e){var r=ca.event;ca.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{ca.event=r}}}function J(t,n){var e=$(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function W(t){var r=".dragsuppress-"+ ++Oa,i="click"+r,o=ca.select(e(t)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==La&&(La=!("onselectstart"in t)&&b(t.style,"userSelect")),La){var a=n(t).style,u=a[La];a[La]="none"}return function(t){if(o.on(r,null),La&&(a[La]=u),t){var n=function(){o.on(i,null)};o.on(i,function(){S(),n()},!0),setTimeout(n,0)}}}function G(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(ja<0){var o=e(t);if(o.scrollX||o.scrollY){r=ca.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();ja=!(a.f||a.e),r.remove()}}return ja?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function K(){return ca.event.changedTouches[0].identifier}function Q(t){return t>0?1:t<0?-1:0}function tt(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function nt(t){return t>1?0:t<-1?Pa:Math.acos(t)}function et(t){return t>1?Ia:t<-1?-Ia:Math.asin(t)}function rt(t){return((t=Math.exp(t))-1/t)/2}function it(t){return((t=Math.exp(t))+1/t)/2}function ot(t){return((t=Math.exp(2*t))-1)/(t+1)}function at(t){return(t=Math.sin(t/2))*t}function ut(){}function lt(t,n,e){return this instanceof lt?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof lt?new lt(t.h,t.s,t.l):wt(""+t,Mt,lt):new lt(t,n,e)}function st(t,n,e){function r(t){return t>360?t-=360:t<0&&(t+=360),t<60?o+(a-o)*t/60:t<180?a:t<240?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:n<0?0:n>1?1:n,e=e<0?0:e>1?1:e,a=e<=.5?e*(1+n):e+n-e*n,o=2*e-a,new mt(i(t+120),i(t),i(t-120))}function ct(t,n,e){return this instanceof ct?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof ct?new ct(t.h,t.c,t.l):t instanceof ht?dt(t.l,t.a,t.b):dt((t=kt((t=ca.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ct(t,n,e)}function ft(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new ht(e,Math.cos(t*=Ha)*n,Math.sin(t)*n)}function ht(t,n,e){return this instanceof ht?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof ct?ft(t.h,t.c,t.l):kt((t=mt(t)).r,t.g,t.b):new ht(t,n,e)}function pt(t,n,e){var r=(t+16)/116,i=r+n/500,o=r-e/200;return i=gt(i)*Ga,r=gt(r)*Ka,o=gt(o)*Qa,new mt(yt(3.2404542*i-1.5371385*r-.4985314*o),yt(-.969266*i+1.8760108*r+.041556*o),yt(.0556434*i-.2040259*r+1.0572252*o))}function dt(t,n,e){return t>0?new ct(Math.atan2(e,n)*Ya,Math.sqrt(n*n+e*e),t):new ct(NaN,NaN,t)}function gt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function vt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function yt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,n,e){return this instanceof mt?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):wt(""+t,mt,st):new mt(t,n,e)}function xt(t){return new mt(t>>16,t>>8&255,255&t)}function _t(t){return xt(t)+""}function bt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,n,e){var r,i,o,a=0,u=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(Nt(i[0]),Nt(i[1]),Nt(i[2]))}return(o=eu.get(t))?n(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,l=255&o)),n(a,u,l))}function Mt(t,n,e){var r,i,o=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),u=a-o,l=(a+o)/2;return u?(i=l<.5?u/(a+o):u/(2-a-o),r=t==a?(n-e)/u+(n<e?6:0):n==a?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new lt(r,i,l)}function kt(t,n,e){t=St(t),n=St(n),e=St(e);var r=vt((.4124564*t+.3575761*n+.1804375*e)/Ga),i=vt((.2126729*t+.7151522*n+.072175*e)/Ka);return ht(116*i-16,500*(r-i),200*(i-vt((.0193339*t+.119192*n+.9503041*e)/Qa)))}function St(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Nt(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function Et(t){return"function"==typeof t?t:function(){return t}}function At(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Ct(n,e,t,r)}}function Ct(t,n,e,r){function i(){var t,n=l.status;if(!n&&Tt(l)||n>=200&&n<300||304===n){try{t=e.call(o,l)}catch(t){return void a.error.call(o,t)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=ca.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,s=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var n=ca.event;ca.event=t;try{a.progress.call(o,l)}finally{ca.event=n}},o.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(s=t,o):s},o.response=function(t){return e=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ha(arguments)))}}),o.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),l.setRequestHeader)for(var c in u)l.setRequestHeader(c,u[c]);return null!=n&&l.overrideMimeType&&l.overrideMimeType(n),null!=s&&(l.responseType=s),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},ca.rebind(o,a,"on"),null==r?o:o.get(zt(r))}function zt(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}function Tt(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function qt(t,n,e){var r=arguments.length;r<2&&(n=0),r<3&&(e=Date.now());var i=e+n,o={c:t,t:i,n:null};return iu?iu.n=o:ru=o,iu=o,ou||(au=clearTimeout(au),ou=1,uu(Lt)),o}function Lt(){var t=Ot(),n=jt()-t;n>24?(isFinite(n)&&(clearTimeout(au),au=setTimeout(Lt,n)),ou=0):(ou=1,uu(Lt))}function Ot(){for(var t=Date.now(),n=ru;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function jt(){for(var t,n=ru,e=1/0;n;)n.c?(n.t<e&&(e=n.t),n=(t=n).n):n=t?t.n=n.n:ru=n.n;return iu=t,e}function Rt(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Dt(t,n){var e=Math.pow(10,3*_a(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function Pt(t){var n=t.decimal,e=t.thousands,r=t.grouping,i=t.currency,o=r&&e?function(t,n){for(var i=t.length,o=[],a=0,u=r[0],l=0;i>0&&u>0&&(l+u+1>n&&(u=Math.max(1,n-l)),o.push(t.substring(i-=u,i+u)),!((l+=u+1)>n));)u=r[a=(a+1)%r.length];return o.reverse().join(e)}:x;return function(t){var e=su.exec(t),r=e[1]||" ",a=e[2]||">",u=e[3]||"-",l=e[4]||"",s=e[5],c=+e[6],f=e[7],h=e[8],p=e[9],d=1,g="",v="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(s||"0"===r&&"="===a)&&(s=r="0",a="="),p){case"n":f=!0,p="g";break;case"%":d=100,v="%",p="f";break;case"p":d=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":d=-1,p="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=cu.get(p)||Ut;var x=s&&f;return function(t){var e=v;if(y&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===u?"":u;if(d<0){var l=ca.formatPrefix(t,h);t=l.scale(t),e=l.symbol+v}else t*=d;t=p(t,h);var _,b,w=t.lastIndexOf(".");if(w<0){var M=m?t.lastIndexOf("e"):-1;M<0?(_=t,b=""):(_=t.substring(0,M),b=t.substring(M))}else _=t.substring(0,w),b=n+t.substring(w+1);!s&&f&&(_=o(_,1/0));var k=g.length+_.length+b.length+(x?0:i.length),S=k<c?new Array(k=c-k+1).join(r):"";return x&&(_=o(S+_,S.length?c-b.length:1/0)),i+=g,t=_+b,("<"===a?i+t+S:">"===a?S+i+t:"^"===a?S.substring(0,k>>=1)+i+t+S.substring(k):i+(x?t:S+t))+e}}}function Ut(t){return t+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function It(t,n,e){function r(n){var e=t(n),r=o(e,1);return n-e<r-n?e:r}function i(e){return n(e=t(new hu(e-1)),1),e}function o(t,e){return n(t=new hu(+t),e),t}function a(t,r,o){var a=i(t),u=[];if(o>1)for(;a<r;)e(a)%o||u.push(new Date(+a)),n(a,1);else for(;a<r;)u.push(new Date(+a)),n(a,1);return u}function u(t,n,e){try{hu=Ft;var r=new Ft;return r._=t,a(r,n,e)}finally{hu=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var l=t.utc=Ht(t);return l.floor=l,l.round=Ht(r),l.ceil=Ht(i),l.offset=Ht(o),l.range=u,t}function Ht(t){return function(n,e){try{hu=Ft;var r=new Ft;return r._=n,t(r,e)._}finally{hu=Date}}}function Yt(t){function n(t){function n(n){for(var e,i,o,a=[],u=-1,l=0;++u<r;)37===t.charCodeAt(u)&&(a.push(t.slice(l,u)),null!=(i=du[e=t.charAt(++u)])&&(e=t.charAt(++u)),(o=A[e])&&(e=o(n,null==i?"e"===e?" ":"0":i)),a.push(e),l=u+1);return a.push(t.slice(l,u)),a.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(r,t,n,0)!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&hu!==Ft,o=new(i?Ft:hu);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),
o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},n.toString=function(){return t},n}function e(t,n,e,r){for(var i,o,a,u=0,l=n.length,s=e.length;u<l;){if(r>=s)return-1;if(37===(i=n.charCodeAt(u++))){if(a=n.charAt(u++),!(o=C[a in du?n.charAt(u++):a])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function r(t,n,e){w.lastIndex=0;var r=w.exec(n.slice(e));return r?(t.w=M.get(r[0].toLowerCase()),e+r[0].length):-1}function i(t,n,e){_.lastIndex=0;var r=_.exec(n.slice(e));return r?(t.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function o(t,n,e){N.lastIndex=0;var r=N.exec(n.slice(e));return r?(t.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function a(t,n,e){k.lastIndex=0;var r=k.exec(n.slice(e));return r?(t.m=S.get(r[0].toLowerCase()),e+r[0].length):-1}function u(t,n,r){return e(t,A.c.toString(),n,r)}function l(t,n,r){return e(t,A.x.toString(),n,r)}function s(t,n,r){return e(t,A.X.toString(),n,r)}function c(t,n,e){var r=x.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}var f=t.dateTime,h=t.date,p=t.time,d=t.periods,g=t.days,v=t.shortDays,y=t.months,m=t.shortMonths;n.utc=function(t){function e(t){try{hu=Ft;var n=new hu;return n._=t,r(n)}finally{hu=Date}}var r=n(t);return e.parse=function(t){try{hu=Ft;var n=r.parse(t);return n&&n._}finally{hu=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=cn;var x=ca.map(),_=Zt(g),b=Bt(g),w=Zt(v),M=Bt(v),k=Zt(y),S=Bt(y),N=Zt(m),E=Bt(m);d.forEach(function(t,n){x.set(t.toLowerCase(),n)});var A={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return m[t.getMonth()]},B:function(t){return y[t.getMonth()]},c:n(f),d:function(t,n){return Vt(t.getDate(),n,2)},e:function(t,n){return Vt(t.getDate(),n,2)},H:function(t,n){return Vt(t.getHours(),n,2)},I:function(t,n){return Vt(t.getHours()%12||12,n,2)},j:function(t,n){return Vt(1+fu.dayOfYear(t),n,3)},L:function(t,n){return Vt(t.getMilliseconds(),n,3)},m:function(t,n){return Vt(t.getMonth()+1,n,2)},M:function(t,n){return Vt(t.getMinutes(),n,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,n){return Vt(t.getSeconds(),n,2)},U:function(t,n){return Vt(fu.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Vt(fu.mondayOfYear(t),n,2)},x:n(h),X:n(p),y:function(t,n){return Vt(t.getFullYear()%100,n,2)},Y:function(t,n){return Vt(t.getFullYear()%1e4,n,4)},Z:ln,"%":function(){return"%"}},C={a:r,A:i,b:o,B:a,c:u,d:nn,e:nn,H:rn,I:rn,j:en,L:un,m:tn,M:on,p:c,S:an,U:$t,w:Xt,W:Jt,x:l,X:s,y:Gt,Y:Wt,Z:Kt,"%":sn};return n}function Vt(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Zt(t){return new RegExp("^(?:"+t.map(ca.requote).join("|")+")","i")}function Bt(t){for(var n=new c,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Xt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function $t(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Jt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Wt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Gt(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.y=Qt(+r[0]),e+r[0].length):-1}function Kt(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function tn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function nn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function en(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function rn(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function on(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function an(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function un(t,n,e){gu.lastIndex=0;var r=gu.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ln(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=_a(n)/60|0,i=_a(n)%60;return e+Vt(r,"0",2)+Vt(i,"0",2)}function sn(t,n,e){vu.lastIndex=0;var r=vu.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function cn(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function fn(){}function hn(t,n,e){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function pn(t,n){t&&_u.hasOwnProperty(t.type)&&_u[t.type](t,n)}function dn(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function gn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)dn(t[e],n,1);n.polygonEnd()}function vn(){function t(t,n){t*=Ha,n=n*Ha/2+Pa/4;var e=t-r,a=e>=0?1:-1,u=a*e,l=Math.cos(n),s=Math.sin(n),c=o*s,f=i*l+c*Math.cos(u),h=c*a*Math.sin(u);wu.add(Math.atan2(h,f)),r=t,i=l,o=s}var n,e,r,i,o;Mu.point=function(a,u){Mu.point=t,r=(n=a)*Ha,i=Math.cos(u=(e=u)*Ha/2+Pa/4),o=Math.sin(u)},Mu.lineEnd=function(){t(n,e)}}function yn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function mn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function xn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function _n(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function bn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function wn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Mn(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function kn(t,n){return _a(t[0]-n[0])<Ra&&_a(t[1]-n[1])<Ra}function Sn(t,n){t*=Ha;var e=Math.cos(n*=Ha);Nn(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function Nn(t,n,e){++ku,Nu+=(t-Nu)/ku,Eu+=(n-Eu)/ku,Au+=(e-Au)/ku}function En(){function t(t,i){t*=Ha;var o=Math.cos(i*=Ha),a=o*Math.cos(t),u=o*Math.sin(t),l=Math.sin(i),s=Math.atan2(Math.sqrt((s=e*l-r*u)*s+(s=r*a-n*l)*s+(s=n*u-e*a)*s),n*a+e*u+r*l);Su+=s,Cu+=s*(n+(n=a)),zu+=s*(e+(e=u)),Tu+=s*(r+(r=l)),Nn(n,e,r)}var n,e,r;ju.point=function(i,o){i*=Ha;var a=Math.cos(o*=Ha);n=a*Math.cos(i),e=a*Math.sin(i),r=Math.sin(o),ju.point=t,Nn(n,e,r)}}function An(){ju.point=Sn}function Cn(){function t(t,n){t*=Ha;var e=Math.cos(n*=Ha),a=e*Math.cos(t),u=e*Math.sin(t),l=Math.sin(n),s=i*l-o*u,c=o*a-r*l,f=r*u-i*a,h=Math.sqrt(s*s+c*c+f*f),p=r*a+i*u+o*l,d=h&&-nt(p)/h,g=Math.atan2(h,p);qu+=d*s,Lu+=d*c,Ou+=d*f,Su+=g,Cu+=g*(r+(r=a)),zu+=g*(i+(i=u)),Tu+=g*(o+(o=l)),Nn(r,i,o)}var n,e,r,i,o;ju.point=function(a,u){n=a,e=u,ju.point=t,a*=Ha;var l=Math.cos(u*=Ha);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(u),Nn(r,i,o)},ju.lineEnd=function(){t(n,e),ju.lineEnd=An,ju.point=Sn}}function zn(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Tn(){return!0}function qn(t,n,e,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(kn(e,r)){i.lineStart();for(var u=0;u<n;++u)i.point((e=t[u])[0],e[1]);return void i.lineEnd()}var l=new On(e,t,null,!0),s=new On(e,null,l,!1);l.o=s,o.push(l),a.push(s),l=new On(r,t,null,!1),s=new On(r,null,l,!0),l.o=s,o.push(l),a.push(s)}}),a.sort(n),Ln(o),Ln(a),o.length){for(var u=0,l=e,s=a.length;u<s;++u)a[u].e=l=!l;for(var c,f,h=o[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){c=p.p.z;for(var u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Ln(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function On(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function jn(t,n,e,r){return function(i,o){function a(n,e){var r=i(n,e);t(n=r[0],e=r[1])&&o.point(n,e)}function u(t,n){var e=i(t,n);v.point(e[0],e[1])}function l(){m.point=u,v.lineStart()}function s(){m.point=a,v.lineEnd()}function c(t,n){g.push([t,n]);var e=i(t,n);_.point(e[0],e[1])}function f(){_.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),_.lineEnd();var t,n=_.clean(),e=x.buffer(),r=e.length;if(g.pop(),d.push(g),g=null,r)if(1&n){t=e[0];var i,r=t.length-1,a=-1;if(r>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&n&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Rn))}var p,d,g,v=n(o),y=i.invert(r[0],r[1]),m={point:a,lineStart:l,lineEnd:s,polygonStart:function(){m.point=c,m.lineStart=f,m.lineEnd=h,p=[],d=[]},polygonEnd:function(){m.point=a,m.lineStart=l,m.lineEnd=s,p=ca.merge(p);var t=Hn(y,d);p.length?(b||(o.polygonStart(),b=!0),qn(p,Pn,t,e,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=Dn(),_=n(x),b=!1;return m}}function Rn(t){return t.length>1}function Dn(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:w,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Pn(t,n){return((t=t.x)[0]<0?t[1]-Ia-Ra:Ia-t[1])-((n=n.x)[0]<0?n[1]-Ia-Ra:Ia-n[1])}function Un(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Pa:-Pa,l=_a(o-e);_a(l-Pa)<Ra?(t.point(e,r=(r+a)/2>0?Ia:-Ia),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&l>=Pa&&(_a(e-i)<Ra&&(e-=i*Ra),_a(o-u)<Ra&&(o-=u*Ra),r=Fn(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function Fn(t,n,e,r){var i,o,a=Math.sin(t-e);return _a(a)>Ra?Math.atan((Math.sin(n)*(o=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(n))*Math.sin(t))/(i*o*a)):(n+r)/2}function In(t,n,e,r){var i;if(null==t)i=e*Ia,r.point(-Pa,i),r.point(0,i),r.point(Pa,i),r.point(Pa,0),r.point(Pa,-i),r.point(0,-i),r.point(-Pa,-i),r.point(-Pa,0),r.point(-Pa,i);else if(_a(t[0]-n[0])>Ra){var o=t[0]<n[0]?Pa:-Pa;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Hn(t,n){var e=t[0],r=t[1],i=[Math.sin(e),-Math.cos(e),0],o=0,a=0;wu.reset();for(var u=0,l=n.length;u<l;++u){var s=n[u],c=s.length;if(c)for(var f=s[0],h=f[0],p=f[1]/2+Pa/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===c&&(v=0),t=s[v];var y=t[0],m=t[1]/2+Pa/4,x=Math.sin(m),_=Math.cos(m),b=y-h,w=b>=0?1:-1,M=w*b,k=M>Pa,S=d*x;if(wu.add(Math.atan2(S*w*Math.sin(M),g*_+S*Math.cos(M))),o+=k?b+w*Ua:b,k^h>=e^y>=e){var N=xn(yn(f),yn(t));wn(N);var E=xn(i,N);wn(E);var A=(k^b>=0?-1:1)*et(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(a+=k^b>=0?1:-1)}if(!v++)break;h=y,d=x,g=_,f=t}}return(o<-Ra||o<Ra&&wu<0)^1&a}function Yn(t){function n(t,n){return Math.cos(t)*Math.cos(n)>o}function e(t){var e,o,l,s,c;return{lineStart:function(){s=l=!1,c=1},point:function(f,h){var p,d=[f,h],g=n(f,h),v=a?g?0:i(f,h):g?i(f+(f<0?Pa:-Pa),h):0;if(!e&&(s=l=g)&&t.lineStart(),g!==l&&(p=r(e,d),(kn(e,p)||kn(d,p))&&(d[0]+=Ra,d[1]+=Ra,g=n(d[0],d[1]))),g!==l)c=0,g?(t.lineStart(),p=r(d,e),t.point(p[0],p[1])):(p=r(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(u&&e&&a^g){var y;v&o||!(y=r(d,e,!0))||(c=0,a?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&kn(e,d)||t.point(d[0],d[1]),e=d,l=g,o=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(s&&l)<<1}}}function r(t,n,e){var r=yn(t),i=yn(n),a=[1,0,0],u=xn(r,i),l=mn(u,u),s=u[0],c=l-s*s;if(!c)return!e&&t;var f=o*l/c,h=-o*s/c,p=xn(a,u),d=bn(a,f);_n(d,bn(u,h));var g=p,v=mn(d,g),y=mn(g,g),m=v*v-y*(mn(d,d)-1);if(!(m<0)){var x=Math.sqrt(m),_=bn(g,(-v-x)/y);if(_n(_,d),_=Mn(_),!e)return _;var b,w=t[0],M=n[0],k=t[1],S=n[1];M<w&&(b=w,w=M,M=b);var N=M-w,E=_a(N-Pa)<Ra,A=E||N<Ra;if(!E&&S<k&&(b=k,k=S,S=b),A?E?k+S>0^_[1]<(_a(_[0]-w)<Ra?k:S):k<=_[1]&&_[1]<=S:N>Pa^(w<=_[0]&&_[0]<=M)){var C=bn(g,(-v+x)/y);return _n(C,d),[_,Mn(C)]}}}function i(n,e){var r=a?t:Pa-t,i=0;return n<-r?i|=1:n>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var o=Math.cos(t),a=o>0,u=_a(o)>Ra;return jn(n,e,ve(t,6*Ha),a?[0,-t]:[-Pa,t-Pa])}function Vn(t,n,e,r){return function(i){var o,a=i.a,u=i.b,l=a.x,s=a.y,c=u.x,f=u.y,h=0,p=1,d=c-l,g=f-s;if(o=t-l,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>h&&(h=o)}if(o=e-l,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<p&&(p=o)}if(o=n-s,g||!(o>0)){if(o/=g,g<0){if(o<h)return;o<p&&(p=o)}else if(g>0){if(o>p)return;o>h&&(h=o)}if(o=r-s,g||!(o<0)){if(o/=g,g<0){if(o>p)return;o>h&&(h=o)}else if(g>0){if(o<h)return;o<p&&(p=o)}return h>0&&(i.a={x:l+h*d,y:s+h*g}),p<1&&(i.b={x:l+p*d,y:s+p*g}),i}}}}}}function Zn(t,n,e,r){function i(r,i){return _a(r[0]-t)<Ra?i>0?0:3:_a(r[0]-e)<Ra?i>0?2:1:_a(r[1]-n)<Ra?i>0?1:0:i>0?3:2}function o(t,n){return a(t.x,n.x)}function a(t,n){var e=i(t,1),r=i(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function l(t){for(var n=0,e=v.length,r=t[1],i=0;i<e;++i)for(var o,a=1,u=v[i],l=u.length,s=u[0];a<l;++a)o=u[a],s[1]<=r?o[1]>r&&tt(s,o,t)>0&&++n:o[1]<=r&&tt(s,o,t)<0&&--n,s=o;return 0!==n}function s(o,u,l,s){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(u,l))||a(o,u)<0^l>0)do{s.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+l+4)%4)!==f);else s.point(u[0],u[1])}function c(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function f(t,n){c(t,n)&&u.point(t,n)}function h(){C.point=d,v&&v.push(y=[]),k=!0,M=!1,b=w=NaN}function p(){g&&(d(m,x),_&&M&&E.rejoin(),g.push(E.buffer())),C.point=f,M&&u.lineEnd()}function d(t,n){t=Math.max(-Du,Math.min(Du,t)),n=Math.max(-Du,Math.min(Du,n));var e=c(t,n);if(v&&y.push([t,n]),k)m=t,x=n,_=e,k=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&M)u.point(t,n);else{var r={a:{x:b,y:w},b:{x:t,y:n}};A(r)?(M||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),S=!1):e&&(u.lineStart(),u.point(t,n),S=!1)}b=t,w=n,M=e}var g,v,y,m,x,_,b,w,M,k,S,N=u,E=Dn(),A=Vn(t,n,e,r),C={point:f,lineStart:h,lineEnd:p,polygonStart:function(){u=E,g=[],v=[],S=!0},polygonEnd:function(){u=N,g=ca.merge(g);var n=l([t,r]),e=S&&n,i=g.length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),i&&qn(g,o,n,s,u),u.polygonEnd()),g=v=y=null}};return C}}function Bn(t){var n=0,e=Pa/3,r=le(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Pa/180,e=t[1]*Pa/180):[n/Pa*180,e/Pa*180]},i}function Xn(t,n){function e(t,n){var e=Math.sqrt(o-2*i*Math.sin(n))/i;return[e*Math.sin(t*=i),a-e*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(n))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return e.invert=function(t,n){var e=a-n;return[Math.atan2(t,e)/i,et((o-(t*t+e*e)*i*i)/(2*i))]},e}function $n(){function t(t,n){Uu+=i*t-r*n,r=t,i=n}var n,e,r,i;Vu.point=function(o,a){Vu.point=t,n=r=o,e=i=a},Vu.lineEnd=function(){t(n,e)}}function Jn(t,n){t<Fu&&(Fu=t),t>Hu&&(Hu=t),n<Iu&&(Iu=n),n>Yu&&(Yu=n)}function Wn(){function t(t,n){a.push("M",t,",",n,o)}function n(t,n){a.push("M",t,",",n),u.point=e}function e(t,n){a.push("L",t,",",n)}function r(){u.point=t}function i(){a.push("Z")}var o=Gn(4.5),a=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return o=Gn(t),u},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return u}function Gn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Kn(t,n){Nu+=t,Eu+=n,++Au}function Qn(){function t(t,r){var i=t-n,o=r-e,a=Math.sqrt(i*i+o*o);Cu+=a*(n+t)/2,zu+=a*(e+r)/2,Tu+=a,Kn(n=t,e=r)}var n,e;Bu.point=function(r,i){Bu.point=t,Kn(n=r,e=i)}}function te(){Bu.point=Kn}function ne(){function t(t,n){var e=t-r,o=n-i,a=Math.sqrt(e*e+o*o);Cu+=a*(r+t)/2,zu+=a*(i+n)/2,Tu+=a,a=i*t-r*n,qu+=a*(r+t),Lu+=a*(i+n),Ou+=3*a,Kn(r=t,i=n)}var n,e,r,i;Bu.point=function(o,a){Bu.point=t,Kn(n=r=o,e=i=a)},Bu.lineEnd=function(){t(n,e)}}function ee(t){function n(n,e){t.moveTo(n+a,e),t.arc(n,e,a,0,Ua)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function i(){u.point=n}function o(){t.closePath()}var a=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:i,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=i,u.point=n},pointRadius:function(t){return a=t,u},result:w};return u}function re(t){function n(t){return(u?r:e)(t)}function e(n){return ae(n,function(e,r){e=t(e,r),n.point(e[0],e[1])})}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){x=NaN,k.point=o,n.lineStart()}function o(e,r){var o=yn([e,r]),a=t(e,r);i(x,_,m,b,w,M,x=a[0],_=a[1],m=e,b=o[0],w=o[1],M=o[2],u,n),n.point(x,_)}function a(){k.point=e,n.lineEnd()}function l(){r(),k.point=s,k.lineEnd=c}function s(t,n){o(f=t,h=n),p=x,d=_,g=b,v=w,y=M,k.point=o}function c(){i(x,_,m,b,w,M,p,d,f,g,v,y,u,n),k.lineEnd=a,a()}var f,h,p,d,g,v,y,m,x,_,b,w,M,k={point:e,lineStart:r,lineEnd:a,polygonStart:function(){n.polygonStart(),k.lineStart=l},polygonEnd:function(){n.polygonEnd(),k.lineStart=r}};return k}function i(n,e,r,u,l,s,c,f,h,p,d,g,v,y){var m=c-n,x=f-e,_=m*m+x*x;if(_>4*o&&v--){var b=u+p,w=l+d,M=s+g,k=Math.sqrt(b*b+w*w+M*M),S=Math.asin(M/=k),N=_a(_a(M)-1)<Ra||_a(r-h)<Ra?(r+h)/2:Math.atan2(w,b),E=t(N,S),A=E[0],C=E[1],z=A-n,T=C-e,q=x*z-m*T;(q*q/_>o||_a((m*z+x*T)/_-.5)>.3||u*p+l*d+s*g<a)&&(i(n,e,r,u,l,s,A,C,N,b/=k,w/=k,M,v,y),y.point(A,C),i(A,C,N,b,w,M,c,f,h,p,d,g,v,y))}}var o=.5,a=Math.cos(30*Ha),u=16;return n.precision=function(t){return arguments.length?(u=(o=t*t)>0&&16,n):Math.sqrt(o)},n}function ie(t){var n=re(function(n,e){return t([n*Ya,e*Ya])});return function(t){return se(n(t))}}function oe(t){this.stream=t}function ae(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function ue(t){return le(function(){return t})()}function le(t){function n(t){return t=u(t[0]*Ha,t[1]*Ha),[t[0]*h+l,s-t[1]*h]}function e(t){return(t=u.invert((t[0]-l)/h,(s-t[1])/h))&&[t[0]*Ya,t[1]*Ya]}function r(){u=zn(a=he(y,m,_),o);var t=o(g,v);return l=p-t[0]*h,s=d+t[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),n}var o,a,u,l,s,c,f=re(function(t,n){return t=o(t,n),[t[0]*h+l,s-t[1]*h]}),h=150,p=480,d=250,g=0,v=0,y=0,m=0,_=0,b=Ru,w=x,M=null,k=null;return n.stream=function(t){return c&&(c.valid=!1),c=se(b(a,f(w(t)))),c.valid=!0,c},n.clipAngle=function(t){return arguments.length?(b=null==t?(M=t,Ru):Yn((M=+t)*Ha),i()):M},n.clipExtent=function(t){return arguments.length?(k=t,w=t?Zn(t[0][0],t[0][1],t[1][0],t[1][1]):x,i()):k},n.scale=function(t){return arguments.length?(h=+t,r()):h},n.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},n.center=function(t){return arguments.length?(g=t[0]%360*Ha,v=t[1]%360*Ha,r()):[g*Ya,v*Ya]},n.rotate=function(t){return arguments.length?(y=t[0]%360*Ha,m=t[1]%360*Ha,_=t.length>2?t[2]%360*Ha:0,r()):[y*Ya,m*Ya,_*Ya]},ca.rebind(n,f,"precision"),function(){return o=t.apply(this,arguments),n.invert=o.invert&&e,r()}}function se(t){return ae(t,function(n,e){t.point(n*Ha,e*Ha)})}function ce(t,n){return[t,n]}function fe(t,n){return[t>Pa?t-Ua:t<-Pa?t+Ua:t,n]}function he(t,n,e){return t?n||e?zn(de(t),ge(n,e)):de(t):n||e?ge(n,e):fe}function pe(t){return function(n,e){return n+=t,[n>Pa?n-Ua:n<-Pa?n+Ua:n,e]}}function de(t){var n=pe(t);return n.invert=pe(-t),n}function ge(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,s=Math.sin(n),c=s*r+u*i;return[Math.atan2(l*o-c*a,u*r-s*i),et(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(n),a=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,l=Math.sin(t)*e,s=Math.sin(n),c=s*o-l*a;return[Math.atan2(l*o+s*a,u*r+c*i),et(c*r-u*i)]},e}function ve(t,n){var e=Math.cos(t),r=Math.sin(t);return function(i,o,a,u){var l=a*n;null!=i?(i=ye(e,i),o=ye(e,o),(a>0?i<o:i>o)&&(i+=a*Ua)):(i=t+a*Ua,o=t-.5*l);for(var s,c=i;a>0?c>o:c<o;c-=l)u.point((s=Mn([e,-r*Math.cos(c),-r*Math.sin(c)]))[0],s[1])}}function ye(t,n){var e=yn(n);e[0]-=t,wn(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ra)%(2*Math.PI)}function me(t,n,e){var r=ca.range(t,n-Ra,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function xe(t,n,e){var r=ca.range(t,n-Ra,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function _e(t){return t.source}function be(t){return t.target}function we(t,n,e,r){var i=Math.cos(n),o=Math.sin(n),a=Math.cos(r),u=Math.sin(r),l=i*Math.cos(t),s=i*Math.sin(t),c=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(at(r-n)+i*a*at(e-t))),p=1/Math.sin(h),d=h?function(t){var n=Math.sin(t*=h)*p,e=Math.sin(h-t)*p,r=e*l+n*c,i=e*s+n*f,a=e*o+n*u;return[Math.atan2(i,r)*Ya,Math.atan2(a,Math.sqrt(r*r+i*i))*Ya]}:function(){return[t*Ya,n*Ya]};return d.distance=h,d}function Me(){function t(t,i){var o=Math.sin(i*=Ha),a=Math.cos(i),u=_a((t*=Ha)-n),l=Math.cos(u);Xu+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=r*o-e*a*l)*u),e*o+r*a*l),n=t,e=o,r=a}var n,e,r;$u.point=function(i,o){n=i*Ha,e=Math.sin(o*=Ha),r=Math.cos(o),$u.point=t},$u.lineEnd=function(){$u.point=$u.lineEnd=w}}function ke(t,n){function e(n,e){var r=Math.cos(n),i=Math.cos(e),o=t(r*i);return[o*i*Math.sin(n),o*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),i=n(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&e*o/r)]},e}function Se(t,n){function e(t,n){a>0?n<-Ia+Ra&&(n=-Ia+Ra):n>Ia-Ra&&(n=Ia-Ra);var e=a/Math.pow(i(n),o);return[e*Math.sin(o*t),a-e*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Pa/4+t/2)},o=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(i(n)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(e.invert=function(t,n){var e=a-n,r=Q(o)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/o,2*Math.atan(Math.pow(a/r,1/o))-Ia]},e):Ee}function Ne(t,n){function e(t,n){var e=o-n;return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}var r=Math.cos(t),i=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),o=r/i+t;return _a(i)<Ra?ce:(e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/i,o-Q(i)*Math.sqrt(t*t+e*e)]},e)}function Ee(t,n){return[t,Math.log(Math.tan(Pa/4+n/2))]}function Ae(t){var n,e=ue(t),r=e.scale,i=e.translate,o=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=i.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var a=o.apply(e,arguments);if(a===e){if(n=null==t){var u=Pa*r(),l=i();o([[l[0]-u,l[1]-u],[l[0]+u,l[1]+u]])}}else n&&(a=null);return a},e.clipExtent(null)}function Ce(t,n){return[Math.log(Math.tan(Pa/4+n/2)),-t]}function ze(t){return t[0]}function Te(t){return t[1]}function qe(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;i++){for(;r>1&&tt(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function Le(t,n){return t[0]-n[0]||t[1]-n[1]}function Oe(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function je(t,n,e,r){var i=t[0],o=e[0],a=n[0]-i,u=r[0]-o,l=t[1],s=e[1],c=n[1]-l,f=r[1]-s,h=(u*(l-s)-f*(i-o))/(f*a-u*c);return[i+h*a,l+h*c]}function Re(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function De(){ir(this),this.edge=this.site=this.circle=null}function Pe(t){var n=al.pop()||new De;return n.site=t,n}function Ue(t){Je(t),rl.remove(t),al.push(t),ir(t)}function Fe(t){var n=t.circle,e=n.x,r=n.cy,i={x:e,y:r},o=t.P,a=t.N,u=[t];Ue(t);for(var l=o;l.circle&&_a(e-l.circle.x)<Ra&&_a(r-l.circle.cy)<Ra;)o=l.P,u.unshift(l),Ue(l),l=o;u.unshift(l),Je(l);for(var s=a;s.circle&&_a(e-s.circle.x)<Ra&&_a(r-s.circle.cy)<Ra;)a=s.N,u.push(s),Ue(s),s=a;u.push(s),Je(s);var c,f=u.length;for(c=1;c<f;++c)s=u[c],l=u[c-1],nr(s.edge,l.site,s.site,i);l=u[0],s=u[f-1],s.edge=Qe(l.site,s.site,null,i),$e(l),$e(s)}function Ie(t){for(var n,e,r,i,o=t.x,a=t.y,u=rl._;u;)if((r=He(u,a)-o)>Ra)u=u.L;else{if(!((i=o-Ye(u,a))>Ra)){r>-Ra?(n=u.P,e=u):i>-Ra?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var l=Pe(t);if(rl.insert(n,l),n||e){if(n===e)return Je(n),e=Pe(n.site),rl.insert(l,e),l.edge=e.edge=Qe(n.site,l.site),$e(n),void $e(e);if(!e)return void(l.edge=Qe(n.site,l.site));Je(n),Je(e);var s=n.site,c=s.x,f=s.y,h=t.x-c,p=t.y-f,d=e.site,g=d.x-c,v=d.y-f,y=2*(h*v-p*g),m=h*h+p*p,x=g*g+v*v,_={x:(v*m-p*x)/y+c,y:(h*x-g*m)/y+f};nr(e.edge,s,d,_),l.edge=Qe(s,t,null,_),e.edge=Qe(t,d,null,_),$e(n),$e(e)}}function He(t,n){var e=t.site,r=e.x,i=e.y,o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;e=a.site;var u=e.x,l=e.y,s=l-n;if(!s)return u;var c=u-r,f=1/o-1/s,h=c/s;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*s)-l+s/2+i-o/2)))/f+r:(r+u)/2}function Ye(t,n){var e=t.N;if(e)return He(e,n);var r=t.site;return r.y===n?r.x:1/0}function Ve(t){this.site=t,this.edges=[]}function Ze(t){for(var n,e,r,i,o,a,u,l,s,c,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],g=el,v=g.length;v--;)if((o=g[v])&&o.prepare())for(u=o.edges,l=u.length,a=0;a<l;)c=u[a].end(),r=c.x,i=c.y,s=u[++a%l].start(),n=s.x,e=s.y,(_a(r-n)>Ra||_a(i-e)>Ra)&&(u.splice(a,0,new er(tr(o.site,c,_a(r-f)<Ra&&d-i>Ra?{x:f,y:_a(n-f)<Ra?e:d}:_a(i-d)<Ra&&h-r>Ra?{x:_a(e-d)<Ra?n:h,y:d}:_a(r-h)<Ra&&i-p>Ra?{x:h,y:_a(n-h)<Ra?e:p}:_a(i-p)<Ra&&r-f>Ra?{x:_a(e-p)<Ra?n:f,y:p}:null),o.site,null)),++l)}function Be(t,n){return n.angle-t.angle}function Xe(){ir(this),this.x=this.y=this.arc=this.site=this.cy=null}function $e(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i.x,u=i.y,l=r.x-a,s=r.y-u,c=o.x-a,f=o.y-u,h=2*(l*f-s*c);if(!(h>=-Da)){var p=l*l+s*s,d=c*c+f*f,g=(f*p-s*d)/h,v=(l*d-c*p)/h,f=v+u,y=ul.pop()||new Xe;y.arc=t,y.site=i,y.x=g+a,y.y=f+Math.sqrt(g*g+v*v),y.cy=f,t.circle=y;for(var m=null,x=ol._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}ol.insert(m,y),m||(il=y)}}}}function Je(t){var n=t.circle;n&&(n.P||(il=n.N),ol.remove(n),ul.push(n),ir(n),t.circle=null)}function We(t){for(var n,e=nl,r=Vn(t[0][0],t[0][1],t[1][0],t[1][1]),i=e.length;i--;)n=e[i],(!Ge(n,t)||!r(n)||_a(n.a.x-n.b.x)<Ra&&_a(n.a.y-n.b.y)<Ra)&&(n.a=n.b=null,e.splice(i,1))}function Ge(t,n){var e=t.b;if(e)return!0;var r,i,o=t.a,a=n[0][0],u=n[1][0],l=n[0][1],s=n[1][1],c=t.l,f=t.r,h=c.x,p=c.y,d=f.x,g=f.y,v=(h+d)/2,y=(p+g)/2;if(g===p){if(v<a||v>=u)return;if(h>d){if(o){if(o.y>=s)return}else o={x:v,y:l};e={x:v,y:s}}else{if(o){if(o.y<l)return}else o={x:v,y:s};e={x:v,y:l}}}else if(r=(h-d)/(g-p),i=y-r*v,r<-1||r>1)if(h>d){if(o){if(o.y>=s)return}else o={x:(l-i)/r,y:l};e={x:(s-i)/r,y:s}}else{if(o){if(o.y<l)return}else o={x:(s-i)/r,y:s};e={x:(l-i)/r,y:l}}else if(p<g){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};e={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};e={x:a,y:r*a+i}}return t.a=o,t.b=e,!0}function Ke(t,n){this.l=t,this.r=n,this.a=this.b=null}function Qe(t,n,e,r){var i=new Ke(t,n);return nl.push(i),e&&nr(i,t,n,e),r&&nr(i,n,t,r),el[t.i].edges.push(new er(i,t,n)),el[n.i].edges.push(new er(i,n,t)),i}function tr(t,n,e){var r=new Ke(t,null);return r.a=n,r.b=e,nl.push(r),r}function nr(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function er(t,n,e){var r=t.a,i=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function rr(){this._=null}function ir(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function or(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ar(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function ur(t){for(;t.L;)t=t.L;return t}function lr(t,n){var e,r,i,o=t.sort(sr).pop();for(nl=[],el=new Array(t.length),rl=new rr,ol=new rr;;)if(i=il,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===e&&o.y===r||(el[o.i]=new Ve(o),Ie(o),e=o.x,r=o.y),o=t.pop();else{if(!i)break;Fe(i.arc)}n&&(We(n),Ze(n));var a={cells:el,edges:nl};return rl=ol=nl=el=null,a}function sr(t,n){return n.y-t.y||n.x-t.x}function cr(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function fr(t){return t.x}function hr(t){return t.y}function pr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dr(t,n,e,r,i,o){if(!t(n,e,r,i,o)){var a=.5*(e+i),u=.5*(r+o),l=n.nodes;l[0]&&dr(t,l[0],e,r,a,u),l[1]&&dr(t,l[1],a,r,i,u),l[2]&&dr(t,l[2],e,u,a,o),l[3]&&dr(t,l[3],a,u,i,o)}}function gr(t,n,e,r,i,o,a){var u,l=1/0;return function t(s,c,f,h,p){if(!(c>o||f>a||h<r||p<i)){if(d=s.point){var d,g=n-s.x,v=e-s.y,y=g*g+v*v;if(y<l){var m=Math.sqrt(l=y);r=n-m,i=e-m,o=n+m,a=e+m,u=d}}for(var x=s.nodes,_=.5*(c+h),b=.5*(f+p),w=n>=_,M=e>=b,k=M<<1|w,S=k+4;k<S;++k)if(s=x[3&k])switch(3&k){case 0:t(s,c,f,_,b);break;case 1:t(s,_,f,h,b);break;case 2:t(s,c,b,_,p);break;case 3:t(s,_,b,h,p)}}}(t,r,i,o,a),u}function vr(t,n){t=ca.rgb(t),n=ca.rgb(n);var e=t.r,r=t.g,i=t.b,o=n.r-e,a=n.g-r,u=n.b-i;return function(t){return"#"+bt(Math.round(e+o*t))+bt(Math.round(r+a*t))+bt(Math.round(i+u*t))}}function yr(t,n){var e,r={},i={};for(e in t)e in n?r[e]=_r(t[e],n[e]):i[e]=t[e];for(e in n)e in t||(i[e]=n[e]);return function(t){for(e in r)i[e]=r[e](t);return i}}function mr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function xr(t,n){var e,r,i,o=sl.lastIndex=cl.lastIndex=0,a=-1,u=[],l=[];for(t+="",n+="";(e=sl.exec(t))&&(r=cl.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,l.push({i:a,x:mr(e,r)})),o=cl.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?l[0]?(n=l[0].x,function(t){return n(t)+""}):function(){return n}:(n=l.length,function(t){for(var e,r=0;r<n;++r)u[(e=l[r]).i]=e.x(t);return u.join("")})}function _r(t,n){for(var e,r=ca.interpolators.length;--r>=0&&!(e=ca.interpolators[r](t,n)););return e}function br(t,n){var e,r=[],i=[],o=t.length,a=n.length,u=Math.min(t.length,n.length);for(e=0;e<u;++e)r.push(_r(t[e],n[e]));for(;e<o;++e)i[e]=t[e];for(;e<a;++e)i[e]=n[e];return function(t){for(e=0;e<u;++e)i[e]=r[e](t);return i}}function wr(t){return function(n){return n<=0?0:n>=1?1:t(n)}}function Mr(t){return function(n){return 1-t(1-n)}}function kr(t){return function(n){return.5*(n<.5?t(2*n):2-t(2-2*n))}}function Sr(t){return t*t}function Nr(t){return t*t*t}function Er(t){if(t<=0)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(t<.5?e:3*(t-n)+e-.75)}function Ar(t){return function(n){return Math.pow(n,t)}}function Cr(t){return 1-Math.cos(t*Ia)}function zr(t){return Math.pow(2,10*(t-1))}function Tr(t){return 1-Math.sqrt(1-t*t)}function qr(t,n){var e;return arguments.length<2&&(n=.45),arguments.length?e=n/Ua*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Ua/n)}}function Lr(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function Or(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function jr(t,n){t=ca.hcl(t),n=ca.hcl(n);var e=t.h,r=t.c,i=t.l,o=n.h-e,a=n.c-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.c:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:o<-180&&(o+=360),function(t){return ft(e+o*t,r+a*t,i+u*t)+""}}function Rr(t,n){t=ca.hsl(t),n=ca.hsl(n);var e=t.h,r=t.s,i=t.l,o=n.h-e,a=n.s-r,u=n.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?n.s:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:o<-180&&(o+=360),function(t){return st(e+o*t,r+a*t,i+u*t)+""}}function Dr(t,n){t=ca.lab(t),n=ca.lab(n);var e=t.l,r=t.a,i=t.b,o=n.l-e,a=n.a-r,u=n.b-i;return function(t){return pt(e+o*t,r+a*t,i+u*t)+""}}function Pr(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Ur(t){var n=[t.a,t.b],e=[t.c,t.d],r=Ir(n),i=Fr(n,e),o=Ir(Hr(e,n,-i))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Ya,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Ya:0}function Fr(t,n){
return t[0]*n[0]+t[1]*n[1]}function Ir(t){var n=Math.sqrt(Fr(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Hr(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function Yr(t){return t.length?t.pop()+",":""}function Vr(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:mr(t[0],n[0])},{i:i-2,x:mr(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}function Zr(t,n,e,r){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),r.push({i:e.push(Yr(e)+"rotate(",null,")")-2,x:mr(t,n)})):n&&e.push(Yr(e)+"rotate("+n+")")}function Br(t,n,e,r){t!==n?r.push({i:e.push(Yr(e)+"skewX(",null,")")-2,x:mr(t,n)}):n&&e.push(Yr(e)+"skewX("+n+")")}function Xr(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push(Yr(e)+"scale(",null,",",null,")");r.push({i:i-4,x:mr(t[0],n[0])},{i:i-2,x:mr(t[1],n[1])})}else 1===n[0]&&1===n[1]||e.push(Yr(e)+"scale("+n+")")}function $r(t,n){var e=[],r=[];return t=ca.transform(t),n=ca.transform(n),Vr(t.translate,n.translate,e,r),Zr(t.rotate,n.rotate,e,r),Br(t.skew,n.skew,e,r),Xr(t.scale,n.scale,e,r),t=n=null,function(t){for(var n,i=-1,o=r.length;++i<o;)e[(n=r[i]).i]=n.x(t);return e.join("")}}function Jr(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Wr(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Gr(t){for(var n=t.source,e=t.target,r=Qr(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var o=i.length;e!==r;)i.splice(o,0,e),e=e.parent;return i}function Kr(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function Qr(t,n){if(t===n)return t;for(var e=Kr(t),r=Kr(n),i=e.pop(),o=r.pop(),a=null;i===o;)a=i,i=e.pop(),o=r.pop();return a}function ti(t){t.fixed|=2}function ni(t){t.fixed&=-7}function ei(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ri(t){t.fixed&=-5}function ii(t,n,e){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,u=a.length,l=-1;++l<u;)null!=(o=a[l])&&(ii(o,n,e),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var s=n*e[t.point.index];t.charge+=t.pointCharge=s,r+=s*t.point.x,i+=s*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function oi(t,n){return ca.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=fi,t}function ai(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)e.push(i[r])}function ui(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)e.push(o[a]);for(;null!=(t=r.pop());)n(t)}function li(t){return t.children}function si(t){return t.value}function ci(t,n){return n.value-t.value}function fi(t){return ca.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function pi(t){return t.x}function di(t){return t.y}function gi(t,n,e){t.y0=n,t.y=e}function vi(t){return ca.range(t.length)}function yi(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function mi(t){for(var n,e=1,r=0,i=t[0][1],o=t.length;e<o;++e)(n=t[e][1])>i&&(r=e,i=n);return r}function xi(t){return t.reduce(_i,0)}function _i(t,n){return t+n[1]}function bi(t,n){return wi(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function wi(t,n){for(var e=-1,r=+t[0],i=(t[1]-r)/n,o=[];++e<=n;)o[e]=i*e+r;return o}function Mi(t){return[ca.min(t),ca.max(t)]}function ki(t,n){return t.value-n.value}function Si(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function Ni(t,n){t._pack_next=n,n._pack_prev=t}function Ei(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return.999*i*i>e*e+r*r}function Ai(t){function n(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}if((e=t.children)&&(s=e.length)){var e,r,i,o,a,u,l,s,c=1/0,f=-1/0,h=1/0,p=-1/0;if(e.forEach(Ci),r=e[0],r.x=-r.r,r.y=0,n(r),s>1&&(i=e[1],i.x=i.r,i.y=0,n(i),s>2))for(o=e[2],qi(r,i,o),n(o),Si(r,o),r._pack_prev=o,Si(o,i),i=r._pack_next,a=3;a<s;a++){qi(r,i,o=e[a]);var d=0,g=1,v=1;for(u=i._pack_next;u!==i;u=u._pack_next,g++)if(Ei(u,o)){d=1;break}if(1==d)for(l=r._pack_prev;l!==u._pack_prev&&!Ei(l,o);l=l._pack_prev,v++);d?(g<v||g==v&&i.r<r.r?Ni(r,i=u):Ni(r=l,i),a--):(Si(r,o),i=o,n(o))}var y=(c+f)/2,m=(h+p)/2,x=0;for(a=0;a<s;a++)o=e[a],o.x-=y,o.y-=m,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,e.forEach(zi)}}function Ci(t){t._pack_next=t._pack_prev=t}function zi(t){delete t._pack_next,delete t._pack_prev}function Ti(t,n,e,r){var i=t.children;if(t.x=n+=r*t.x,t.y=e+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ti(i[o],n,e,r)}function qi(t,n,e){var r=t.r+e.r,i=n.x-t.x,o=n.y-t.y;if(r&&(i||o)){var a=n.r+e.r,u=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*u),s=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);e.x=t.x+l*i+s*o,e.y=t.y+l*o-s*i}else e.x=t.x+r,e.y=t.y}function Li(t,n){return t.parent==n.parent?1:2}function Oi(t){var n=t.children;return n.length?n[0]:t.t}function ji(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function Ri(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Di(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)n=i[o],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function Pi(t,n,e){return t.a.parent===n.parent?t.a:e}function Ui(t){return 1+ca.max(t,function(t){return t.y})}function Fi(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function Ii(t){var n=t.children;return n&&n.length?Ii(n[0]):t}function Hi(t){var n,e=t.children;return e&&(n=e.length)?Hi(e[n-1]):t}function Yi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Vi(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return i<0&&(e+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:e,y:r,dx:i,dy:o}}function Zi(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}function Bi(t){return t.rangeExtent?t.rangeExtent():Zi(t.range())}function Xi(t,n,e,r){var i=e(t[0],t[1]),o=r(n[0],n[1]);return function(t){return o(i(t))}}function $i(t,n){var e,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Ji(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:bl}function Wi(t,n,e,r){var i=[],o=[],a=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<=u;)i.push(e(t[a-1],t[a])),o.push(r(n[a-1],n[a]));return function(n){var e=ca.bisect(t,n,1,u)-1;return o[e](i[e](n))}}function Gi(t,n,e,r){function i(){var i=Math.min(t.length,n.length)>2?Wi:Xi,l=r?Wr:Jr;return a=i(t,n,l,e),u=i(n,t,l,_r),o}function o(t){return a(t)}var a,u;return o.invert=function(t){return u(t)},o.domain=function(n){return arguments.length?(t=n.map(Number),i()):t},o.range=function(t){return arguments.length?(n=t,i()):n},o.rangeRound=function(t){return o.range(t).interpolate(Pr)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(e=t,i()):e},o.ticks=function(n){return no(t,n)},o.tickFormat=function(n,e){return eo(t,n,e)},o.nice=function(n){return Qi(t,n),i()},o.copy=function(){return Gi(t,n,e,r)},i()}function Ki(t,n){return ca.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Qi(t,n){return $i(t,Ji(to(t,n)[2])),$i(t,Ji(to(t,n)[2])),t}function to(t,n){null==n&&(n=10);var e=Zi(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function no(t,n){return ca.range.apply(ca,to(t,n))}function eo(t,n,e){var r=to(t,n);if(e){var i=su.exec(e);if(i.shift(),"s"===i[8]){var o=ca.formatPrefix(Math.max(_a(r[0]),_a(r[1])));return i[7]||(i[7]="."+ro(o.scale(r[2]))),i[8]="f",e=ca.format(i.join("")),function(t){return e(o.scale(t))+o.symbol}}i[7]||(i[7]="."+io(i[8],r)),e=i.join("")}else e=",."+ro(r[2])+"f";return ca.format(e)}function ro(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function io(t,n){var e=ro(n[2]);return t in wl?Math.abs(e-ro(Math.max(_a(n[0]),_a(n[1]))))+ +("e"!==t):e-2*("%"===t)}function oo(t,n,e,r){function i(t){return(e?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function o(t){return e?Math.pow(n,t):-Math.pow(n,-t)}function a(n){return t(i(n))}return a.invert=function(n){return o(t.invert(n))},a.domain=function(n){return arguments.length?(e=n[0]>=0,t.domain((r=n.map(Number)).map(i)),a):r},a.base=function(e){return arguments.length?(n=+e,t.domain(r.map(i)),a):n},a.nice=function(){var n=$i(r.map(i),e?Math:kl);return t.domain(n),r=n.map(o),a},a.ticks=function(){var t=Zi(r),a=[],u=t[0],l=t[1],s=Math.floor(i(u)),c=Math.ceil(i(l)),f=n%1?2:n;if(isFinite(c-s)){if(e){for(;s<c;s++)for(var h=1;h<f;h++)a.push(o(s)*h);a.push(o(s))}else for(a.push(o(s));s++<c;)for(var h=f-1;h>0;h--)a.push(o(s)*h);for(s=0;a[s]<u;s++);for(c=a.length;a[c-1]>l;c--);a=a.slice(s,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return Ml;arguments.length<2?e=Ml:"function"!=typeof e&&(e=ca.format(e));var r=Math.max(1,n*t/a.ticks().length);return function(t){var a=t/o(Math.round(i(t)));return a*n<n-.5&&(a*=n),a<=r?e(t):""}},a.copy=function(){return oo(t.copy(),n,e,r)},Ki(a,t)}function ao(t,n,e){function r(n){return t(i(n))}var i=uo(n),o=uo(1/n);return r.invert=function(n){return o(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain((e=n.map(Number)).map(i)),r):e},r.ticks=function(t){return no(e,t)},r.tickFormat=function(t,n){return eo(e,t,n)},r.nice=function(t){return r.domain(Qi(e,t))},r.exponent=function(a){return arguments.length?(i=uo(n=a),o=uo(1/n),t.domain(e.map(i)),r):n},r.copy=function(){return ao(t.copy(),n,e)},Ki(r,t)}function uo(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function lo(t,n){function e(e){return o[((i.get(e)||("range"===n.t?i.set(e,t.push(e)):NaN))-1)%o.length]}function r(n,e){return ca.range(t.length).map(function(t){return n+e*t})}var i,o,a;return e.domain=function(r){if(!arguments.length)return t;t=[],i=new c;for(var o,a=-1,u=r.length;++a<u;)i.has(o=r[a])||i.set(o,t.push(o));return e[n.t].apply(e,n.a)},e.range=function(t){return arguments.length?(o=t,a=0,n={t:"range",a:arguments},e):o},e.rangePoints=function(i,u){arguments.length<2&&(u=0);var l=i[0],s=i[1],c=t.length<2?(l=(l+s)/2,0):(s-l)/(t.length-1+u);return o=r(l+c*u/2,c),a=0,n={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var l=i[0],s=i[1],c=t.length<2?(l=s=Math.round((l+s)/2),0):(s-l)/(t.length-1+u)|0;return o=r(l+Math.round(c*u/2+(s-l-(t.length-1+u)*c)/2),c),a=0,n={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(i,u,l){arguments.length<2&&(u=0),arguments.length<3&&(l=u);var s=i[1]<i[0],c=i[s-0],f=i[1-s],h=(f-c)/(t.length-u+2*l);return o=r(c+h*l,h),s&&o.reverse(),a=h*(1-u),n={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,u,l){arguments.length<2&&(u=0),arguments.length<3&&(l=u);var s=i[1]<i[0],c=i[s-0],f=i[1-s],h=Math.floor((f-c)/(t.length-u+2*l));return o=r(c+Math.round((f-c-(t.length-u)*h)/2),h),s&&o.reverse(),a=Math.round(h*(1-u)),n={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Zi(n.a[0])},e.copy=function(){return lo(t,n)},e.domain(t)}function so(t,n){function e(){var e=0,r=n.length;for(u=[];++e<r;)u[e-1]=ca.quantile(t,e/r);return a}function a(t){if(!isNaN(t=+t))return n[ca.bisect(u,t)]}var u;return a.domain=function(n){return arguments.length?(t=n.map(i).filter(o).sort(r),e()):t},a.range=function(t){return arguments.length?(n=t,e()):n},a.quantiles=function(){return u},a.invertExtent=function(e){return e=n.indexOf(e),e<0?[NaN,NaN]:[e>0?u[e-1]:t[0],e<u.length?u[e]:t[t.length-1]]},a.copy=function(){return so(t,n)},e()}function co(t,n,e){function r(n){return e[Math.max(0,Math.min(a,Math.floor(o*(n-t))))]}function i(){return o=e.length/(n-t),a=e.length-1,r}var o,a;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],i()):[t,n]},r.range=function(t){return arguments.length?(e=t,i()):e},r.invertExtent=function(n){return n=e.indexOf(n),n=n<0?NaN:n/o+t,[n,n+1/o]},r.copy=function(){return co(t,n,e)},i()}function fo(t,n){function e(e){if(e<=e)return n[ca.bisect(t,e)]}return e.domain=function(n){return arguments.length?(t=n,e):t},e.range=function(t){return arguments.length?(n=t,e):n},e.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},e.copy=function(){return fo(t,n)},e}function ho(t){function n(t){return+t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(n){return no(t,n)},n.tickFormat=function(n,e){return eo(t,n,e)},n.copy=function(){return ho(t)},n}function po(){return 0}function go(t){return t.innerRadius}function vo(t){return t.outerRadius}function yo(t){return t.startAngle}function mo(t){return t.endAngle}function xo(t){return t&&t.padAngle}function _o(t,n,e,r){return(t-e)*n-(n-r)*t>0?0:1}function bo(t,n,e,r,i){var o=t[0]-n[0],a=t[1]-n[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),l=u*a,s=-u*o,c=t[0]+l,f=t[1]+s,h=n[0]+l,p=n[1]+s,d=(c+h)/2,g=(f+p)/2,v=h-c,y=p-f,m=v*v+y*y,x=e-r,_=c*p-h*f,b=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-_*_)),w=(_*y-v*b)/m,M=(-_*v-y*b)/m,k=(_*y+v*b)/m,S=(-_*v+y*b)/m,N=w-d,E=M-g,A=k-d,C=S-g;return N*N+E*E>A*A+C*C&&(w=k,M=S),[[w-l,M-s],[w*e/x,M*e/x]]}function wo(t){function n(n){function a(){s.push("M",o(t(c),u))}for(var l,s=[],c=[],f=-1,h=n.length,p=Et(e),d=Et(r);++f<h;)i.call(this,l=n[f],f)?c.push([+p.call(this,l,f),+d.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),s.length?s.join(""):null}var e=ze,r=Te,i=Tn,o=Mo,a=o.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(i=t,n):i},n.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=zl.get(t)||Mo).key,n):a},n.tension=function(t){return arguments.length?(u=t,n):u},n}function Mo(t){return t.length>1?t.join("L"):t+"Z"}function ko(t){return t.join("L")+"Z"}function So(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function No(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function Eo(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function Ao(t,n){return t.length<4?Mo(t):t[1]+To(t.slice(1,-1),qo(t,n))}function Co(t,n){return t.length<3?ko(t):t[0]+To((t.push(t[0]),t),qo([t[t.length-2]].concat(t,[t[1]]),n))}function zo(t,n){return t.length<3?Mo(t):t[0]+To(t,qo(t,n))}function To(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return Mo(t);var e=t.length!=n.length,r="",i=t[0],o=t[1],a=n[0],u=a,l=1;if(e&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),n.length>1){u=n[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var s=2;s<n.length;s++,l++)o=t[l],u=n[s],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(e){var c=t[l];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function qo(t,n){for(var e,r=[],i=(1-n)/2,o=t[0],a=t[1],u=1,l=t.length;++u<l;)e=o,o=a,a=t[u],r.push([i*(a[0]-e[0]),i*(a[1]-e[1])]);return r}function Lo(t){if(t.length<3)return Mo(t);var n=1,e=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],l=[i,",",o,"L",Do(Ll,a),",",Do(Ll,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),Po(l,a,u);return t.pop(),l.push("L",r),l.join("")}function Oo(t){if(t.length<4)return Mo(t);for(var n,e=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)n=t[r],o.push(n[0]),a.push(n[1]);for(e.push(Do(Ll,o)+","+Do(Ll,a)),--r;++r<i;)n=t[r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),Po(e,o,a);return e.join("")}function jo(t){for(var n,e,r=-1,i=t.length,o=i+4,a=[],u=[];++r<4;)e=t[r%i],a.push(e[0]),u.push(e[1]);for(n=[Do(Ll,a),",",Do(Ll,u)],--r;++r<o;)e=t[r%i],a.shift(),a.push(e[0]),u.shift(),u.push(e[1]),Po(n,a,u);return n.join("")}function Ro(t,n){var e=t.length-1;if(e)for(var r,i,o=t[0][0],a=t[0][1],u=t[e][0]-o,l=t[e][1]-a,s=-1;++s<=e;)r=t[s],i=s/e,r[0]=n*r[0]+(1-n)*(o+i*u),r[1]=n*r[1]+(1-n)*(a+i*l);return Lo(t)}function Do(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Po(t,n,e){t.push("C",Do(Tl,n),",",Do(Tl,e),",",Do(ql,n),",",Do(ql,e),",",Do(Ll,n),",",Do(Ll,e))}function Uo(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Fo(t){for(var n=0,e=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Uo(i,o);++n<e;)r[n]=(a+(a=Uo(i=o,o=t[n+1])))/2;return r[n]=a,r}function Io(t){for(var n,e,r,i,o=[],a=Fo(t),u=-1,l=t.length-1;++u<l;)n=Uo(t[u],t[u+1]),_a(n)<Ra?a[u]=a[u+1]=0:(e=a[u]/n,r=a[u+1]/n,(i=e*e+r*r)>9&&(i=3*n/Math.sqrt(i),a[u]=i*e,a[u+1]=i*r));for(u=-1;++u<=l;)i=(t[Math.min(l,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}function Ho(t){return t.length<3?Mo(t):t[0]+To(t,Io(t))}function Yo(t){for(var n,e,r,i=-1,o=t.length;++i<o;)n=t[i],e=n[0],r=n[1]-Ia,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Vo(t){function n(n){function l(){g.push("M",u(t(y),f),c,s(t(v.reverse()),f),"Z")}for(var h,p,d,g=[],v=[],y=[],m=-1,x=n.length,_=Et(e),b=Et(i),w=e===r?function(){return p}:Et(r),M=i===o?function(){return d}:Et(o);++m<x;)a.call(this,h=n[m],m)?(v.push([p=+_.call(this,h,m),d=+b.call(this,h,m)]),y.push([+w.call(this,h,m),+M.call(this,h,m)])):v.length&&(l(),v=[],y=[]);return v.length&&l(),g.length?g.join(""):null}var e=ze,r=ze,i=0,o=Te,a=Tn,u=Mo,l=u.key,s=u,c="L",f=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(i=o=t,n):o},n.y0=function(t){return arguments.length?(i=t,n):i},n.y1=function(t){return arguments.length?(o=t,n):o},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(l="function"==typeof t?u=t:(u=zl.get(t)||Mo).key,s=u.reverse||u,c=u.closed?"M":"L",n):l},n.tension=function(t){return arguments.length?(f=t,n):f},n}function Zo(t){return t.radius}function Bo(t){return[t.x,t.y]}function Xo(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Ia;return[e*Math.cos(r),e*Math.sin(r)]}}function $o(){return 64}function Jo(){return"circle"}function Wo(t){var n=Math.sqrt(t/Pa);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function Go(t){return function(){var n,e,r;(n=this[t])&&(r=n[e=n.active])&&(r.timer.c=null,r.timer.t=NaN,--n.count?delete n[e]:delete this[t],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ko(t,n,e){return Sa(t,Fl),t.namespace=n,t.id=e,t}function Qo(t,n,e,r){var i=t.id,o=t.namespace;return V(t,"function"==typeof e?function(t,a,u){t[o][i].tween.set(n,r(e.call(t,t.__data__,a,u)))}:(e=r(e),function(t){t[o][i].tween.set(n,e)}))}function ta(t){return null==t&&(t=""),function(){this.textContent=t}}function na(t){return null==t?"__transition__":"__transition_"+t+"__"}function ea(t,n,e,r,i){function o(t){var n=g.delay;if(s.t=n+l,n<=t)return a(t-n);s.c=a}function a(e){var i=d.active,o=d[i];o&&(o.timer.c=null,o.timer.t=NaN,--d.count,delete d[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var a in d)if(+a<r){var c=d[a];c.timer.c=null,c.timer.t=NaN,--d.count,delete d[a]}s.c=u,qt(function(){return s.c&&u(e||1)&&(s.c=null,s.t=NaN),1},0,l),d.active=r,g.event&&g.event.start.call(t,t.__data__,n),p=[],g.tween.forEach(function(e,r){(r=r.call(t,t.__data__,n))&&p.push(r)}),h=g.ease,f=g.duration}function u(i){for(var o=i/f,a=h(o),u=p.length;u>0;)p[--u].call(t,a);if(o>=1)return g.event&&g.event.end.call(t,t.__data__,n),--d.count?delete d[r]:delete t[e],1}var l,s,f,h,p,d=t[e]||(t[e]={active:0,count:0}),g=d[r];g||(l=i.time,s=qt(o,0,l),g=d[r]={tween:new c,time:l,timer:s,delay:i.delay,duration:i.duration,ease:i.ease,index:n},i=null,++d.count)}function ra(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"})}function ia(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"})}function oa(t){return t.toISOString()}function aa(t,n,e){function r(n){return t(n)}function i(t,e){var r=t[1]-t[0],i=r/e,o=ca.bisect(Jl,i);return o==Jl.length?[n.year,to(t.map(function(t){return t/31536e6}),e)[2]]:o?n[i/Jl[o-1]<Jl[o]/i?o-1:o]:[Kl,to(t,e)[2]]}return r.invert=function(n){return ua(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(ua)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,ua(+e+1),n).length}var o=r.domain(),a=Zi(o),u=null==t?i(a,10):"number"==typeof t&&i(a,t);return u&&(t=u[0],n=u[1]),r.domain($i(o,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=ua(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=ua(+n+1);return n}}:t))},r.ticks=function(t,n){var e=Zi(r.domain()),o=null==t?i(e,10):"number"==typeof t?i(e,t):!t.range&&[{range:t},n];return o&&(t=o[0],n=o[1]),t.range(e[0],ua(+e[1]+1),n<1?1:n)},r.tickFormat=function(){return e},r.copy=function(){return aa(t.copy(),n,e)},Ki(r,t)}function ua(t){return new Date(t)}function la(t){return JSON.parse(t.responseText)}function sa(t){var n=pa.createRange();return n.selectNode(pa.body),n.createContextualFragment(t.responseText)}var ca={version:"3.5.12"},fa=[].slice,ha=function(t){return fa.call(t)},pa=this.document;if(pa)try{ha(pa.documentElement.childNodes)[0].nodeType}catch(t){ha=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),pa)try{pa.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var da=this.Element.prototype,ga=da.setAttribute,va=da.setAttributeNS,ya=this.CSSStyleDeclaration.prototype,ma=ya.setProperty;da.setAttribute=function(t,n){ga.call(this,t,n+"")},da.setAttributeNS=function(t,n,e){va.call(this,t,n,e+"")},ya.setProperty=function(t,n,e){ma.call(this,t,n+"",e)}}ca.ascending=r,ca.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},ca.min=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&e>r&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&e>r&&(e=r)}return e},ca.max=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&r>e&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&r>e&&(e=r)}return e},ca.extent=function(t,n){var e,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){e=i=r;break}for(;++o<a;)null!=(r=t[o])&&(e>r&&(e=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=n.call(t,t[o],o))&&r>=r){e=i=r;break}for(;++o<a;)null!=(r=n.call(t,t[o],o))&&(e>r&&(e=r),i<r&&(i=r))}return[e,i]},ca.sum=function(t,n){var e,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)o(e=+t[a])&&(r+=e);else for(;++a<i;)o(e=+n.call(t,t[a],a))&&(r+=e);return r},ca.mean=function(t,n){var e,r=0,a=t.length,u=-1,l=a;if(1===arguments.length)for(;++u<a;)o(e=i(t[u]))?r+=e:--l;else for(;++u<a;)o(e=i(n.call(t,t[u],u)))?r+=e:--l;if(l)return r/l},ca.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],o=e-r;return o?i+o*(t[r]-i):i},ca.median=function(t,n){var e,a=[],u=t.length,l=-1;if(1===arguments.length)for(;++l<u;)o(e=i(t[l]))&&a.push(e);else for(;++l<u;)o(e=i(n.call(t,t[l],l)))&&a.push(e);if(a.length)return ca.quantile(a.sort(r),.5)},ca.variance=function(t,n){var e,r,a=t.length,u=0,l=0,s=-1,c=0;if(1===arguments.length)for(;++s<a;)o(e=i(t[s]))&&(r=e-u,u+=r/++c,l+=r*(e-u));else for(;++s<a;)o(e=i(n.call(t,t[s],s)))&&(r=e-u,u+=r/++c,l+=r*(e-u));if(c>1)return l/(c-1)},ca.deviation=function(){var t=ca.variance.apply(this,arguments);return t?Math.sqrt(t):t};var xa=a(r);ca.bisectLeft=xa.left,ca.bisect=ca.bisectRight=xa.right,ca.bisector=function(t){return a(1===t.length?function(n,e){return r(t(n),e)}:t)},ca.shuffle=function(t,n,e){(o=arguments.length)<3&&(e=t.length,o<2&&(n=0));for(var r,i,o=e-n;o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},ca.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},ca.pairs=function(t){for(var n=0,e=t.length-1,r=t[0],i=new Array(e<0?0:e);n<e;)i[n]=[r,r=t[++n]];return i},ca.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=ca.min(arguments,u),e=new Array(n);++t<n;)for(var r,i=-1,o=e[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return e},ca.transpose=function(t){return ca.zip.apply(ca,t)},ca.keys=function(t){var n=[];for(var e in t)n.push(e);return n},ca.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},ca.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},ca.merge=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(r=t[i],n=r.length;--n>=0;)e[--a]=r[n];return e};var _a=Math.abs;ca.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,i=[],o=l(_a(e)),a=-1;if(t*=o,n*=o,e*=o,e<0)for(;(r=t+e*++a)>n;)i.push(r/o);else for(;(r=t+e*++a)<n;)i.push(r/o);return i},ca.map=function(t,n){var e=new c;if(t instanceof c)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var ba="__proto__",wa="\0";s(c,{has:p,get:function(t){return this._[f(t)]},set:function(t,n){return this._[f(t)]=n},remove:d,keys:g,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:h(n),value:this._[n]});return t},size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n),this._[n])}}),ca.nest=function(){function t(n,a,u){if(u>=o.length)return r?r.call(i,a):e?a.sort(e):a;for(var l,s,f,h,p=-1,d=a.length,g=o[u++],v=new c;++p<d;)(h=v.get(l=g(s=a[p])))?h.push(s):v.set(l,[s]);return n?(s=n(),f=function(e,r){s.set(e,t(n,r,u))}):(s={},f=function(e,r){s[e]=t(n,r,u)}),v.forEach(f),s}function n(t,e){if(e>=o.length)return t;var r=[],i=a[e++];return t.forEach(function(t,i){r.push({key:t,values:n(i,e)})}),i?r.sort(function(t,n){return i(t.key,n.key)}):r}var e,r,i={},o=[],a=[];return i.map=function(n,e){return t(e,n,0)},i.entries=function(e){return n(t(ca.map,e,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return e=t,i},i.rollup=function(t){return r=t,i},i},ca.set=function(t){var n=new m;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},s(m,{has:p,add:function(t){return this._[f(t+="")]=!0,t},remove:d,values:g,size:v,empty:y,forEach:function(t){for(var n in this._)t.call(this,h(n))}}),ca.behavior={},ca.rebind=function(t,n){for(var e,r=1,i=arguments.length;++r<i;)t[e=arguments[r]]=_(t,n,n[e]);return t};var Ma=["webkit","ms","moz","Moz","o","O"];ca.dispatch=function(){for(var t=new M,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=k(t);return t},M.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ca.event=null,ca.requote=function(t){return t.replace(ka,"\\$&")};var ka=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},Na=function(t,n){return n.querySelector(t)},Ea=function(t,n){return n.querySelectorAll(t)},Aa=function(t,n){var e=t.matches||t[b(t,"matchesSelector")];return(Aa=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(Na=function(t,n){return Sizzle(t,n)[0]||null},Ea=Sizzle,Aa=Sizzle.matchesSelector),ca.selection=function(){return ca.select(pa.documentElement)};var Ca=ca.selection.prototype=[];Ca.select=function(t){var n,e,r,i,o=[];t=C(t);for(var a=-1,u=this.length;++a<u;){o.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var l=-1,s=r.length;++l<s;)(i=r[l])?(n.push(e=t.call(i,i.__data__,l,a)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return A(o)},Ca.selectAll=function(t){var n,e,r=[];t=z(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,l=a.length;++u<l;)(e=a[u])&&(r.push(n=ha(t.call(e,e.__data__,u,i))),n.parentNode=e);return A(r)};var za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ca.ns={prefix:za,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),za.hasOwnProperty(e)?{space:za[e],local:t}:t}},Ca.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=ca.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(T(n,t[n]));return this}return this.each(T(t,n))},Ca.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=O(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!L(t[i]).test(n))return!1;return!0}for(n in t)this.each(j(n,t[n]));return this}return this.each(j(t,n))},Ca.style=function(t,n,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(n="");for(r in t)this.each(D(r,t[r],n));return this}if(i<2){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(D(t,n,r))},Ca.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(P(n,t[n]));return this}return this.each(P(t,n))},Ca.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ca.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ca.append=function(t){return t=U(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ca.insert=function(t,n){return t=U(t),n=C(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},Ca.remove=function(){return this.each(F)},Ca.data=function(t,n){function e(t,e){var r,i,o,a=t.length,f=e.length,h=Math.min(a,f),p=new Array(f),d=new Array(f),g=new Array(a);if(n){var v,y=new c,m=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(y.has(v=n.call(i,i.__data__,r))?g[r]=i:y.set(v,i),m[r]=v);for(r=-1;++r<f;)(i=y.get(v=n.call(e,o=e[r],r)))?!0!==i&&(p[r]=i,i.__data__=o):d[r]=I(o),y.set(v,!0);for(r=-1;++r<a;)r in m&&!0!==y.get(m[r])&&(g[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):d[r]=I(o);for(;r<f;++r)d[r]=I(e[r]);for(;r<a;++r)g[r]=t[r]}d.update=p,d.parentNode=p.parentNode=g.parentNode=t.parentNode,u.push(d),l.push(p),s.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var u=Z([]),l=A([]),s=A([]);if("function"==typeof t)for(;++o<a;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],t);return l.enter=function(){return u},l.exit=function(){return s},l},Ca.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ca.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return A(i)},Ca.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},
Ca.sort=function(t){t=Y.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},Ca.each=function(t){return V(this,function(n,e,r){t.call(n,n.__data__,e,r)})},Ca.call=function(t){var n=ha(arguments);return t.apply(n[0]=this,n),this},Ca.empty=function(){return!this.node()},Ca.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},Ca.size=function(){var t=0;return V(this,function(){++t}),t};var Ta=[];ca.selection.enter=Z,ca.selection.enter.prototype=Ta,Ta.append=Ca.append,Ta.empty=Ca.empty,Ta.node=Ca.node,Ta.call=Ca.call,Ta.size=Ca.size,Ta.select=function(t){for(var n,e,r,i,o,a=[],u=-1,l=this.length;++u<l;){r=(i=this[u]).update,a.push(n=[]),n.parentNode=i.parentNode;for(var s=-1,c=i.length;++s<c;)(o=i[s])?(n.push(r[s]=e=t.call(i.parentNode,o.__data__,s,u)),e.__data__=o.__data__):n.push(null)}return A(a)},Ta.insert=function(t,n){return arguments.length<2&&(n=B(this)),Ca.insert.call(this,t,n)},ca.select=function(t){var e;return"string"==typeof t?(e=[Na(t,pa)],e.parentNode=pa.documentElement):(e=[t],e.parentNode=n(t)),A([e])},ca.selectAll=function(t){var n;return"string"==typeof t?(n=ha(Ea(t,pa)),n.parentNode=pa.documentElement):(n=ha(t),n.parentNode=null),A([n])},Ca.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n=!1);for(e in t)this.each(X(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(X(t,n,e))};var qa=ca.map({mouseenter:"mouseover",mouseleave:"mouseout"});pa&&qa.forEach(function(t){"on"+t in pa&&qa.remove(t)});var La,Oa=0;ca.mouse=function(t){return G(t,N())};var ja=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ca.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=N().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return G(t,r)},ca.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,n,e,o,a){return function(){function u(){var t,e,r=n(h,g);r&&(t=r[0]-x[0],e=r[1]-x[1],d|=t|e,x=r,p({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:e}))}function l(){n(h,g)&&(y.on(o+v,null).on(a+v,null),m(d),p({type:"dragend"}))}var s,c=this,f=ca.event.target,h=c.parentNode,p=r.of(c,arguments),d=0,g=t(),v=".drag"+(null==g?"":"-"+g),y=ca.select(e(f)).on(o+v,u).on(a+v,l),m=W(f),x=n(h,g);i?(s=i.apply(c,arguments),s=[s.x-x[0],s.y-x[1]]):s=[0,0],p({type:"dragstart"})}}var r=E(t,"drag","dragstart","dragend"),i=null,o=n(w,ca.mouse,e,"mousemove","mouseup"),a=n(K,ca.touch,x,"touchmove","touchend");return t.origin=function(n){return arguments.length?(i=n,t):i},ca.rebind(t,r,"on")},ca.touches=function(t,n){return arguments.length<2&&(n=N().touches),n?ha(n).map(function(n){var e=G(t,n);return e.identifier=n.identifier,e}):[]};var Ra=1e-6,Da=Ra*Ra,Pa=Math.PI,Ua=2*Pa,Fa=Ua-Ra,Ia=Pa/2,Ha=Pa/180,Ya=180/Pa,Va=Math.SQRT2;ca.interpolateZoom=function(t,n){var e,r,i=t[0],o=t[1],a=t[2],u=n[0],l=n[1],s=n[2],c=u-i,f=l-o,h=c*c+f*f;if(h<Da)r=Math.log(s/a)/Va,e=function(t){return[i+t*c,o+t*f,a*Math.exp(Va*t*r)]};else{var p=Math.sqrt(h),d=(s*s-a*a+4*h)/(2*a*2*p),g=(s*s-a*a-4*h)/(2*s*2*p),v=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-v)/Va,e=function(t){var n=t*r,e=it(v),u=a/(2*p)*(e*ot(Va*n+v)-rt(v));return[i+u*c,o+u*f,a*e/it(Va*n+v)]}}return e.duration=1e3*r,e},ca.behavior.zoom=function(){function t(t){t.on(T,f).on(Ba+".zoom",p).on("dblclick.zoom",d).on(O,h)}function n(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function r(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}function i(t){k.k=Math.max(A[0],Math.min(A[1],t))}function o(t,n){n=r(n),k.x+=t[0]-n[0],k.y+=t[1]-n[1]}function a(n,e,r,a){n.__chart__={x:k.x,y:k.y,k:k.k},i(Math.pow(2,a)),o(v=e,r),n=ca.select(n),C>0&&(n=n.transition().duration(C)),n.call(t.event)}function u(){b&&b.domain(_.range().map(function(t){return(t-k.x)/k.k}).map(_.invert)),M&&M.domain(w.range().map(function(t){return(t-k.y)/k.k}).map(w.invert))}function l(t){z++||t({type:"zoomstart"})}function s(t){u(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function c(t){--z||(t({type:"zoomend"}),v=null)}function f(){function t(){u=1,o(ca.mouse(i),h),s(a)}function r(){f.on(q,null).on(L,null),p(u),c(a)}var i=this,a=j.of(i,arguments),u=0,f=ca.select(e(i)).on(q,t).on(L,r),h=n(ca.mouse(i)),p=W(i);Ul.call(i),l(a)}function h(){function t(){var t=ca.touches(d);return p=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var n=ca.event.target;ca.select(n).on(_,r).on(b,u),w.push(n);for(var e=ca.event.changedTouches,i=0,o=e.length;i<o;++i)v[e[i].identifier]=null;var l=t(),s=Date.now();if(1===l.length){if(s-x<500){var c=l[0];a(d,c,v[c.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}x=s}else if(l.length>1){var c=l[0],f=l[1],h=c[0]-f[0],p=c[1]-f[1];y=h*h+p*p}}function r(){var t,n,e,r,a=ca.touches(d);Ul.call(d);for(var u=0,l=a.length;u<l;++u,r=null)if(e=a[u],r=v[e.identifier]){if(n)break;t=e,n=r}if(r){var c=(c=e[0]-t[0])*c+(c=e[1]-t[1])*c,f=y&&Math.sqrt(c/y);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+r[0])/2,(n[1]+r[1])/2],i(f*p)}x=null,o(t,n),s(g)}function u(){if(ca.event.touches.length){for(var n=ca.event.changedTouches,e=0,r=n.length;e<r;++e)delete v[n[e].identifier];for(var i in v)return void t()}ca.selectAll(w).on(m,null),M.on(T,f).on(O,h),N(),c(g)}var p,d=this,g=j.of(d,arguments),v={},y=0,m=".zoom-"+ca.event.changedTouches[0].identifier,_="touchmove"+m,b="touchend"+m,w=[],M=ca.select(d),N=W(d);e(),l(g),M.on(T,null).on(O,e)}function p(){var t=j.of(this,arguments);m?clearTimeout(m):(Ul.call(this),g=n(v=y||ca.mouse(this)),l(t)),m=setTimeout(function(){m=null,c(t)},50),S(),i(Math.pow(2,.002*Za())*k.k),o(v,g),s(t)}function d(){var t=ca.mouse(this),e=Math.log(k.k)/Math.LN2;a(this,t,n(t),ca.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,v,y,m,x,_,b,w,M,k={x:0,y:0,k:1},N=[960,500],A=Xa,C=250,z=0,T="mousedown.zoom",q="mousemove.zoom",L="mouseup.zoom",O="touchstart.zoom",j=E(t,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in pa?(Za=function(){return-ca.event.deltaY*(ca.event.deltaMode?120:1)},"wheel"):"onmousewheel"in pa?(Za=function(){return ca.event.wheelDelta},"mousewheel"):(Za=function(){return-ca.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=j.of(this,arguments),n=k;Dl?ca.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var e=N[0],r=N[1],i=v?v[0]:e/2,o=v?v[1]:r/2,a=ca.interpolateZoom([(i-k.x)/k.k,(o-k.y)/k.k,e/k.k],[(i-n.x)/n.k,(o-n.y)/n.k,e/n.k]);return function(n){var r=a(n),u=e/r[2];this.__chart__=k={x:i-r[0]*u,y:o-r[1]*u,k:u},s(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=k,l(t),s(t),c(t))})},t.translate=function(n){return arguments.length?(k={x:+n[0],y:+n[1],k:k.k},u(),t):[k.x,k.y]},t.scale=function(n){return arguments.length?(k={x:k.x,y:k.y,k:null},i(+n),u(),t):k.k},t.scaleExtent=function(n){return arguments.length?(A=null==n?Xa:[+n[0],+n[1]],t):A},t.center=function(n){return arguments.length?(y=n&&[+n[0],+n[1]],t):y},t.size=function(n){return arguments.length?(N=n&&[+n[0],+n[1]],t):N},t.duration=function(n){return arguments.length?(C=+n,t):C},t.x=function(n){return arguments.length?(b=n,_=n.copy(),k={x:0,y:0,k:1},t):b},t.y=function(n){return arguments.length?(M=n,w=n.copy(),k={x:0,y:0,k:1},t):M},ca.rebind(t,j,"on")};var Za,Ba,Xa=[0,1/0];ca.color=ut,ut.prototype.toString=function(){return this.rgb()+""},ca.hsl=lt;var $a=lt.prototype=new ut;$a.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,this.l/t)},$a.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(this.h,this.s,t*this.l)},$a.rgb=function(){return st(this.h,this.s,this.l)},ca.hcl=ct;var Ja=ct.prototype=new ut;Ja.brighter=function(t){return new ct(this.h,this.c,Math.min(100,this.l+Wa*(arguments.length?t:1)))},Ja.darker=function(t){return new ct(this.h,this.c,Math.max(0,this.l-Wa*(arguments.length?t:1)))},Ja.rgb=function(){return ft(this.h,this.c,this.l).rgb()},ca.lab=ht;var Wa=18,Ga=.95047,Ka=1,Qa=1.08883,tu=ht.prototype=new ut;tu.brighter=function(t){return new ht(Math.min(100,this.l+Wa*(arguments.length?t:1)),this.a,this.b)},tu.darker=function(t){return new ht(Math.max(0,this.l-Wa*(arguments.length?t:1)),this.a,this.b)},tu.rgb=function(){return pt(this.l,this.a,this.b)},ca.rgb=mt;var nu=mt.prototype=new ut;nu.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,i=30;return n||e||r?(n&&n<i&&(n=i),e&&e<i&&(e=i),r&&r<i&&(r=i),new mt(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new mt(i,i,i)},nu.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},nu.hsl=function(){return Mt(this.r,this.g,this.b)},nu.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var eu=ca.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eu.forEach(function(t,n){eu.set(t,xt(n))}),ca.functor=Et,ca.xhr=At(x),ca.dsv=function(t,n){function e(t,e,o){arguments.length<3&&(o=e,e=null);var a=Ct(t,n,null==e?r:i(e),o);return a.row=function(t){return arguments.length?a.response(null==(e=t)?r:i(t)):e},a}function r(t){return e.parse(t.responseText)}function i(t){return function(n){return e.parse(n.responseText,t)}}function o(n){return n.map(a).join(t)}function a(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,function(t,e){if(r)return r(t,e-1);var i=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");r=n?function(t,e){return n(i(t),e)}:i})},e.parseRows=function(t,n){function e(){if(c>=s)return a;if(i)return i=!1,o;var n=c;if(34===t.charCodeAt(n)){for(var e=n;e++<s;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}c=e+2;var r=t.charCodeAt(e+1);return 13===r?(i=!0,10===t.charCodeAt(e+2)&&++c):10===r&&(i=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;c<s;){var r=t.charCodeAt(c++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(r!==l)continue;return t.slice(n,c-u)}return t.slice(n)}for(var r,i,o={},a={},u=[],s=t.length,c=0,f=0;(r=e())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=e();n&&null==(h=n(h,f++))||u.push(h)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new m,i=[];return n.forEach(function(t){for(var n in t)r.has(n)||i.push(r.add(n))}),[i.map(a).join(t)].concat(n.map(function(n){return i.map(function(t){return a(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(o).join("\n")},e},ca.csv=ca.dsv(",","text/csv"),ca.tsv=ca.dsv("\t","text/tab-separated-values");var ru,iu,ou,au,uu=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ca.timer=function(){qt.apply(this,arguments)},ca.timer.flush=function(){Ot(),jt()},ca.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var lu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Dt);ca.formatPrefix=function(t,n){var e=0;return(t=+t)&&(t<0&&(t*=-1),n&&(t=ca.round(t,Rt(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),lu[8+e/3]};var su=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,cu=ca.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=ca.round(t,Rt(t,n))).toFixed(Math.max(0,Math.min(20,Rt(t*(1+1e-15),n))))}}),fu=ca.time={},hu=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){pu.setUTCDate.apply(this._,arguments)},setDay:function(){pu.setUTCDay.apply(this._,arguments)},setFullYear:function(){pu.setUTCFullYear.apply(this._,arguments)},setHours:function(){pu.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){pu.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){pu.setUTCMinutes.apply(this._,arguments)},setMonth:function(){pu.setUTCMonth.apply(this._,arguments)},setSeconds:function(){pu.setUTCSeconds.apply(this._,arguments)},setTime:function(){pu.setTime.apply(this._,arguments)}};var pu=Date.prototype;fu.year=It(function(t){return t=fu.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),fu.years=fu.year.range,fu.years.utc=fu.year.utc.range,fu.day=It(function(t){var n=new hu(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),fu.days=fu.day.range,fu.days.utc=fu.day.utc.range,fu.dayOfYear=function(t){var n=fu.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=fu[t]=It(function(t){return(t=fu.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=fu.year(t).getDay();return Math.floor((fu.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});fu[t+"s"]=e.range,fu[t+"s"].utc=e.utc.range,fu[t+"OfYear"]=function(t){var e=fu.year(t).getDay();return Math.floor((fu.dayOfYear(t)+(e+n)%7)/7)}}),fu.week=fu.sunday,fu.weeks=fu.sunday.range,fu.weeks.utc=fu.sunday.utc.range,fu.weekOfYear=fu.sundayOfYear;var du={"-":"",_:" ",0:"0"},gu=/^\s*\d+/,vu=/^%/;ca.locale=function(t){return{numberFormat:Pt(t),timeFormat:Yt(t)}};var yu=ca.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ca.format=yu.numberFormat,ca.geo={},fn.prototype={s:0,t:0,add:function(t){hn(t,this.t,mu),hn(mu.s,this.s,this),this.s?this.t+=mu.t:this.s=mu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var mu=new fn;ca.geo.stream=function(t,n){t&&xu.hasOwnProperty(t.type)?xu[t.type](t,n):pn(t,n)};var xu={Feature:function(t,n){pn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)pn(e[r].geometry,n)}},_u={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){dn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)dn(e[r],n,0)},Polygon:function(t,n){gn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)gn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)pn(e[r],n)}};ca.geo.area=function(t){return bu=0,ca.geo.stream(t,Mu),bu};var bu,wu=new fn,Mu={sphere:function(){bu+=4*Pa},point:w,lineStart:w,lineEnd:w,polygonStart:function(){wu.reset(),Mu.lineStart=vn},polygonEnd:function(){var t=2*wu;bu+=t<0?4*Pa+t:t,Mu.lineStart=Mu.lineEnd=Mu.point=w}};ca.geo.bounds=function(){function t(t,n){x.push(_=[c=t,h=t]),n<f&&(f=n),n>p&&(p=n)}function n(n,e){var r=yn([n*Ha,e*Ha]);if(y){var i=xn(y,r),o=[i[1],-i[0],0],a=xn(o,i);wn(a),a=Mn(a);var l=n-d,s=l>0?1:-1,g=a[0]*Ya*s,v=_a(l)>180;if(v^(s*d<g&&g<s*n)){var m=a[1]*Ya;m>p&&(p=m)}else if(g=(g+360)%360-180,v^(s*d<g&&g<s*n)){var m=-a[1]*Ya;m<f&&(f=m)}else e<f&&(f=e),e>p&&(p=e);v?n<d?u(c,n)>u(c,h)&&(h=n):u(n,h)>u(c,h)&&(c=n):h>=c?(n<c&&(c=n),n>h&&(h=n)):n>d?u(c,n)>u(c,h)&&(h=n):u(n,h)>u(c,h)&&(c=n)}else t(n,e);y=r,d=n}function e(){b.point=n}function r(){_[0]=c,_[1]=h,b.point=t,y=null}function i(t,e){if(y){var r=t-d;m+=_a(r)>180?r+(r>0?360:-360):r}else g=t,v=e;Mu.point(t,e),n(t,e)}function o(){Mu.lineStart()}function a(){i(g,v),Mu.lineEnd(),_a(m)>Ra&&(c=-(h=180)),_[0]=c,_[1]=h,y=null}function u(t,n){return(n-=t)<0?n+360:n}function l(t,n){return t[0]-n[0]}function s(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var c,f,h,p,d,g,v,y,m,x,_,b={point:t,lineStart:e,lineEnd:r,polygonStart:function(){b.point=i,b.lineStart=o,b.lineEnd=a,m=0,Mu.polygonStart()},polygonEnd:function(){Mu.polygonEnd(),b.point=t,b.lineStart=e,b.lineEnd=r,wu<0?(c=-(h=180),f=-(p=90)):m>Ra?p=90:m<-Ra&&(f=-90),_[0]=c,_[1]=h}};return function(t){p=h=-(c=f=1/0),x=[],ca.geo.stream(t,b);var n=x.length;if(n){x.sort(l);for(var e,r=1,i=x[0],o=[i];r<n;++r)e=x[r],s(e[0],i)||s(e[1],i)?(u(i[0],e[1])>u(i[0],i[1])&&(i[1]=e[1]),u(e[0],i[1])>u(i[0],i[1])&&(i[0]=e[0])):o.push(i=e);for(var a,e,d=-1/0,n=o.length-1,r=0,i=o[n];r<=n;i=e,++r)e=o[r],(a=u(i[1],e[0]))>d&&(d=a,c=e[0],h=i[1])}return x=_=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,p]]}}(),ca.geo.centroid=function(t){ku=Su=Nu=Eu=Au=Cu=zu=Tu=qu=Lu=Ou=0,ca.geo.stream(t,ju);var n=qu,e=Lu,r=Ou,i=n*n+e*e+r*r;return i<Da&&(n=Cu,e=zu,r=Tu,Su<Ra&&(n=Nu,e=Eu,r=Au),(i=n*n+e*e+r*r)<Da)?[NaN,NaN]:[Math.atan2(e,n)*Ya,et(r/Math.sqrt(i))*Ya]};var ku,Su,Nu,Eu,Au,Cu,zu,Tu,qu,Lu,Ou,ju={sphere:w,point:Sn,lineStart:En,lineEnd:An,polygonStart:function(){ju.lineStart=Cn},polygonEnd:function(){ju.lineStart=En}},Ru=jn(Tn,Un,In,[-Pa,-Pa/2]),Du=1e9;ca.geo.clipExtent=function(){var t,n,e,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(u){return arguments.length?(o=Zn(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[t,n],[e,r]]}};return a.extent([[0,0],[960,500]])},(ca.geo.conicEqualArea=function(){return Bn(Xn)}).raw=Xn,ca.geo.albers=function(){return ca.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ca.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return n=null,e(o,a),n||(r(o,a),n)||i(o,a),n}var n,e,r,i,o=ca.geo.albers(),a=ca.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ca.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=o.scale(),e=o.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:o).invert(t)},t.stream=function(t){var n=o.stream(t),e=a.stream(t),r=u.stream(t);return{point:function(t,i){n.point(t,i),e.point(t,i),r.point(t,i)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(o.precision(n),a.precision(n),u.precision(n),t):o.precision()},t.scale=function(n){return arguments.length?(o.scale(n),a.scale(.35*n),u.scale(n),t.translate(o.translate())):o.scale()},t.translate=function(n){if(!arguments.length)return o.translate();var s=o.scale(),c=+n[0],f=+n[1];return e=o.translate(n).clipExtent([[c-.455*s,f-.238*s],[c+.455*s,f+.238*s]]).stream(l).point,r=a.translate([c-.307*s,f+.201*s]).clipExtent([[c-.425*s+Ra,f+.12*s+Ra],[c-.214*s-Ra,f+.234*s-Ra]]).stream(l).point,i=u.translate([c-.205*s,f+.212*s]).clipExtent([[c-.214*s+Ra,f+.166*s+Ra],[c-.115*s-Ra,f+.234*s-Ra]]).stream(l).point,t},t.scale(1070)};var Pu,Uu,Fu,Iu,Hu,Yu,Vu={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Uu=0,Vu.lineStart=$n},polygonEnd:function(){Vu.lineStart=Vu.lineEnd=Vu.point=w,Pu+=_a(Uu/2)}},Zu={point:Jn,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Bu={point:Kn,lineStart:Qn,lineEnd:te,polygonStart:function(){Bu.lineStart=ne},polygonEnd:function(){Bu.point=Kn,Bu.lineStart=Qn,Bu.lineEnd=te}};ca.geo.path=function(){function t(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),a&&a.valid||(a=i(o)),ca.geo.stream(t,a)),o.result()}function n(){return a=null,t}var e,r,i,o,a,u=4.5;return t.area=function(t){return Pu=0,ca.geo.stream(t,i(Vu)),Pu},t.centroid=function(t){return Nu=Eu=Au=Cu=zu=Tu=qu=Lu=Ou=0,ca.geo.stream(t,i(Bu)),Ou?[qu/Ou,Lu/Ou]:Tu?[Cu/Tu,zu/Tu]:Au?[Nu/Au,Eu/Au]:[NaN,NaN]},t.bounds=function(t){return Hu=Yu=-(Fu=Iu=1/0),ca.geo.stream(t,i(Zu)),[[Fu,Iu],[Hu,Yu]]},t.projection=function(t){return arguments.length?(i=(e=t)?t.stream||ie(t):x,n()):e},t.context=function(t){return arguments.length?(o=null==(r=t)?new Wn:new ee(t),"function"!=typeof u&&o.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(o.pointRadius(+n),+n),t):u},t.projection(ca.geo.albersUsa()).context(null)},ca.geo.transform=function(t){return{stream:function(n){var e=new oe(n);for(var r in t)e[r]=t[r];return e}}},oe.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ca.geo.projection=ue,ca.geo.projectionMutator=le,(ca.geo.equirectangular=function(){return ue(ce)}).raw=ce.invert=ce,ca.geo.rotation=function(t){function n(n){return n=t(n[0]*Ha,n[1]*Ha),n[0]*=Ya,n[1]*=Ya,n}return t=he(t[0]%360*Ha,t[1]*Ha,t.length>2?t[2]*Ha:0),n.invert=function(n){return n=t.invert(n[0]*Ha,n[1]*Ha),n[0]*=Ya,n[1]*=Ya,n},n},fe.invert=ce,ca.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=he(-t[0]*Ha,-t[1]*Ha,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Ya,t[1]*=Ya}}),{type:"Polygon",coordinates:[i]}}var n,e,r=[0,0],i=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=ve((n=+r)*Ha,i*Ha),t):n},t.precision=function(r){return arguments.length?(e=ve(n*Ha,(i=+r)*Ha),t):i},t.angle(90)},ca.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Ha,i=t[1]*Ha,o=n[1]*Ha,a=Math.sin(r),u=Math.cos(r),l=Math.sin(i),s=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((e=f*a)*e+(e=s*c-l*f*u)*e),l*c+s*f*u)},ca.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return ca.range(Math.ceil(o/v)*v,i,v).map(h).concat(ca.range(Math.ceil(s/y)*y,l,y).map(p)).concat(ca.range(Math.ceil(r/d)*d,e,d).filter(function(t){return _a(t%v)>Ra}).map(c)).concat(ca.range(Math.ceil(u/g)*g,a,g).filter(function(t){return _a(t%y)>Ra}).map(f))}var e,r,i,o,a,u,l,s,c,f,h,p,d=10,g=d,v=90,y=360,m=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(l).slice(1),h(i).reverse().slice(1),p(s).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],s=+n[0][1],l=+n[1][1],o>i&&(n=o,o=i,i=n),s>l&&(n=s,s=l,l=n),t.precision(m)):[[o,s],[i,l]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],a=+n[1][1],r>e&&(n=r,r=e,e=n),u>a&&(n=u,u=a,a=n),t.precision(m)):[[r,u],[e,a]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],y=+n[1],t):[v,y]},t.minorStep=function(n){return arguments.length?(d=+n[0],g=+n[1],t):[d,g]},t.precision=function(n){return arguments.length?(m=+n,c=me(u,a,90),f=xe(r,e,m),h=me(s,l,90),p=xe(o,i,m),t):m},t.majorExtent([[-180,-90+Ra],[180,90-Ra]]).minorExtent([[-180,-80-Ra],[180,80+Ra]])},ca.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||i.apply(this,arguments)]}}var n,e,r=_e,i=be;return t.distance=function(){return ca.geo.distance(n||r.apply(this,arguments),e||i.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.precision=function(){return arguments.length?t:0},t},ca.geo.interpolate=function(t,n){return we(t[0]*Ha,t[1]*Ha,n[0]*Ha,n[1]*Ha)},ca.geo.length=function(t){return Xu=0,ca.geo.stream(t,$u),Xu};var Xu,$u={sphere:w,point:w,lineStart:Me,lineEnd:w,polygonStart:w,polygonEnd:w},Ju=ke(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ca.geo.azimuthalEqualArea=function(){return ue(Ju)}).raw=Ju;var Wu=ke(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},x);(ca.geo.azimuthalEquidistant=function(){return ue(Wu)}).raw=Wu,(ca.geo.conicConformal=function(){return Bn(Se)}).raw=Se,(ca.geo.conicEquidistant=function(){return Bn(Ne)}).raw=Ne;var Gu=ke(function(t){return 1/t},Math.atan);(ca.geo.gnomonic=function(){return ue(Gu)}).raw=Gu,Ee.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Ia]},(ca.geo.mercator=function(){return Ae(Ee)}).raw=Ee;var Ku=ke(function(){return 1},Math.asin);(ca.geo.orthographic=function(){return ue(Ku)}).raw=Ku;var Qu=ke(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ca.geo.stereographic=function(){return ue(Qu)}).raw=Qu,Ce.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Ia]},(ca.geo.transverseMercator=function(){var t=Ae(Ce),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90])}).raw=Ce,ca.geom={},ca.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,i=Et(e),o=Et(r),a=t.length,u=[],l=[];for(n=0;n<a;n++)u.push([+i.call(this,t[n],n),+o.call(this,t[n],n),n]);for(u.sort(Le),n=0;n<a;n++)l.push([u[n][0],-u[n][1]]);var s=qe(u),c=qe(l),f=c[0]===s[0],h=c[c.length-1]===s[s.length-1],p=[];for(n=s.length-1;n>=0;--n)p.push(t[u[s[n]][2]]);for(n=+f;n<c.length-h;++n)p.push(t[u[c[n]][2]]);return p}var e=ze,r=Te;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n)},ca.geom.polygon=function(t){return Sa(t,tl),t};var tl=ca.geom.polygon.prototype=[];tl.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],i=0;++n<e;)t=r,r=this[n],i+=t[1]*r[0]-t[0]*r[1];return.5*i},tl.centroid=function(t){var n,e,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o*t,a*t]},tl.clip=function(t){for(var n,e,r,i,o,a,u=Re(t),l=-1,s=this.length-Re(this),c=this[s-1];++l<s;){for(n=t.slice(),t.length=0,i=this[l],o=n[(r=n.length-u)-1],e=-1;++e<r;)a=n[e],Oe(a,c,i)?(Oe(o,c,i)||t.push(je(o,a,c,i)),t.push(a)):Oe(o,c,i)&&t.push(je(o,a,c,i)),o=a;u&&t.push(t[0]),c=i}return t};var nl,el,rl,il,ol,al=[],ul=[];Ve.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)t=n[e].edge,t.b&&t.a||n.splice(e,1);return n.sort(Be),n.length},er.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},rr.prototype={insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=ur(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(or(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ar(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(ar(this,e),t=e,e=t.U),e.C=!1,r.C=!0,or(this,r))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?ur(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=a,a.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(n=i.R,n.C&&(n.C=!1,i.C=!0,or(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,ar(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,or(this,i),t=this._;break}}else if(n=i.L,n.C&&(n.C=!1,i.C=!0,ar(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,or(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,ar(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ca.geom.voronoi=function(t){function n(t){var n=new Array(t.length),r=u[0][0],i=u[0][1],o=u[1][0],a=u[1][1];return lr(e(t),u).cells.forEach(function(e,u){var l=e.edges,s=e.site;(n[u]=l.length?l.map(function(t){var n=t.start();return[n.x,n.y]
}):s.x>=r&&s.x<=o&&s.y>=i&&s.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[]).point=t[u]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(o(t,n)/Ra)*Ra,y:Math.round(a(t,n)/Ra)*Ra,i:n}})}var r=ze,i=Te,o=r,a=i,u=ll;return t?n(t):(n.links=function(t){return lr(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return lr(e(t)).cells.forEach(function(e,r){for(var i,o=e.site,a=e.edges.sort(Be),u=-1,l=a.length,s=a[l-1].edge,c=s.l===o?s.r:s.l;++u<l;)s,i=c,s=a[u].edge,c=s.l===o?s.r:s.l,r<i.i&&r<c.i&&cr(o,i,c)<0&&n.push([t[r],t[i.i],t[c.i]])}),n},n.x=function(t){return arguments.length?(o=Et(r=t),n):r},n.y=function(t){return arguments.length?(a=Et(i=t),n):i},n.clipExtent=function(t){return arguments.length?(u=null==t?ll:t,n):u===ll?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===ll?null:u&&u[1]},n)};var ll=[[-1e6,-1e6],[1e6,1e6]];ca.geom.delaunay=function(t){return ca.geom.voronoi().triangles(t)},ca.geom.quadtree=function(t,n,e,r,i){function o(t){function o(t,n,e,r,i,o,a,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(_a(l-e)+_a(c-r)<.01)s(t,n,e,r,i,o,a,u);else{var f=t.point;t.x=t.y=t.point=null,s(t,f,l,c,i,o,a,u),s(t,n,e,r,i,o,a,u)}else t.x=e,t.y=r,t.point=n}else s(t,n,e,r,i,o,a,u)}function s(t,n,e,r,i,a,u,l){var s=.5*(i+u),c=.5*(a+l),f=e>=s,h=r>=c,p=h<<1|f;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=pr()),f?i=s:u=s,h?a=c:l=c,o(t,n,e,r,i,a,u,l)}var c,f,h,p,d,g,v,y,m,x=Et(u),_=Et(l);if(null!=n)g=n,v=e,y=r,m=i;else if(y=m=-(g=v=1/0),f=[],h=[],d=t.length,a)for(p=0;p<d;++p)c=t[p],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>y&&(y=c.x),c.y>m&&(m=c.y),f.push(c.x),h.push(c.y);else for(p=0;p<d;++p){var b=+x(c=t[p],p),w=+_(c,p);b<g&&(g=b),w<v&&(v=w),b>y&&(y=b),w>m&&(m=w),f.push(b),h.push(w)}var M=y-g,k=m-v;M>k?m=v+M:y=g+k;var S=pr();if(S.add=function(t){o(S,t,+x(t,++p),+_(t,p),g,v,y,m)},S.visit=function(t){dr(t,S,g,v,y,m)},S.find=function(t){return gr(S,t[0],t[1],g,v,y,m)},p=-1,null==n){for(;++p<d;)o(S,t[p],f[p],h[p],g,v,y,m);--p}else t.forEach(S.add);return f=h=t=c=null,S}var a,u=ze,l=Te;return(a=arguments.length)?(u=fr,l=hr,3===a&&(i=e,r=n,e=n=0),o(t)):(o.x=function(t){return arguments.length?(u=t,o):u},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==n?null:[[n,e],[r,i]]},o.size=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=e=0,r=+t[0],i=+t[1]),o):null==n?null:[r-n,i-e]},o)},ca.interpolateRgb=vr,ca.interpolateObject=yr,ca.interpolateNumber=mr,ca.interpolateString=xr;var sl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cl=new RegExp(sl.source,"g");ca.interpolate=_r,ca.interpolators=[function(t,n){var e=void 0===n?"undefined":hi(n);return("string"===e?eu.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?vr:xr:n instanceof ut?vr:Array.isArray(n)?br:"object"===e&&isNaN(n)?yr:mr)(t,n)}],ca.interpolateArray=br;var fl=function(){return x},hl=ca.map({linear:fl,poly:Ar,quad:function(){return Sr},cubic:function(){return Nr},sin:function(){return Cr},exp:function(){return zr},circle:function(){return Tr},elastic:qr,back:Lr,bounce:function(){return Or}}),pl=ca.map({in:x,out:Mr,"in-out":kr,"out-in":function(t){return kr(Mr(t))}});ca.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.slice(0,n):t,r=n>=0?t.slice(n+1):"in";return e=hl.get(e)||fl,r=pl.get(r)||x,wr(r(e.apply(null,fa.call(arguments,1))))},ca.interpolateHcl=jr,ca.interpolateHsl=Rr,ca.interpolateLab=Dr,ca.interpolateRound=Pr,ca.transform=function(t){var n=pa.createElementNS(ca.ns.prefix.svg,"g");return(ca.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Ur(e?e.matrix:dl)})(t)},Ur.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var dl={a:1,b:0,c:0,d:1,e:0,f:0};ca.interpolateTransform=$r,ca.layout={},ca.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Gr(t[e]));return n}},ca.layout.chord=function(){function t(){var t,s,f,h,p,d={},g=[],v=ca.range(o),y=[];for(e=[],r=[],t=0,h=-1;++h<o;){for(s=0,p=-1;++p<o;)s+=i[h][p];g.push(s),y.push(ca.range(o)),t+=s}for(a&&v.sort(function(t,n){return a(g[t],g[n])}),u&&y.forEach(function(t,n){t.sort(function(t,e){return u(i[n][t],i[n][e])})}),t=(Ua-c*o)/t,s=0,h=-1;++h<o;){for(f=s,p=-1;++p<o;){var m=v[h],x=y[m][p],_=i[m][x],b=s,w=s+=_*t;d[m+"-"+x]={index:m,subindex:x,startAngle:b,endAngle:w,value:_}}r[m]={index:m,startAngle:f,endAngle:s,value:g[m]},s+=c}for(h=-1;++h<o;)for(p=h-1;++p<o;){var M=d[h+"-"+p],k=d[p+"-"+h];(M.value||k.value)&&e.push(M.value<k.value?{source:k,target:M}:{source:M,target:k})}l&&n()}function n(){e.sort(function(t,n){return l((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,r,i,o,a,u,l,s={},c=0;return s.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,e=r=null,s):i},s.padding=function(t){return arguments.length?(c=t,e=r=null,s):c},s.sortGroups=function(t){return arguments.length?(a=t,e=r=null,s):a},s.sortSubgroups=function(t){return arguments.length?(u=t,e=null,s):u},s.sortChords=function(t){return arguments.length?(l=t,e&&n(),s):l},s.chords=function(){return e||t(),e},s.groups=function(){return r||t(),r},s},ca.layout.force=function(){function t(t){return function(n,e,r,i){if(n.point!==t){var o=n.cx-t.x,a=n.cy-t.y,u=i-e,l=o*o+a*a;if(u*u/y<l){if(l<g){var s=n.charge/l;t.px-=o*s,t.py-=a*s}return!0}if(n.point&&l&&l<g){var s=n.pointCharge/l;t.px-=o*s,t.py-=a*s}}return!n.charge}}function n(t){t.px=ca.event.x,t.py=ca.event.y,l.resume()}var e,r,i,o,a,u,l={},s=ca.dispatch("start","tick","end"),c=[1,1],f=.9,h=gl,p=vl,d=-30,g=yl,v=.1,y=.64,m=[],_=[];return l.tick=function(){if((i*=.99)<.005)return e=null,s.end({type:"end",alpha:i=0}),!0;var n,r,l,h,p,g,y,x,b,w=m.length,M=_.length;for(r=0;r<M;++r)l=_[r],h=l.source,p=l.target,x=p.x-h.x,b=p.y-h.y,(g=x*x+b*b)&&(g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,x*=g,b*=g,p.x-=x*(y=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=b*y,h.x+=x*(y=1-y),h.y+=b*y);if((y=i*v)&&(x=c[0]/2,b=c[1]/2,r=-1,y))for(;++r<w;)l=m[r],l.x+=(x-l.x)*y,l.y+=(b-l.y)*y;if(d)for(ii(n=ca.geom.quadtree(m),i,u),r=-1;++r<w;)(l=m[r]).fixed||n.visit(t(l));for(r=-1;++r<w;)l=m[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);s.tick({type:"tick",alpha:i})},l.nodes=function(t){return arguments.length?(m=t,l):m},l.links=function(t){return arguments.length?(_=t,l):_},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.friction=function(t){return arguments.length?(f=+t,l):f},l.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(y=t*t,l):Math.sqrt(y)},l.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(e.c=null,e.t=NaN,e=null,s.end({type:"end",alpha:i=0})):t>0&&(s.start({type:"start",alpha:i=t}),e=qt(l.tick)),l):i},l.start=function(){function t(t,r){if(!e){for(e=new Array(i),l=0;l<i;++l)e[l]=[];for(l=0;l<s;++l){var o=_[l];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,u=e[n],l=-1,c=u.length;++l<c;)if(!isNaN(a=u[l][t]))return a;return Math.random()*r}var n,e,r,i=m.length,s=_.length,f=c[0],g=c[1];for(n=0;n<i;++n)(r=m[n]).index=n,r.weight=0;for(n=0;n<s;++n)r=_[n],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(n=0;n<i;++n)r=m[n],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof h)for(n=0;n<s;++n)o[n]=+h.call(this,_[n],n);else for(n=0;n<s;++n)o[n]=h;if(a=[],"function"==typeof p)for(n=0;n<s;++n)a[n]=+p.call(this,_[n],n);else for(n=0;n<s;++n)a[n]=p;if(u=[],"function"==typeof d)for(n=0;n<i;++n)u[n]=+d.call(this,m[n],n);else for(n=0;n<i;++n)u[n]=d;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(r||(r=ca.behavior.drag().origin(x).on("dragstart.force",ti).on("drag.force",n).on("dragend.force",ni)),!arguments.length)return r;this.on("mouseover.force",ei).on("mouseout.force",ri).call(r)},ca.rebind(l,s,"on")};var gl=20,vl=1,yl=1/0;ca.layout.hierarchy=function(){function t(i){var o,a=[i],u=[];for(i.depth=0;null!=(o=a.pop());)if(u.push(o),(s=e.call(t,o,o.depth))&&(l=s.length)){for(var l,s,c;--l>=0;)a.push(c=s[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=s}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return ui(i,function(t){var e,i;n&&(e=t.children)&&e.sort(n),r&&(i=t.parent)&&(i.value+=t.value)}),u}var n=ci,e=li,r=si;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(ai(n,function(t){t.children&&(t.value=0)}),ui(n,function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},ca.layout.partition=function(){function t(n,e,r,i){var o=n.children;if(n.x=e,n.y=n.depth*i,n.dx=r,n.dy=i,o&&(a=o.length)){var a,u,l,s=-1;for(r=n.value?r/n.value:0;++s<a;)t(u=o[s],e,l=u.value*r,i),e+=l}}function n(t){var e=t.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,n(e[o]));return 1+r}function e(e,o){var a=r.call(this,e,o);return t(a[0],0,i[0],i[1]/n(a[0])),a}var r=ca.layout.hierarchy(),i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},oi(e,r)},ca.layout.pie=function(){function t(a){var u,l=a.length,s=a.map(function(e,r){return+n.call(t,e,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),p=h*(f<0?-1:1),d=ca.sum(s),g=d?(f-l*p)/d:0,v=ca.range(l),y=[];return null!=e&&v.sort(e===ml?function(t,n){return s[n]-s[t]}:function(t,n){return e(a[t],a[n])}),v.forEach(function(t){y[t]={data:a[t],value:u=s[t],startAngle:c,endAngle:c+=u*g+p,padAngle:h}}),y}var n=Number,e=ml,r=0,i=Ua,o=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(i=n,t):i},t.padAngle=function(n){return arguments.length?(o=n,t):o},t};var ml={};ca.layout.stack=function(){function t(u,l){if(!(h=u.length))return u;var s=u.map(function(e,r){return n.call(t,e,r)}),c=s.map(function(n){return n.map(function(n,e){return[o.call(t,n,e),a.call(t,n,e)]})}),f=e.call(t,c,l);s=ca.permute(s,f),c=ca.permute(c,f);var h,p,d,g,v=r.call(t,c,l),y=s[0].length;for(d=0;d<y;++d)for(i.call(t,s[0][d],g=v[d],c[0][d][1]),p=1;p<h;++p)i.call(t,s[p][d],g+=c[p-1][d][1],c[p][d][1]);return u}var n=x,e=vi,r=yi,i=gi,o=pi,a=di;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:xl.get(n)||vi,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:_l.get(n)||yi,t):r},t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(a=n,t):a},t.out=function(n){return arguments.length?(i=n,t):i},t};var xl=ca.map({"inside-out":function(t){var n,e,r=t.length,i=t.map(mi),o=t.map(xi),a=ca.range(r).sort(function(t,n){return i[t]-i[n]}),u=0,l=0,s=[],c=[];for(n=0;n<r;++n)e=a[n],u<l?(u+=o[e],s.push(e)):(l+=o[e],c.push(e));return c.reverse().concat(s)},reverse:function(t){return ca.range(t.length).reverse()},default:vi}),_l=ca.map({silhouette:function(t){var n,e,r,i=t.length,o=t[0].length,a=[],u=0,l=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];r>u&&(u=r),a.push(r)}for(e=0;e<o;++e)l[e]=(u-a[e])/2;return l},wiggle:function(t){var n,e,r,i,o,a,u,l,s,c=t.length,f=t[0],h=f.length,p=[];for(p[0]=l=s=0,e=1;e<h;++e){for(n=0,i=0;n<c;++n)i+=t[n][e][1];for(n=0,o=0,u=f[e][0]-f[e-1][0];n<c;++n){for(r=0,a=(t[n][e][1]-t[n][e-1][1])/(2*u);r<n;++r)a+=(t[r][e][1]-t[r][e-1][1])/u;o+=a*t[n][e][1]}p[e]=l-=i?o/i*u:0,l<s&&(s=l)}for(e=0;e<h;++e)p[e]-=s;return p},expand:function(t){var n,e,r,i=t.length,o=t[0].length,a=1/i,u=[];for(e=0;e<o;++e){for(n=0,r=0;n<i;n++)r+=t[n][e][1];if(r)for(n=0;n<i;n++)t[n][e][1]/=r;else for(n=0;n<i;n++)t[n][e][1]=a}for(e=0;e<o;++e)u[e]=0;return u},zero:yi});ca.layout.histogram=function(){function t(t,o){for(var a,u,l=[],s=t.map(e,this),c=r.call(this,s,o),f=i.call(this,c,s,o),o=-1,h=s.length,p=f.length-1,d=n?1:1/h;++o<p;)a=l[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(p>0)for(o=-1;++o<h;)(u=s[o])>=c[0]&&u<=c[1]&&(a=l[ca.bisect(f,u,1,p)-1],a.y+=d,a.push(t[o]));return l}var n=!0,e=Number,r=Mi,i=bi;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=Et(n),t):r},t.bins=function(n){return arguments.length?(i="number"==typeof n?function(t){return wi(t,n)}:Et(n),t):i},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},ca.layout.pack=function(){function t(t,o){var a=e.call(this,t,o),u=a[0],l=i[0],s=i[1],c=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,ui(u,function(t){t.r=+c(t.value)}),ui(u,Ai),r){var f=r*(n?1:Math.max(2*u.r/l,2*u.r/s))/2;ui(u,function(t){t.r+=f}),ui(u,Ai),ui(u,function(t){t.r-=f})}return Ti(u,l/2,s/2,n?1:1/Math.max(2*u.r/l,2*u.r/s)),a}var n,e=ca.layout.hierarchy().sort(ki),r=0,i=[1,1];return t.size=function(n){return arguments.length?(i=n,t):i},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},oi(t,e)},ca.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),f=c[0],h=n(f);if(ui(h,e),h.parent.m=-h.z,ai(h,r),s)ai(f,o);else{var p=f,d=f,g=f;ai(f,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>g.depth&&(g=t)});var v=u(p,d)/2-p.x,y=l[0]/(d.x+u(d,p)/2+v),m=l[1]/(g.depth||1);ai(f,function(t){t.x=(t.x+v)*y,t.y=t.depth*m})}return c}function n(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var i,o=n.children,a=0,u=o.length;a<u;++a)r.push((o[a]=i={_:o[a],parent:n,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return e.children[0]}function e(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){Di(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+u(t._,r._));t.parent.A=i(t,r,t.parent.A||e[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,n,e){if(n){for(var r,i=t,o=t,a=n,l=i.parent.children[0],s=i.m,c=o.m,f=a.m,h=l.m;a=ji(a),i=Oi(i),a&&i;)l=Oi(l),o=ji(o),o.a=t,r=a.z+f-i.z-s+u(a._,i._),r>0&&(Ri(Pi(a,t,e),t,r),s+=r,c+=r),f+=a.m,s+=i.m,h+=l.m,c+=o.m;a&&!ji(o)&&(o.t=a,o.m+=f-c),i&&!Oi(l)&&(l.t=i,l.m+=s-h,e=t)}return e}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=ca.layout.hierarchy().sort(null).value(null),u=Li,l=[1,1],s=null;return t.separation=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(s=null==(l=n)?o:null,t):s?null:l},t.nodeSize=function(n){return arguments.length?(s=null==(l=n)?null:o,t):s?l:null},oi(t,a)},ca.layout.cluster=function(){function t(t,o){var a,u=n.call(this,t,o),l=u[0],s=0;ui(l,function(t){var n=t.children;n&&n.length?(t.x=Fi(n),t.y=Ui(n)):(t.x=a?s+=e(t,a):0,t.y=0,a=t)});var c=Ii(l),f=Hi(l),h=c.x-e(c,f)/2,p=f.x+e(f,c)/2;return ui(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),u}var n=ca.layout.hierarchy().sort(null).value(null),e=Li,r=[1,1],i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(i=null==(r=n),t):i?null:r},t.nodeSize=function(n){return arguments.length?(i=null!=(r=n),t):i?r:null},oi(t,n)},ca.layout.treemap=function(){function t(t,n){for(var e,r,i=-1,o=t.length;++i<o;)r=(e=t[i]).value*(n<0?0:n),e.area=isNaN(r)||r<=0?0:r}function n(e){var o=e.children;if(o&&o.length){var a,u,l,s=f(e),c=[],h=o.slice(),d=1/0,g="slice"===p?s.dx:"dice"===p?s.dy:"slice-dice"===p?1&e.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(t(h,s.dx*s.dy/e.value),c.area=0;(l=h.length)>0;)c.push(a=h[l-1]),c.area+=a.area,"squarify"!==p||(u=r(c,g))<=d?(h.pop(),d=u):(c.area-=c.pop().area,i(c,g,s,!1),g=Math.min(s.dx,s.dy),c.length=c.area=0,d=1/0);c.length&&(i(c,g,s,!0),c.length=c.area=0),o.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var o,a=f(n),u=r.slice(),l=[];for(t(u,a.dx*a.dy/n.value),l.area=0;o=u.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!u.length),l.length=l.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(e=t[a].area)&&(e<o&&(o=e),e>i&&(i=e));return r*=r,n*=n,r?Math.max(n*i*d/r,r/(n*o*d)):1/0}function i(t,n,e,r){var i,o=-1,a=t.length,u=e.x,s=e.y,c=n?l(t.area/n):0;if(n==e.dx){for((r||c>e.dy)&&(c=e.dy);++o<a;)i=t[o],i.x=u,i.y=s,i.dy=c,u+=i.dx=Math.min(e.x+e.dx-u,c?l(i.area/c):0);i.z=!0,i.dx+=e.x+e.dx-u,e.y+=c,e.dy-=c}else{for((r||c>e.dx)&&(c=e.dx);++o<a;)i=t[o],i.x=u,i.y=s,i.dx=c,s+=i.dy=Math.min(e.y+e.dy-s,c?l(i.area/c):0);i.z=!1,i.dy+=e.y+e.dy-s,e.x+=c,e.dx-=c}}function o(r){var i=a||u(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=s[0],o.dy=s[1]):o.dx=o.dy=0,a&&u.revalue(o),t([o],o.dx*o.dy/o.value),(a?e:n)(o),h&&(a=i),i}var a,u=ca.layout.hierarchy(),l=Math.round,s=[1,1],c=null,f=Yi,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(s=t,o):s},o.padding=function(t){function n(n){var e=t.call(o,n,n.depth);return null==e?Yi(n):Vi(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return Vi(n,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Yi:"function"===(r=void 0===t?"undefined":hi(t))?n:"number"===r?(t=[t,t,t,t],e):e,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(h=t,a=null,o):h},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},oi(o,u)},ca.random={normal:function(t,n){var e=arguments.length;return e<2&&(n=1),e<1&&(t=0),function(){var e,r,i;do{e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r}while(!i||i>1);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ca.random.normal.apply(ca,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=ca.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;e<t;e++)n+=Math.random();return n}}},ca.scale={};var bl={floor:x,ceil:x};ca.scale.linear=function(){return Gi([0,1],[0,1],_r,!1)};var wl={s:1,g:1,p:1,r:1,e:1};ca.scale.log=function(){return oo(ca.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ca.format(".0e"),kl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ca.scale.pow=function(){return ao(ca.scale.linear(),1,[0,1])},ca.scale.sqrt=function(){return ca.scale.pow().exponent(.5)},ca.scale.ordinal=function(){return lo([],{t:"range",a:[[]]})},ca.scale.category10=function(){return ca.scale.ordinal().range(Sl)},ca.scale.category20=function(){return ca.scale.ordinal().range(Nl)},ca.scale.category20b=function(){return ca.scale.ordinal().range(El)},ca.scale.category20c=function(){return ca.scale.ordinal().range(Al)};var Sl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(_t),Nl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(_t),El=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(_t),Al=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(_t);ca.scale.quantile=function(){return so([],[])},ca.scale.quantize=function(){return co(0,1,[0,1])},ca.scale.threshold=function(){return fo([.5],[0,1])},ca.scale.identity=function(){return ho([0,1])},ca.svg={},ca.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),s=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Ia,f=u.apply(this,arguments)-Ia,h=Math.abs(f-c),p=c>f?0:1;if(s<t&&(d=s,s=t,t=d),h>=Fa)return n(s,p)+(t?n(t,1-p):"")+"Z";var d,g,v,y,m,x,_,b,w,M,k,S,N=0,E=0,A=[];if((y=(+l.apply(this,arguments)||0)/2)&&(v=o===Cl?Math.sqrt(t*t+s*s):+o.apply(this,arguments),p||(E*=-1),s&&(E=et(v/s*Math.sin(y))),t&&(N=et(v/t*Math.sin(y)))),s){m=s*Math.cos(c+E),x=s*Math.sin(c+E),_=s*Math.cos(f-E),b=s*Math.sin(f-E);var C=Math.abs(f-c-2*E)<=Pa?0:1;if(E&&_o(m,x,_,b)===p^C){var z=(c+f)/2;m=s*Math.cos(z),x=s*Math.sin(z),_=b=null}}else m=x=0;if(t){w=t*Math.cos(f-N),M=t*Math.sin(f-N),k=t*Math.cos(c+N),S=t*Math.sin(c+N);var T=Math.abs(c-f+2*N)<=Pa?0:1;if(N&&_o(w,M,k,S)===1-p^T){var q=(c+f)/2;w=t*Math.cos(q),M=t*Math.sin(q),k=S=null}}else w=M=0;if(h>Ra&&(d=Math.min(Math.abs(s-t)/2,+i.apply(this,arguments)))>.001){g=t<s^p?0:1;var L=d,O=d;if(h<Pa){var j=null==k?[w,M]:null==_?[m,x]:je([m,x],[k,S],[_,b],[w,M]),R=m-j[0],D=x-j[1],P=_-j[0],U=b-j[1],F=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),I=Math.sqrt(j[0]*j[0]+j[1]*j[1]);O=Math.min(d,(t-I)/(F-1)),L=Math.min(d,(s-I)/(F+1))}if(null!=_){var H=bo(null==k?[w,M]:[k,S],[m,x],s,L,p),Y=bo([_,b],[w,M],s,L,p);d===L?A.push("M",H[0],"A",L,",",L," 0 0,",g," ",H[1],"A",s,",",s," 0 ",1-p^_o(H[1][0],H[1][1],Y[1][0],Y[1][1]),",",p," ",Y[1],"A",L,",",L," 0 0,",g," ",Y[0]):A.push("M",H[0],"A",L,",",L," 0 1,",g," ",Y[0])}else A.push("M",m,",",x);if(null!=k){var V=bo([m,x],[k,S],t,-O,p),Z=bo([w,M],null==_?[m,x]:[_,b],t,-O,p);d===O?A.push("L",Z[0],"A",O,",",O," 0 0,",g," ",Z[1],"A",t,",",t," 0 ",p^_o(Z[1][0],Z[1][1],V[1][0],V[1][1]),",",1-p," ",V[1],"A",O,",",O," 0 0,",g," ",V[0]):A.push("L",Z[0],"A",O,",",O," 0 0,",g," ",V[0])}else A.push("L",w,",",M)}else A.push("M",m,",",x),null!=_&&A.push("A",s,",",s," 0 ",C,",",p," ",_,",",b),A.push("L",w,",",M),null!=k&&A.push("A",t,",",t," 0 ",T,",",1-p," ",k,",",S);return A.push("Z"),A.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=go,r=vo,i=po,o=Cl,a=yo,u=mo,l=xo;return t.innerRadius=function(n){return arguments.length?(e=Et(n),t):e},t.outerRadius=function(n){return arguments.length?(r=Et(n),t):r},t.cornerRadius=function(n){return arguments.length?(i=Et(n),t):i},t.padRadius=function(n){return arguments.length?(o=n==Cl?Cl:Et(n),t):o},t.startAngle=function(n){return arguments.length?(a=Et(n),t):a},t.endAngle=function(n){return arguments.length?(u=Et(n),t):u},t.padAngle=function(n){return arguments.length?(l=Et(n),t):l},t.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +u.apply(this,arguments))/2-Ia;return[Math.cos(n)*t,Math.sin(n)*t]},t};var Cl="auto";ca.svg.line=function(){return wo(x)};var zl=ca.map({linear:Mo,"linear-closed":ko,step:So,"step-before":No,"step-after":Eo,basis:Lo,"basis-open":Oo,"basis-closed":jo,bundle:Ro,cardinal:zo,"cardinal-open":Ao,"cardinal-closed":Co,monotone:Ho});zl.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Tl=[0,2/3,1/3,0],ql=[0,1/3,2/3,0],Ll=[0,1/6,2/3,1/6];ca.svg.line.radial=function(){var t=wo(Yo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},No.reverse=Eo,Eo.reverse=No,ca.svg.area=function(){return Vo(x)},ca.svg.area.radial=function(){var t=Vo(Yo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ca.svg.chord=function(){function t(t,u){var l=n(this,o,t,u),s=n(this,a,t,u);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,s)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,s.r,s.p0)+r(s.r,s.p1,s.a1-s.a0)+i(s.r,s.p1,l.r,l.p0))+"Z"}function n(t,n,e,r){var i=n.call(t,e,r),o=u.call(t,i,r),a=l.call(t,i,r)-Ia,c=s.call(t,i,r)-Ia;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function e(t,n){return t.a0==n.a0&&t.a1==n.a1}function r(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Pa)+",1 "+n}function i(t,n,e,r){return"Q 0,0 "+r}var o=_e,a=be,u=Zo,l=yo,s=mo;return t.radius=function(n){return arguments.length?(u=Et(n),t):u},t.source=function(n){return arguments.length?(o=Et(n),t):o},t.target=function(n){return arguments.length?(a=Et(n),t):a},t.startAngle=function(n){return arguments.length?(l=Et(n),t):l},t.endAngle=function(n){return arguments.length?(s=Et(n),t):s},t},ca.svg.diagonal=function(){function t(t,i){var o=n.call(this,t,i),a=e.call(this,t,i),u=(o.y+a.y)/2,l=[o,{x:o.x,y:u},{x:a.x,y:u},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var n=_e,e=be,r=Bo;return t.source=function(e){return arguments.length?(n=Et(e),t):n},t.target=function(n){return arguments.length?(e=Et(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},ca.svg.diagonal.radial=function(){var t=ca.svg.diagonal(),n=Bo,e=t.projection;return t.projection=function(t){return arguments.length?e(Xo(n=t)):n},t},ca.svg.symbol=function(){function t(t,r){return(Ol.get(n.call(this,t,r))||Wo)(e.call(this,t,r))}var n=Jo,e=$o;return t.type=function(e){return arguments.length?(n=Et(e),t):n},t.size=function(n){return arguments.length?(e=Et(n),t):e},t};var Ol=ca.map({circle:Wo,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Rl)),e=n*Rl;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/jl),e=n*jl/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/jl),e=n*jl/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});ca.svg.symbolTypes=Ol.keys();var jl=Math.sqrt(3),Rl=Math.tan(30*Ha);Ca.transition=function(t){for(var n,e,r=Dl||++Il,i=na(t),o=[],a=Pl||{time:Date.now(),ease:Er,delay:0,duration:250},u=-1,l=this.length;++u<l;){o.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(e=s[c])&&ea(e,c,i,r,a),n.push(e)}return Ko(o,i,r)},Ca.interrupt=function(t){return this.each(null==t?Ul:Go(na(t)))};var Dl,Pl,Ul=Go(na()),Fl=[],Il=0;Fl.call=Ca.call,Fl.empty=Ca.empty,Fl.node=Ca.node,Fl.size=Ca.size,ca.transition=function(t,n){return t&&t.transition?Dl?t.transition(n):t:ca.selection().transition(t)},ca.transition.prototype=Fl,Fl.select=function(t){var n,e,r,i=this.id,o=this.namespace,a=[];t=C(t);for(var u=-1,l=this.length;++u<l;){a.push(n=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(r=s[c])&&(e=t.call(r,r.__data__,c,u))?("__data__"in r&&(e.__data__=r.__data__),ea(e,c,o,i,r[o][i]),n.push(e)):n.push(null)}return Ko(a,o,i)},Fl.selectAll=function(t){var n,e,r,i,o,a=this.id,u=this.namespace,l=[];t=z(t);for(var s=-1,c=this.length;++s<c;)for(var f=this[s],h=-1,p=f.length;++h<p;)if(r=f[h]){o=r[u][a],e=t.call(r,r.__data__,h,s),l.push(n=[]);for(var d=-1,g=e.length;++d<g;)(i=e[d])&&ea(i,d,u,a,o),n.push(i)}return Ko(l,u,a)},Fl.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]);for(var e=this[o],u=0,l=e.length;u<l;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return Ko(i,this.namespace,this.id)},Fl.tween=function(t,n){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(t):V(this,null==n?function(n){n[r][e].tween.remove(t)}:function(i){i[r][e].tween.set(t,n)})},Fl.attr=function(t,n){function e(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(u);return e!==t&&(n=a(e,t),function(t){this.setAttribute(u,n(t))})})}function o(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(u.space,u.local);return e!==t&&(n=a(e,t),function(t){this.setAttributeNS(u.space,u.local,n(t))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var a="transform"==t?$r:_r,u=ca.ns.qualify(t);return Qo(this,"attr."+t,n,u.local?o:i)},Fl.attrTween=function(t,n){function e(t,e){var r=n.call(this,t,e,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,e){var r=n.call(this,t,e,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=ca.ns.qualify(t);return this.tween("attr."+t,i.local?r:e)},Fl.style=function(t,n,r){function i(){this.style.removeProperty(t)}function o(n){return null==n?i:(n+="",function(){var i,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(i=_r(o,n),function(n){this.style.setProperty(t,i(n),r)})})}var a=arguments.length;if(a<3){if("string"!=typeof t){a<2&&(n="");for(r in t)this.style(r,t[r],n);return this}r=""}return Qo(this,"style."+t,n,o)},Fl.styleTween=function(t,n,r){function i(i,o){var a=n.call(this,i,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(n){this.style.setProperty(t,a(n),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Fl.text=function(t){return Qo(this,"text",t,ta)},Fl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Fl.ease=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].ease:("function"!=typeof t&&(t=ca.ease.apply(ca,arguments)),V(this,function(r){r[e][n].ease=t}))},Fl.delay=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].delay:V(this,"function"==typeof t?function(r,i,o){r[e][n].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[e][n].delay=t}))},Fl.duration=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].duration:V(this,"function"==typeof t?function(r,i,o){r[e][n].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))},Fl.each=function(t,n){var e=this.id,r=this.namespace;if(arguments.length<2){var i=Pl,o=Dl;try{Dl=e,V(this,function(n,i,o){Pl=n[r][e],t.call(n,n.__data__,i,o)})}finally{Pl=i,Dl=o}}else V(this,function(i){var o=i[r][e];(o.event||(o.event=ca.dispatch("start","end","interrupt"))).on(t,n)});return this},Fl.transition=function(){for(var t,n,e,r,i=this.id,o=++Il,a=this.namespace,u=[],l=0,s=this.length;l<s;l++){u.push(t=[]);for(var n=this[l],c=0,f=n.length;c<f;c++)(e=n[c])&&(r=e[a][i],ea(e,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(e)}return Ko(u,a,o)},ca.svg.axis=function(){function t(t){t.each(function(){var t,s=ca.select(this),c=this.__chart__||e,f=this.__chart__=e.copy(),h=null==l?f.ticks?f.ticks.apply(f,u):f.domain():l,p=null==n?f.tickFormat?f.tickFormat.apply(f,u):x:n,d=s.selectAll(".tick").data(h,f),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ra),v=ca.transition(d.exit()).style("opacity",Ra).remove(),y=ca.transition(d.order()).style("opacity",1),m=Math.max(i,0)+a,_=Bi(f),b=s.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),ca.transition(b));g.append("line"),g.append("text");var M,k,S,N,E=g.select("line"),A=y.select("line"),C=d.select("text").text(p),z=g.select("text"),T=y.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ra,M="x",S="y",k="x2",N="y2",C.attr("dy",q<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+q*o+"V0H"+_[1]+"V"+q*o)):(t=ia,M="y",S="x",k="y2",N="x2",
C.attr("dy",".32em").style("text-anchor",q<0?"end":"start"),w.attr("d","M"+q*o+","+_[0]+"H0V"+_[1]+"H"+q*o)),E.attr(N,q*i),z.attr(S,q*m),A.attr(k,0).attr(N,q*i),T.attr(M,0).attr(S,q*m),f.rangeBand){var L=f,O=L.rangeBand()/2;c=f=function(t){return L(t)+O}}else c.rangeBand?c=f:v.call(t,f,c);g.call(t,c,f),y.call(t,f,f)})}var n,e=ca.scale.linear(),r=Hl,i=6,o=6,a=3,u=[10],l=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in Yl?n+"":Hl,t):r},t.ticks=function(){return arguments.length?(u=ha(arguments),t):u},t.tickValues=function(n){return arguments.length?(l=n,t):l},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(i=+n,o=+arguments[e-1],t):i},t.innerTickSize=function(n){return arguments.length?(i=+n,t):i},t.outerTickSize=function(n){return arguments.length?(o=+n,t):o},t.tickPadding=function(n){return arguments.length?(a=+n,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Hl="bottom",Yl={top:1,right:1,bottom:1,left:1};ca.svg.brush=function(){function t(e){e.each(function(){var e=ca.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=e.selectAll(".resize").data(g,x);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Vl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var l,f=ca.transition(e),h=ca.transition(a);s&&(l=Bi(s),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=Bi(c),h.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){32==ca.event.keyCode&&(C||(x=null,T[0]-=f[1],T[1]-=h[1],C=2),S())}function g(){32==ca.event.keyCode&&2==C&&(T[0]+=f[1],T[1]+=h[1],C=0,S())}function v(){var t=ca.mouse(b),e=!1;_&&(t[0]+=_[0],t[1]+=_[1]),C||(ca.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),T[0]=f[+(t[0]<x[0])],T[1]=h[+(t[1]<x[1])]):x=null),E&&y(t,s,0)&&(r(k),e=!0),A&&y(t,c,1)&&(i(k),e=!0),e&&(n(k),M({type:"brush",mode:C?"move":"resize"}))}function y(t,n,e){var r,i,o=Bi(n),l=o[0],s=o[1],c=T[e],g=e?h:f,v=g[1]-g[0];if(C&&(l-=c,s-=v+c),r=(e?d:p)?Math.max(l,Math.min(s,t[e])):t[e],C?i=(r+=c)+v:(x&&(c=Math.max(l,Math.min(s,2*x[e]-r))),c<r?(i=r,r=c):i=c),g[0]!=r||g[1]!=i)return e?u=null:a=null,g[0]=r,g[1]=i,!0}function m(){v(),k.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ca.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),M({type:"brushend"})}var x,_,b=this,w=ca.select(ca.event.target),M=l.of(b,arguments),k=ca.select(b),N=w.datum(),E=!/^(n|s)$/.test(N)&&s,A=!/^(e|w)$/.test(N)&&c,C=w.classed("extent"),z=W(b),T=ca.mouse(b),q=ca.select(e(b)).on("keydown.brush",o).on("keyup.brush",g);if(ca.event.changedTouches?q.on("touchmove.brush",v).on("touchend.brush",m):q.on("mousemove.brush",v).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),C)T[0]=f[0]-T[0],T[1]=h[0]-T[1];else if(N){var L=+/w$/.test(N),O=+/^n/.test(N);_=[f[1-L]-T[0],h[1-O]-T[1]],T[0]=f[L],T[1]=h[O]}else ca.event.altKey&&(x=T.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ca.select("body").style("cursor",w.style("cursor")),M({type:"brushstart"}),v()}var a,u,l=E(t,"brushstart","brush","brushend"),s=null,c=null,f=[0,0],h=[0,0],p=!0,d=!0,g=Zl[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),n={x:f,y:h,i:a,j:u},e=this.__chart__||n;this.__chart__=n,Dl?ca.select(this).transition().each("start.brush",function(){a=e.i,u=e.j,f=e.x,h=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=br(f,n.x),r=br(h,n.y);return a=u=null,function(i){f=n.x=e(i),h=n.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=n.i,u=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(s=n,g=Zl[!s<<1|!c],t):s},t.y=function(n){return arguments.length?(c=n,g=Zl[!s<<1|!c],t):c},t.clamp=function(n){return arguments.length?(s&&c?(p=!!n[0],d=!!n[1]):s?p=!!n:c&&(d=!!n),t):s&&c?[p,d]:s?p:c?d:null},t.extent=function(n){var e,r,i,o,l;return arguments.length?(s&&(e=n[0],r=n[1],c&&(e=e[0],r=r[0]),a=[e,r],s.invert&&(e=s(e),r=s(r)),r<e&&(l=e,e=r,r=l),e==f[0]&&r==f[1]||(f=[e,r])),c&&(i=n[0],o=n[1],s&&(i=i[1],o=o[1]),u=[i,o],c.invert&&(i=c(i),o=c(o)),o<i&&(l=i,i=o,o=l),i==h[0]&&o==h[1]||(h=[i,o])),t):(s&&(a?(e=a[0],r=a[1]):(e=f[0],r=f[1],s.invert&&(e=s.invert(e),r=s.invert(r)),r<e&&(l=e,e=r,r=l))),c&&(u?(i=u[0],o=u[1]):(i=h[0],o=h[1],c.invert&&(i=c.invert(i),o=c.invert(o)),o<i&&(l=i,i=o,o=l))),s&&c?[[e,i],[r,o]]:s?[e,r]:c&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],a=u=null),t},t.empty=function(){return!!s&&f[0]==f[1]||!!c&&h[0]==h[1]},ca.rebind(t,l,"on")};var Vl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bl=fu.format=yu.timeFormat,Xl=Bl.utc,$l=Xl("%Y-%m-%dT%H:%M:%S.%LZ");Bl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?oa:$l,oa.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},oa.toString=$l.toString,fu.second=It(function(t){return new hu(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),fu.seconds=fu.second.range,fu.seconds.utc=fu.second.utc.range,fu.minute=It(function(t){return new hu(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),fu.minutes=fu.minute.range,fu.minutes.utc=fu.minute.utc.range,fu.hour=It(function(t){var n=t.getTimezoneOffset()/60;return new hu(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),fu.hours=fu.hour.range,fu.hours.utc=fu.hour.utc.range,fu.month=It(function(t){return t=fu.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),fu.months=fu.month.range,fu.months.utc=fu.month.utc.range;var Jl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wl=[[fu.second,1],[fu.second,5],[fu.second,15],[fu.second,30],[fu.minute,1],[fu.minute,5],[fu.minute,15],[fu.minute,30],[fu.hour,1],[fu.hour,3],[fu.hour,6],[fu.hour,12],[fu.day,1],[fu.day,2],[fu.week,1],[fu.month,1],[fu.month,3],[fu.year,1]],Gl=Bl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Tn]]),Kl={range:function(t,n,e){return ca.range(Math.ceil(t/e)*e,+n,e).map(ua)},floor:x,ceil:x};Wl.year=fu.year,fu.scale=function(){return aa(ca.scale.linear(),Wl,Gl)};var Ql=Wl.map(function(t){return[t[0].utc,t[1]]}),ts=Xl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Tn]]);Ql.year=fu.year.utc,fu.scale.utc=function(){return aa(ca.scale.linear(),Ql,ts)},ca.text=At(function(t){return t.responseText}),ca.json=function(t,n){return Ct(t,"application/json",la,n)},ca.html=function(t,n){return Ct(t,"text/html",sa,n)},ca.xml=At(function(t){return t.responseXML}),t.exports?t.exports=ca:this.d3=ca}()}),di=Object.freeze({getData:Yn,create:Vn,getAll:Zn}),gi=di,vi={getAll:function(t){pi.json("/crusher/saved_dashboard",function(n){t(!1,n.response)})}},yi={getAll:function(t){pi.json("/line_item",function(n){t(!1,n.response)})}},mi=function(t,n){var e={};return t.reduce(Bn.bind(!1,""),e),n.reduce(Bn.bind(!1,"-"),e),Object.keys(e).map(function(t){return e[t]})},xi=Ce,_i=Ce,bi=function(t){return JSON.parse(JSON.stringify(t))},wi=Ce,Mi=Ce,ki=function(){function t(n,e){return ce(this,t),ee(),ae(n),this._comparison=void 0!=e&&e,this.target(n),this.init(),this.call.bind(this)}return fe(t,[{key:"target",value:function(t){this._target=t||me(ge.select(".container"),"div","div").style("width","1000px").style("margin-left","auto").style("margin-right","auto")}},{key:"init",value:function(){var t=Ce;t.state();this.defaults(t)}},{key:"defaults",value:function(t){if(!t.state().dashboard_options){t.publishStatic("actions",gi.getAll),t.publishStatic("saved",vi.getAll),t.publishStatic("line_items",yi.getAll);var n={logic_options:[{key:"All",value:"and"},{key:"Any",value:"or"}],logic_categories:[],filters:[{}],dashboard_options:[{key:"Overall",value:"data-view",selected:1},{key:"Timing",value:"timing-view",selected:0},{key:"Path",value:"ba-view",selected:0},{key:"Comparison",value:"summary-view",selected:0},{key:"Customer Stages",value:"stage-view",selected:0}]};t.update(!1,n)}}},{key:"call",value:function(){var t=this,n=Ce,e=n.state();if(this._comparision=void 0!=this._comparision&&this._comparison,n.update("is_comparison",this._comparison),console.log(this._comparison,e.selected_view),1==this._comparison&&"summary-view"!==e.selected_view)return n.update("dashboard_options",[{key:"Comparison",value:"summary-view",selected:1}]),n.update("selected_view","summary-view"),setTimeout(function(){return t.call()},1);if(!1===this._comparision&&("summary-view"==e.selected_view||void 0==e.selected_view))return console.log(this._comparison),n.update("dashboard_options",[{key:"Overall",value:"data-view",selected:1},{key:"Timing",value:"timing-view",selected:0},{key:"Path",value:"ba-view",selected:0},{key:"Comparison",value:"summary-view",selected:0},{key:"Customer Stages",value:"stage-view",selected:0}]),n.update("selected_comparison",void 0),n.update("selected_view","data-view"),setTimeout(function(){return t.call()},1);Hn(this._target).is_comparison(this._comparison).transform(e.transform||"").staged_filters(e.staged_filter||"").media(e.media_plan||{}).saved(e.saved||[]).data(e.formatted_data||{}).actions(e.actions||[]).selected_action(e.selected_action||{}).selected_comparison(e.selected_comparison||{}).action_date(e.action_date||0).comparison_date(e.comparison_date||0).loading(e.loading||!1).line_items(e.line_items||!1).summary(e.summary||!1).time_summary(e.time_summary||!1).category_summary(e.category_summary||!1).keyword_summary(e.keyword_summary||!1).before(e.before_urls||[]).before_tabs(e.before_tabs||[]).logic_options(e.logic_options||!1).logic_categories(e.logic_categories||!1).filters(e.filters||!1).view_options(e.dashboard_options||!1).explore_tabs(e.tabs||!1).time_tabs(e.time_tabs||!1).sort(e.sort||!1).ascending(e.ascending||!1).on("add-filter",n.prepareEvent("add-filter")).on("modify-filter",n.prepareEvent("modify-filter")).on("staged-filter.change",n.prepareEvent("staged-filter.change")).on("action.change",n.prepareEvent("action.change")).on("action_date.change",n.prepareEvent("action_date.change")).on("comparison_date.change",n.prepareEvent("comparison_date.change")).on("comparison.change",n.prepareEvent("comparison.change")).on("logic.change",n.prepareEvent("logic.change")).on("filter.change",n.prepareEvent("filter.change")).on("view.change",n.prepareEvent("view.change")).on("tab.change",n.prepareEvent("tab.change")).on("ba.sort",n.prepareEvent("ba.sort")).on("sort.change",n.prepareEvent("sort.change")).on("transform.change",n.prepareEvent("transform.change")).draw()}}]),t}(),Si=function(){function t(){return ce(this,t),this.internal={},this}return fe(t,[{key:"setStatic",value:function(t,n){return this.internal[t]=n,this}},{key:"publishStatic",value:function(t,n){return this.internal[t]=n,this}}]),t}();t.version="0.0.5",t.view=Hn,t.build=ue,t.initEvents=ee,t.initAPI=oe,t.runSegment=le,Object.defineProperty(t,"__esModule",{value:!0})});
{% autoescape None %}

<!DOCTYPE html>
<meta charset="utf-8">

<head>
<script>
process = {env: {NODE_ENV: "production"}}
</script>
<script src="//d3js.org/d3.v3.min.js"></script>
<script src="/static/bower_components/d3/d3.js"></script>
<script src="/static/js/funnel/build/compiled.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.js"></script>
<script src="/static/bower_components/d3-tip/index.js"></script>
<script src="/static/bower_components/d3-flame-graph/src/d3.flameGraph.js"></script>
<link rel="stylesheet" type="text/css" href="/static/bower_components/d3-flame-graph/src/d3.flameGraph.css">
<script src="//d3js.org/colorbrewer.v1.min.js"></script>

</head>

<style>

table, th, td {
    border-collapse: collapse;
}
th, td {
    text-align: center;
}

table tr:nth-child(even) {
    background-color: #eee;
}
table tr:nth-child(odd) {
   background-color:#fff;
}

/*
#chart rect {
  stroke: #999
}
#chart .label {
  visibility: hidden
}
*/

</style>

<body>

    <main></main>

    <div id="summary">
        <h3 style="margin:5px;">Summary</h3>
        <div id="unfiltered-summary" style="margin:5px;display: table-row"></div>
        <h3>Filtered Summary</h3>
        <div id="filtered-summary" style="margin:5px;display: table-row"> </div>
    </div>

    <div id="chart"></div>
</body>


<script>



var data = {{tree}}


var colors  =  colorbrewer.RdYlGn[9].slice().reverse()

state.update("colors",colors)
state.update("displayOption","media_cost_yest")
state.update("successOption","cpa_attr_30d")

state.publish("options",Object.keys(data['metrics']).sort())






</script>
</body>

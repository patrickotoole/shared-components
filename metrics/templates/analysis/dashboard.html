{% extends "base.html" %}
{% block scripts_top %}
<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic%7CUbuntu:300,300italic,400,400italic,500,500italic,700,700italic%7CInconsolata:400,400italic,700,700italic%7CLato:100,100italic,300,300italic,400,400italic,700,700italic,900,900italic">
<link type="text/css" rel="stylesheet" href="/static/js/chosen/chosen.min.css"/>
<link type="text/css" rel="stylesheet" href="/static/css/bootstrap.css"/>
<link type="text/css" rel="stylesheet" href="/static/css/bootstrap.min.css"/>
<link type="text/css" rel="stylesheet" href="/static/css/fonts.css"/>
<link type="text/css" rel="stylesheet" href="/static/css/bootstrap-switch.css"/>
<link type="text/css" rel="stylesheet" href="/static/css/bootstrap-select.css"/>

<link type="text/css" rel="stylesheet" href="/static/css/style.css"/>
<link type="text/css" rel="stylesheet" href="/static/css/font-awesome.min.css"/>

<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
<script type="text/javascript" src="/static/js/jquery.min.js"></script>

<script type="text/javascript" src="/static/js/bootstrap-select.js"></script>


<script type="text/javascript" src="/static/js/d3.js" charset="utf-8"></script>

<script type="text/javascript" src="/js/start/build/start.js"></script>
<script type="text/javascript" src="/js/filter/build/filter.js"></script>
<script type="text/javascript" src="/js/table/build/table.js"></script>
<script type="text/javascript" src="/js/media_plan/build/media_plan.js"></script>
<script type="text/javascript" src="/js/dashboard/build/dashboard.js"></script>
<script type="text/javascript" src="/js/state/build/state.js"></script>
<script type="text/javascript" src="/js/tabular/build/tabular.js"></script>


<script type="text/javascript" src="/static/js/rockerbox/crusher/sidebar.js"></script>

<script type="text/javascript" src="/static/js/rockerbox/routes/routes.js"></script>
<script type="text/javascript" src="/static/js/rockerbox/routes/routes.navigation.js"></script>
<script type="text/javascript" src="/static/js/rockerbox/menu/menu.js"></script>
<script type="text/javascript" src="/static/js/rockerbox/menu/menu.navbar.js"></script>
<script type="text/javascript" src="/static/js/rockerbox/menu/menu.selectbar.js"></script>

<script type="text/javascript" src="/static/js/rockerbox/helper.js"></script>






<script type="text/javascript">
  /*
    Google analytics
  */
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50457693-2', 'auto');
  ga('send', 'pageview');
</script>
{% end %}
{% block scripts_bottom %}{% end %}
{% block content %}
<div class="hidden" style="position:fixed;width:200px;top:0px;left:0px;height:100%;background:black">
  <div class="row col-md-12">
    <a href="/crusher/funnel/action?source=baublebar">Action</a>
  </div>
  <div class="row col-md-12">
    <a href="/crusher/funnel?source=baublebar">Funnel</a>
  </div>
</div>
<div class="container" style="width:inherit"></div>
<style>

  .head-wrap {
    height: 150px;
    border-bottom:1px solid #ddd
  }
  .body-wrap {
    overflow:hidden
  }
  .head-wrap .item, .body-wrap .item {
    display:table-cell;
    width:50px;
    height:50px;
    position:relative;
    vertical-align:top
  }

  .head-wrap .item {
    display:table-cell;
    width:50px;
    height:150px;
    position:relative
  }

  .tabular-wrapper {
    width:900px
  }

  .head-wrap .item span {
    transform: rotate(-45deg);
    display: block;
    position: absolute;
    bottom: 50px;
    width: 155px;
    text-transform: uppercase;
    font-size: .85em;
    font-weight: normal;
    border-bottom: solid 1px #DDD;
    line-height: 30px;
    right: -120px;
  }
  .versus {

    margin-top:10px;
    margin-right:10px;
    display:inline-block;

    padding:10px;
    border-radius:10px;
    border: 1px solid #ccc;
  }
  a.versus:hover {
    text-decoration:none;

  }

  .versus.selected, .square.selected {
    background-color:white
  }
</style>
<script>
(function() {


  RB.menu.routes.roots = [
      {
        "name": "Filter",
        "push_state": "/crusher/dashboard",
        "class": "glyphicon glyphicon-filter",
      }, {
        "name": "Compare",
        "push_state": "/crusher/comparison",
        "class": "glyphicon glyphicon-th",
      }, {
        "name": "Create Segment",
        "push_state": "/crusher/action/recommended",
        "class": "glyphicon glyphicon-plus",
      }, {
        "name": "Settings",
        "push_state": "/crusher/settings",
        "class": "glyphicon glyphicon-cog"
      }
    ]
  RB.menu.render(d3.select("body"),true)

  var centered = d3_updateable(d3.select(".container"),"div","div")
    .style("width","900px")
    .style("margin-left","auto")
    .style("margin-right","auto")


  var s = state.state()
    .subscribe("filter.formatted_data", function(error,value) {

      dashboard.filter_dashboard(centered)
        .data(value)
        .draw()

    })
    .subscribe("filter.data",function(error,value) {

      value.actions = []
      value.category = value.summary.category
      value.current_hour = value.summary.hour
      value.category_hour = value.summary.cross_section

      value.full_urls = value.response

      s.publishStatic("formatted_data",value)

    })

  var asyncPub = function(cb){
    d3.json("/crusher/v2/visitor/domains_full_time_minute/cache?url_pattern=/",cb)
  }


  s.publishStatic("data",asyncPub)

  window.s = s


})();
</script>


{% end %}
